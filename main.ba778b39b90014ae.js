(self.webpackChunkangular_dynamic_web_twain=self.webpackChunkangular_dynamic_web_twain||[]).push([[179],{603:(ry,ZE,e1)=>{"use strict";function Ln(e){return"function"==typeof e}function iy(e){const t=e(o=>{Error.call(o),o.stack=(new Error).stack});return t.prototype=Object.create(Error.prototype),t.prototype.constructor=t,t}const oy=iy(e=>function(t){e(this),this.message=t?`${t.length} errors occurred during unsubscription:\n${t.map((o,c)=>`${c+1}) ${o.toString()}`).join("\n  ")}`:"",this.name="UnsubscriptionError",this.errors=t});function sy(e,n){if(e){const t=e.indexOf(n);0<=t&&e.splice(t,1)}}class Fo{constructor(n){this.initialTeardown=n,this.closed=!1,this._parentage=null,this._finalizers=null}unsubscribe(){let n;if(!this.closed){this.closed=!0;const{_parentage:t}=this;if(t)if(this._parentage=null,Array.isArray(t))for(const h of t)h.remove(this);else t.remove(this);const{initialTeardown:o}=this;if(Ln(o))try{o()}catch(h){n=h instanceof oy?h.errors:[h]}const{_finalizers:c}=this;if(c){this._finalizers=null;for(const h of c)try{r1(h)}catch(p){n=n??[],p instanceof oy?n=[...n,...p.errors]:n.push(p)}}if(n)throw new oy(n)}}add(n){var t;if(n&&n!==this)if(this.closed)r1(n);else{if(n instanceof Fo){if(n.closed||n._hasParent(this))return;n._addParent(this)}(this._finalizers=null!==(t=this._finalizers)&&void 0!==t?t:[]).push(n)}}_hasParent(n){const{_parentage:t}=this;return t===n||Array.isArray(t)&&t.includes(n)}_addParent(n){const{_parentage:t}=this;this._parentage=Array.isArray(t)?(t.push(n),t):t?[t,n]:n}_removeParent(n){const{_parentage:t}=this;t===n?this._parentage=null:Array.isArray(t)&&sy(t,n)}remove(n){const{_finalizers:t}=this;t&&sy(t,n),n instanceof Fo&&n._removeParent(this)}}Fo.EMPTY=(()=>{const e=new Fo;return e.closed=!0,e})();const t1=Fo.EMPTY;function n1(e){return e instanceof Fo||e&&"closed"in e&&Ln(e.remove)&&Ln(e.add)&&Ln(e.unsubscribe)}function r1(e){Ln(e)?e():e.unsubscribe()}const Xu={onUnhandledError:null,onStoppedNotification:null,Promise:void 0,useDeprecatedSynchronousErrorHandling:!1,useDeprecatedNextContext:!1},Hp={setTimeout(e,n,...t){const{delegate:o}=Hp;return o?.setTimeout?o.setTimeout(e,n,...t):setTimeout(e,n,...t)},clearTimeout(e){const{delegate:n}=Hp;return(n?.clearTimeout||clearTimeout)(e)},delegate:void 0};function i1(e){Hp.setTimeout(()=>{const{onUnhandledError:n}=Xu;if(!n)throw e;n(e)})}function o1(){}const SH=ay("C",void 0,void 0);function ay(e,n,t){return{kind:e,value:n,error:t}}let Zu=null;function Gp(e){if(Xu.useDeprecatedSynchronousErrorHandling){const n=!Zu;if(n&&(Zu={errorThrown:!1,error:null}),e(),n){const{errorThrown:t,error:o}=Zu;if(Zu=null,t)throw o}}else e()}class uy extends Fo{constructor(n){super(),this.isStopped=!1,n?(this.destination=n,n1(n)&&n.add(this)):this.destination=EH}static create(n,t,o){return new af(n,t,o)}next(n){this.isStopped?ly(function TH(e){return ay("N",e,void 0)}(n),this):this._next(n)}error(n){this.isStopped?ly(function IH(e){return ay("E",void 0,e)}(n),this):(this.isStopped=!0,this._error(n))}complete(){this.isStopped?ly(SH,this):(this.isStopped=!0,this._complete())}unsubscribe(){this.closed||(this.isStopped=!0,super.unsubscribe(),this.destination=null)}_next(n){this.destination.next(n)}_error(n){try{this.destination.error(n)}finally{this.unsubscribe()}}_complete(){try{this.destination.complete()}finally{this.unsubscribe()}}}const bH=Function.prototype.bind;function cy(e,n){return bH.call(e,n)}class wH{constructor(n){this.partialObserver=n}next(n){const{partialObserver:t}=this;if(t.next)try{t.next(n)}catch(o){zp(o)}}error(n){const{partialObserver:t}=this;if(t.error)try{t.error(n)}catch(o){zp(o)}else zp(n)}complete(){const{partialObserver:n}=this;if(n.complete)try{n.complete()}catch(t){zp(t)}}}class af extends uy{constructor(n,t,o){let c;if(super(),Ln(n)||!n)c={next:n??void 0,error:t??void 0,complete:o??void 0};else{let h;this&&Xu.useDeprecatedNextContext?(h=Object.create(n),h.unsubscribe=()=>this.unsubscribe(),c={next:n.next&&cy(n.next,h),error:n.error&&cy(n.error,h),complete:n.complete&&cy(n.complete,h)}):c=n}this.destination=new wH(c)}}function zp(e){Xu.useDeprecatedSynchronousErrorHandling?function CH(e){Xu.useDeprecatedSynchronousErrorHandling&&Zu&&(Zu.errorThrown=!0,Zu.error=e)}(e):i1(e)}function ly(e,n){const{onStoppedNotification:t}=Xu;t&&Hp.setTimeout(()=>t(e,n))}const EH={closed:!0,next:o1,error:function DH(e){throw e},complete:o1},dy="function"==typeof Symbol&&Symbol.observable||"@@observable";function ec(e){return e}function s1(e){return 0===e.length?ec:1===e.length?e[0]:function(t){return e.reduce((o,c)=>c(o),t)}}let Wr=(()=>{class e{constructor(t){t&&(this._subscribe=t)}lift(t){const o=new e;return o.source=this,o.operator=t,o}subscribe(t,o,c){const h=function RH(e){return e&&e instanceof uy||function PH(e){return e&&Ln(e.next)&&Ln(e.error)&&Ln(e.complete)}(e)&&n1(e)}(t)?t:new af(t,o,c);return Gp(()=>{const{operator:p,source:m}=this;h.add(p?p.call(h,m):m?this._subscribe(h):this._trySubscribe(h))}),h}_trySubscribe(t){try{return this._subscribe(t)}catch(o){t.error(o)}}forEach(t,o){return new(o=a1(o))((c,h)=>{const p=new af({next:m=>{try{t(m)}catch(y){h(y),p.unsubscribe()}},error:h,complete:c});this.subscribe(p)})}_subscribe(t){var o;return null===(o=this.source)||void 0===o?void 0:o.subscribe(t)}[dy](){return this}pipe(...t){return s1(t)(this)}toPromise(t){return new(t=a1(t))((o,c)=>{let h;this.subscribe(p=>h=p,p=>c(p),()=>o(h))})}}return e.create=n=>new e(n),e})();function a1(e){var n;return null!==(n=e??Xu.Promise)&&void 0!==n?n:Promise}const xH=iy(e=>function(){e(this),this.name="ObjectUnsubscribedError",this.message="object unsubscribed"});let Ks=(()=>{class e extends Wr{constructor(){super(),this.closed=!1,this.currentObservers=null,this.observers=[],this.isStopped=!1,this.hasError=!1,this.thrownError=null}lift(t){const o=new u1(this,this);return o.operator=t,o}_throwIfClosed(){if(this.closed)throw new xH}next(t){Gp(()=>{if(this._throwIfClosed(),!this.isStopped){this.currentObservers||(this.currentObservers=Array.from(this.observers));for(const o of this.currentObservers)o.next(t)}})}error(t){Gp(()=>{if(this._throwIfClosed(),!this.isStopped){this.hasError=this.isStopped=!0,this.thrownError=t;const{observers:o}=this;for(;o.length;)o.shift().error(t)}})}complete(){Gp(()=>{if(this._throwIfClosed(),!this.isStopped){this.isStopped=!0;const{observers:t}=this;for(;t.length;)t.shift().complete()}})}unsubscribe(){this.isStopped=this.closed=!0,this.observers=this.currentObservers=null}get observed(){var t;return(null===(t=this.observers)||void 0===t?void 0:t.length)>0}_trySubscribe(t){return this._throwIfClosed(),super._trySubscribe(t)}_subscribe(t){return this._throwIfClosed(),this._checkFinalizedStatuses(t),this._innerSubscribe(t)}_innerSubscribe(t){const{hasError:o,isStopped:c,observers:h}=this;return o||c?t1:(this.currentObservers=null,h.push(t),new Fo(()=>{this.currentObservers=null,sy(h,t)}))}_checkFinalizedStatuses(t){const{hasError:o,thrownError:c,isStopped:h}=this;o?t.error(c):h&&t.complete()}asObservable(){const t=new Wr;return t.source=this,t}}return e.create=(n,t)=>new u1(n,t),e})();class u1 extends Ks{constructor(n,t){super(),this.destination=n,this.source=t}next(n){var t,o;null===(o=null===(t=this.destination)||void 0===t?void 0:t.next)||void 0===o||o.call(t,n)}error(n){var t,o;null===(o=null===(t=this.destination)||void 0===t?void 0:t.error)||void 0===o||o.call(t,n)}complete(){var n,t;null===(t=null===(n=this.destination)||void 0===n?void 0:n.complete)||void 0===t||t.call(n)}_subscribe(n){var t,o;return null!==(o=null===(t=this.source)||void 0===t?void 0:t.subscribe(n))&&void 0!==o?o:t1}}function c1(e){return Ln(e?.lift)}function Qr(e){return n=>{if(c1(n))return n.lift(function(t){try{return e(t,this)}catch(o){this.error(o)}});throw new TypeError("Unable to lift unknown Observable type")}}function Yr(e,n,t,o,c){return new FH(e,n,t,o,c)}class FH extends uy{constructor(n,t,o,c,h,p){super(n),this.onFinalize=h,this.shouldUnsubscribe=p,this._next=t?function(m){try{t(m)}catch(y){n.error(y)}}:super._next,this._error=c?function(m){try{c(m)}catch(y){n.error(y)}finally{this.unsubscribe()}}:super._error,this._complete=o?function(){try{o()}catch(m){n.error(m)}finally{this.unsubscribe()}}:super._complete}unsubscribe(){var n;if(!this.shouldUnsubscribe||this.shouldUnsubscribe()){const{closed:t}=this;super.unsubscribe(),!t&&(null===(n=this.onFinalize)||void 0===n||n.call(this))}}}function cn(e,n){return Qr((t,o)=>{let c=0;t.subscribe(Yr(o,h=>{o.next(e.call(n,h,c++))}))})}var rl=e1(501);const l1=e=>e&&"number"==typeof e.length&&"function"!=typeof e;function d1(e){return Ln(e?.then)}function f1(e){return Ln(e[dy])}function h1(e){return Symbol.asyncIterator&&Ln(e?.[Symbol.asyncIterator])}function p1(e){return new TypeError(`You provided ${null!==e&&"object"==typeof e?"an invalid object":`'${e}'`} where a stream was expected. You can provide an Observable, Promise, ReadableStream, Array, AsyncIterable, or Iterable.`)}const g1=function kH(){return"function"==typeof Symbol&&Symbol.iterator?Symbol.iterator:"@@iterator"}();function m1(e){return Ln(e?.[g1])}function _1(e){return(0,rl.__asyncGenerator)(this,arguments,function*(){const t=e.getReader();try{for(;;){const{value:o,done:c}=yield(0,rl.__await)(t.read());if(c)return yield(0,rl.__await)(void 0);yield yield(0,rl.__await)(o)}}finally{t.releaseLock()}})}function v1(e){return Ln(e?.getReader)}function $s(e){if(e instanceof Wr)return e;if(null!=e){if(f1(e))return function MH(e){return new Wr(n=>{const t=e[dy]();if(Ln(t.subscribe))return t.subscribe(n);throw new TypeError("Provided object does not correctly implement Symbol.observable")})}(e);if(l1(e))return function OH(e){return new Wr(n=>{for(let t=0;t<e.length&&!n.closed;t++)n.next(e[t]);n.complete()})}(e);if(d1(e))return function NH(e){return new Wr(n=>{e.then(t=>{n.closed||(n.next(t),n.complete())},t=>n.error(t)).then(null,i1)})}(e);if(h1(e))return y1(e);if(m1(e))return function LH(e){return new Wr(n=>{for(const t of e)if(n.next(t),n.closed)return;n.complete()})}(e);if(v1(e))return function WH(e){return y1(_1(e))}(e)}throw p1(e)}function y1(e){return new Wr(n=>{(function BH(e,n){var t,o,c,h;return(0,rl.__awaiter)(this,void 0,void 0,function*(){try{for(t=(0,rl.__asyncValues)(e);!(o=yield t.next()).done;)if(n.next(o.value),n.closed)return}catch(p){c={error:p}}finally{try{o&&!o.done&&(h=t.return)&&(yield h.call(t))}finally{if(c)throw c.error}}n.complete()})})(e,n).catch(t=>n.error(t))})}function Sa(e,n,t,o=0,c=!1){const h=n.schedule(function(){t(),c?e.add(this.schedule(null,o)):this.unsubscribe()},o);if(e.add(h),!c)return h}function oi(e,n,t=1/0){return Ln(n)?oi((o,c)=>cn((h,p)=>n(o,h,c,p))($s(e(o,c))),t):("number"==typeof n&&(t=n),Qr((o,c)=>function UH(e,n,t,o,c,h,p,m){const y=[];let C=0,w=0,P=!1;const O=()=>{P&&!y.length&&!C&&n.complete()},z=ne=>C<o?A(ne):y.push(ne),A=ne=>{h&&n.next(ne),C++;let $=!1;$s(t(ne,w++)).subscribe(Yr(n,K=>{c?.(K),h?z(K):n.next(K)},()=>{$=!0},void 0,()=>{if($)try{for(C--;y.length&&C<o;){const K=y.shift();p?Sa(n,p,()=>A(K)):A(K)}O()}catch(K){n.error(K)}}))};return e.subscribe(Yr(n,z,()=>{P=!0,O()})),()=>{m?.()}}(o,c,e,t)))}function il(e=1/0){return oi(ec,e)}const Ia=new Wr(e=>e.complete());function fy(e){return e[e.length-1]}function uf(e){return function jH(e){return e&&Ln(e.schedule)}(fy(e))?e.pop():void 0}function S1(e,n=0){return Qr((t,o)=>{t.subscribe(Yr(o,c=>Sa(o,e,()=>o.next(c),n),()=>Sa(o,e,()=>o.complete(),n),c=>Sa(o,e,()=>o.error(c),n)))})}function I1(e,n=0){return Qr((t,o)=>{o.add(e.schedule(()=>t.subscribe(o),n))})}function T1(e,n){if(!e)throw new Error("Iterable cannot be null");return new Wr(t=>{Sa(t,n,()=>{const o=e[Symbol.asyncIterator]();Sa(t,n,()=>{o.next().then(c=>{c.done?t.complete():t.next(c.value)})},0,!0)})})}function Br(e,n){return n?function YH(e,n){if(null!=e){if(f1(e))return function zH(e,n){return $s(e).pipe(I1(n),S1(n))}(e,n);if(l1(e))return function $H(e,n){return new Wr(t=>{let o=0;return n.schedule(function(){o===e.length?t.complete():(t.next(e[o++]),t.closed||this.schedule())})})}(e,n);if(d1(e))return function KH(e,n){return $s(e).pipe(I1(n),S1(n))}(e,n);if(h1(e))return T1(e,n);if(m1(e))return function qH(e,n){return new Wr(t=>{let o;return Sa(t,n,()=>{o=e[g1](),Sa(t,n,()=>{let c,h;try{({value:c,done:h}=o.next())}catch(p){return void t.error(p)}h?t.complete():t.next(c)},0,!0)}),()=>Ln(o?.return)&&o.return()})}(e,n);if(v1(e))return function QH(e,n){return T1(_1(e),n)}(e,n)}throw p1(e)}(e,n):$s(e)}function hy(e,n,...t){if(!0===n)return void e();if(!1===n)return;const o=new af({next:()=>{o.unsubscribe(),e()}});return n(...t).subscribe(o)}function bn(e){for(let n in e)if(e[n]===bn)return n;throw Error("Could not find renamed property on target object.")}function wn(e){if("string"==typeof e)return e;if(Array.isArray(e))return"["+e.map(wn).join(", ")+"]";if(null==e)return""+e;if(e.overriddenName)return`${e.overriddenName}`;if(e.name)return`${e.name}`;const n=e.toString();if(null==n)return""+n;const t=n.indexOf("\n");return-1===t?n:n.substring(0,t)}function gy(e,n){return null==e||""===e?null===n?"":n:null==n||""===n?e:e+" "+n}const ZH=bn({__forward_ref__:bn});function my(e){return e.__forward_ref__=my,e.toString=function(){return wn(this())},e}function Et(e){return function _y(e){return"function"==typeof e&&e.hasOwnProperty(ZH)&&e.__forward_ref__===my}(e)?e():e}class ct extends Error{constructor(n,t){super(function Kp(e,n){return`NG0${Math.abs(e)}${n?": "+n.trim():""}`}(n,t)),this.code=n}}function Mt(e){return"string"==typeof e?e:null==e?"":String(e)}function $p(e,n){throw new ct(-201,!1)}function po(e,n){null==e&&function _n(e,n,t,o){throw new Error(`ASSERTION ERROR: ${e}`+(null==o?"":` [Expected=> ${t} ${o} ${n} <=Actual]`))}(n,e,null,"!=")}function Ht(e){return{token:e.token,providedIn:e.providedIn||null,factory:e.factory,value:void 0}}function ru(e){return{providers:e.providers||[],imports:e.imports||[]}}function qp(e){return C1(e,Qp)||C1(e,w1)}function C1(e,n){return e.hasOwnProperty(n)?e[n]:null}function b1(e){return e&&(e.hasOwnProperty(vy)||e.hasOwnProperty(uG))?e[vy]:null}const Qp=bn({\u0275prov:bn}),vy=bn({\u0275inj:bn}),w1=bn({ngInjectableDef:bn}),uG=bn({ngInjectorDef:bn});var bt=(()=>((bt=bt||{})[bt.Default=0]="Default",bt[bt.Host=1]="Host",bt[bt.Self=2]="Self",bt[bt.SkipSelf=4]="SkipSelf",bt[bt.Optional=8]="Optional",bt))();let yy;function ko(e){const n=yy;return yy=e,n}function D1(e,n,t){const o=qp(e);return o&&"root"==o.providedIn?void 0===o.value?o.value=o.factory():o.value:t&bt.Optional?null:void 0!==n?n:void $p(wn(e))}function iu(e){return{toString:e}.toString()}var ds=(()=>((ds=ds||{})[ds.OnPush=0]="OnPush",ds[ds.Default=1]="Default",ds))(),qs=(()=>{return(e=qs||(qs={}))[e.Emulated=0]="Emulated",e[e.None=2]="None",e[e.ShadowDom=3]="ShadowDom",qs;var e})();const Pn=(()=>typeof globalThis<"u"&&globalThis||typeof global<"u"&&global||typeof window<"u"&&window||typeof self<"u"&&typeof WorkerGlobalScope<"u"&&self instanceof WorkerGlobalScope&&self)(),ol={},fn=[],Yp=bn({\u0275cmp:bn}),Sy=bn({\u0275dir:bn}),Iy=bn({\u0275pipe:bn}),E1=bn({\u0275mod:bn}),Ca=bn({\u0275fac:bn}),cf=bn({__NG_ELEMENT_ID__:bn});let lG=0;function ba(e){return iu(()=>{const t=!0===e.standalone,o={},c={type:e.type,providersResolver:null,decls:e.decls,vars:e.vars,factory:null,template:e.template||null,consts:e.consts||null,ngContentSelectors:e.ngContentSelectors,hostBindings:e.hostBindings||null,hostVars:e.hostVars||0,hostAttrs:e.hostAttrs||null,contentQueries:e.contentQueries||null,declaredInputs:o,inputs:null,outputs:null,exportAs:e.exportAs||null,onPush:e.changeDetection===ds.OnPush,directiveDefs:null,pipeDefs:null,standalone:t,dependencies:t&&e.dependencies||null,getStandaloneInjector:null,selectors:e.selectors||fn,viewQuery:e.viewQuery||null,features:e.features||null,data:e.data||{},encapsulation:e.encapsulation||qs.Emulated,id:"c"+lG++,styles:e.styles||fn,_:null,setInput:null,schemas:e.schemas||null,tView:null},h=e.dependencies,p=e.features;return c.inputs=R1(e.inputs,o),c.outputs=R1(e.outputs),p&&p.forEach(m=>m(c)),c.directiveDefs=h?()=>("function"==typeof h?h():h).map(A1).filter(P1):null,c.pipeDefs=h?()=>("function"==typeof h?h():h).map(Oi).filter(P1):null,c})}function A1(e){return Sn(e)||Mi(e)}function P1(e){return null!==e}function tc(e){return iu(()=>({type:e.type,bootstrap:e.bootstrap||fn,declarations:e.declarations||fn,imports:e.imports||fn,exports:e.exports||fn,transitiveCompileScopes:null,schemas:e.schemas||null,id:e.id||null}))}function R1(e,n){if(null==e)return ol;const t={};for(const o in e)if(e.hasOwnProperty(o)){let c=e[o],h=c;Array.isArray(c)&&(h=c[1],c=c[0]),t[c]=o,n&&(n[c]=h)}return t}const Si=ba;function Sn(e){return e[Yp]||null}function Mi(e){return e[Sy]||null}function Oi(e){return e[Iy]||null}function go(e,n){const t=e[E1]||null;if(!t&&!0===n)throw new Error(`Type ${wn(e)} does not have '\u0275mod' property.`);return t}function Yi(e){return Array.isArray(e)&&"object"==typeof e[1]}function hs(e){return Array.isArray(e)&&!0===e[1]}function by(e){return 0!=(8&e.flags)}function eg(e){return 2==(2&e.flags)}function tg(e){return 1==(1&e.flags)}function ps(e){return null!==e.template}function mG(e){return 0!=(256&e[2])}function sc(e,n){return e.hasOwnProperty(Ca)?e[Ca]:null}class yG{constructor(n,t,o){this.previousValue=n,this.currentValue=t,this.firstChange=o}isFirstChange(){return this.firstChange}}function ac(){return k1}function k1(e){return e.type.prototype.ngOnChanges&&(e.setInput=IG),SG}function SG(){const e=O1(this),n=e?.current;if(n){const t=e.previous;if(t===ol)e.previous=n;else for(let o in n)t[o]=n[o];e.current=null,this.ngOnChanges(n)}}function IG(e,n,t,o){const c=O1(e)||function TG(e,n){return e[M1]=n}(e,{previous:ol,current:null}),h=c.current||(c.current={}),p=c.previous,m=this.declaredInputs[t],y=p[m];h[m]=new yG(y&&y.currentValue,n,p===ol),e[o]=n}ac.ngInherit=!0;const M1="__ngSimpleChanges__";function O1(e){return e[M1]||null}function Dr(e){for(;Array.isArray(e);)e=e[0];return e}function _o(e,n){return Dr(n[e.index])}function Py(e,n){return e.data[n]}function vo(e,n){const t=n[e];return Yi(t)?t:t[0]}function rg(e){return 64==(64&e[2])}function ou(e,n){return null==n?null:e[n]}function N1(e){e[18]=0}function Ry(e,n){e[5]+=n;let t=e,o=e[3];for(;null!==o&&(1===n&&1===t[5]||-1===n&&0===t[5]);)o[5]+=n,t=o,o=o[3]}const kt={lFrame:K1(null),bindingsEnabled:!0};function W1(){return kt.bindingsEnabled}function Ue(){return kt.lFrame.lView}function sn(){return kt.lFrame.tView}function Ur(){let e=B1();for(;null!==e&&64===e.type;)e=e.parent;return e}function B1(){return kt.lFrame.currentTNode}function Qs(e,n){const t=kt.lFrame;t.currentTNode=e,t.isParent=n}function xy(){return kt.lFrame.isParent}function dl(){return kt.lFrame.bindingIndex++}function BG(e,n){const t=kt.lFrame;t.bindingIndex=t.bindingRootIndex=e,ky(n)}function ky(e){kt.lFrame.currentDirectiveIndex=e}function Oy(e){kt.lFrame.currentQueryIndex=e}function VG(e){const n=e[1];return 2===n.type?n.declTNode:1===n.type?e[6]:null}function G1(e,n,t){if(t&bt.SkipSelf){let c=n,h=e;for(;!(c=c.parent,null!==c||t&bt.Host||(c=VG(h),null===c||(h=h[15],10&c.type))););if(null===c)return!1;n=c,e=h}const o=kt.lFrame=z1();return o.currentTNode=n,o.lView=e,!0}function Ny(e){const n=z1(),t=e[1];kt.lFrame=n,n.currentTNode=t.firstChild,n.lView=e,n.tView=t,n.contextLView=e,n.bindingIndex=t.bindingStartIndex,n.inI18n=!1}function z1(){const e=kt.lFrame,n=null===e?null:e.child;return null===n?K1(e):n}function K1(e){const n={currentTNode:null,isParent:!0,lView:null,tView:null,selectedIndex:-1,contextLView:null,elementDepthCount:0,currentNamespace:null,currentDirectiveIndex:-1,bindingRootIndex:-1,bindingIndex:-1,currentQueryIndex:0,parent:e,child:null,inI18n:!1};return null!==e&&(e.child=n),n}function $1(){const e=kt.lFrame;return kt.lFrame=e.parent,e.currentTNode=null,e.lView=null,e}const q1=$1;function Ly(){const e=$1();e.isParent=!0,e.tView=null,e.selectedIndex=-1,e.contextLView=null,e.elementDepthCount=0,e.currentDirectiveIndex=-1,e.currentNamespace=null,e.bindingRootIndex=-1,e.bindingIndex=-1,e.currentQueryIndex=0}function Li(){return kt.lFrame.selectedIndex}function su(e){kt.lFrame.selectedIndex=e}function Xn(){const e=kt.lFrame;return Py(e.tView,e.selectedIndex)}function ig(e,n){for(let t=n.directiveStart,o=n.directiveEnd;t<o;t++){const h=e.data[t].type.prototype,{ngAfterContentInit:p,ngAfterContentChecked:m,ngAfterViewInit:y,ngAfterViewChecked:C,ngOnDestroy:w}=h;p&&(e.contentHooks||(e.contentHooks=[])).push(-t,p),m&&((e.contentHooks||(e.contentHooks=[])).push(t,m),(e.contentCheckHooks||(e.contentCheckHooks=[])).push(t,m)),y&&(e.viewHooks||(e.viewHooks=[])).push(-t,y),C&&((e.viewHooks||(e.viewHooks=[])).push(t,C),(e.viewCheckHooks||(e.viewCheckHooks=[])).push(t,C)),null!=w&&(e.destroyHooks||(e.destroyHooks=[])).push(t,w)}}function og(e,n,t){Q1(e,n,3,t)}function sg(e,n,t,o){(3&e[2])===t&&Q1(e,n,t,o)}function Wy(e,n){let t=e[2];(3&t)===n&&(t&=2047,t+=1,e[2]=t)}function Q1(e,n,t,o){const h=o??-1,p=n.length-1;let m=0;for(let y=void 0!==o?65535&e[18]:0;y<p;y++)if("number"==typeof n[y+1]){if(m=n[y],null!=o&&m>=o)break}else n[y]<0&&(e[18]+=65536),(m<h||-1==h)&&(YG(e,t,n,y),e[18]=(4294901760&e[18])+y+2),y++}function YG(e,n,t,o){const c=t[o]<0,h=t[o+1],m=e[c?-t[o]:t[o]];if(c){if(e[2]>>11<e[18]>>16&&(3&e[2])===n){e[2]+=2048;try{h.call(m)}finally{}}}else try{h.call(m)}finally{}}class gf{constructor(n,t,o){this.factory=n,this.resolving=!1,this.canSeeViewProviders=t,this.injectImpl=o}}function ag(e,n,t){let o=0;for(;o<t.length;){const c=t[o];if("number"==typeof c){if(0!==c)break;o++;const h=t[o++],p=t[o++],m=t[o++];e.setAttribute(n,p,m,h)}else{const h=c,p=t[++o];J1(h)?e.setProperty(n,h,p):e.setAttribute(n,h,p),o++}}return o}function Y1(e){return 3===e||4===e||6===e}function J1(e){return 64===e.charCodeAt(0)}function ug(e,n){if(null!==n&&0!==n.length)if(null===e||0===e.length)e=n.slice();else{let t=-1;for(let o=0;o<n.length;o++){const c=n[o];"number"==typeof c?t=c:0===t||X1(e,t,c,null,-1===t||2===t?n[++o]:null)}}return e}function X1(e,n,t,o,c){let h=0,p=e.length;if(-1===n)p=-1;else for(;h<e.length;){const m=e[h++];if("number"==typeof m){if(m===n){p=-1;break}if(m>n){p=h-1;break}}}for(;h<e.length;){const m=e[h];if("number"==typeof m)break;if(m===t){if(null===o)return void(null!==c&&(e[h+1]=c));if(o===e[h+1])return void(e[h+2]=c)}h++,null!==o&&h++,null!==c&&h++}-1!==p&&(e.splice(p,0,n),h=p+1),e.splice(h++,0,t),null!==o&&e.splice(h++,0,o),null!==c&&e.splice(h++,0,c)}function Z1(e){return-1!==e}function fl(e){return 32767&e}function hl(e,n){let t=function t5(e){return e>>16}(e),o=n;for(;t>0;)o=o[15],t--;return o}let Uy=!0;function cg(e){const n=Uy;return Uy=e,n}let n5=0;const Ys={};function _f(e,n){const t=jy(e,n);if(-1!==t)return t;const o=n[1];o.firstCreatePass&&(e.injectorIndex=n.length,Vy(o.data,e),Vy(n,null),Vy(o.blueprint,null));const c=lg(e,n),h=e.injectorIndex;if(Z1(c)){const p=fl(c),m=hl(c,n),y=m[1].data;for(let C=0;C<8;C++)n[h+C]=m[p+C]|y[p+C]}return n[h+8]=c,h}function Vy(e,n){e.push(0,0,0,0,0,0,0,0,n)}function jy(e,n){return-1===e.injectorIndex||e.parent&&e.parent.injectorIndex===e.injectorIndex||null===n[e.injectorIndex+8]?-1:e.injectorIndex}function lg(e,n){if(e.parent&&-1!==e.parent.injectorIndex)return e.parent.injectorIndex;let t=0,o=null,c=n;for(;null!==c;){if(o=uA(c),null===o)return-1;if(t++,c=c[15],-1!==o.injectorIndex)return o.injectorIndex|t<<16}return-1}function dg(e,n,t){!function r5(e,n,t){let o;"string"==typeof t?o=t.charCodeAt(0)||0:t.hasOwnProperty(cf)&&(o=t[cf]),null==o&&(o=t[cf]=n5++);const c=255&o;n.data[e+(c>>5)]|=1<<c}(e,n,t)}function nA(e,n,t){if(t&bt.Optional||void 0!==e)return e;$p()}function rA(e,n,t,o){if(t&bt.Optional&&void 0===o&&(o=null),0==(t&(bt.Self|bt.Host))){const c=e[9],h=ko(void 0);try{return c?c.get(n,o,t&bt.Optional):D1(n,o,t&bt.Optional)}finally{ko(h)}}return nA(o,0,t)}function iA(e,n,t,o=bt.Default,c){if(null!==e){if(1024&n[2]){const p=function c5(e,n,t,o,c){let h=e,p=n;for(;null!==h&&null!==p&&1024&p[2]&&!(256&p[2]);){const m=oA(h,p,t,o|bt.Self,Ys);if(m!==Ys)return m;let y=h.parent;if(!y){const C=p[21];if(C){const w=C.get(t,Ys,o);if(w!==Ys)return w}y=uA(p),p=p[15]}h=y}return c}(e,n,t,o,Ys);if(p!==Ys)return p}const h=oA(e,n,t,o,Ys);if(h!==Ys)return h}return rA(n,t,o,c)}function oA(e,n,t,o,c){const h=function s5(e){if("string"==typeof e)return e.charCodeAt(0)||0;const n=e.hasOwnProperty(cf)?e[cf]:void 0;return"number"==typeof n?n>=0?255&n:a5:n}(t);if("function"==typeof h){if(!G1(n,e,o))return o&bt.Host?nA(c,0,o):rA(n,t,o,c);try{const p=h(o);if(null!=p||o&bt.Optional)return p;$p()}finally{q1()}}else if("number"==typeof h){let p=null,m=jy(e,n),y=-1,C=o&bt.Host?n[16][6]:null;for((-1===m||o&bt.SkipSelf)&&(y=-1===m?lg(e,n):n[m+8],-1!==y&&aA(o,!1)?(p=n[1],m=fl(y),n=hl(y,n)):m=-1);-1!==m;){const w=n[1];if(sA(h,m,w.data)){const P=o5(m,n,t,p,o,C);if(P!==Ys)return P}y=n[m+8],-1!==y&&aA(o,n[1].data[m+8]===C)&&sA(h,m,n)?(p=w,m=fl(y),n=hl(y,n)):m=-1}}return c}function o5(e,n,t,o,c,h){const p=n[1],m=p.data[e+8],w=function fg(e,n,t,o,c){const h=e.providerIndexes,p=n.data,m=1048575&h,y=e.directiveStart,w=h>>20,O=c?m+w:e.directiveEnd;for(let z=o?m:m+w;z<O;z++){const A=p[z];if(z<y&&t===A||z>=y&&A.type===t)return z}if(c){const z=p[y];if(z&&ps(z)&&z.type===t)return y}return null}(m,p,t,null==o?eg(m)&&Uy:o!=p&&0!=(3&m.type),c&bt.Host&&h===m);return null!==w?vf(n,p,w,m):Ys}function vf(e,n,t,o){let c=e[t];const h=n.data;if(function JG(e){return e instanceof gf}(c)){const p=c;p.resolving&&function eG(e,n){const t=n?`. Dependency path: ${n.join(" > ")} > ${e}`:"";throw new ct(-200,`Circular dependency in DI detected for ${e}${t}`)}(function dn(e){return"function"==typeof e?e.name||e.toString():"object"==typeof e&&null!=e&&"function"==typeof e.type?e.type.name||e.type.toString():Mt(e)}(h[t]));const m=cg(p.canSeeViewProviders);p.resolving=!0;const y=p.injectImpl?ko(p.injectImpl):null;G1(e,o,bt.Default);try{c=e[t]=p.factory(void 0,h,e,o),n.firstCreatePass&&t>=o.directiveStart&&function QG(e,n,t){const{ngOnChanges:o,ngOnInit:c,ngDoCheck:h}=n.type.prototype;if(o){const p=k1(n);(t.preOrderHooks||(t.preOrderHooks=[])).push(e,p),(t.preOrderCheckHooks||(t.preOrderCheckHooks=[])).push(e,p)}c&&(t.preOrderHooks||(t.preOrderHooks=[])).push(0-e,c),h&&((t.preOrderHooks||(t.preOrderHooks=[])).push(e,h),(t.preOrderCheckHooks||(t.preOrderCheckHooks=[])).push(e,h))}(t,h[t],n)}finally{null!==y&&ko(y),cg(m),p.resolving=!1,q1()}}return c}function sA(e,n,t){return!!(t[n+(e>>5)]&1<<e)}function aA(e,n){return!(e&bt.Self||e&bt.Host&&n)}class pl{constructor(n,t){this._tNode=n,this._lView=t}get(n,t,o){return iA(this._tNode,this._lView,n,o,t)}}function a5(){return new pl(Ur(),Ue())}function uA(e){const n=e[1],t=n.type;return 2===t?n.declTNode:1===t?e[6]:null}const ml="__parameters__";function vl(e,n,t){return iu(()=>{const o=function Gy(e){return function(...t){if(e){const o=e(...t);for(const c in o)this[c]=o[c]}}}(n);function c(...h){if(this instanceof c)return o.apply(this,h),this;const p=new c(...h);return m.annotation=p,m;function m(y,C,w){const P=y.hasOwnProperty(ml)?y[ml]:Object.defineProperty(y,ml,{value:[]})[ml];for(;P.length<=w;)P.push(null);return(P[w]=P[w]||[]).push(p),y}}return t&&(c.prototype=Object.create(t.prototype)),c.prototype.ngMetadataName=e,c.annotationCls=c,c})}class At{constructor(n,t){this._desc=n,this.ngMetadataName="InjectionToken",this.\u0275prov=void 0,"number"==typeof t?this.__NG_ELEMENT_ID__=t:void 0!==t&&(this.\u0275prov=Ht({token:this,providedIn:t.providedIn||"root",factory:t.factory}))}get multi(){return this}toString(){return`InjectionToken ${this._desc}`}}function Ea(e,n){e.forEach(t=>Array.isArray(t)?Ea(t,n):n(t))}function lA(e,n,t){n>=e.length?e.push(t):e.splice(n,0,t)}function hg(e,n){return n>=e.length-1?e.pop():e.splice(n,1)[0]}const Cf={},qy="__NG_DI_FLAG__",gg="ngTempTokenPath",I5=/\n/gm,pA="__source";let bf;function Sl(e){const n=bf;return bf=e,n}function C5(e,n=bt.Default){if(void 0===bf)throw new ct(-203,!1);return null===bf?D1(e,void 0,n):bf.get(e,n&bt.Optional?null:void 0,n)}function Tt(e,n=bt.Default){return(function cG(){return yy}()||C5)(Et(e),n)}function mr(e,n=bt.Default){return"number"!=typeof n&&(n=0|(n.optional&&8)|(n.host&&1)|(n.self&&2)|(n.skipSelf&&4)),Tt(e,n)}function Qy(e){const n=[];for(let t=0;t<e.length;t++){const o=Et(e[t]);if(Array.isArray(o)){if(0===o.length)throw new ct(900,!1);let c,h=bt.Default;for(let p=0;p<o.length;p++){const m=o[p],y=b5(m);"number"==typeof y?-1===y?c=m.token:h|=y:c=m}n.push(Tt(c,h))}else n.push(Tt(o))}return n}function wf(e,n){return e[qy]=n,e.prototype[qy]=n,e}function b5(e){return e[qy]}const Df=wf(vl("Optional"),8),Ef=wf(vl("SkipSelf"),4);var Ji=(()=>((Ji=Ji||{})[Ji.Important=1]="Important",Ji[Ji.DashCase=2]="DashCase",Ji))();const e0=new Map;let j5=0;const n0="__ngContext__";function Ci(e,n){Yi(n)?(e[n0]=n[20],function G5(e){e0.set(e[20],e)}(n)):e[n0]=n}function o0(e,n){return undefined(e,n)}function xf(e){const n=e[3];return hs(n)?n[3]:n}function s0(e){return OA(e[13])}function a0(e){return OA(e[4])}function OA(e){for(;null!==e&&!hs(e);)e=e[4];return e}function Tl(e,n,t,o,c){if(null!=o){let h,p=!1;hs(o)?h=o:Yi(o)&&(p=!0,o=o[0]);const m=Dr(o);0===e&&null!==t?null==c?VA(n,t,m):uc(n,t,m,c||null,!0):1===e&&null!==t?uc(n,t,m,c||null,!0):2===e?function p0(e,n,t){const o=vg(e,n);o&&function f6(e,n,t,o){e.removeChild(n,t,o)}(e,o,n,t)}(n,m,p):3===e&&n.destroyNode(m),null!=h&&function g6(e,n,t,o,c){const h=t[7];h!==Dr(t)&&Tl(n,e,o,h,c);for(let m=10;m<t.length;m++){const y=t[m];Ff(y[1],y,e,n,o,h)}}(n,e,h,t,c)}}function c0(e,n,t){return e.createElement(n,t)}function LA(e,n){const t=e[9],o=t.indexOf(n),c=n[3];512&n[2]&&(n[2]&=-513,Ry(c,-1)),t.splice(o,1)}function l0(e,n){if(e.length<=10)return;const t=10+n,o=e[t];if(o){const c=o[17];null!==c&&c!==e&&LA(c,o),n>0&&(e[t-1][4]=o[4]);const h=hg(e,10+n);!function i6(e,n){Ff(e,n,n[11],2,null,null),n[0]=null,n[6]=null}(o[1],o);const p=h[19];null!==p&&p.detachView(h[1]),o[3]=null,o[4]=null,o[2]&=-65}return o}function WA(e,n){if(!(128&n[2])){const t=n[11];t.destroyNode&&Ff(e,n,t,3,null,null),function a6(e){let n=e[13];if(!n)return d0(e[1],e);for(;n;){let t=null;if(Yi(n))t=n[13];else{const o=n[10];o&&(t=o)}if(!t){for(;n&&!n[4]&&n!==e;)Yi(n)&&d0(n[1],n),n=n[3];null===n&&(n=e),Yi(n)&&d0(n[1],n),t=n&&n[4]}n=t}}(n)}}function d0(e,n){if(!(128&n[2])){n[2]&=-65,n[2]|=128,function d6(e,n){let t;if(null!=e&&null!=(t=e.destroyHooks))for(let o=0;o<t.length;o+=2){const c=n[t[o]];if(!(c instanceof gf)){const h=t[o+1];if(Array.isArray(h))for(let p=0;p<h.length;p+=2){const m=c[h[p]],y=h[p+1];try{y.call(m)}finally{}}else try{h.call(c)}finally{}}}}(e,n),function l6(e,n){const t=e.cleanup,o=n[7];let c=-1;if(null!==t)for(let h=0;h<t.length-1;h+=2)if("string"==typeof t[h]){const p=t[h+1],m="function"==typeof p?p(n):Dr(n[p]),y=o[c=t[h+2]],C=t[h+3];"boolean"==typeof C?m.removeEventListener(t[h],y,C):C>=0?o[c=C]():o[c=-C].unsubscribe(),h+=2}else{const p=o[c=t[h+1]];t[h].call(p)}if(null!==o){for(let h=c+1;h<o.length;h++)(0,o[h])();n[7]=null}}(e,n),1===n[1].type&&n[11].destroy();const t=n[17];if(null!==t&&hs(n[3])){t!==n[3]&&LA(t,n);const o=n[19];null!==o&&o.detachView(e)}!function z5(e){e0.delete(e[20])}(n)}}function BA(e,n,t){return function UA(e,n,t){let o=n;for(;null!==o&&40&o.type;)o=(n=o).parent;if(null===o)return t[0];if(2&o.flags){const c=e.data[o.directiveStart].encapsulation;if(c===qs.None||c===qs.Emulated)return null}return _o(o,t)}(e,n.parent,t)}function uc(e,n,t,o,c){e.insertBefore(n,t,o,c)}function VA(e,n,t){e.appendChild(n,t)}function jA(e,n,t,o,c){null!==o?uc(e,n,t,o,c):VA(e,n,t)}function vg(e,n){return e.parentNode(n)}let v0,zA=function GA(e,n,t){return 40&e.type?_o(e,t):null};function yg(e,n,t,o){const c=BA(e,o,n),h=n[11],m=function HA(e,n,t){return zA(e,n,t)}(o.parent||n[6],o,n);if(null!=c)if(Array.isArray(t))for(let y=0;y<t.length;y++)jA(h,c,t[y],m,!1);else jA(h,c,t,m,!1)}function Sg(e,n){if(null!==n){const t=n.type;if(3&t)return _o(n,e);if(4&t)return h0(-1,e[n.index]);if(8&t){const o=n.child;if(null!==o)return Sg(e,o);{const c=e[n.index];return hs(c)?h0(-1,c):Dr(c)}}if(32&t)return o0(n,e)()||Dr(e[n.index]);{const o=$A(e,n);return null!==o?Array.isArray(o)?o[0]:Sg(xf(e[16]),o):Sg(e,n.next)}}return null}function $A(e,n){return null!==n?e[16][6].projection[n.projection]:null}function h0(e,n){const t=10+e+1;if(t<n.length){const o=n[t],c=o[1].firstChild;if(null!==c)return Sg(o,c)}return n[7]}function g0(e,n,t,o,c,h,p){for(;null!=t;){const m=o[t.index],y=t.type;if(p&&0===n&&(m&&Ci(Dr(m),o),t.flags|=4),64!=(64&t.flags))if(8&y)g0(e,n,t.child,o,c,h,!1),Tl(n,e,c,m,h);else if(32&y){const C=o0(t,o);let w;for(;w=C();)Tl(n,e,c,w,h);Tl(n,e,c,m,h)}else 16&y?qA(e,n,o,t,c,h):Tl(n,e,c,m,h);t=p?t.projectionNext:t.next}}function Ff(e,n,t,o,c,h){g0(t,o,e.firstChild,n,c,h,!1)}function qA(e,n,t,o,c,h){const p=t[16],y=p[6].projection[o.projection];if(Array.isArray(y))for(let C=0;C<y.length;C++)Tl(n,e,c,y[C],h);else g0(e,n,y,p[3],c,h,!0)}function QA(e,n,t){e.setAttribute(n,"style",t)}function m0(e,n,t){""===t?e.removeAttribute(n,"class"):e.setAttribute(n,"class",t)}class eP{constructor(n){this.changingThisBreaksApplicationSecurity=n}toString(){return`SafeValue must use [property]=binding: ${this.changingThisBreaksApplicationSecurity} (see https://g.co/ng/security#xss)`}}const R6=/^(?:(?:https?|mailto|data|ftp|tel|file|sms):|[^&:/?#]*(?:[/?#]|$))/gi;var Er=(()=>((Er=Er||{})[Er.NONE=0]="NONE",Er[Er.HTML=1]="HTML",Er[Er.STYLE=2]="STYLE",Er[Er.SCRIPT=3]="SCRIPT",Er[Er.URL=4]="URL",Er[Er.RESOURCE_URL=5]="RESOURCE_URL",Er))();function b0(e){const n=function Of(){const e=Ue();return e&&e[12]}();return n?n.sanitize(Er.URL,e)||"":function kf(e,n){const t=function D6(e){return e instanceof eP&&e.getTypeName()||null}(e);if(null!=t&&t!==n){if("ResourceURL"===t&&"URL"===n)return!0;throw new Error(`Required a safe ${n}, got a ${t} (see https://g.co/ng/security#xss)`)}return t===n}(e,"URL")?function uu(e){return e instanceof eP?e.changingThisBreaksApplicationSecurity:e}(e):function S0(e){return(e=String(e)).match(R6)?e:"unsafe:"+e}(Mt(e))}const w0=new At("ENVIRONMENT_INITIALIZER"),uP=new At("INJECTOR",-1),cP=new At("INJECTOR_DEF_TYPES");class lP{get(n,t=Cf){if(t===Cf){const o=new Error(`NullInjectorError: No provider for ${wn(n)}!`);throw o.name="NullInjectorError",o}return t}}function G6(...e){return{\u0275providers:dP(0,e)}}function dP(e,...n){const t=[],o=new Set;let c;return Ea(n,h=>{const p=h;D0(p,t,[],o)&&(c||(c=[]),c.push(p))}),void 0!==c&&fP(c,t),t}function fP(e,n){for(let t=0;t<e.length;t++){const{providers:c}=e[t];Ea(c,h=>{n.push(h)})}}function D0(e,n,t,o){if(!(e=Et(e)))return!1;let c=null,h=b1(e);const p=!h&&Sn(e);if(h||p){if(p&&!p.standalone)return!1;c=e}else{const y=e.ngModule;if(h=b1(y),!h)return!1;c=y}const m=o.has(c);if(p){if(m)return!1;if(o.add(c),p.dependencies){const y="function"==typeof p.dependencies?p.dependencies():p.dependencies;for(const C of y)D0(C,n,t,o)}}else{if(!h)return!1;{if(null!=h.imports&&!m){let C;o.add(c);try{Ea(h.imports,w=>{D0(w,n,t,o)&&(C||(C=[]),C.push(w))})}finally{}void 0!==C&&fP(C,n)}if(!m){const C=sc(c)||(()=>new c);n.push({provide:c,useFactory:C,deps:fn},{provide:cP,useValue:c,multi:!0},{provide:w0,useValue:()=>Tt(c),multi:!0})}const y=h.providers;null==y||m||Ea(y,w=>{n.push(w)})}}return c!==e&&void 0!==e.providers}const z6=bn({provide:String,useValue:bn});function E0(e){return null!==e&&"object"==typeof e&&z6 in e}function lc(e){return"function"==typeof e}const A0=new At("Set Injector scope."),bg={},$6={};let P0;function wg(){return void 0===P0&&(P0=new lP),P0}class cu{}class gP extends cu{constructor(n,t,o,c){super(),this.parent=t,this.source=o,this.scopes=c,this.records=new Map,this._ngOnDestroyHooks=new Set,this._onDestroyHooks=[],this._destroyed=!1,x0(n,p=>this.processProvider(p)),this.records.set(uP,Cl(void 0,this)),c.has("environment")&&this.records.set(cu,Cl(void 0,this));const h=this.records.get(A0);null!=h&&"string"==typeof h.value&&this.scopes.add(h.value),this.injectorDefTypes=new Set(this.get(cP.multi,fn,bt.Self))}get destroyed(){return this._destroyed}destroy(){this.assertNotDestroyed(),this._destroyed=!0;try{for(const n of this._ngOnDestroyHooks)n.ngOnDestroy();for(const n of this._onDestroyHooks)n()}finally{this.records.clear(),this._ngOnDestroyHooks.clear(),this.injectorDefTypes.clear(),this._onDestroyHooks.length=0}}onDestroy(n){this._onDestroyHooks.push(n)}runInContext(n){this.assertNotDestroyed();const t=Sl(this),o=ko(void 0);try{return n()}finally{Sl(t),ko(o)}}get(n,t=Cf,o=bt.Default){this.assertNotDestroyed();const c=Sl(this),h=ko(void 0);try{if(!(o&bt.SkipSelf)){let m=this.records.get(n);if(void 0===m){const y=function X6(e){return"function"==typeof e||"object"==typeof e&&e instanceof At}(n)&&qp(n);m=y&&this.injectableDefInScope(y)?Cl(R0(n),bg):null,this.records.set(n,m)}if(null!=m)return this.hydrate(n,m)}return(o&bt.Self?wg():this.parent).get(n,t=o&bt.Optional&&t===Cf?null:t)}catch(p){if("NullInjectorError"===p.name){if((p[gg]=p[gg]||[]).unshift(wn(n)),c)throw p;return function w5(e,n,t,o){const c=e[gg];throw n[pA]&&c.unshift(n[pA]),e.message=function D5(e,n,t,o=null){e=e&&"\n"===e.charAt(0)&&"\u0275"==e.charAt(1)?e.slice(2):e;let c=wn(n);if(Array.isArray(n))c=n.map(wn).join(" -> ");else if("object"==typeof n){let h=[];for(let p in n)if(n.hasOwnProperty(p)){let m=n[p];h.push(p+":"+("string"==typeof m?JSON.stringify(m):wn(m)))}c=`{${h.join(", ")}}`}return`${t}${o?"("+o+")":""}[${c}]: ${e.replace(I5,"\n  ")}`}("\n"+e.message,c,t,o),e.ngTokenPath=c,e[gg]=null,e}(p,n,"R3InjectorError",this.source)}throw p}finally{ko(h),Sl(c)}}resolveInjectorInitializers(){const n=Sl(this),t=ko(void 0);try{const o=this.get(w0.multi,fn,bt.Self);for(const c of o)c()}finally{Sl(n),ko(t)}}toString(){const n=[],t=this.records;for(const o of t.keys())n.push(wn(o));return`R3Injector[${n.join(", ")}]`}assertNotDestroyed(){if(this._destroyed)throw new ct(205,!1)}processProvider(n){let t=lc(n=Et(n))?n:Et(n&&n.provide);const o=function Q6(e){return E0(e)?Cl(void 0,e.useValue):Cl(function mP(e,n,t){let o;if(lc(e)){const c=Et(e);return sc(c)||R0(c)}if(E0(e))o=()=>Et(e.useValue);else if(function pP(e){return!(!e||!e.useFactory)}(e))o=()=>e.useFactory(...Qy(e.deps||[]));else if(function hP(e){return!(!e||!e.useExisting)}(e))o=()=>Tt(Et(e.useExisting));else{const c=Et(e&&(e.useClass||e.provide));if(!function Y6(e){return!!e.deps}(e))return sc(c)||R0(c);o=()=>new c(...Qy(e.deps))}return o}(e),bg)}(n);if(lc(n)||!0!==n.multi)this.records.get(t);else{let c=this.records.get(t);c||(c=Cl(void 0,bg,!0),c.factory=()=>Qy(c.multi),this.records.set(t,c)),t=n,c.multi.push(n)}this.records.set(t,o)}hydrate(n,t){return t.value===bg&&(t.value=$6,t.value=t.factory()),"object"==typeof t.value&&t.value&&function J6(e){return null!==e&&"object"==typeof e&&"function"==typeof e.ngOnDestroy}(t.value)&&this._ngOnDestroyHooks.add(t.value),t.value}injectableDefInScope(n){if(!n.providedIn)return!1;const t=Et(n.providedIn);return"string"==typeof t?"any"===t||this.scopes.has(t):this.injectorDefTypes.has(t)}}function R0(e){const n=qp(e),t=null!==n?n.factory:sc(e);if(null!==t)return t;if(e instanceof At)throw new ct(204,!1);if(e instanceof Function)return function q6(e){const n=e.length;if(n>0)throw function Tf(e,n){const t=[];for(let o=0;o<e;o++)t.push(n);return t}(n,"?"),new ct(204,!1);const t=function sG(e){const n=e&&(e[Qp]||e[w1]);if(n){const t=function aG(e){if(e.hasOwnProperty("name"))return e.name;const n=(""+e).match(/^function\s*([^\s(]+)/);return null===n?"":n[1]}(e);return console.warn(`DEPRECATED: DI is instantiating a token "${t}" that inherits its @Injectable decorator but does not provide one itself.\nThis will become an error in a future version of Angular. Please add @Injectable() to the "${t}" class.`),n}return null}(e);return null!==t?()=>t.factory(e):()=>new e}(e);throw new ct(204,!1)}function Cl(e,n,t=!1){return{factory:e,value:n,multi:t?[]:void 0}}function Z6(e){return!!e.\u0275providers}function x0(e,n){for(const t of e)Array.isArray(t)?x0(t,n):Z6(t)?x0(t.\u0275providers,n):n(t)}class _P{}class n8{resolveComponentFactory(n){throw function t8(e){const n=Error(`No component factory found for ${wn(e)}. Did you add it to @NgModule.entryComponents?`);return n.ngComponent=e,n}(n)}}let Nf=(()=>{class e{}return e.NULL=new n8,e})();function r8(){return bl(Ur(),Ue())}function bl(e,n){return new lu(_o(e,n))}let lu=(()=>{class e{constructor(t){this.nativeElement=t}}return e.__NG_ELEMENT_ID__=r8,e})();class yP{}let s8=(()=>{class e{}return e.\u0275prov=Ht({token:e,providedIn:"root",factory:()=>null}),e})();class Eg{constructor(n){this.full=n,this.major=n.split(".")[0],this.minor=n.split(".")[1],this.patch=n.split(".").slice(2).join(".")}}const a8=new Eg("14.3.0"),F0={};function M0(e){return e.ngOriginalError}class wl{constructor(){this._console=console}handleError(n){const t=this._findOriginalError(n);this._console.error("ERROR",n),t&&this._console.error("ORIGINAL ERROR",t)}_findOriginalError(n){let t=n&&M0(n);for(;t&&M0(t);)t=M0(t);return t||null}}function Pa(e){return e instanceof Function?e():e}function IP(e,n,t){let o=e.length;for(;;){const c=e.indexOf(n,t);if(-1===c)return c;if(0===c||e.charCodeAt(c-1)<=32){const h=n.length;if(c+h===o||e.charCodeAt(c+h)<=32)return c}t=c+1}}const TP="ng-template";function v8(e,n,t){let o=0;for(;o<e.length;){let c=e[o++];if(t&&"class"===c){if(c=e[o],-1!==IP(c.toLowerCase(),n,0))return!0}else if(1===c){for(;o<e.length&&"string"==typeof(c=e[o++]);)if(c.toLowerCase()===n)return!0;return!1}}return!1}function CP(e){return 4===e.type&&e.value!==TP}function y8(e,n,t){return n===(4!==e.type||t?e.value:TP)}function S8(e,n,t){let o=4;const c=e.attrs||[],h=function C8(e){for(let n=0;n<e.length;n++)if(Y1(e[n]))return n;return e.length}(c);let p=!1;for(let m=0;m<n.length;m++){const y=n[m];if("number"!=typeof y){if(!p)if(4&o){if(o=2|1&o,""!==y&&!y8(e,y,t)||""===y&&1===n.length){if(gs(o))return!1;p=!0}}else{const C=8&o?y:n[++m];if(8&o&&null!==e.attrs){if(!v8(e.attrs,C,t)){if(gs(o))return!1;p=!0}continue}const P=I8(8&o?"class":y,c,CP(e),t);if(-1===P){if(gs(o))return!1;p=!0;continue}if(""!==C){let O;O=P>h?"":c[P+1].toLowerCase();const z=8&o?O:null;if(z&&-1!==IP(z,C,0)||2&o&&C!==O){if(gs(o))return!1;p=!0}}}}else{if(!p&&!gs(o)&&!gs(y))return!1;if(p&&gs(y))continue;p=!1,o=y|1&o}}return gs(o)||p}function gs(e){return 0==(1&e)}function I8(e,n,t,o){if(null===n)return-1;let c=0;if(o||!t){let h=!1;for(;c<n.length;){const p=n[c];if(p===e)return c;if(3===p||6===p)h=!0;else{if(1===p||2===p){let m=n[++c];for(;"string"==typeof m;)m=n[++c];continue}if(4===p)break;if(0===p){c+=4;continue}}c+=h?1:2}return-1}return function b8(e,n){let t=e.indexOf(4);if(t>-1)for(t++;t<e.length;){const o=e[t];if("number"==typeof o)return-1;if(o===n)return t;t++}return-1}(n,e)}function bP(e,n,t=!1){for(let o=0;o<n.length;o++)if(S8(e,n[o],t))return!0;return!1}function wP(e,n){return e?":not("+n.trim()+")":n}function D8(e){let n=e[0],t=1,o=2,c="",h=!1;for(;t<e.length;){let p=e[t];if("string"==typeof p)if(2&o){const m=e[++t];c+="["+p+(m.length>0?'="'+m+'"':"")+"]"}else 8&o?c+="."+p:4&o&&(c+=" "+p);else""!==c&&!gs(p)&&(n+=wP(h,c),c=""),o=p,h=h||!gs(o);t++}return""!==c&&(n+=wP(h,c)),n}const Ot={};function Ra(e){DP(sn(),Ue(),Li()+e,!1)}function DP(e,n,t,o){if(!o)if(3==(3&n[2])){const h=e.preOrderCheckHooks;null!==h&&og(n,h,t)}else{const h=e.preOrderHooks;null!==h&&sg(n,h,0,t)}su(t)}function RP(e,n=null,t=null,o){const c=xP(e,n,t,o);return c.resolveInjectorInitializers(),c}function xP(e,n=null,t=null,o,c=new Set){const h=[t||fn,G6(e)];return o=o||("object"==typeof e?void 0:wn(e)),new gP(h,n||wg(),o||null,c)}let ms=(()=>{class e{static create(t,o){if(Array.isArray(t))return RP({name:""},o,t,"");{const c=t.name??"";return RP({name:c},t.parent,t.providers,c)}}}return e.THROW_IF_NOT_FOUND=Cf,e.NULL=new lP,e.\u0275prov=Ht({token:e,providedIn:"any",factory:()=>Tt(uP)}),e.__NG_ELEMENT_ID__=-1,e})();function _t(e,n=bt.Default){const t=Ue();return null===t?Tt(e,n):iA(Ur(),t,Et(e),n)}function B0(){throw new Error("invalid")}function qP(e,n){const t=e.contentQueries;if(null!==t)for(let o=0;o<t.length;o+=2){const c=t[o],h=t[o+1];if(-1!==h){const p=e.data[h];Oy(c),p.contentQueries(2,n[h],h)}}}function Fg(e,n,t,o,c,h,p,m,y,C,w){const P=n.blueprint.slice();return P[0]=c,P[2]=76|o,(null!==w||e&&1024&e[2])&&(P[2]|=1024),N1(P),P[3]=P[15]=e,P[8]=t,P[10]=p||e&&e[10],P[11]=m||e&&e[11],P[12]=y||e&&e[12]||null,P[9]=C||e&&e[9]||null,P[6]=h,P[20]=function H5(){return j5++}(),P[21]=w,P[16]=2==n.type?e[16]:P,P}function Al(e,n,t,o,c){let h=e.data[n];if(null===h)h=function Y0(e,n,t,o,c){const h=B1(),p=xy(),y=e.data[n]=function uz(e,n,t,o,c,h){return{type:t,index:o,insertBeforeIndex:null,injectorIndex:n?n.injectorIndex:-1,directiveStart:-1,directiveEnd:-1,directiveStylingLast:-1,propertyBindings:null,flags:0,providerIndexes:0,value:c,attrs:h,mergedAttrs:null,localNames:null,initialInputs:void 0,inputs:null,outputs:null,tViews:null,next:null,projectionNext:null,child:null,parent:n,projection:null,styles:null,stylesWithoutHost:null,residualStyles:void 0,classes:null,classesWithoutHost:null,residualClasses:void 0,classBindings:0,styleBindings:0}}(0,p?h:h&&h.parent,t,n,o,c);return null===e.firstChild&&(e.firstChild=y),null!==h&&(p?null==h.child&&null!==y.parent&&(h.child=y):null===h.next&&(h.next=y)),y}(e,n,t,o,c),function WG(){return kt.lFrame.inI18n}()&&(h.flags|=64);else if(64&h.type){h.type=t,h.value=o,h.attrs=c;const p=function pf(){const e=kt.lFrame,n=e.currentTNode;return e.isParent?n:n.parent}();h.injectorIndex=null===p?-1:p.injectorIndex}return Qs(h,!0),h}function Pl(e,n,t,o){if(0===t)return-1;const c=n.length;for(let h=0;h<t;h++)n.push(o),e.blueprint.push(o),e.data.push(null);return c}function J0(e,n,t){Ny(n);try{const o=e.viewQuery;null!==o&&oS(1,o,t);const c=e.template;null!==c&&QP(e,n,c,1,t),e.firstCreatePass&&(e.firstCreatePass=!1),e.staticContentQueries&&qP(e,n),e.staticViewQueries&&oS(2,e.viewQuery,t);const h=e.components;null!==h&&function oz(e,n){for(let t=0;t<n.length;t++)bz(e,n[t])}(n,h)}catch(o){throw e.firstCreatePass&&(e.incompleteFirstPass=!0,e.firstCreatePass=!1),o}finally{n[2]&=-5,Ly()}}function kg(e,n,t,o){const c=n[2];if(128!=(128&c)){Ny(n);try{N1(n),function V1(e){return kt.lFrame.bindingIndex=e}(e.bindingStartIndex),null!==t&&QP(e,n,t,2,o);const p=3==(3&c);if(p){const C=e.preOrderCheckHooks;null!==C&&og(n,C,null)}else{const C=e.preOrderHooks;null!==C&&sg(n,C,0,null),Wy(n,0)}if(function Tz(e){for(let n=s0(e);null!==n;n=a0(n)){if(!n[2])continue;const t=n[9];for(let o=0;o<t.length;o++){const c=t[o],h=c[3];0==(512&c[2])&&Ry(h,1),c[2]|=512}}}(n),function Iz(e){for(let n=s0(e);null!==n;n=a0(n))for(let t=10;t<n.length;t++){const o=n[t],c=o[1];rg(o)&&kg(c,o,c.template,o[8])}}(n),null!==e.contentQueries&&qP(e,n),p){const C=e.contentCheckHooks;null!==C&&og(n,C)}else{const C=e.contentHooks;null!==C&&sg(n,C,1),Wy(n,1)}!function rz(e,n){const t=e.hostBindingOpCodes;if(null!==t)try{for(let o=0;o<t.length;o++){const c=t[o];if(c<0)su(~c);else{const h=c,p=t[++o],m=t[++o];BG(p,h),m(2,n[h])}}}finally{su(-1)}}(e,n);const m=e.components;null!==m&&function iz(e,n){for(let t=0;t<n.length;t++)Cz(e,n[t])}(n,m);const y=e.viewQuery;if(null!==y&&oS(2,y,o),p){const C=e.viewCheckHooks;null!==C&&og(n,C)}else{const C=e.viewHooks;null!==C&&sg(n,C,2),Wy(n,2)}!0===e.firstUpdatePass&&(e.firstUpdatePass=!1),n[2]&=-41,512&n[2]&&(n[2]&=-513,Ry(n[3],-1))}finally{Ly()}}}function QP(e,n,t,o,c){const h=Li(),p=2&o;try{su(-1),p&&n.length>22&&DP(e,n,22,!1),t(o,c)}finally{su(h)}}function X0(e,n,t){!W1()||(function hz(e,n,t,o){const c=t.directiveStart,h=t.directiveEnd;e.firstCreatePass||_f(t,n),Ci(o,n);const p=t.initialInputs;for(let m=c;m<h;m++){const y=e.data[m],C=ps(y);C&&vz(n,t,y);const w=vf(n,e,m,t);Ci(w,n),null!==p&&yz(0,m-c,w,y,0,p),C&&(vo(t.index,n)[8]=w)}}(e,n,t,_o(t,n)),128==(128&t.flags)&&function pz(e,n,t){const o=t.directiveStart,c=t.directiveEnd,h=t.index,p=function UG(){return kt.lFrame.currentDirectiveIndex}();try{su(h);for(let m=o;m<c;m++){const y=e.data[m],C=n[m];ky(m),(null!==y.hostBindings||0!==y.hostVars||null!==y.hostAttrs)&&rR(y,C)}}finally{su(-1),ky(p)}}(e,n,t))}function Z0(e,n,t=_o){const o=n.localNames;if(null!==o){let c=n.index+1;for(let h=0;h<o.length;h+=2){const p=o[h+1],m=-1===p?t(n,e):e[p];e[c++]=m}}}function JP(e){const n=e.tView;return null===n||n.incompleteFirstPass?e.tView=eS(1,null,e.template,e.decls,e.vars,e.directiveDefs,e.pipeDefs,e.viewQuery,e.schemas,e.consts):n}function eS(e,n,t,o,c,h,p,m,y,C){const w=22+o,P=w+c,O=function sz(e,n){const t=[];for(let o=0;o<n;o++)t.push(o<e?null:Ot);return t}(w,P),z="function"==typeof C?C():C;return O[1]={type:e,blueprint:O,template:t,queries:null,viewQuery:m,declTNode:n,data:O.slice().fill(null,w),bindingStartIndex:w,expandoStartIndex:P,hostBindingOpCodes:null,firstCreatePass:!0,firstUpdatePass:!0,staticViewQueries:!1,staticContentQueries:!1,preOrderHooks:null,preOrderCheckHooks:null,contentHooks:null,contentCheckHooks:null,viewHooks:null,viewCheckHooks:null,destroyHooks:null,cleanup:null,contentQueries:null,components:null,directiveRegistry:"function"==typeof h?h():h,pipeRegistry:"function"==typeof p?p():p,firstChild:null,schemas:y,consts:z,incompleteFirstPass:!1}}function ZP(e,n,t){for(let o in e)if(e.hasOwnProperty(o)){const c=e[o];(t=null===t?{}:t).hasOwnProperty(o)?t[o].push(n,c):t[o]=[n,c]}return t}function eR(e,n){const o=n.directiveEnd,c=e.data,h=n.attrs,p=[];let m=null,y=null;for(let C=n.directiveStart;C<o;C++){const w=c[C],P=w.inputs,O=null===h||CP(n)?null:Sz(P,h);p.push(O),m=ZP(P,C,m),y=ZP(w.outputs,C,y)}null!==m&&(m.hasOwnProperty("class")&&(n.flags|=16),m.hasOwnProperty("style")&&(n.flags|=32)),n.initialInputs=p,n.inputs=m,n.outputs=y}function tR(e,n){const t=vo(n,e);16&t[2]||(t[2]|=32)}function tS(e,n,t,o){let c=!1;if(W1()){const h=function gz(e,n,t){const o=e.directiveRegistry;let c=null;if(o)for(let h=0;h<o.length;h++){const p=o[h];bP(t,p.selectors,!1)&&(c||(c=[]),dg(_f(t,n),e,p.type),ps(p)?(iR(e,t),c.unshift(p)):c.push(p))}return c}(e,n,t),p=null===o?null:{"":-1};if(null!==h){c=!0,oR(t,e.data.length,h.length);for(let w=0;w<h.length;w++){const P=h[w];P.providersResolver&&P.providersResolver(P)}let m=!1,y=!1,C=Pl(e,n,h.length,null);for(let w=0;w<h.length;w++){const P=h[w];t.mergedAttrs=ug(t.mergedAttrs,P.hostAttrs),sR(e,t,n,C,P),_z(C,P,p),null!==P.contentQueries&&(t.flags|=8),(null!==P.hostBindings||null!==P.hostAttrs||0!==P.hostVars)&&(t.flags|=128);const O=P.type.prototype;!m&&(O.ngOnChanges||O.ngOnInit||O.ngDoCheck)&&((e.preOrderHooks||(e.preOrderHooks=[])).push(t.index),m=!0),!y&&(O.ngOnChanges||O.ngDoCheck)&&((e.preOrderCheckHooks||(e.preOrderCheckHooks=[])).push(t.index),y=!0),C++}eR(e,t)}p&&function mz(e,n,t){if(n){const o=e.localNames=[];for(let c=0;c<n.length;c+=2){const h=t[n[c+1]];if(null==h)throw new ct(-301,!1);o.push(n[c],h)}}}(t,o,p)}return t.mergedAttrs=ug(t.mergedAttrs,t.attrs),c}function nR(e,n,t,o,c,h){const p=h.hostBindings;if(p){let m=e.hostBindingOpCodes;null===m&&(m=e.hostBindingOpCodes=[]);const y=~n.index;(function fz(e){let n=e.length;for(;n>0;){const t=e[--n];if("number"==typeof t&&t<0)return t}return 0})(m)!=y&&m.push(y),m.push(o,c,p)}}function rR(e,n){null!==e.hostBindings&&e.hostBindings(1,n)}function iR(e,n){n.flags|=2,(e.components||(e.components=[])).push(n.index)}function _z(e,n,t){if(t){if(n.exportAs)for(let o=0;o<n.exportAs.length;o++)t[n.exportAs[o]]=e;ps(n)&&(t[""]=e)}}function oR(e,n,t){e.flags|=1,e.directiveStart=n,e.directiveEnd=n+t,e.providerIndexes=n}function sR(e,n,t,o,c){e.data[o]=c;const h=c.factory||(c.factory=sc(c.type)),p=new gf(h,ps(c),_t);e.blueprint[o]=p,t[o]=p,nR(e,n,0,o,Pl(e,t,c.hostVars,Ot),c)}function vz(e,n,t){const o=_o(n,e),c=JP(t),h=e[10],p=Mg(e,Fg(e,c,null,t.onPush?32:16,o,n,h,h.createRenderer(o,t),null,null,null));e[n.index]=p}function Js(e,n,t,o,c,h){const p=_o(e,n);!function nS(e,n,t,o,c,h,p){if(null==h)e.removeAttribute(n,c,t);else{const m=null==p?Mt(h):p(h,o||"",c);e.setAttribute(n,c,m,t)}}(n[11],p,h,e.value,t,o,c)}function yz(e,n,t,o,c,h){const p=h[n];if(null!==p){const m=o.setInput;for(let y=0;y<p.length;){const C=p[y++],w=p[y++],P=p[y++];null!==m?o.setInput(t,P,C,w):t[w]=P}}}function Sz(e,n){let t=null,o=0;for(;o<n.length;){const c=n[o];if(0!==c)if(5!==c){if("number"==typeof c)break;e.hasOwnProperty(c)&&(null===t&&(t=[]),t.push(c,e[c],n[o+1])),o+=2}else o+=2;else o+=4}return t}function aR(e,n,t,o){return new Array(e,!0,!1,n,null,0,o,t,null,null)}function Cz(e,n){const t=vo(n,e);if(rg(t)){const o=t[1];48&t[2]?kg(o,t,o.template,t[8]):t[5]>0&&rS(t)}}function rS(e){for(let o=s0(e);null!==o;o=a0(o))for(let c=10;c<o.length;c++){const h=o[c];if(rg(h))if(512&h[2]){const p=h[1];kg(p,h,p.template,h[8])}else h[5]>0&&rS(h)}const t=e[1].components;if(null!==t)for(let o=0;o<t.length;o++){const c=vo(t[o],e);rg(c)&&c[5]>0&&rS(c)}}function bz(e,n){const t=vo(n,e),o=t[1];(function wz(e,n){for(let t=n.length;t<e.blueprint.length;t++)n.push(e.blueprint[t])})(o,t),J0(o,t,t[8])}function Mg(e,n){return e[13]?e[14][4]=n:e[13]=n,e[14]=n,n}function iS(e){for(;e;){e[2]|=32;const n=xf(e);if(mG(e)&&!n)return e;e=n}return null}function Og(e,n,t,o=!0){const c=n[10];c.begin&&c.begin();try{kg(e,n,e.template,t)}catch(p){throw o&&dR(n,p),p}finally{c.end&&c.end()}}function oS(e,n,t){Oy(0),n(e,t)}function uR(e){return e[7]||(e[7]=[])}function cR(e){return e.cleanup||(e.cleanup=[])}function dR(e,n){const t=e[9],o=t?t.get(wl,null):null;o&&o.handleError(n)}function sS(e,n,t,o,c){for(let h=0;h<t.length;){const p=t[h++],m=t[h++],y=n[p],C=e.data[p];null!==C.setInput?C.setInput(y,c,o,m):y[m]=c}}function Fa(e,n,t){const o=function ng(e,n){return Dr(n[e])}(n,e);!function NA(e,n,t){e.setValue(n,t)}(e[11],o,t)}function Ng(e,n,t){let o=t?e.styles:null,c=t?e.classes:null,h=0;if(null!==n)for(let p=0;p<n.length;p++){const m=n[p];"number"==typeof m?h=m:1==h?c=gy(c,m):2==h&&(o=gy(o,m+": "+n[++p]+";"))}t?e.styles=o:e.stylesWithoutHost=o,t?e.classes=c:e.classesWithoutHost=c}function Lg(e,n,t,o,c=!1){for(;null!==t;){const h=n[t.index];if(null!==h&&o.push(Dr(h)),hs(h))for(let m=10;m<h.length;m++){const y=h[m],C=y[1].firstChild;null!==C&&Lg(y[1],y,C,o)}const p=t.type;if(8&p)Lg(e,n,t.child,o);else if(32&p){const m=o0(t,n);let y;for(;y=m();)o.push(y)}else if(16&p){const m=$A(n,t);if(Array.isArray(m))o.push(...m);else{const y=xf(n[16]);Lg(y[1],y,m,o,!0)}}t=c?t.projectionNext:t.next}return o}class Lf{constructor(n,t){this._lView=n,this._cdRefInjectingView=t,this._appRef=null,this._attachedToViewContainer=!1}get rootNodes(){const n=this._lView,t=n[1];return Lg(t,n,t.firstChild,[])}get context(){return this._lView[8]}set context(n){this._lView[8]=n}get destroyed(){return 128==(128&this._lView[2])}destroy(){if(this._appRef)this._appRef.detachView(this);else if(this._attachedToViewContainer){const n=this._lView[3];if(hs(n)){const t=n[8],o=t?t.indexOf(this):-1;o>-1&&(l0(n,o),hg(t,o))}this._attachedToViewContainer=!1}WA(this._lView[1],this._lView)}onDestroy(n){!function XP(e,n,t,o){const c=uR(n);null===t?c.push(o):(c.push(t),e.firstCreatePass&&cR(e).push(o,c.length-1))}(this._lView[1],this._lView,null,n)}markForCheck(){iS(this._cdRefInjectingView||this._lView)}detach(){this._lView[2]&=-65}reattach(){this._lView[2]|=64}detectChanges(){Og(this._lView[1],this._lView,this.context)}checkNoChanges(){}attachToViewContainerRef(){if(this._appRef)throw new ct(902,!1);this._attachedToViewContainer=!0}detachFromAppRef(){this._appRef=null,function s6(e,n){Ff(e,n,n[11],2,null,null)}(this._lView[1],this._lView)}attachToAppRef(n){if(this._attachedToViewContainer)throw new ct(902,!1);this._appRef=n}}class Dz extends Lf{constructor(n){super(n),this._view=n}detectChanges(){const n=this._view;Og(n[1],n,n[8],!1)}checkNoChanges(){}get context(){return null}}class aS extends Nf{constructor(n){super(),this.ngModule=n}resolveComponentFactory(n){const t=Sn(n);return new Wf(t,this.ngModule)}}function fR(e){const n=[];for(let t in e)e.hasOwnProperty(t)&&n.push({propName:e[t],templateName:t});return n}class Az{constructor(n,t){this.injector=n,this.parentInjector=t}get(n,t,o){const c=this.injector.get(n,F0,o);return c!==F0||t===F0?c:this.parentInjector.get(n,t,o)}}class Wf extends _P{constructor(n,t){super(),this.componentDef=n,this.ngModule=t,this.componentType=n.type,this.selector=function E8(e){return e.map(D8).join(",")}(n.selectors),this.ngContentSelectors=n.ngContentSelectors?n.ngContentSelectors:[],this.isBoundToModule=!!t}get inputs(){return fR(this.componentDef.inputs)}get outputs(){return fR(this.componentDef.outputs)}create(n,t,o,c){let h=(c=c||this.ngModule)instanceof cu?c:c?.injector;h&&null!==this.componentDef.getStandaloneInjector&&(h=this.componentDef.getStandaloneInjector(h)||h);const p=h?new Az(n,h):n,m=p.get(yP,null);if(null===m)throw new ct(407,!1);const y=p.get(s8,null),C=m.createRenderer(null,this.componentDef),w=this.componentDef.selectors[0][0]||"div",P=o?function az(e,n,t){return e.selectRootElement(n,t===qs.ShadowDom)}(C,o,this.componentDef.encapsulation):c0(C,w,function Ez(e){const n=e.toLowerCase();return"svg"===n?"svg":"math"===n?"math":null}(w)),O=this.componentDef.onPush?288:272,z=eS(0,null,null,1,0,null,null,null,null,null),A=Fg(null,z,null,O,null,null,m,C,y,p,null);let ne,$;Ny(A);try{const K=function xz(e,n,t,o,c,h){const p=t[1];t[22]=e;const y=Al(p,22,2,"#host",null),C=y.mergedAttrs=n.hostAttrs;null!==C&&(Ng(y,C,!0),null!==e&&(ag(c,e,C),null!==y.classes&&m0(c,e,y.classes),null!==y.styles&&QA(c,e,y.styles)));const w=o.createRenderer(e,n),P=Fg(t,JP(n),null,n.onPush?32:16,t[22],y,o,w,h||null,null,null);return p.firstCreatePass&&(dg(_f(y,t),p,n.type),iR(p,y),oR(y,t.length,1)),Mg(t,P),t[22]=P}(P,this.componentDef,A,m,C);if(P)if(o)ag(C,P,["ng-version",a8.full]);else{const{attrs:q,classes:N}=function A8(e){const n=[],t=[];let o=1,c=2;for(;o<e.length;){let h=e[o];if("string"==typeof h)2===c?""!==h&&n.push(h,e[++o]):8===c&&t.push(h);else{if(!gs(c))break;c=h}o++}return{attrs:n,classes:t}}(this.componentDef.selectors[0]);q&&ag(C,P,q),N&&N.length>0&&m0(C,P,N.join(" "))}if($=Py(z,22),void 0!==t){const q=$.projection=[];for(let N=0;N<this.ngContentSelectors.length;N++){const H=t[N];q.push(null!=H?Array.from(H):null)}}ne=function Fz(e,n,t,o){const c=t[1],h=function dz(e,n,t){const o=Ur();e.firstCreatePass&&(t.providersResolver&&t.providersResolver(t),sR(e,o,n,Pl(e,n,1,null),t),eR(e,o));const c=vf(n,e,o.directiveStart,o);Ci(c,n);const h=_o(o,n);return h&&Ci(h,n),c}(c,t,n);if(e[8]=t[8]=h,null!==o)for(const m of o)m(h,n);if(n.contentQueries){const m=Ur();n.contentQueries(1,h,m.directiveStart)}const p=Ur();return!c.firstCreatePass||null===n.hostBindings&&null===n.hostAttrs||(su(p.index),nR(t[1],p,0,p.directiveStart,p.directiveEnd,n),rR(n,h)),h}(K,this.componentDef,A,[kz]),J0(z,A,null)}finally{Ly()}return new Rz(this.componentType,ne,bl($,A),A,$)}}class Rz extends class e8{}{constructor(n,t,o,c,h){super(),this.location=o,this._rootLView=c,this._tNode=h,this.instance=t,this.hostView=this.changeDetectorRef=new Dz(c),this.componentType=n}setInput(n,t){const o=this._tNode.inputs;let c;if(null!==o&&(c=o[n])){const h=this._rootLView;sS(h[1],h,c,n,t),tR(h,this._tNode.index)}}get injector(){return new pl(this._tNode,this._rootLView)}destroy(){this.hostView.destroy()}onDestroy(n){this.hostView.onDestroy(n)}}function kz(){const e=Ur();ig(Ue()[1],e)}let Wg=null;function dc(){if(!Wg){const e=Pn.Symbol;if(e&&e.iterator)Wg=e.iterator;else{const n=Object.getOwnPropertyNames(Map.prototype);for(let t=0;t<n.length;++t){const o=n[t];"entries"!==o&&"size"!==o&&Map.prototype[o]===Map.prototype.entries&&(Wg=o)}}}return Wg}function Bf(e){return!!function cS(e){return null!==e&&("function"==typeof e||"object"==typeof e)}(e)&&(Array.isArray(e)||!(e instanceof Map)&&dc()in e)}function bi(e,n,t){return!Object.is(e[n],t)&&(e[n]=t,!0)}function lS(e,n,t,o){const c=Ue();return bi(c,dl(),n)&&(sn(),Js(Xn(),c,e,n,t,o)),lS}function Bl(e,n,t,o,c,h,p,m){const y=Ue(),C=sn(),w=e+22,P=C.firstCreatePass?function zz(e,n,t,o,c,h,p,m,y){const C=n.consts,w=Al(n,e,4,p||null,ou(C,m));tS(n,t,w,ou(C,y)),ig(n,w);const P=w.tViews=eS(2,w,o,c,h,n.directiveRegistry,n.pipeRegistry,null,n.schemas,C);return null!==n.queries&&(n.queries.template(n,w),P.queries=n.queries.embeddedTView(w)),w}(w,C,y,n,t,o,c,h,p):C.data[w];Qs(P,!1);const O=y[11].createComment("");yg(C,y,O,P),Ci(O,y),Mg(y,y[w]=aR(O,y,O,P)),tg(P)&&X0(C,y,P),null!=p&&Z0(y,P,m)}function vs(e,n,t){const o=Ue();return bi(o,dl(),n)&&function Io(e,n,t,o,c,h,p,m){const y=_o(n,t);let w,C=n.inputs;!m&&null!=C&&(w=C[o])?(sS(e,t,w,o,c),eg(n)&&tR(t,n.index)):3&n.type&&(o=function cz(e){return"class"===e?"className":"for"===e?"htmlFor":"formaction"===e?"formAction":"innerHtml"===e?"innerHTML":"readonly"===e?"readOnly":"tabindex"===e?"tabIndex":e}(o),c=null!=p?p(c,n.value||"",o):c,h.setProperty(y,o,c))}(sn(),Xn(),o,e,n,o[11],t,!1),vs}function dS(e,n,t,o,c){const p=c?"class":"style";sS(e,t,n.inputs[p],p,o)}function Pt(e,n,t,o){const c=Ue(),h=sn(),p=22+e,m=c[11],y=c[p]=c0(m,n,function qG(){return kt.lFrame.currentNamespace}()),C=h.firstCreatePass?function qz(e,n,t,o,c,h,p){const m=n.consts,C=Al(n,e,2,c,ou(m,h));return tS(n,t,C,ou(m,p)),null!==C.attrs&&Ng(C,C.attrs,!1),null!==C.mergedAttrs&&Ng(C,C.mergedAttrs,!0),null!==n.queries&&n.queries.elementStart(n,C),C}(p,h,c,0,n,t,o):h.data[p];Qs(C,!0);const w=C.mergedAttrs;null!==w&&ag(m,y,w);const P=C.classes;null!==P&&m0(m,y,P);const O=C.styles;return null!==O&&QA(m,y,O),64!=(64&C.flags)&&yg(h,c,y,C),0===function RG(){return kt.lFrame.elementDepthCount}()&&Ci(y,c),function xG(){kt.lFrame.elementDepthCount++}(),tg(C)&&(X0(h,c,C),function YP(e,n,t){if(by(n)){const c=n.directiveEnd;for(let h=n.directiveStart;h<c;h++){const p=e.data[h];p.contentQueries&&p.contentQueries(1,t[h],h)}}}(h,C,c)),null!==o&&Z0(c,C),Pt}function Rt(){let e=Ur();xy()?function Fy(){kt.lFrame.isParent=!1}():(e=e.parent,Qs(e,!1));const n=e;!function FG(){kt.lFrame.elementDepthCount--}();const t=sn();return t.firstCreatePass&&(ig(t,e),by(e)&&t.queries.elementEnd(e)),null!=n.classesWithoutHost&&function ZG(e){return 0!=(16&e.flags)}(n)&&dS(t,n,Ue(),n.classesWithoutHost,!0),null!=n.stylesWithoutHost&&function e5(e){return 0!=(32&e.flags)}(n)&&dS(t,n,Ue(),n.stylesWithoutHost,!1),Rt}function Xr(e,n,t,o){return Pt(e,n,t,o),Rt(),Xr}function Ug(e){return!!e&&"function"==typeof e.then}const DR=function wR(e){return!!e&&"function"==typeof e.subscribe};function _r(e,n,t,o){const c=Ue(),h=sn(),p=Ur();return function AR(e,n,t,o,c,h,p,m){const y=tg(o),w=e.firstCreatePass&&cR(e),P=n[8],O=uR(n);let z=!0;if(3&o.type||m){const $=_o(o,n),K=m?m($):$,q=O.length,N=m?re=>m(Dr(re[o.index])):o.index;let H=null;if(!m&&y&&(H=function Jz(e,n,t,o){const c=e.cleanup;if(null!=c)for(let h=0;h<c.length-1;h+=2){const p=c[h];if(p===t&&c[h+1]===o){const m=n[7],y=c[h+2];return m.length>y?m[y]:null}"string"==typeof p&&(h+=2)}return null}(e,n,c,o.index)),null!==H)(H.__ngLastListenerFn__||H).__ngNextListenerFn__=h,H.__ngLastListenerFn__=h,z=!1;else{h=RR(o,n,P,h,!1);const re=t.listen(K,c,h);O.push(h,re),w&&w.push(c,N,q,q+1)}}else h=RR(o,n,P,h,!1);const A=o.outputs;let ne;if(z&&null!==A&&(ne=A[c])){const $=ne.length;if($)for(let K=0;K<$;K+=2){const ie=n[ne[K]][ne[K+1]].subscribe(h),De=O.length;O.push(h,ie),w&&w.push(c,o.index,De,-(De+1))}}}(h,c,c[11],p,e,n,0,o),_r}function PR(e,n,t,o){try{return!1!==t(o)}catch(c){return dR(e,c),!1}}function RR(e,n,t,o,c){return function h(p){if(p===Function)return o;iS(2&e.flags?vo(e.index,n):n);let y=PR(n,0,o,p),C=h.__ngNextListenerFn__;for(;C;)y=PR(n,0,C,p)&&y,C=C.__ngNextListenerFn__;return c&&!1===y&&(p.preventDefault(),p.returnValue=!1),y}}function Vf(e=1){return function jG(e){return(kt.lFrame.contextLView=function HG(e,n){for(;e>0;)n=n[15],e--;return n}(e,kt.lFrame.contextLView))[8]}(e)}function Yt(e,n=""){const t=Ue(),o=sn(),c=e+22,h=o.firstCreatePass?Al(o,c,1,n,null):o.data[c],p=t[c]=function u0(e,n){return e.createText(n)}(t[11],n);yg(o,t,p,h),Qs(h,!1)}function hc(e,n,t){const o=Ue(),c=function xl(e,n,t,o){return bi(e,dl(),t)?n+Mt(t)+o:Ot}(o,e,n,t);return c!==Ot&&Fa(o,Li(),c),hc}const jl="en-US";let Cx=jl;class gc{}class Qx{}class Yx extends gc{constructor(n,t){super(),this._parent=t,this._bootstrapComponents=[],this.destroyCbs=[],this.componentFactoryResolver=new aS(this);const o=go(n);this._bootstrapComponents=Pa(o.bootstrap),this._r3Injector=xP(n,t,[{provide:gc,useValue:this},{provide:Nf,useValue:this.componentFactoryResolver}],wn(n),new Set(["environment"])),this._r3Injector.resolveInjectorInitializers(),this.instance=this._r3Injector.get(n)}get injector(){return this._r3Injector}destroy(){const n=this._r3Injector;!n.destroyed&&n.destroy(),this.destroyCbs.forEach(t=>t()),this.destroyCbs=null}onDestroy(n){this.destroyCbs.push(n)}}class TS extends Qx{constructor(n){super(),this.moduleType=n}create(n){return new Yx(this.moduleType,n)}}class B9 extends gc{constructor(n,t,o){super(),this.componentFactoryResolver=new aS(this),this.instance=null;const c=new gP([...n,{provide:gc,useValue:this},{provide:Nf,useValue:this.componentFactoryResolver}],t||wg(),o,new Set(["environment"]));this.injector=c,c.resolveInjectorInitializers()}destroy(){this.injector.destroy()}onDestroy(n){this.injector.onDestroy(n)}}function Kg(e,n,t=null){return new B9(e,n,t).injector}let U9=(()=>{class e{constructor(t){this._injector=t,this.cachedInjectors=new Map}getOrCreateStandaloneInjector(t){if(!t.standalone)return null;if(!this.cachedInjectors.has(t.id)){const o=dP(0,t.type),c=o.length>0?Kg([o],this._injector,`Standalone[${t.type.name}]`):null;this.cachedInjectors.set(t.id,c)}return this.cachedInjectors.get(t.id)}ngOnDestroy(){try{for(const t of this.cachedInjectors.values())null!==t&&t.destroy()}finally{this.cachedInjectors.clear()}}}return e.\u0275prov=Ht({token:e,providedIn:"environment",factory:()=>new e(Tt(cu))}),e})();function Jx(e){e.getStandaloneInjector=n=>n.get(U9).getOrCreateStandaloneInjector(e)}function qf(e,n,t){const o=function Ni(){const e=kt.lFrame;let n=e.bindingRootIndex;return-1===n&&(n=e.bindingRootIndex=e.tView.bindingStartIndex),n}()+e,c=Ue();return c[o]===Ot?function Xs(e,n,t){return e[n]=t}(c,o,t?n.call(t):n()):function Uf(e,n){return e[n]}(c,o)}function bS(e){return n=>{setTimeout(e,void 0,n)}}const Ui=class dK extends Ks{constructor(n=!1){super(),this.__isAsync=n}emit(n){super.next(n)}subscribe(n,t,o){let c=n,h=t||(()=>null),p=o;if(n&&"object"==typeof n){const y=n;c=y.next?.bind(y),h=y.error?.bind(y),p=y.complete?.bind(y)}this.__isAsync&&(h=bS(h),c&&(c=bS(c)),p&&(p=bS(p)));const m=super.subscribe({next:c,error:h,complete:p});return n instanceof Fo&&n.add(m),m}};let ka=(()=>{class e{}return e.__NG_ELEMENT_ID__=gK,e})();const hK=ka,pK=class extends hK{constructor(n,t,o){super(),this._declarationLView=n,this._declarationTContainer=t,this.elementRef=o}createEmbeddedView(n,t){const o=this._declarationTContainer.tViews,c=Fg(this._declarationLView,o,n,16,null,o.declTNode,null,null,null,null,t||null);c[17]=this._declarationLView[this._declarationTContainer.index];const p=this._declarationLView[19];return null!==p&&(c[19]=p.createEmbeddedView(o)),J0(o,c,n),new Lf(c)}};function gK(){return function $g(e,n){return 4&e.type?new pK(n,e,bl(e,n)):null}(Ur(),Ue())}let Is=(()=>{class e{}return e.__NG_ELEMENT_ID__=mK,e})();function mK(){return function dF(e,n){let t;const o=n[e.index];if(hs(o))t=o;else{let c;if(8&e.type)c=Dr(o);else{const h=n[11];c=h.createComment("");const p=_o(e,n);uc(h,vg(h,p),c,function h6(e,n){return e.nextSibling(n)}(h,p),!1)}n[e.index]=t=aR(o,n,c,e),Mg(n,t)}return new cF(t,e,n)}(Ur(),Ue())}const _K=Is,cF=class extends _K{constructor(n,t,o){super(),this._lContainer=n,this._hostTNode=t,this._hostLView=o}get element(){return bl(this._hostTNode,this._hostLView)}get injector(){return new pl(this._hostTNode,this._hostLView)}get parentInjector(){const n=lg(this._hostTNode,this._hostLView);if(Z1(n)){const t=hl(n,this._hostLView),o=fl(n);return new pl(t[1].data[o+8],t)}return new pl(null,this._hostLView)}clear(){for(;this.length>0;)this.remove(this.length-1)}get(n){const t=lF(this._lContainer);return null!==t&&t[n]||null}get length(){return this._lContainer.length-10}createEmbeddedView(n,t,o){let c,h;"number"==typeof o?c=o:null!=o&&(c=o.index,h=o.injector);const p=n.createEmbeddedView(t||{},h);return this.insert(p,c),p}createComponent(n,t,o,c,h){const p=n&&!function If(e){return"function"==typeof e}(n);let m;if(p)m=t;else{const P=t||{};m=P.index,o=P.injector,c=P.projectableNodes,h=P.environmentInjector||P.ngModuleRef}const y=p?n:new Wf(Sn(n)),C=o||this.parentInjector;if(!h&&null==y.ngModule){const O=(p?C:this.parentInjector).get(cu,null);O&&(h=O)}const w=y.create(C,c,void 0,h);return this.insert(w.hostView,m),w}insert(n,t){const o=n._lView,c=o[1];if(function PG(e){return hs(e[3])}(o)){const w=this.indexOf(n);if(-1!==w)this.detach(w);else{const P=o[3],O=new cF(P,P[6],P[3]);O.detach(O.indexOf(n))}}const h=this._adjustIndex(t),p=this._lContainer;!function u6(e,n,t,o){const c=10+o,h=t.length;o>0&&(t[c-1][4]=n),o<h-10?(n[4]=t[c],lA(t,10+o,n)):(t.push(n),n[4]=null),n[3]=t;const p=n[17];null!==p&&t!==p&&function c6(e,n){const t=e[9];n[16]!==n[3][3][16]&&(e[2]=!0),null===t?e[9]=[n]:t.push(n)}(p,n);const m=n[19];null!==m&&m.insertView(e),n[2]|=64}(c,o,p,h);const m=h0(h,p),y=o[11],C=vg(y,p[7]);return null!==C&&function o6(e,n,t,o,c,h){o[0]=c,o[6]=n,Ff(e,o,t,1,c,h)}(c,p[6],y,o,C,m),n.attachToViewContainerRef(),lA(DS(p),h,n),n}move(n,t){return this.insert(n,t)}indexOf(n){const t=lF(this._lContainer);return null!==t?t.indexOf(n):-1}remove(n){const t=this._adjustIndex(n,-1),o=l0(this._lContainer,t);o&&(hg(DS(this._lContainer),t),WA(o[1],o))}detach(n){const t=this._adjustIndex(n,-1),o=l0(this._lContainer,t);return o&&null!=hg(DS(this._lContainer),t)?new Lf(o):null}_adjustIndex(n,t=0){return n??this.length+t}};function lF(e){return e[8]}function DS(e){return e[8]||(e[8]=[])}function Qg(...e){}const Yg=new At("Application Initializer");let Jg=(()=>{class e{constructor(t){this.appInits=t,this.resolve=Qg,this.reject=Qg,this.initialized=!1,this.done=!1,this.donePromise=new Promise((o,c)=>{this.resolve=o,this.reject=c})}runInitializers(){if(this.initialized)return;const t=[],o=()=>{this.done=!0,this.resolve()};if(this.appInits)for(let c=0;c<this.appInits.length;c++){const h=this.appInits[c]();if(Ug(h))t.push(h);else if(DR(h)){const p=new Promise((m,y)=>{h.subscribe({complete:m,error:y})});t.push(p)}}Promise.all(t).then(()=>{o()}).catch(c=>{this.reject(c)}),0===t.length&&o(),this.initialized=!0}}return e.\u0275fac=function(t){return new(t||e)(Tt(Yg,8))},e.\u0275prov=Ht({token:e,factory:e.\u0275fac,providedIn:"root"}),e})();const Xf=new At("AppId",{providedIn:"root",factory:function OF(){return`${BS()}${BS()}${BS()}`}});function BS(){return String.fromCharCode(97+Math.floor(25*Math.random()))}const NF=new At("Platform Initializer"),LF=new At("Platform ID",{providedIn:"platform",factory:()=>"unknown"}),WF=new At("appBootstrapListener");let $K=(()=>{class e{log(t){console.log(t)}warn(t){console.warn(t)}}return e.\u0275fac=function(t){return new(t||e)},e.\u0275prov=Ht({token:e,factory:e.\u0275fac,providedIn:"platform"}),e})();const Ma=new At("LocaleId",{providedIn:"root",factory:()=>mr(Ma,bt.Optional|bt.SkipSelf)||function qK(){return typeof $localize<"u"&&$localize.locale||jl}()});class YK{constructor(n,t){this.ngModuleFactory=n,this.componentFactories=t}}let US=(()=>{class e{compileModuleSync(t){return new TS(t)}compileModuleAsync(t){return Promise.resolve(this.compileModuleSync(t))}compileModuleAndAllComponentsSync(t){const o=this.compileModuleSync(t),h=Pa(go(t).declarations).reduce((p,m)=>{const y=Sn(m);return y&&p.push(new Wf(y)),p},[]);return new YK(o,h)}compileModuleAndAllComponentsAsync(t){return Promise.resolve(this.compileModuleAndAllComponentsSync(t))}clearCache(){}clearCacheFor(t){}getModuleId(t){}}return e.\u0275fac=function(t){return new(t||e)},e.\u0275prov=Ht({token:e,factory:e.\u0275fac,providedIn:"root"}),e})();const ZK=(()=>Promise.resolve(0))();function VS(e){typeof Zone>"u"?ZK.then(()=>{e&&e.apply(null,null)}):Zone.current.scheduleMicroTask("scheduleMicrotask",e)}class Hr{constructor({enableLongStackTrace:n=!1,shouldCoalesceEventChangeDetection:t=!1,shouldCoalesceRunChangeDetection:o=!1}){if(this.hasPendingMacrotasks=!1,this.hasPendingMicrotasks=!1,this.isStable=!0,this.onUnstable=new Ui(!1),this.onMicrotaskEmpty=new Ui(!1),this.onStable=new Ui(!1),this.onError=new Ui(!1),typeof Zone>"u")throw new ct(908,!1);Zone.assertZonePatched();const c=this;if(c._nesting=0,c._outer=c._inner=Zone.current,Zone.AsyncStackTaggingZoneSpec){const h=Zone.AsyncStackTaggingZoneSpec;c._inner=c._inner.fork(new h("Angular"))}Zone.TaskTrackingZoneSpec&&(c._inner=c._inner.fork(new Zone.TaskTrackingZoneSpec)),n&&Zone.longStackTraceZoneSpec&&(c._inner=c._inner.fork(Zone.longStackTraceZoneSpec)),c.shouldCoalesceEventChangeDetection=!o&&t,c.shouldCoalesceRunChangeDetection=o,c.lastRequestAnimationFrameId=-1,c.nativeRequestAnimationFrame=function e$(){let e=Pn.requestAnimationFrame,n=Pn.cancelAnimationFrame;if(typeof Zone<"u"&&e&&n){const t=e[Zone.__symbol__("OriginalDelegate")];t&&(e=t);const o=n[Zone.__symbol__("OriginalDelegate")];o&&(n=o)}return{nativeRequestAnimationFrame:e,nativeCancelAnimationFrame:n}}().nativeRequestAnimationFrame,function r$(e){const n=()=>{!function n$(e){e.isCheckStableRunning||-1!==e.lastRequestAnimationFrameId||(e.lastRequestAnimationFrameId=e.nativeRequestAnimationFrame.call(Pn,()=>{e.fakeTopEventTask||(e.fakeTopEventTask=Zone.root.scheduleEventTask("fakeTopEventTask",()=>{e.lastRequestAnimationFrameId=-1,HS(e),e.isCheckStableRunning=!0,jS(e),e.isCheckStableRunning=!1},void 0,()=>{},()=>{})),e.fakeTopEventTask.invoke()}),HS(e))}(e)};e._inner=e._inner.fork({name:"angular",properties:{isAngularZone:!0},onInvokeTask:(t,o,c,h,p,m)=>{try{return VF(e),t.invokeTask(c,h,p,m)}finally{(e.shouldCoalesceEventChangeDetection&&"eventTask"===h.type||e.shouldCoalesceRunChangeDetection)&&n(),jF(e)}},onInvoke:(t,o,c,h,p,m,y)=>{try{return VF(e),t.invoke(c,h,p,m,y)}finally{e.shouldCoalesceRunChangeDetection&&n(),jF(e)}},onHasTask:(t,o,c,h)=>{t.hasTask(c,h),o===c&&("microTask"==h.change?(e._hasPendingMicrotasks=h.microTask,HS(e),jS(e)):"macroTask"==h.change&&(e.hasPendingMacrotasks=h.macroTask))},onHandleError:(t,o,c,h)=>(t.handleError(c,h),e.runOutsideAngular(()=>e.onError.emit(h)),!1)})}(c)}static isInAngularZone(){return typeof Zone<"u"&&!0===Zone.current.get("isAngularZone")}static assertInAngularZone(){if(!Hr.isInAngularZone())throw new ct(909,!1)}static assertNotInAngularZone(){if(Hr.isInAngularZone())throw new ct(909,!1)}run(n,t,o){return this._inner.run(n,t,o)}runTask(n,t,o,c){const h=this._inner,p=h.scheduleEventTask("NgZoneEvent: "+c,n,t$,Qg,Qg);try{return h.runTask(p,t,o)}finally{h.cancelTask(p)}}runGuarded(n,t,o){return this._inner.runGuarded(n,t,o)}runOutsideAngular(n){return this._outer.run(n)}}const t$={};function jS(e){if(0==e._nesting&&!e.hasPendingMicrotasks&&!e.isStable)try{e._nesting++,e.onMicrotaskEmpty.emit(null)}finally{if(e._nesting--,!e.hasPendingMicrotasks)try{e.runOutsideAngular(()=>e.onStable.emit(null))}finally{e.isStable=!0}}}function HS(e){e.hasPendingMicrotasks=!!(e._hasPendingMicrotasks||(e.shouldCoalesceEventChangeDetection||e.shouldCoalesceRunChangeDetection)&&-1!==e.lastRequestAnimationFrameId)}function VF(e){e._nesting++,e.isStable&&(e.isStable=!1,e.onUnstable.emit(null))}function jF(e){e._nesting--,jS(e)}class i${constructor(){this.hasPendingMicrotasks=!1,this.hasPendingMacrotasks=!1,this.isStable=!0,this.onUnstable=new Ui,this.onMicrotaskEmpty=new Ui,this.onStable=new Ui,this.onError=new Ui}run(n,t,o){return n.apply(t,o)}runGuarded(n,t,o){return n.apply(t,o)}runOutsideAngular(n){return n()}runTask(n,t,o,c){return n.apply(t,o)}}const HF=new At(""),Xg=new At("");let KS,GS=(()=>{class e{constructor(t,o,c){this._ngZone=t,this.registry=o,this._pendingCount=0,this._isZoneStable=!0,this._didWork=!1,this._callbacks=[],this.taskTrackingZone=null,KS||(function o$(e){KS=e}(c),c.addToWindow(o)),this._watchAngularEvents(),t.run(()=>{this.taskTrackingZone=typeof Zone>"u"?null:Zone.current.get("TaskTrackingZone")})}_watchAngularEvents(){this._ngZone.onUnstable.subscribe({next:()=>{this._didWork=!0,this._isZoneStable=!1}}),this._ngZone.runOutsideAngular(()=>{this._ngZone.onStable.subscribe({next:()=>{Hr.assertNotInAngularZone(),VS(()=>{this._isZoneStable=!0,this._runCallbacksIfReady()})}})})}increasePendingRequestCount(){return this._pendingCount+=1,this._didWork=!0,this._pendingCount}decreasePendingRequestCount(){if(this._pendingCount-=1,this._pendingCount<0)throw new Error("pending async requests below zero");return this._runCallbacksIfReady(),this._pendingCount}isStable(){return this._isZoneStable&&0===this._pendingCount&&!this._ngZone.hasPendingMacrotasks}_runCallbacksIfReady(){if(this.isStable())VS(()=>{for(;0!==this._callbacks.length;){let t=this._callbacks.pop();clearTimeout(t.timeoutId),t.doneCb(this._didWork)}this._didWork=!1});else{let t=this.getPendingTasks();this._callbacks=this._callbacks.filter(o=>!o.updateCb||!o.updateCb(t)||(clearTimeout(o.timeoutId),!1)),this._didWork=!0}}getPendingTasks(){return this.taskTrackingZone?this.taskTrackingZone.macroTasks.map(t=>({source:t.source,creationLocation:t.creationLocation,data:t.data})):[]}addCallback(t,o,c){let h=-1;o&&o>0&&(h=setTimeout(()=>{this._callbacks=this._callbacks.filter(p=>p.timeoutId!==h),t(this._didWork,this.getPendingTasks())},o)),this._callbacks.push({doneCb:t,timeoutId:h,updateCb:c})}whenStable(t,o,c){if(c&&!this.taskTrackingZone)throw new Error('Task tracking zone is required when passing an update callback to whenStable(). Is "zone.js/plugins/task-tracking" loaded?');this.addCallback(t,o,c),this._runCallbacksIfReady()}getPendingRequestCount(){return this._pendingCount}registerApplication(t){this.registry.registerApplication(t,this)}unregisterApplication(t){this.registry.unregisterApplication(t)}findProviders(t,o,c){return[]}}return e.\u0275fac=function(t){return new(t||e)(Tt(Hr),Tt(zS),Tt(Xg))},e.\u0275prov=Ht({token:e,factory:e.\u0275fac}),e})(),zS=(()=>{class e{constructor(){this._applications=new Map}registerApplication(t,o){this._applications.set(t,o)}unregisterApplication(t){this._applications.delete(t)}unregisterAllApplications(){this._applications.clear()}getTestability(t){return this._applications.get(t)||null}getAllTestabilities(){return Array.from(this._applications.values())}getAllRootElements(){return Array.from(this._applications.keys())}findTestabilityInTree(t,o=!0){return KS?.findTestabilityInTree(this,t,o)??null}}return e.\u0275fac=function(t){return new(t||e)},e.\u0275prov=Ht({token:e,factory:e.\u0275fac,providedIn:"platform"}),e})(),hu=null;const GF=new At("AllowMultipleToken"),$S=new At("PlatformDestroyListeners");class zF{constructor(n,t){this.name=n,this.token=t}}function $F(e,n,t=[]){const o=`Platform: ${n}`,c=new At(o);return(h=[])=>{let p=qS();if(!p||p.injector.get(GF,!1)){const m=[...t,...h,{provide:c,useValue:!0}];e?e(m):function u$(e){if(hu&&!hu.get(GF,!1))throw new ct(400,!1);hu=e;const n=e.get(QF);(function KF(e){const n=e.get(NF,null);n&&n.forEach(t=>t())})(e)}(function qF(e=[],n){return ms.create({name:n,providers:[{provide:A0,useValue:"platform"},{provide:$S,useValue:new Set([()=>hu=null])},...e]})}(m,o))}return function l$(e){const n=qS();if(!n)throw new ct(401,!1);return n}()}}function qS(){return hu?.get(QF)??null}let QF=(()=>{class e{constructor(t){this._injector=t,this._modules=[],this._destroyListeners=[],this._destroyed=!1}bootstrapModuleFactory(t,o){const c=function JF(e,n){let t;return t="noop"===e?new i$:("zone.js"===e?void 0:e)||new Hr(n),t}(o?.ngZone,function YF(e){return{enableLongStackTrace:!1,shouldCoalesceEventChangeDetection:!(!e||!e.ngZoneEventCoalescing)||!1,shouldCoalesceRunChangeDetection:!(!e||!e.ngZoneRunCoalescing)||!1}}(o)),h=[{provide:Hr,useValue:c}];return c.run(()=>{const p=ms.create({providers:h,parent:this.injector,name:t.moduleType.name}),m=t.create(p),y=m.injector.get(wl,null);if(!y)throw new ct(402,!1);return c.runOutsideAngular(()=>{const C=c.onError.subscribe({next:w=>{y.handleError(w)}});m.onDestroy(()=>{em(this._modules,m),C.unsubscribe()})}),function XF(e,n,t){try{const o=t();return Ug(o)?o.catch(c=>{throw n.runOutsideAngular(()=>e.handleError(c)),c}):o}catch(o){throw n.runOutsideAngular(()=>e.handleError(o)),o}}(y,c,()=>{const C=m.injector.get(Jg);return C.runInitializers(),C.donePromise.then(()=>(function bx(e){po(e,"Expected localeId to be defined"),"string"==typeof e&&(Cx=e.toLowerCase().replace(/_/g,"-"))}(m.injector.get(Ma,jl)||jl),this._moduleDoBootstrap(m),m))})})}bootstrapModule(t,o=[]){const c=ZF({},o);return function s$(e,n,t){const o=new TS(t);return Promise.resolve(o)}(0,0,t).then(h=>this.bootstrapModuleFactory(h,c))}_moduleDoBootstrap(t){const o=t.injector.get(Zg);if(t._bootstrapComponents.length>0)t._bootstrapComponents.forEach(c=>o.bootstrap(c));else{if(!t.instance.ngDoBootstrap)throw new ct(403,!1);t.instance.ngDoBootstrap(o)}this._modules.push(t)}onDestroy(t){this._destroyListeners.push(t)}get injector(){return this._injector}destroy(){if(this._destroyed)throw new ct(404,!1);this._modules.slice().forEach(o=>o.destroy()),this._destroyListeners.forEach(o=>o());const t=this._injector.get($S,null);t&&(t.forEach(o=>o()),t.clear()),this._destroyed=!0}get destroyed(){return this._destroyed}}return e.\u0275fac=function(t){return new(t||e)(Tt(ms))},e.\u0275prov=Ht({token:e,factory:e.\u0275fac,providedIn:"platform"}),e})();function ZF(e,n){return Array.isArray(n)?n.reduce(ZF,e):{...e,...n}}let Zg=(()=>{class e{constructor(t,o,c){this._zone=t,this._injector=o,this._exceptionHandler=c,this._bootstrapListeners=[],this._views=[],this._runningTick=!1,this._stable=!0,this._destroyed=!1,this._destroyListeners=[],this.componentTypes=[],this.components=[],this._onMicrotaskEmptySubscription=this._zone.onMicrotaskEmpty.subscribe({next:()=>{this._zone.run(()=>{this.tick()})}});const h=new Wr(m=>{this._stable=this._zone.isStable&&!this._zone.hasPendingMacrotasks&&!this._zone.hasPendingMicrotasks,this._zone.runOutsideAngular(()=>{m.next(this._stable),m.complete()})}),p=new Wr(m=>{let y;this._zone.runOutsideAngular(()=>{y=this._zone.onStable.subscribe(()=>{Hr.assertNotInAngularZone(),VS(()=>{!this._stable&&!this._zone.hasPendingMacrotasks&&!this._zone.hasPendingMicrotasks&&(this._stable=!0,m.next(!0))})})});const C=this._zone.onUnstable.subscribe(()=>{Hr.assertInAngularZone(),this._stable&&(this._stable=!1,this._zone.runOutsideAngular(()=>{m.next(!1)}))});return()=>{y.unsubscribe(),C.unsubscribe()}});this.isStable=function JH(...e){const n=uf(e),t=function GH(e,n){return"number"==typeof fy(e)?e.pop():n}(e,1/0),o=e;return o.length?1===o.length?$s(o[0]):il(t)(Br(o,n)):Ia}(h,p.pipe(function XH(e={}){const{connector:n=(()=>new Ks),resetOnError:t=!0,resetOnComplete:o=!0,resetOnRefCountZero:c=!0}=e;return h=>{let p,m,y,C=0,w=!1,P=!1;const O=()=>{m?.unsubscribe(),m=void 0},z=()=>{O(),p=y=void 0,w=P=!1},A=()=>{const ne=p;z(),ne?.unsubscribe()};return Qr((ne,$)=>{C++,!P&&!w&&O();const K=y=y??n();$.add(()=>{C--,0===C&&!P&&!w&&(m=hy(A,c))}),K.subscribe($),!p&&C>0&&(p=new af({next:q=>K.next(q),error:q=>{P=!0,O(),m=hy(z,t,q),K.error(q)},complete:()=>{w=!0,O(),m=hy(z,o),K.complete()}}),$s(ne).subscribe(p))})(h)}}()))}get destroyed(){return this._destroyed}get injector(){return this._injector}bootstrap(t,o){const c=t instanceof _P;if(!this._injector.get(Jg).done)throw!c&&function sl(e){const n=Sn(e)||Mi(e)||Oi(e);return null!==n&&n.standalone}(t),new ct(405,false);let p;p=c?t:this._injector.get(Nf).resolveComponentFactory(t),this.componentTypes.push(p.componentType);const m=function a$(e){return e.isBoundToModule}(p)?void 0:this._injector.get(gc),C=p.create(ms.NULL,[],o||p.selector,m),w=C.location.nativeElement,P=C.injector.get(HF,null);return P?.registerApplication(w),C.onDestroy(()=>{this.detachView(C.hostView),em(this.components,C),P?.unregisterApplication(w)}),this._loadComponent(C),C}tick(){if(this._runningTick)throw new ct(101,!1);try{this._runningTick=!0;for(let t of this._views)t.detectChanges()}catch(t){this._zone.runOutsideAngular(()=>this._exceptionHandler.handleError(t))}finally{this._runningTick=!1}}attachView(t){const o=t;this._views.push(o),o.attachToAppRef(this)}detachView(t){const o=t;em(this._views,o),o.detachFromAppRef()}_loadComponent(t){this.attachView(t.hostView),this.tick(),this.components.push(t),this._injector.get(WF,[]).concat(this._bootstrapListeners).forEach(c=>c(t))}ngOnDestroy(){if(!this._destroyed)try{this._destroyListeners.forEach(t=>t()),this._views.slice().forEach(t=>t.destroy()),this._onMicrotaskEmptySubscription.unsubscribe()}finally{this._destroyed=!0,this._views=[],this._bootstrapListeners=[],this._destroyListeners=[]}}onDestroy(t){return this._destroyListeners.push(t),()=>em(this._destroyListeners,t)}destroy(){if(this._destroyed)throw new ct(406,!1);const t=this._injector;t.destroy&&!t.destroyed&&t.destroy()}get viewCount(){return this._views.length}warnIfDestroyed(){}}return e.\u0275fac=function(t){return new(t||e)(Tt(Hr),Tt(cu),Tt(wl))},e.\u0275prov=Ht({token:e,factory:e.\u0275fac,providedIn:"root"}),e})();function em(e,n){const t=e.indexOf(n);t>-1&&e.splice(t,1)}let tk=!0,QS=(()=>{class e{}return e.__NG_ELEMENT_ID__=h$,e})();function h$(e){return function p$(e,n,t){if(eg(e)&&!t){const o=vo(e.index,n);return new Lf(o,o)}return 47&e.type?new Lf(n[16],n):null}(Ur(),Ue(),16==(16&e))}class sk{constructor(){}supports(n){return Bf(n)}create(n){return new S$(n)}}const y$=(e,n)=>n;class S${constructor(n){this.length=0,this._linkedRecords=null,this._unlinkedRecords=null,this._previousItHead=null,this._itHead=null,this._itTail=null,this._additionsHead=null,this._additionsTail=null,this._movesHead=null,this._movesTail=null,this._removalsHead=null,this._removalsTail=null,this._identityChangesHead=null,this._identityChangesTail=null,this._trackByFn=n||y$}forEachItem(n){let t;for(t=this._itHead;null!==t;t=t._next)n(t)}forEachOperation(n){let t=this._itHead,o=this._removalsHead,c=0,h=null;for(;t||o;){const p=!o||t&&t.currentIndex<uk(o,c,h)?t:o,m=uk(p,c,h),y=p.currentIndex;if(p===o)c--,o=o._nextRemoved;else if(t=t._next,null==p.previousIndex)c++;else{h||(h=[]);const C=m-c,w=y-c;if(C!=w){for(let O=0;O<C;O++){const z=O<h.length?h[O]:h[O]=0,A=z+O;w<=A&&A<C&&(h[O]=z+1)}h[p.previousIndex]=w-C}}m!==y&&n(p,m,y)}}forEachPreviousItem(n){let t;for(t=this._previousItHead;null!==t;t=t._nextPrevious)n(t)}forEachAddedItem(n){let t;for(t=this._additionsHead;null!==t;t=t._nextAdded)n(t)}forEachMovedItem(n){let t;for(t=this._movesHead;null!==t;t=t._nextMoved)n(t)}forEachRemovedItem(n){let t;for(t=this._removalsHead;null!==t;t=t._nextRemoved)n(t)}forEachIdentityChange(n){let t;for(t=this._identityChangesHead;null!==t;t=t._nextIdentityChange)n(t)}diff(n){if(null==n&&(n=[]),!Bf(n))throw new ct(900,!1);return this.check(n)?this:null}onDestroy(){}check(n){this._reset();let c,h,p,t=this._itHead,o=!1;if(Array.isArray(n)){this.length=n.length;for(let m=0;m<this.length;m++)h=n[m],p=this._trackByFn(m,h),null!==t&&Object.is(t.trackById,p)?(o&&(t=this._verifyReinsertion(t,h,p,m)),Object.is(t.item,h)||this._addIdentityChange(t,h)):(t=this._mismatch(t,h,p,m),o=!0),t=t._next}else c=0,function jz(e,n){if(Array.isArray(e))for(let t=0;t<e.length;t++)n(e[t]);else{const t=e[dc()]();let o;for(;!(o=t.next()).done;)n(o.value)}}(n,m=>{p=this._trackByFn(c,m),null!==t&&Object.is(t.trackById,p)?(o&&(t=this._verifyReinsertion(t,m,p,c)),Object.is(t.item,m)||this._addIdentityChange(t,m)):(t=this._mismatch(t,m,p,c),o=!0),t=t._next,c++}),this.length=c;return this._truncate(t),this.collection=n,this.isDirty}get isDirty(){return null!==this._additionsHead||null!==this._movesHead||null!==this._removalsHead||null!==this._identityChangesHead}_reset(){if(this.isDirty){let n;for(n=this._previousItHead=this._itHead;null!==n;n=n._next)n._nextPrevious=n._next;for(n=this._additionsHead;null!==n;n=n._nextAdded)n.previousIndex=n.currentIndex;for(this._additionsHead=this._additionsTail=null,n=this._movesHead;null!==n;n=n._nextMoved)n.previousIndex=n.currentIndex;this._movesHead=this._movesTail=null,this._removalsHead=this._removalsTail=null,this._identityChangesHead=this._identityChangesTail=null}}_mismatch(n,t,o,c){let h;return null===n?h=this._itTail:(h=n._prev,this._remove(n)),null!==(n=null===this._unlinkedRecords?null:this._unlinkedRecords.get(o,null))?(Object.is(n.item,t)||this._addIdentityChange(n,t),this._reinsertAfter(n,h,c)):null!==(n=null===this._linkedRecords?null:this._linkedRecords.get(o,c))?(Object.is(n.item,t)||this._addIdentityChange(n,t),this._moveAfter(n,h,c)):n=this._addAfter(new I$(t,o),h,c),n}_verifyReinsertion(n,t,o,c){let h=null===this._unlinkedRecords?null:this._unlinkedRecords.get(o,null);return null!==h?n=this._reinsertAfter(h,n._prev,c):n.currentIndex!=c&&(n.currentIndex=c,this._addToMoves(n,c)),n}_truncate(n){for(;null!==n;){const t=n._next;this._addToRemovals(this._unlink(n)),n=t}null!==this._unlinkedRecords&&this._unlinkedRecords.clear(),null!==this._additionsTail&&(this._additionsTail._nextAdded=null),null!==this._movesTail&&(this._movesTail._nextMoved=null),null!==this._itTail&&(this._itTail._next=null),null!==this._removalsTail&&(this._removalsTail._nextRemoved=null),null!==this._identityChangesTail&&(this._identityChangesTail._nextIdentityChange=null)}_reinsertAfter(n,t,o){null!==this._unlinkedRecords&&this._unlinkedRecords.remove(n);const c=n._prevRemoved,h=n._nextRemoved;return null===c?this._removalsHead=h:c._nextRemoved=h,null===h?this._removalsTail=c:h._prevRemoved=c,this._insertAfter(n,t,o),this._addToMoves(n,o),n}_moveAfter(n,t,o){return this._unlink(n),this._insertAfter(n,t,o),this._addToMoves(n,o),n}_addAfter(n,t,o){return this._insertAfter(n,t,o),this._additionsTail=null===this._additionsTail?this._additionsHead=n:this._additionsTail._nextAdded=n,n}_insertAfter(n,t,o){const c=null===t?this._itHead:t._next;return n._next=c,n._prev=t,null===c?this._itTail=n:c._prev=n,null===t?this._itHead=n:t._next=n,null===this._linkedRecords&&(this._linkedRecords=new ak),this._linkedRecords.put(n),n.currentIndex=o,n}_remove(n){return this._addToRemovals(this._unlink(n))}_unlink(n){null!==this._linkedRecords&&this._linkedRecords.remove(n);const t=n._prev,o=n._next;return null===t?this._itHead=o:t._next=o,null===o?this._itTail=t:o._prev=t,n}_addToMoves(n,t){return n.previousIndex===t||(this._movesTail=null===this._movesTail?this._movesHead=n:this._movesTail._nextMoved=n),n}_addToRemovals(n){return null===this._unlinkedRecords&&(this._unlinkedRecords=new ak),this._unlinkedRecords.put(n),n.currentIndex=null,n._nextRemoved=null,null===this._removalsTail?(this._removalsTail=this._removalsHead=n,n._prevRemoved=null):(n._prevRemoved=this._removalsTail,this._removalsTail=this._removalsTail._nextRemoved=n),n}_addIdentityChange(n,t){return n.item=t,this._identityChangesTail=null===this._identityChangesTail?this._identityChangesHead=n:this._identityChangesTail._nextIdentityChange=n,n}}class I${constructor(n,t){this.item=n,this.trackById=t,this.currentIndex=null,this.previousIndex=null,this._nextPrevious=null,this._prev=null,this._next=null,this._prevDup=null,this._nextDup=null,this._prevRemoved=null,this._nextRemoved=null,this._nextAdded=null,this._nextMoved=null,this._nextIdentityChange=null}}class T${constructor(){this._head=null,this._tail=null}add(n){null===this._head?(this._head=this._tail=n,n._nextDup=null,n._prevDup=null):(this._tail._nextDup=n,n._prevDup=this._tail,n._nextDup=null,this._tail=n)}get(n,t){let o;for(o=this._head;null!==o;o=o._nextDup)if((null===t||t<=o.currentIndex)&&Object.is(o.trackById,n))return o;return null}remove(n){const t=n._prevDup,o=n._nextDup;return null===t?this._head=o:t._nextDup=o,null===o?this._tail=t:o._prevDup=t,null===this._head}}class ak{constructor(){this.map=new Map}put(n){const t=n.trackById;let o=this.map.get(t);o||(o=new T$,this.map.set(t,o)),o.add(n)}get(n,t){const c=this.map.get(n);return c?c.get(n,t):null}remove(n){const t=n.trackById;return this.map.get(t).remove(n)&&this.map.delete(t),n}get isEmpty(){return 0===this.map.size}clear(){this.map.clear()}}function uk(e,n,t){const o=e.previousIndex;if(null===o)return o;let c=0;return t&&o<t.length&&(c=t[o]),o+n+c}function lk(){return new rm([new sk])}let rm=(()=>{class e{constructor(t){this.factories=t}static create(t,o){if(null!=o){const c=o.factories.slice();t=t.concat(c)}return new e(t)}static extend(t){return{provide:e,useFactory:o=>e.create(t,o||lk()),deps:[[e,new Ef,new Df]]}}find(t){const o=this.factories.find(c=>c.supports(t));if(null!=o)return o;throw new ct(901,!1)}}return e.\u0275prov=Ht({token:e,providedIn:"root",factory:lk}),e})();const E$=$F(null,"core",[]);let A$=(()=>{class e{constructor(t){}}return e.\u0275fac=function(t){return new(t||e)(Tt(Zg))},e.\u0275mod=tc({type:e}),e.\u0275inj=ru({}),e})();function zl(e){return"boolean"==typeof e?e:null!=e&&"false"!==e}let im=null;function pu(){return im}const Xi=new At("DocumentToken");let eI=(()=>{class e{historyGo(t){throw new Error("Not implemented")}}return e.\u0275fac=function(t){return new(t||e)},e.\u0275prov=Ht({token:e,factory:function(){return function F$(){return Tt(fk)}()},providedIn:"platform"}),e})();const k$=new At("Location Initialized");let fk=(()=>{class e extends eI{constructor(t){super(),this._doc=t,this._init()}_init(){this.location=window.location,this._history=window.history}getBaseHrefFromDOM(){return pu().getBaseHref(this._doc)}onPopState(t){const o=pu().getGlobalEventTarget(this._doc,"window");return o.addEventListener("popstate",t,!1),()=>o.removeEventListener("popstate",t)}onHashChange(t){const o=pu().getGlobalEventTarget(this._doc,"window");return o.addEventListener("hashchange",t,!1),()=>o.removeEventListener("hashchange",t)}get href(){return this.location.href}get protocol(){return this.location.protocol}get hostname(){return this.location.hostname}get port(){return this.location.port}get pathname(){return this.location.pathname}get search(){return this.location.search}get hash(){return this.location.hash}set pathname(t){this.location.pathname=t}pushState(t,o,c){hk()?this._history.pushState(t,o,c):this.location.hash=c}replaceState(t,o,c){hk()?this._history.replaceState(t,o,c):this.location.hash=c}forward(){this._history.forward()}back(){this._history.back()}historyGo(t=0){this._history.go(t)}getState(){return this._history.state}}return e.\u0275fac=function(t){return new(t||e)(Tt(Xi))},e.\u0275prov=Ht({token:e,factory:function(){return function M$(){return new fk(Tt(Xi))}()},providedIn:"platform"}),e})();function hk(){return!!window.history.pushState}function tI(e,n){if(0==e.length)return n;if(0==n.length)return e;let t=0;return e.endsWith("/")&&t++,n.startsWith("/")&&t++,2==t?e+n.substring(1):1==t?e+n:e+"/"+n}function pk(e){const n=e.match(/#|\?|$/),t=n&&n.index||e.length;return e.slice(0,t-("/"===e[t-1]?1:0))+e.slice(t)}function Na(e){return e&&"?"!==e[0]?"?"+e:e}let _c=(()=>{class e{historyGo(t){throw new Error("Not implemented")}}return e.\u0275fac=function(t){return new(t||e)},e.\u0275prov=Ht({token:e,factory:function(){return mr(mk)},providedIn:"root"}),e})();const gk=new At("appBaseHref");let mk=(()=>{class e extends _c{constructor(t,o){super(),this._platformLocation=t,this._removeListenerFns=[],this._baseHref=o??this._platformLocation.getBaseHrefFromDOM()??mr(Xi).location?.origin??""}ngOnDestroy(){for(;this._removeListenerFns.length;)this._removeListenerFns.pop()()}onPopState(t){this._removeListenerFns.push(this._platformLocation.onPopState(t),this._platformLocation.onHashChange(t))}getBaseHref(){return this._baseHref}prepareExternalUrl(t){return tI(this._baseHref,t)}path(t=!1){const o=this._platformLocation.pathname+Na(this._platformLocation.search),c=this._platformLocation.hash;return c&&t?`${o}${c}`:o}pushState(t,o,c,h){const p=this.prepareExternalUrl(c+Na(h));this._platformLocation.pushState(t,o,p)}replaceState(t,o,c,h){const p=this.prepareExternalUrl(c+Na(h));this._platformLocation.replaceState(t,o,p)}forward(){this._platformLocation.forward()}back(){this._platformLocation.back()}getState(){return this._platformLocation.getState()}historyGo(t=0){this._platformLocation.historyGo?.(t)}}return e.\u0275fac=function(t){return new(t||e)(Tt(eI),Tt(gk,8))},e.\u0275prov=Ht({token:e,factory:e.\u0275fac,providedIn:"root"}),e})(),O$=(()=>{class e extends _c{constructor(t,o){super(),this._platformLocation=t,this._baseHref="",this._removeListenerFns=[],null!=o&&(this._baseHref=o)}ngOnDestroy(){for(;this._removeListenerFns.length;)this._removeListenerFns.pop()()}onPopState(t){this._removeListenerFns.push(this._platformLocation.onPopState(t),this._platformLocation.onHashChange(t))}getBaseHref(){return this._baseHref}path(t=!1){let o=this._platformLocation.hash;return null==o&&(o="#"),o.length>0?o.substring(1):o}prepareExternalUrl(t){const o=tI(this._baseHref,t);return o.length>0?"#"+o:o}pushState(t,o,c,h){let p=this.prepareExternalUrl(c+Na(h));0==p.length&&(p=this._platformLocation.pathname),this._platformLocation.pushState(t,o,p)}replaceState(t,o,c,h){let p=this.prepareExternalUrl(c+Na(h));0==p.length&&(p=this._platformLocation.pathname),this._platformLocation.replaceState(t,o,p)}forward(){this._platformLocation.forward()}back(){this._platformLocation.back()}getState(){return this._platformLocation.getState()}historyGo(t=0){this._platformLocation.historyGo?.(t)}}return e.\u0275fac=function(t){return new(t||e)(Tt(eI),Tt(gk,8))},e.\u0275prov=Ht({token:e,factory:e.\u0275fac}),e})(),nI=(()=>{class e{constructor(t){this._subject=new Ui,this._urlChangeListeners=[],this._urlChangeSubscription=null,this._locationStrategy=t;const o=this._locationStrategy.getBaseHref();this._baseHref=pk(_k(o)),this._locationStrategy.onPopState(c=>{this._subject.emit({url:this.path(!0),pop:!0,state:c.state,type:c.type})})}ngOnDestroy(){this._urlChangeSubscription?.unsubscribe(),this._urlChangeListeners=[]}path(t=!1){return this.normalize(this._locationStrategy.path(t))}getState(){return this._locationStrategy.getState()}isCurrentPathEqualTo(t,o=""){return this.path()==this.normalize(t+Na(o))}normalize(t){return e.stripTrailingSlash(function L$(e,n){return e&&n.startsWith(e)?n.substring(e.length):n}(this._baseHref,_k(t)))}prepareExternalUrl(t){return t&&"/"!==t[0]&&(t="/"+t),this._locationStrategy.prepareExternalUrl(t)}go(t,o="",c=null){this._locationStrategy.pushState(c,"",t,o),this._notifyUrlChangeListeners(this.prepareExternalUrl(t+Na(o)),c)}replaceState(t,o="",c=null){this._locationStrategy.replaceState(c,"",t,o),this._notifyUrlChangeListeners(this.prepareExternalUrl(t+Na(o)),c)}forward(){this._locationStrategy.forward()}back(){this._locationStrategy.back()}historyGo(t=0){this._locationStrategy.historyGo?.(t)}onUrlChange(t){return this._urlChangeListeners.push(t),this._urlChangeSubscription||(this._urlChangeSubscription=this.subscribe(o=>{this._notifyUrlChangeListeners(o.url,o.state)})),()=>{const o=this._urlChangeListeners.indexOf(t);this._urlChangeListeners.splice(o,1),0===this._urlChangeListeners.length&&(this._urlChangeSubscription?.unsubscribe(),this._urlChangeSubscription=null)}}_notifyUrlChangeListeners(t="",o){this._urlChangeListeners.forEach(c=>c(t,o))}subscribe(t,o,c){return this._subject.subscribe({next:t,error:o,complete:c})}}return e.normalizeQueryParams=Na,e.joinWithSlash=tI,e.stripTrailingSlash=pk,e.\u0275fac=function(t){return new(t||e)(Tt(_c))},e.\u0275prov=Ht({token:e,factory:function(){return function N$(){return new nI(Tt(_c))}()},providedIn:"root"}),e})();function _k(e){return e.replace(/\/index.html$/,"")}class Cq{constructor(n,t,o,c){this.$implicit=n,this.ngForOf=t,this.index=o,this.count=c}get first(){return 0===this.index}get last(){return this.index===this.count-1}get even(){return this.index%2==0}get odd(){return!this.even}}let Ak=(()=>{class e{constructor(t,o,c){this._viewContainer=t,this._template=o,this._differs=c,this._ngForOf=null,this._ngForOfDirty=!0,this._differ=null}set ngForOf(t){this._ngForOf=t,this._ngForOfDirty=!0}set ngForTrackBy(t){this._trackByFn=t}get ngForTrackBy(){return this._trackByFn}set ngForTemplate(t){t&&(this._template=t)}ngDoCheck(){if(this._ngForOfDirty){this._ngForOfDirty=!1;const t=this._ngForOf;!this._differ&&t&&(this._differ=this._differs.find(t).create(this.ngForTrackBy))}if(this._differ){const t=this._differ.diff(this._ngForOf);t&&this._applyChanges(t)}}_applyChanges(t){const o=this._viewContainer;t.forEachOperation((c,h,p)=>{if(null==c.previousIndex)o.createEmbeddedView(this._template,new Cq(c.item,this._ngForOf,-1,-1),null===p?void 0:p);else if(null==p)o.remove(null===h?void 0:h);else if(null!==h){const m=o.get(h);o.move(m,p),Pk(m,c)}});for(let c=0,h=o.length;c<h;c++){const m=o.get(c).context;m.index=c,m.count=h,m.ngForOf=this._ngForOf}t.forEachIdentityChange(c=>{Pk(o.get(c.currentIndex),c)})}static ngTemplateContextGuard(t,o){return!0}}return e.\u0275fac=function(t){return new(t||e)(_t(Is),_t(ka),_t(rm))},e.\u0275dir=Si({type:e,selectors:[["","ngFor","","ngForOf",""]],inputs:{ngForOf:"ngForOf",ngForTrackBy:"ngForTrackBy",ngForTemplate:"ngForTemplate"},standalone:!0}),e})();function Pk(e,n){e.context.$implicit=n.item}let Rk=(()=>{class e{constructor(t,o){this._viewContainer=t,this._context=new wq,this._thenTemplateRef=null,this._elseTemplateRef=null,this._thenViewRef=null,this._elseViewRef=null,this._thenTemplateRef=o}set ngIf(t){this._context.$implicit=this._context.ngIf=t,this._updateView()}set ngIfThen(t){xk("ngIfThen",t),this._thenTemplateRef=t,this._thenViewRef=null,this._updateView()}set ngIfElse(t){xk("ngIfElse",t),this._elseTemplateRef=t,this._elseViewRef=null,this._updateView()}_updateView(){this._context.$implicit?this._thenViewRef||(this._viewContainer.clear(),this._elseViewRef=null,this._thenTemplateRef&&(this._thenViewRef=this._viewContainer.createEmbeddedView(this._thenTemplateRef,this._context))):this._elseViewRef||(this._viewContainer.clear(),this._thenViewRef=null,this._elseTemplateRef&&(this._elseViewRef=this._viewContainer.createEmbeddedView(this._elseTemplateRef,this._context)))}static ngTemplateContextGuard(t,o){return!0}}return e.\u0275fac=function(t){return new(t||e)(_t(Is),_t(ka))},e.\u0275dir=Si({type:e,selectors:[["","ngIf",""]],inputs:{ngIf:"ngIf",ngIfThen:"ngIfThen",ngIfElse:"ngIfElse"},standalone:!0}),e})();class wq{constructor(){this.$implicit=null,this.ngIf=null}}function xk(e,n){if(n&&!n.createEmbeddedView)throw new Error(`${e} must be a TemplateRef, but received '${wn(n)}'.`)}let Xq=(()=>{class e{}return e.\u0275fac=function(t){return new(t||e)},e.\u0275mod=tc({type:e}),e.\u0275inj=ru({}),e})();let nQ=(()=>{class e{}return e.\u0275prov=Ht({token:e,providedIn:"root",factory:()=>new rQ(Tt(Xi),window)}),e})();class rQ{constructor(n,t){this.document=n,this.window=t,this.offset=()=>[0,0]}setOffset(n){this.offset=Array.isArray(n)?()=>n:n}getScrollPosition(){return this.supportsScrolling()?[this.window.pageXOffset,this.window.pageYOffset]:[0,0]}scrollToPosition(n){this.supportsScrolling()&&this.window.scrollTo(n[0],n[1])}scrollToAnchor(n){if(!this.supportsScrolling())return;const t=function iQ(e,n){const t=e.getElementById(n)||e.getElementsByName(n)[0];if(t)return t;if("function"==typeof e.createTreeWalker&&e.body&&(e.body.createShadowRoot||e.body.attachShadow)){const o=e.createTreeWalker(e.body,NodeFilter.SHOW_ELEMENT);let c=o.currentNode;for(;c;){const h=c.shadowRoot;if(h){const p=h.getElementById(n)||h.querySelector(`[name="${n}"]`);if(p)return p}c=o.nextNode()}}return null}(this.document,n);t&&(this.scrollToElement(t),t.focus())}setHistoryScrollRestoration(n){if(this.supportScrollRestoration()){const t=this.window.history;t&&t.scrollRestoration&&(t.scrollRestoration=n)}}scrollToElement(n){const t=n.getBoundingClientRect(),o=t.left+this.window.pageXOffset,c=t.top+this.window.pageYOffset,h=this.offset();this.window.scrollTo(o-h[0],c-h[1])}supportScrollRestoration(){try{if(!this.supportsScrolling())return!1;const n=Ok(this.window.history)||Ok(Object.getPrototypeOf(this.window.history));return!(!n||!n.writable&&!n.set)}catch{return!1}}supportsScrolling(){try{return!!this.window&&!!this.window.scrollTo&&"pageXOffset"in this.window}catch{return!1}}}function Ok(e){return Object.getOwnPropertyDescriptor(e,"scrollRestoration")}class vI extends class FQ extends class x${}{constructor(){super(...arguments),this.supportsDOMEvents=!0}}{static makeCurrent(){!function R$(e){im||(im=e)}(new vI)}onAndCancel(n,t,o){return n.addEventListener(t,o,!1),()=>{n.removeEventListener(t,o,!1)}}dispatchEvent(n,t){n.dispatchEvent(t)}remove(n){n.parentNode&&n.parentNode.removeChild(n)}createElement(n,t){return(t=t||this.getDefaultDocument()).createElement(n)}createHtmlDocument(){return document.implementation.createHTMLDocument("fakeTitle")}getDefaultDocument(){return document}isElementNode(n){return n.nodeType===Node.ELEMENT_NODE}isShadowRoot(n){return n instanceof DocumentFragment}getGlobalEventTarget(n,t){return"window"===t?window:"document"===t?n:"body"===t?n.body:null}getBaseHref(n){const t=function kQ(){return rh=rh||document.querySelector("base"),rh?rh.getAttribute("href"):null}();return null==t?null:function MQ(e){mm=mm||document.createElement("a"),mm.setAttribute("href",e);const n=mm.pathname;return"/"===n.charAt(0)?n:`/${n}`}(t)}resetBaseElement(){rh=null}getUserAgent(){return window.navigator.userAgent}getCookie(n){return function Sq(e,n){n=encodeURIComponent(n);for(const t of e.split(";")){const o=t.indexOf("="),[c,h]=-1==o?[t,""]:[t.slice(0,o),t.slice(o+1)];if(c.trim()===n)return decodeURIComponent(h)}return null}(document.cookie,n)}}let mm,rh=null;const Uk=new At("TRANSITION_ID"),NQ=[{provide:Yg,useFactory:function OQ(e,n,t){return()=>{t.get(Jg).donePromise.then(()=>{const o=pu(),c=n.querySelectorAll(`style[ng-transition="${e}"]`);for(let h=0;h<c.length;h++)o.remove(c[h])})}},deps:[Uk,Xi,ms],multi:!0}];let WQ=(()=>{class e{build(){return new XMLHttpRequest}}return e.\u0275fac=function(t){return new(t||e)},e.\u0275prov=Ht({token:e,factory:e.\u0275fac}),e})();const _m=new At("EventManagerPlugins");let vm=(()=>{class e{constructor(t,o){this._zone=o,this._eventNameToPlugin=new Map,t.forEach(c=>c.manager=this),this._plugins=t.slice().reverse()}addEventListener(t,o,c){return this._findPluginFor(o).addEventListener(t,o,c)}addGlobalEventListener(t,o,c){return this._findPluginFor(o).addGlobalEventListener(t,o,c)}getZone(){return this._zone}_findPluginFor(t){const o=this._eventNameToPlugin.get(t);if(o)return o;const c=this._plugins;for(let h=0;h<c.length;h++){const p=c[h];if(p.supports(t))return this._eventNameToPlugin.set(t,p),p}throw new Error(`No event manager plugin found for event ${t}`)}}return e.\u0275fac=function(t){return new(t||e)(Tt(_m),Tt(Hr))},e.\u0275prov=Ht({token:e,factory:e.\u0275fac}),e})();class Vk{constructor(n){this._doc=n}addGlobalEventListener(n,t,o){const c=pu().getGlobalEventTarget(this._doc,n);if(!c)throw new Error(`Unsupported event target ${c} for event ${t}`);return this.addEventListener(c,t,o)}}let jk=(()=>{class e{constructor(){this._stylesSet=new Set}addStyles(t){const o=new Set;t.forEach(c=>{this._stylesSet.has(c)||(this._stylesSet.add(c),o.add(c))}),this.onStylesAdded(o)}onStylesAdded(t){}getAllStyles(){return Array.from(this._stylesSet)}}return e.\u0275fac=function(t){return new(t||e)},e.\u0275prov=Ht({token:e,factory:e.\u0275fac}),e})(),ih=(()=>{class e extends jk{constructor(t){super(),this._doc=t,this._hostNodes=new Map,this._hostNodes.set(t.head,[])}_addStylesToHost(t,o,c){t.forEach(h=>{const p=this._doc.createElement("style");p.textContent=h,c.push(o.appendChild(p))})}addHost(t){const o=[];this._addStylesToHost(this._stylesSet,t,o),this._hostNodes.set(t,o)}removeHost(t){const o=this._hostNodes.get(t);o&&o.forEach(Hk),this._hostNodes.delete(t)}onStylesAdded(t){this._hostNodes.forEach((o,c)=>{this._addStylesToHost(t,c,o)})}ngOnDestroy(){this._hostNodes.forEach(t=>t.forEach(Hk))}}return e.\u0275fac=function(t){return new(t||e)(Tt(Xi))},e.\u0275prov=Ht({token:e,factory:e.\u0275fac}),e})();function Hk(e){pu().remove(e)}const yI={svg:"http://www.w3.org/2000/svg",xhtml:"http://www.w3.org/1999/xhtml",xlink:"http://www.w3.org/1999/xlink",xml:"http://www.w3.org/XML/1998/namespace",xmlns:"http://www.w3.org/2000/xmlns/",math:"http://www.w3.org/1998/MathML/"},SI=/%COMP%/g;function ym(e,n,t){for(let o=0;o<n.length;o++){let c=n[o];Array.isArray(c)?ym(e,c,t):(c=c.replace(SI,e),t.push(c))}return t}function Kk(e){return n=>{if("__ngUnwrap__"===n)return e;!1===e(n)&&(n.preventDefault(),n.returnValue=!1)}}let II=(()=>{class e{constructor(t,o,c){this.eventManager=t,this.sharedStylesHost=o,this.appId=c,this.rendererByCompId=new Map,this.defaultRenderer=new TI(t)}createRenderer(t,o){if(!t||!o)return this.defaultRenderer;switch(o.encapsulation){case qs.Emulated:{let c=this.rendererByCompId.get(o.id);return c||(c=new GQ(this.eventManager,this.sharedStylesHost,o,this.appId),this.rendererByCompId.set(o.id,c)),c.applyToHost(t),c}case 1:case qs.ShadowDom:return new zQ(this.eventManager,this.sharedStylesHost,t,o);default:if(!this.rendererByCompId.has(o.id)){const c=ym(o.id,o.styles,[]);this.sharedStylesHost.addStyles(c),this.rendererByCompId.set(o.id,this.defaultRenderer)}return this.defaultRenderer}}begin(){}end(){}}return e.\u0275fac=function(t){return new(t||e)(Tt(vm),Tt(ih),Tt(Xf))},e.\u0275prov=Ht({token:e,factory:e.\u0275fac}),e})();class TI{constructor(n){this.eventManager=n,this.data=Object.create(null),this.destroyNode=null}destroy(){}createElement(n,t){return t?document.createElementNS(yI[t]||t,n):document.createElement(n)}createComment(n){return document.createComment(n)}createText(n){return document.createTextNode(n)}appendChild(n,t){(qk(n)?n.content:n).appendChild(t)}insertBefore(n,t,o){n&&(qk(n)?n.content:n).insertBefore(t,o)}removeChild(n,t){n&&n.removeChild(t)}selectRootElement(n,t){let o="string"==typeof n?document.querySelector(n):n;if(!o)throw new Error(`The selector "${n}" did not match any elements`);return t||(o.textContent=""),o}parentNode(n){return n.parentNode}nextSibling(n){return n.nextSibling}setAttribute(n,t,o,c){if(c){t=c+":"+t;const h=yI[c];h?n.setAttributeNS(h,t,o):n.setAttribute(t,o)}else n.setAttribute(t,o)}removeAttribute(n,t,o){if(o){const c=yI[o];c?n.removeAttributeNS(c,t):n.removeAttribute(`${o}:${t}`)}else n.removeAttribute(t)}addClass(n,t){n.classList.add(t)}removeClass(n,t){n.classList.remove(t)}setStyle(n,t,o,c){c&(Ji.DashCase|Ji.Important)?n.style.setProperty(t,o,c&Ji.Important?"important":""):n.style[t]=o}removeStyle(n,t,o){o&Ji.DashCase?n.style.removeProperty(t):n.style[t]=""}setProperty(n,t,o){n[t]=o}setValue(n,t){n.nodeValue=t}listen(n,t,o){return"string"==typeof n?this.eventManager.addGlobalEventListener(n,t,Kk(o)):this.eventManager.addEventListener(n,t,Kk(o))}}function qk(e){return"TEMPLATE"===e.tagName&&void 0!==e.content}class GQ extends TI{constructor(n,t,o,c){super(n),this.component=o;const h=ym(c+"-"+o.id,o.styles,[]);t.addStyles(h),this.contentAttr=function VQ(e){return"_ngcontent-%COMP%".replace(SI,e)}(c+"-"+o.id),this.hostAttr=function jQ(e){return"_nghost-%COMP%".replace(SI,e)}(c+"-"+o.id)}applyToHost(n){super.setAttribute(n,this.hostAttr,"")}createElement(n,t){const o=super.createElement(n,t);return super.setAttribute(o,this.contentAttr,""),o}}class zQ extends TI{constructor(n,t,o,c){super(n),this.sharedStylesHost=t,this.hostEl=o,this.shadowRoot=o.attachShadow({mode:"open"}),this.sharedStylesHost.addHost(this.shadowRoot);const h=ym(c.id,c.styles,[]);for(let p=0;p<h.length;p++){const m=document.createElement("style");m.textContent=h[p],this.shadowRoot.appendChild(m)}}nodeOrShadowRoot(n){return n===this.hostEl?this.shadowRoot:n}destroy(){this.sharedStylesHost.removeHost(this.shadowRoot)}appendChild(n,t){return super.appendChild(this.nodeOrShadowRoot(n),t)}insertBefore(n,t,o){return super.insertBefore(this.nodeOrShadowRoot(n),t,o)}removeChild(n,t){return super.removeChild(this.nodeOrShadowRoot(n),t)}parentNode(n){return this.nodeOrShadowRoot(super.parentNode(this.nodeOrShadowRoot(n)))}}let KQ=(()=>{class e extends Vk{constructor(t){super(t)}supports(t){return!0}addEventListener(t,o,c){return t.addEventListener(o,c,!1),()=>this.removeEventListener(t,o,c)}removeEventListener(t,o,c){return t.removeEventListener(o,c)}}return e.\u0275fac=function(t){return new(t||e)(Tt(Xi))},e.\u0275prov=Ht({token:e,factory:e.\u0275fac}),e})();const Qk=["alt","control","meta","shift"],$Q={"\b":"Backspace","\t":"Tab","\x7f":"Delete","\x1b":"Escape",Del:"Delete",Esc:"Escape",Left:"ArrowLeft",Right:"ArrowRight",Up:"ArrowUp",Down:"ArrowDown",Menu:"ContextMenu",Scroll:"ScrollLock",Win:"OS"},qQ={alt:e=>e.altKey,control:e=>e.ctrlKey,meta:e=>e.metaKey,shift:e=>e.shiftKey};let QQ=(()=>{class e extends Vk{constructor(t){super(t)}supports(t){return null!=e.parseEventName(t)}addEventListener(t,o,c){const h=e.parseEventName(o),p=e.eventCallback(h.fullKey,c,this.manager.getZone());return this.manager.getZone().runOutsideAngular(()=>pu().onAndCancel(t,h.domEventName,p))}static parseEventName(t){const o=t.toLowerCase().split("."),c=o.shift();if(0===o.length||"keydown"!==c&&"keyup"!==c)return null;const h=e._normalizeKey(o.pop());let p="",m=o.indexOf("code");if(m>-1&&(o.splice(m,1),p="code."),Qk.forEach(C=>{const w=o.indexOf(C);w>-1&&(o.splice(w,1),p+=C+".")}),p+=h,0!=o.length||0===h.length)return null;const y={};return y.domEventName=c,y.fullKey=p,y}static matchEventFullKeyCode(t,o){let c=$Q[t.key]||t.key,h="";return o.indexOf("code.")>-1&&(c=t.code,h="code."),!(null==c||!c)&&(c=c.toLowerCase()," "===c?c="space":"."===c&&(c="dot"),Qk.forEach(p=>{p!==c&&(0,qQ[p])(t)&&(h+=p+".")}),h+=c,h===o)}static eventCallback(t,o,c){return h=>{e.matchEventFullKeyCode(h,t)&&c.runGuarded(()=>o(h))}}static _normalizeKey(t){return"esc"===t?"escape":t}}return e.\u0275fac=function(t){return new(t||e)(Tt(Xi))},e.\u0275prov=Ht({token:e,factory:e.\u0275fac}),e})();const Jk=[{provide:LF,useValue:"browser"},{provide:NF,useValue:function YQ(){vI.makeCurrent()},multi:!0},{provide:Xi,useFactory:function XQ(){return function S6(e){v0=e}(document),document},deps:[]}],ZQ=$F(E$,"browser",Jk),Xk=new At(""),Zk=[{provide:Xg,useClass:class LQ{addToWindow(n){Pn.getAngularTestability=(o,c=!0)=>{const h=n.findTestabilityInTree(o,c);if(null==h)throw new Error("Could not find testability for element.");return h},Pn.getAllAngularTestabilities=()=>n.getAllTestabilities(),Pn.getAllAngularRootElements=()=>n.getAllRootElements(),Pn.frameworkStabilizers||(Pn.frameworkStabilizers=[]),Pn.frameworkStabilizers.push(o=>{const c=Pn.getAllAngularTestabilities();let h=c.length,p=!1;const m=function(y){p=p||y,h--,0==h&&o(p)};c.forEach(function(y){y.whenStable(m)})})}findTestabilityInTree(n,t,o){return null==t?null:n.getTestability(t)??(o?pu().isShadowRoot(t)?this.findTestabilityInTree(n,t.host,!0):this.findTestabilityInTree(n,t.parentElement,!0):null)}},deps:[]},{provide:HF,useClass:GS,deps:[Hr,zS,Xg]},{provide:GS,useClass:GS,deps:[Hr,zS,Xg]}],eM=[{provide:A0,useValue:"root"},{provide:wl,useFactory:function JQ(){return new wl},deps:[]},{provide:_m,useClass:KQ,multi:!0,deps:[Xi,Hr,LF]},{provide:_m,useClass:QQ,multi:!0,deps:[Xi]},{provide:II,useClass:II,deps:[vm,ih,Xf]},{provide:yP,useExisting:II},{provide:jk,useExisting:ih},{provide:ih,useClass:ih,deps:[Xi]},{provide:vm,useClass:vm,deps:[_m,Hr]},{provide:class oQ{},useClass:WQ,deps:[]},[]];let eY=(()=>{class e{constructor(t){}static withServerTransition(t){return{ngModule:e,providers:[{provide:Xf,useValue:t.appId},{provide:Uk,useExisting:Xf},NQ]}}}return e.\u0275fac=function(t){return new(t||e)(Tt(Xk,12))},e.\u0275mod=tc({type:e}),e.\u0275inj=ru({providers:[...eM,...Zk],imports:[Xq,A$]}),e})(),tM=(()=>{class e{constructor(t){this._doc=t}getTitle(){return this._doc.title}setTitle(t){this._doc.title=t||""}}return e.\u0275fac=function(t){return new(t||e)(Tt(Xi))},e.\u0275prov=Ht({token:e,factory:function(t){let o=null;return o=t?new t:function nY(){return new tM(Tt(Xi))}(),o},providedIn:"root"}),e})();function It(...e){return Br(e,uf(e))}typeof window<"u"&&window;class ws extends Ks{constructor(n){super(),this._value=n}get value(){return this.getValue()}_subscribe(n){const t=super._subscribe(n);return!t.closed&&n.next(this._value),t}getValue(){const{hasError:n,thrownError:t,_value:o}=this;if(n)throw t;return this._throwIfClosed(),o}next(n){super.next(this._value=n)}}const Sm=iy(e=>function(){e(this),this.name="EmptyError",this.message="no elements in sequence"}),{isArray:lY}=Array,{getPrototypeOf:dY,prototype:fY,keys:hY}=Object;const{isArray:mY}=Array;function iM(...e){const n=uf(e),t=function HH(e){return Ln(fy(e))?e.pop():void 0}(e),{args:o,keys:c}=function pY(e){if(1===e.length){const n=e[0];if(lY(n))return{args:n,keys:null};if(function gY(e){return e&&"object"==typeof e&&dY(e)===fY}(n)){const t=hY(n);return{args:t.map(o=>n[o]),keys:t}}}return{args:e,keys:null}}(e);if(0===o.length)return Br([],n);const h=new Wr(function SY(e,n,t=ec){return o=>{oM(n,()=>{const{length:c}=e,h=new Array(c);let p=c,m=c;for(let y=0;y<c;y++)oM(n,()=>{const C=Br(e[y],n);let w=!1;C.subscribe(Yr(o,P=>{h[y]=P,w||(w=!0,m--),m||o.next(t(h.slice()))},()=>{--p||o.complete()}))},o)},o)}}(o,n,c?p=>function yY(e,n){return e.reduce((t,o,c)=>(t[o]=n[c],t),{})}(c,p):ec));return t?h.pipe(function vY(e){return cn(n=>function _Y(e,n){return mY(n)?e(...n):e(n)}(e,n))}(t)):h}function oM(e,n,t){e?Sa(t,e,n):n()}function wI(...e){return function IY(){return il(1)}()(Br(e,uf(e)))}function sM(e){return new Wr(n=>{$s(e()).subscribe(n)})}function oh(e,n){const t=Ln(e)?e:()=>e,o=c=>c.error(t());return new Wr(n?c=>n.schedule(o,0,c):o)}function DI(){return Qr((e,n)=>{let t=null;e._refCount++;const o=Yr(n,void 0,void 0,void 0,()=>{if(!e||e._refCount<=0||0<--e._refCount)return void(t=null);const c=e._connection,h=t;t=null,c&&(!h||c===h)&&c.unsubscribe(),n.unsubscribe()});e.subscribe(o),o.closed||(t=e.connect())})}class aM extends Wr{constructor(n,t){super(),this.source=n,this.subjectFactory=t,this._subject=null,this._refCount=0,this._connection=null,c1(n)&&(this.lift=n.lift)}_subscribe(n){return this.getSubject().subscribe(n)}getSubject(){const n=this._subject;return(!n||n.isStopped)&&(this._subject=this.subjectFactory()),this._subject}_teardown(){this._refCount=0;const{_connection:n}=this;this._subject=this._connection=null,n?.unsubscribe()}connect(){let n=this._connection;if(!n){n=this._connection=new Fo;const t=this.getSubject();n.add(this.source.subscribe(Yr(t,void 0,()=>{this._teardown(),t.complete()},o=>{this._teardown(),t.error(o)},()=>this._teardown()))),n.closed&&(this._connection=null,n=Fo.EMPTY)}return n}refCount(){return DI()(this)}}function ta(e,n){return Qr((t,o)=>{let c=null,h=0,p=!1;const m=()=>p&&!c&&o.complete();t.subscribe(Yr(o,y=>{c?.unsubscribe();let C=0;const w=h++;$s(e(y,w)).subscribe(c=Yr(o,P=>o.next(n?n(y,P,w,C++):P),()=>{c=null,m()}))},()=>{p=!0,m()}))})}function sh(e){return e<=0?()=>Ia:Qr((n,t)=>{let o=0;n.subscribe(Yr(t,c=>{++o<=e&&(t.next(c),e<=o&&t.complete())}))})}function mu(e,n){return Qr((t,o)=>{let c=0;t.subscribe(Yr(o,h=>e.call(n,h,c++)&&o.next(h)))})}function Im(e){return Qr((n,t)=>{let o=!1;n.subscribe(Yr(t,c=>{o=!0,t.next(c)},()=>{o||t.next(e),t.complete()}))})}function uM(e=CY){return Qr((n,t)=>{let o=!1;n.subscribe(Yr(t,c=>{o=!0,t.next(c)},()=>o?t.complete():t.error(e())))})}function CY(){return new Sm}function _u(e,n){const t=arguments.length>=2;return o=>o.pipe(e?mu((c,h)=>e(c,h,o)):ec,sh(1),t?Im(n):uM(()=>new Sm))}function vc(e,n){return Ln(n)?oi(e,n,1):oi(e,1)}function wi(e,n,t){const o=Ln(e)||n||t?{next:e,error:n,complete:t}:e;return o?Qr((c,h)=>{var p;null===(p=o.subscribe)||void 0===p||p.call(o);let m=!0;c.subscribe(Yr(h,y=>{var C;null===(C=o.next)||void 0===C||C.call(o,y),h.next(y)},()=>{var y;m=!1,null===(y=o.complete)||void 0===y||y.call(o),h.complete()},y=>{var C;m=!1,null===(C=o.error)||void 0===C||C.call(o,y),h.error(y)},()=>{var y,C;m&&(null===(y=o.unsubscribe)||void 0===y||y.call(o)),null===(C=o.finalize)||void 0===C||C.call(o)}))}):ec}function vu(e){return Qr((n,t)=>{let h,o=null,c=!1;o=n.subscribe(Yr(t,void 0,void 0,p=>{h=$s(e(p,vu(e)(n))),o?(o.unsubscribe(),o=null,h.subscribe(t)):c=!0})),c&&(o.unsubscribe(),o=null,h.subscribe(t))})}function bY(e,n,t,o,c){return(h,p)=>{let m=t,y=n,C=0;h.subscribe(Yr(p,w=>{const P=C++;y=m?e(y,w,P):(m=!0,w),o&&p.next(y)},c&&(()=>{m&&p.next(y),p.complete()})))}}function cM(e,n){return Qr(bY(e,n,arguments.length>=2,!0))}function EI(e){return e<=0?()=>Ia:Qr((n,t)=>{let o=[];n.subscribe(Yr(t,c=>{o.push(c),e<o.length&&o.shift()},()=>{for(const c of o)t.next(c);t.complete()},void 0,()=>{o=null}))})}function lM(e,n){const t=arguments.length>=2;return o=>o.pipe(e?mu((c,h)=>e(c,h,o)):ec,EI(1),t?Im(n):uM(()=>new Sm))}function AI(e){return Qr((n,t)=>{try{n.subscribe(t)}finally{t.add(e)}})}const qt="primary",ah=Symbol("RouteTitle");class EY{constructor(n){this.params=n||{}}has(n){return Object.prototype.hasOwnProperty.call(this.params,n)}get(n){if(this.has(n)){const t=this.params[n];return Array.isArray(t)?t[0]:t}return null}getAll(n){if(this.has(n)){const t=this.params[n];return Array.isArray(t)?t:[t]}return[]}get keys(){return Object.keys(this.params)}}function Kl(e){return new EY(e)}function AY(e,n,t){const o=t.path.split("/");if(o.length>e.length||"full"===t.pathMatch&&(n.hasChildren()||o.length<e.length))return null;const c={};for(let h=0;h<o.length;h++){const p=o[h],m=e[h];if(p.startsWith(":"))c[p.substring(1)]=m;else if(p!==m.path)return null}return{consumed:e.slice(0,o.length),posParams:c}}function na(e,n){const t=e?Object.keys(e):void 0,o=n?Object.keys(n):void 0;if(!t||!o||t.length!=o.length)return!1;let c;for(let h=0;h<t.length;h++)if(c=t[h],!dM(e[c],n[c]))return!1;return!0}function dM(e,n){if(Array.isArray(e)&&Array.isArray(n)){if(e.length!==n.length)return!1;const t=[...e].sort(),o=[...n].sort();return t.every((c,h)=>o[h]===c)}return e===n}function fM(e){return Array.prototype.concat.apply([],e)}function hM(e){return e.length>0?e[e.length-1]:null}function si(e,n){for(const t in e)e.hasOwnProperty(t)&&n(e[t],t)}function yu(e){return DR(e)?e:Ug(e)?Br(Promise.resolve(e)):It(e)}const xY={exact:function mM(e,n,t){if(!Sc(e.segments,n.segments)||!Tm(e.segments,n.segments,t)||e.numberOfChildren!==n.numberOfChildren)return!1;for(const o in n.children)if(!e.children[o]||!mM(e.children[o],n.children[o],t))return!1;return!0},subset:_M},pM={exact:function FY(e,n){return na(e,n)},subset:function kY(e,n){return Object.keys(n).length<=Object.keys(e).length&&Object.keys(n).every(t=>dM(e[t],n[t]))},ignored:()=>!0};function gM(e,n,t){return xY[t.paths](e.root,n.root,t.matrixParams)&&pM[t.queryParams](e.queryParams,n.queryParams)&&!("exact"===t.fragment&&e.fragment!==n.fragment)}function _M(e,n,t){return vM(e,n,n.segments,t)}function vM(e,n,t,o){if(e.segments.length>t.length){const c=e.segments.slice(0,t.length);return!(!Sc(c,t)||n.hasChildren()||!Tm(c,t,o))}if(e.segments.length===t.length){if(!Sc(e.segments,t)||!Tm(e.segments,t,o))return!1;for(const c in n.children)if(!e.children[c]||!_M(e.children[c],n.children[c],o))return!1;return!0}{const c=t.slice(0,e.segments.length),h=t.slice(e.segments.length);return!!(Sc(e.segments,c)&&Tm(e.segments,c,o)&&e.children[qt])&&vM(e.children[qt],n,h,o)}}function Tm(e,n,t){return n.every((o,c)=>pM[t](e[c].parameters,o.parameters))}class yc{constructor(n,t,o){this.root=n,this.queryParams=t,this.fragment=o}get queryParamMap(){return this._queryParamMap||(this._queryParamMap=Kl(this.queryParams)),this._queryParamMap}toString(){return NY.serialize(this)}}class Jt{constructor(n,t){this.segments=n,this.children=t,this.parent=null,si(t,(o,c)=>o.parent=this)}hasChildren(){return this.numberOfChildren>0}get numberOfChildren(){return Object.keys(this.children).length}toString(){return Cm(this)}}class uh{constructor(n,t){this.path=n,this.parameters=t}get parameterMap(){return this._parameterMap||(this._parameterMap=Kl(this.parameters)),this._parameterMap}toString(){return TM(this)}}function Sc(e,n){return e.length===n.length&&e.every((t,o)=>t.path===n[o].path)}let yM=(()=>{class e{}return e.\u0275fac=function(t){return new(t||e)},e.\u0275prov=Ht({token:e,factory:function(){return new RI},providedIn:"root"}),e})();class RI{parse(n){const t=new zY(n);return new yc(t.parseRootSegment(),t.parseQueryParams(),t.parseFragment())}serialize(n){const t=`/${ch(n.root,!0)}`,o=function BY(e){const n=Object.keys(e).map(t=>{const o=e[t];return Array.isArray(o)?o.map(c=>`${bm(t)}=${bm(c)}`).join("&"):`${bm(t)}=${bm(o)}`}).filter(t=>!!t);return n.length?`?${n.join("&")}`:""}(n.queryParams);return`${t}${o}${"string"==typeof n.fragment?`#${function LY(e){return encodeURI(e)}(n.fragment)}`:""}`}}const NY=new RI;function Cm(e){return e.segments.map(n=>TM(n)).join("/")}function ch(e,n){if(!e.hasChildren())return Cm(e);if(n){const t=e.children[qt]?ch(e.children[qt],!1):"",o=[];return si(e.children,(c,h)=>{h!==qt&&o.push(`${h}:${ch(c,!1)}`)}),o.length>0?`${t}(${o.join("//")})`:t}{const t=function OY(e,n){let t=[];return si(e.children,(o,c)=>{c===qt&&(t=t.concat(n(o,c)))}),si(e.children,(o,c)=>{c!==qt&&(t=t.concat(n(o,c)))}),t}(e,(o,c)=>c===qt?[ch(e.children[qt],!1)]:[`${c}:${ch(o,!1)}`]);return 1===Object.keys(e.children).length&&null!=e.children[qt]?`${Cm(e)}/${t[0]}`:`${Cm(e)}/(${t.join("//")})`}}function SM(e){return encodeURIComponent(e).replace(/%40/g,"@").replace(/%3A/gi,":").replace(/%24/g,"$").replace(/%2C/gi,",")}function bm(e){return SM(e).replace(/%3B/gi,";")}function xI(e){return SM(e).replace(/\(/g,"%28").replace(/\)/g,"%29").replace(/%26/gi,"&")}function wm(e){return decodeURIComponent(e)}function IM(e){return wm(e.replace(/\+/g,"%20"))}function TM(e){return`${xI(e.path)}${function WY(e){return Object.keys(e).map(n=>`;${xI(n)}=${xI(e[n])}`).join("")}(e.parameters)}`}const UY=/^[^\/()?;=#]+/;function Dm(e){const n=e.match(UY);return n?n[0]:""}const VY=/^[^=?&#]+/,HY=/^[^&#]+/;class zY{constructor(n){this.url=n,this.remaining=n}parseRootSegment(){return this.consumeOptional("/"),""===this.remaining||this.peekStartsWith("?")||this.peekStartsWith("#")?new Jt([],{}):new Jt([],this.parseChildren())}parseQueryParams(){const n={};if(this.consumeOptional("?"))do{this.parseQueryParam(n)}while(this.consumeOptional("&"));return n}parseFragment(){return this.consumeOptional("#")?decodeURIComponent(this.remaining):null}parseChildren(){if(""===this.remaining)return{};this.consumeOptional("/");const n=[];for(this.peekStartsWith("(")||n.push(this.parseSegment());this.peekStartsWith("/")&&!this.peekStartsWith("//")&&!this.peekStartsWith("/(");)this.capture("/"),n.push(this.parseSegment());let t={};this.peekStartsWith("/(")&&(this.capture("/"),t=this.parseParens(!0));let o={};return this.peekStartsWith("(")&&(o=this.parseParens(!1)),(n.length>0||Object.keys(t).length>0)&&(o[qt]=new Jt(n,t)),o}parseSegment(){const n=Dm(this.remaining);if(""===n&&this.peekStartsWith(";"))throw new ct(4009,!1);return this.capture(n),new uh(wm(n),this.parseMatrixParams())}parseMatrixParams(){const n={};for(;this.consumeOptional(";");)this.parseParam(n);return n}parseParam(n){const t=Dm(this.remaining);if(!t)return;this.capture(t);let o="";if(this.consumeOptional("=")){const c=Dm(this.remaining);c&&(o=c,this.capture(o))}n[wm(t)]=wm(o)}parseQueryParam(n){const t=function jY(e){const n=e.match(VY);return n?n[0]:""}(this.remaining);if(!t)return;this.capture(t);let o="";if(this.consumeOptional("=")){const p=function GY(e){const n=e.match(HY);return n?n[0]:""}(this.remaining);p&&(o=p,this.capture(o))}const c=IM(t),h=IM(o);if(n.hasOwnProperty(c)){let p=n[c];Array.isArray(p)||(p=[p],n[c]=p),p.push(h)}else n[c]=h}parseParens(n){const t={};for(this.capture("(");!this.consumeOptional(")")&&this.remaining.length>0;){const o=Dm(this.remaining),c=this.remaining[o.length];if("/"!==c&&")"!==c&&";"!==c)throw new ct(4010,!1);let h;o.indexOf(":")>-1?(h=o.slice(0,o.indexOf(":")),this.capture(h),this.capture(":")):n&&(h=qt);const p=this.parseChildren();t[h]=1===Object.keys(p).length?p[qt]:new Jt([],p),this.consumeOptional("//")}return t}peekStartsWith(n){return this.remaining.startsWith(n)}consumeOptional(n){return!!this.peekStartsWith(n)&&(this.remaining=this.remaining.substring(n.length),!0)}capture(n){if(!this.consumeOptional(n))throw new ct(4011,!1)}}function FI(e){return e.segments.length>0?new Jt([],{[qt]:e}):e}function Em(e){const n={};for(const o of Object.keys(e.children)){const h=Em(e.children[o]);(h.segments.length>0||h.hasChildren())&&(n[o]=h)}return function KY(e){if(1===e.numberOfChildren&&e.children[qt]){const n=e.children[qt];return new Jt(e.segments.concat(n.segments),n.children)}return e}(new Jt(e.segments,n))}function Ic(e){return e instanceof yc}function QY(e,n,t,o,c){if(0===t.length)return $l(n.root,n.root,n.root,o,c);const h=function wM(e){if("string"==typeof e[0]&&1===e.length&&"/"===e[0])return new bM(!0,0,e);let n=0,t=!1;const o=e.reduce((c,h,p)=>{if("object"==typeof h&&null!=h){if(h.outlets){const m={};return si(h.outlets,(y,C)=>{m[C]="string"==typeof y?y.split("/"):y}),[...c,{outlets:m}]}if(h.segmentPath)return[...c,h.segmentPath]}return"string"!=typeof h?[...c,h]:0===p?(h.split("/").forEach((m,y)=>{0==y&&"."===m||(0==y&&""===m?t=!0:".."===m?n++:""!=m&&c.push(m))}),c):[...c,h]},[]);return new bM(t,n,o)}(t);return h.toRoot()?$l(n.root,n.root,new Jt([],{}),o,c):function p(y){const C=function JY(e,n,t,o){if(e.isAbsolute)return new ql(n.root,!0,0);if(-1===o)return new ql(t,t===n.root,0);return function DM(e,n,t){let o=e,c=n,h=t;for(;h>c;){if(h-=c,o=o.parent,!o)throw new ct(4005,!1);c=o.segments.length}return new ql(o,!1,c-h)}(t,o+(lh(e.commands[0])?0:1),e.numberOfDoubleDots)}(h,n,e.snapshot?._urlSegment,y),w=C.processChildren?fh(C.segmentGroup,C.index,h.commands):MI(C.segmentGroup,C.index,h.commands);return $l(n.root,C.segmentGroup,w,o,c)}(e.snapshot?._lastPathIndex)}function lh(e){return"object"==typeof e&&null!=e&&!e.outlets&&!e.segmentPath}function dh(e){return"object"==typeof e&&null!=e&&e.outlets}function $l(e,n,t,o,c){let p,h={};o&&si(o,(y,C)=>{h[C]=Array.isArray(y)?y.map(w=>`${w}`):`${y}`}),p=e===n?t:CM(e,n,t);const m=FI(Em(p));return new yc(m,h,c)}function CM(e,n,t){const o={};return si(e.children,(c,h)=>{o[h]=c===n?t:CM(c,n,t)}),new Jt(e.segments,o)}class bM{constructor(n,t,o){if(this.isAbsolute=n,this.numberOfDoubleDots=t,this.commands=o,n&&o.length>0&&lh(o[0]))throw new ct(4003,!1);const c=o.find(dh);if(c&&c!==hM(o))throw new ct(4004,!1)}toRoot(){return this.isAbsolute&&1===this.commands.length&&"/"==this.commands[0]}}class ql{constructor(n,t,o){this.segmentGroup=n,this.processChildren=t,this.index=o}}function MI(e,n,t){if(e||(e=new Jt([],{})),0===e.segments.length&&e.hasChildren())return fh(e,n,t);const o=function ZY(e,n,t){let o=0,c=n;const h={match:!1,pathIndex:0,commandIndex:0};for(;c<e.segments.length;){if(o>=t.length)return h;const p=e.segments[c],m=t[o];if(dh(m))break;const y=`${m}`,C=o<t.length-1?t[o+1]:null;if(c>0&&void 0===y)break;if(y&&C&&"object"==typeof C&&void 0===C.outlets){if(!AM(y,C,p))return h;o+=2}else{if(!AM(y,{},p))return h;o++}c++}return{match:!0,pathIndex:c,commandIndex:o}}(e,n,t),c=t.slice(o.commandIndex);if(o.match&&o.pathIndex<e.segments.length){const h=new Jt(e.segments.slice(0,o.pathIndex),{});return h.children[qt]=new Jt(e.segments.slice(o.pathIndex),e.children),fh(h,0,c)}return o.match&&0===c.length?new Jt(e.segments,{}):o.match&&!e.hasChildren()?OI(e,n,t):o.match?fh(e,0,c):OI(e,n,t)}function fh(e,n,t){if(0===t.length)return new Jt(e.segments,{});{const o=function XY(e){return dh(e[0])?e[0].outlets:{[qt]:e}}(t),c={};return si(o,(h,p)=>{"string"==typeof h&&(h=[h]),null!==h&&(c[p]=MI(e.children[p],n,h))}),si(e.children,(h,p)=>{void 0===o[p]&&(c[p]=h)}),new Jt(e.segments,c)}}function OI(e,n,t){const o=e.segments.slice(0,n);let c=0;for(;c<t.length;){const h=t[c];if(dh(h)){const y=eJ(h.outlets);return new Jt(o,y)}if(0===c&&lh(t[0])){o.push(new uh(e.segments[n].path,EM(t[0]))),c++;continue}const p=dh(h)?h.outlets[qt]:`${h}`,m=c<t.length-1?t[c+1]:null;p&&m&&lh(m)?(o.push(new uh(p,EM(m))),c+=2):(o.push(new uh(p,{})),c++)}return new Jt(o,{})}function eJ(e){const n={};return si(e,(t,o)=>{"string"==typeof t&&(t=[t]),null!==t&&(n[o]=OI(new Jt([],{}),0,t))}),n}function EM(e){const n={};return si(e,(t,o)=>n[o]=`${t}`),n}function AM(e,n,t){return e==t.path&&na(n,t.parameters)}class Wa{constructor(n,t){this.id=n,this.url=t}}class NI extends Wa{constructor(n,t,o="imperative",c=null){super(n,t),this.type=0,this.navigationTrigger=o,this.restoredState=c}toString(){return`NavigationStart(id: ${this.id}, url: '${this.url}')`}}class Tc extends Wa{constructor(n,t,o){super(n,t),this.urlAfterRedirects=o,this.type=1}toString(){return`NavigationEnd(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}')`}}class Am extends Wa{constructor(n,t,o,c){super(n,t),this.reason=o,this.code=c,this.type=2}toString(){return`NavigationCancel(id: ${this.id}, url: '${this.url}')`}}class PM extends Wa{constructor(n,t,o,c){super(n,t),this.error=o,this.target=c,this.type=3}toString(){return`NavigationError(id: ${this.id}, url: '${this.url}', error: ${this.error})`}}class tJ extends Wa{constructor(n,t,o,c){super(n,t),this.urlAfterRedirects=o,this.state=c,this.type=4}toString(){return`RoutesRecognized(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}}class nJ extends Wa{constructor(n,t,o,c){super(n,t),this.urlAfterRedirects=o,this.state=c,this.type=7}toString(){return`GuardsCheckStart(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}}class rJ extends Wa{constructor(n,t,o,c,h){super(n,t),this.urlAfterRedirects=o,this.state=c,this.shouldActivate=h,this.type=8}toString(){return`GuardsCheckEnd(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state}, shouldActivate: ${this.shouldActivate})`}}class iJ extends Wa{constructor(n,t,o,c){super(n,t),this.urlAfterRedirects=o,this.state=c,this.type=5}toString(){return`ResolveStart(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}}class oJ extends Wa{constructor(n,t,o,c){super(n,t),this.urlAfterRedirects=o,this.state=c,this.type=6}toString(){return`ResolveEnd(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}}class sJ{constructor(n){this.route=n,this.type=9}toString(){return`RouteConfigLoadStart(path: ${this.route.path})`}}class aJ{constructor(n){this.route=n,this.type=10}toString(){return`RouteConfigLoadEnd(path: ${this.route.path})`}}class uJ{constructor(n){this.snapshot=n,this.type=11}toString(){return`ChildActivationStart(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}}class cJ{constructor(n){this.snapshot=n,this.type=12}toString(){return`ChildActivationEnd(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}}class lJ{constructor(n){this.snapshot=n,this.type=13}toString(){return`ActivationStart(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}}class dJ{constructor(n){this.snapshot=n,this.type=14}toString(){return`ActivationEnd(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}}class RM{constructor(n,t,o){this.routerEvent=n,this.position=t,this.anchor=o,this.type=15}toString(){return`Scroll(anchor: '${this.anchor}', position: '${this.position?`${this.position[0]}, ${this.position[1]}`:null}')`}}class xM{constructor(n){this._root=n}get root(){return this._root.value}parent(n){const t=this.pathFromRoot(n);return t.length>1?t[t.length-2]:null}children(n){const t=LI(n,this._root);return t?t.children.map(o=>o.value):[]}firstChild(n){const t=LI(n,this._root);return t&&t.children.length>0?t.children[0].value:null}siblings(n){const t=WI(n,this._root);return t.length<2?[]:t[t.length-2].children.map(c=>c.value).filter(c=>c!==n)}pathFromRoot(n){return WI(n,this._root).map(t=>t.value)}}function LI(e,n){if(e===n.value)return n;for(const t of n.children){const o=LI(e,t);if(o)return o}return null}function WI(e,n){if(e===n.value)return[n];for(const t of n.children){const o=WI(e,t);if(o.length)return o.unshift(n),o}return[]}class Ba{constructor(n,t){this.value=n,this.children=t}toString(){return`TreeNode(${this.value})`}}function Ql(e){const n={};return e&&e.children.forEach(t=>n[t.value.outlet]=t),n}class FM extends xM{constructor(n,t){super(n),this.snapshot=t,BI(this,n)}toString(){return this.snapshot.toString()}}function kM(e,n){const t=function hJ(e,n){const p=new Pm([],{},{},"",{},qt,n,null,e.root,-1,{});return new OM("",new Ba(p,[]))}(e,n),o=new ws([new uh("",{})]),c=new ws({}),h=new ws({}),p=new ws({}),m=new ws(""),y=new Cc(o,c,p,m,h,qt,n,t.root);return y.snapshot=t.root,new FM(new Ba(y,[]),t)}class Cc{constructor(n,t,o,c,h,p,m,y){this.url=n,this.params=t,this.queryParams=o,this.fragment=c,this.data=h,this.outlet=p,this.component=m,this.title=this.data?.pipe(cn(C=>C[ah]))??It(void 0),this._futureSnapshot=y}get routeConfig(){return this._futureSnapshot.routeConfig}get root(){return this._routerState.root}get parent(){return this._routerState.parent(this)}get firstChild(){return this._routerState.firstChild(this)}get children(){return this._routerState.children(this)}get pathFromRoot(){return this._routerState.pathFromRoot(this)}get paramMap(){return this._paramMap||(this._paramMap=this.params.pipe(cn(n=>Kl(n)))),this._paramMap}get queryParamMap(){return this._queryParamMap||(this._queryParamMap=this.queryParams.pipe(cn(n=>Kl(n)))),this._queryParamMap}toString(){return this.snapshot?this.snapshot.toString():`Future(${this._futureSnapshot})`}}function MM(e,n="emptyOnly"){const t=e.pathFromRoot;let o=0;if("always"!==n)for(o=t.length-1;o>=1;){const c=t[o],h=t[o-1];if(c.routeConfig&&""===c.routeConfig.path)o--;else{if(h.component)break;o--}}return function pJ(e){return e.reduce((n,t)=>({params:{...n.params,...t.params},data:{...n.data,...t.data},resolve:{...t.data,...n.resolve,...t.routeConfig?.data,...t._resolvedData}}),{params:{},data:{},resolve:{}})}(t.slice(o))}class Pm{constructor(n,t,o,c,h,p,m,y,C,w,P,O){this.url=n,this.params=t,this.queryParams=o,this.fragment=c,this.data=h,this.outlet=p,this.component=m,this.title=this.data?.[ah],this.routeConfig=y,this._urlSegment=C,this._lastPathIndex=w,this._correctedLastPathIndex=O??w,this._resolve=P}get root(){return this._routerState.root}get parent(){return this._routerState.parent(this)}get firstChild(){return this._routerState.firstChild(this)}get children(){return this._routerState.children(this)}get pathFromRoot(){return this._routerState.pathFromRoot(this)}get paramMap(){return this._paramMap||(this._paramMap=Kl(this.params)),this._paramMap}get queryParamMap(){return this._queryParamMap||(this._queryParamMap=Kl(this.queryParams)),this._queryParamMap}toString(){return`Route(url:'${this.url.map(o=>o.toString()).join("/")}', path:'${this.routeConfig?this.routeConfig.path:""}')`}}class OM extends xM{constructor(n,t){super(t),this.url=n,BI(this,t)}toString(){return NM(this._root)}}function BI(e,n){n.value._routerState=e,n.children.forEach(t=>BI(e,t))}function NM(e){const n=e.children.length>0?` { ${e.children.map(NM).join(", ")} } `:"";return`${e.value}${n}`}function UI(e){if(e.snapshot){const n=e.snapshot,t=e._futureSnapshot;e.snapshot=t,na(n.queryParams,t.queryParams)||e.queryParams.next(t.queryParams),n.fragment!==t.fragment&&e.fragment.next(t.fragment),na(n.params,t.params)||e.params.next(t.params),function PY(e,n){if(e.length!==n.length)return!1;for(let t=0;t<e.length;++t)if(!na(e[t],n[t]))return!1;return!0}(n.url,t.url)||e.url.next(t.url),na(n.data,t.data)||e.data.next(t.data)}else e.snapshot=e._futureSnapshot,e.data.next(e._futureSnapshot.data)}function VI(e,n){const t=na(e.params,n.params)&&function MY(e,n){return Sc(e,n)&&e.every((t,o)=>na(t.parameters,n[o].parameters))}(e.url,n.url);return t&&!(!e.parent!=!n.parent)&&(!e.parent||VI(e.parent,n.parent))}function hh(e,n,t){if(t&&e.shouldReuseRoute(n.value,t.value.snapshot)){const o=t.value;o._futureSnapshot=n.value;const c=function mJ(e,n,t){return n.children.map(o=>{for(const c of t.children)if(e.shouldReuseRoute(o.value,c.value.snapshot))return hh(e,o,c);return hh(e,o)})}(e,n,t);return new Ba(o,c)}{if(e.shouldAttach(n.value)){const h=e.retrieve(n.value);if(null!==h){const p=h.route;return p.value._futureSnapshot=n.value,p.children=n.children.map(m=>hh(e,m)),p}}const o=function _J(e){return new Cc(new ws(e.url),new ws(e.params),new ws(e.queryParams),new ws(e.fragment),new ws(e.data),e.outlet,e.component,e)}(n.value),c=n.children.map(h=>hh(e,h));return new Ba(o,c)}}const jI="ngNavigationCancelingError";function LM(e,n){const{redirectTo:t,navigationBehaviorOptions:o}=Ic(n)?{redirectTo:n,navigationBehaviorOptions:void 0}:n,c=WM(!1,0,n);return c.url=t,c.navigationBehaviorOptions=o,c}function WM(e,n,t){const o=new Error("NavigationCancelingError: "+(e||""));return o[jI]=!0,o.cancellationCode=n,t&&(o.url=t),o}function BM(e){return UM(e)&&Ic(e.url)}function UM(e){return e&&e[jI]}class vJ{constructor(){this.outlet=null,this.route=null,this.resolver=null,this.injector=null,this.children=new ph,this.attachRef=null}}let ph=(()=>{class e{constructor(){this.contexts=new Map}onChildOutletCreated(t,o){const c=this.getOrCreateContext(t);c.outlet=o,this.contexts.set(t,c)}onChildOutletDestroyed(t){const o=this.getContext(t);o&&(o.outlet=null,o.attachRef=null)}onOutletDeactivated(){const t=this.contexts;return this.contexts=new Map,t}onOutletReAttached(t){this.contexts=t}getOrCreateContext(t){let o=this.getContext(t);return o||(o=new vJ,this.contexts.set(t,o)),o}getContext(t){return this.contexts.get(t)||null}}return e.\u0275fac=function(t){return new(t||e)},e.\u0275prov=Ht({token:e,factory:e.\u0275fac,providedIn:"root"}),e})();const Rm=!1;let HI=(()=>{class e{constructor(t,o,c,h,p){this.parentContexts=t,this.location=o,this.changeDetector=h,this.environmentInjector=p,this.activated=null,this._activatedRoute=null,this.activateEvents=new Ui,this.deactivateEvents=new Ui,this.attachEvents=new Ui,this.detachEvents=new Ui,this.name=c||qt,t.onChildOutletCreated(this.name,this)}ngOnDestroy(){this.parentContexts.getContext(this.name)?.outlet===this&&this.parentContexts.onChildOutletDestroyed(this.name)}ngOnInit(){if(!this.activated){const t=this.parentContexts.getContext(this.name);t&&t.route&&(t.attachRef?this.attach(t.attachRef,t.route):this.activateWith(t.route,t.injector))}}get isActivated(){return!!this.activated}get component(){if(!this.activated)throw new ct(4012,Rm);return this.activated.instance}get activatedRoute(){if(!this.activated)throw new ct(4012,Rm);return this._activatedRoute}get activatedRouteData(){return this._activatedRoute?this._activatedRoute.snapshot.data:{}}detach(){if(!this.activated)throw new ct(4012,Rm);this.location.detach();const t=this.activated;return this.activated=null,this._activatedRoute=null,this.detachEvents.emit(t.instance),t}attach(t,o){this.activated=t,this._activatedRoute=o,this.location.insert(t.hostView),this.attachEvents.emit(t.instance)}deactivate(){if(this.activated){const t=this.component;this.activated.destroy(),this.activated=null,this._activatedRoute=null,this.deactivateEvents.emit(t)}}activateWith(t,o){if(this.isActivated)throw new ct(4013,Rm);this._activatedRoute=t;const c=this.location,p=t._futureSnapshot.component,m=this.parentContexts.getOrCreateContext(this.name).children,y=new yJ(t,m,c.injector);if(o&&function SJ(e){return!!e.resolveComponentFactory}(o)){const C=o.resolveComponentFactory(p);this.activated=c.createComponent(C,c.length,y)}else this.activated=c.createComponent(p,{index:c.length,injector:y,environmentInjector:o??this.environmentInjector});this.changeDetector.markForCheck(),this.activateEvents.emit(this.activated.instance)}}return e.\u0275fac=function(t){return new(t||e)(_t(ph),_t(Is),function yf(e){return function i5(e,n){if("class"===n)return e.classes;if("style"===n)return e.styles;const t=e.attrs;if(t){const o=t.length;let c=0;for(;c<o;){const h=t[c];if(Y1(h))break;if(0===h)c+=2;else if("number"==typeof h)for(c++;c<o&&"string"==typeof t[c];)c++;else{if(h===n)return t[c+1];c+=2}}}return null}(Ur(),e)}("name"),_t(QS),_t(cu))},e.\u0275dir=Si({type:e,selectors:[["router-outlet"]],outputs:{activateEvents:"activate",deactivateEvents:"deactivate",attachEvents:"attach",detachEvents:"detach"},exportAs:["outlet"],standalone:!0}),e})();class yJ{constructor(n,t,o){this.route=n,this.childContexts=t,this.parent=o}get(n,t){return n===Cc?this.route:n===ph?this.childContexts:this.parent.get(n,t)}}let GI=(()=>{class e{}return e.\u0275fac=function(t){return new(t||e)},e.\u0275cmp=ba({type:e,selectors:[["ng-component"]],standalone:!0,features:[Jx],decls:1,vars:0,template:function(t,o){1&t&&Xr(0,"router-outlet")},dependencies:[HI],encapsulation:2}),e})();function VM(e,n){return e.providers&&!e._injector&&(e._injector=Kg(e.providers,n,`Route: ${e.path}`)),e._injector??n}function KI(e){const n=e.children&&e.children.map(KI),t=n?{...e,children:n}:{...e};return!t.component&&!t.loadComponent&&(n||t.loadChildren)&&t.outlet&&t.outlet!==qt&&(t.component=GI),t}function Bo(e){return e.outlet||qt}function jM(e,n){const t=e.filter(o=>Bo(o)===n);return t.push(...e.filter(o=>Bo(o)!==n)),t}function gh(e){if(!e)return null;if(e.routeConfig?._injector)return e.routeConfig._injector;for(let n=e.parent;n;n=n.parent){const t=n.routeConfig;if(t?._loadedInjector)return t._loadedInjector;if(t?._injector)return t._injector}return null}class wJ{constructor(n,t,o,c){this.routeReuseStrategy=n,this.futureState=t,this.currState=o,this.forwardEvent=c}activate(n){const t=this.futureState._root,o=this.currState?this.currState._root:null;this.deactivateChildRoutes(t,o,n),UI(this.futureState.root),this.activateChildRoutes(t,o,n)}deactivateChildRoutes(n,t,o){const c=Ql(t);n.children.forEach(h=>{const p=h.value.outlet;this.deactivateRoutes(h,c[p],o),delete c[p]}),si(c,(h,p)=>{this.deactivateRouteAndItsChildren(h,o)})}deactivateRoutes(n,t,o){const c=n.value,h=t?t.value:null;if(c===h)if(c.component){const p=o.getContext(c.outlet);p&&this.deactivateChildRoutes(n,t,p.children)}else this.deactivateChildRoutes(n,t,o);else h&&this.deactivateRouteAndItsChildren(t,o)}deactivateRouteAndItsChildren(n,t){n.value.component&&this.routeReuseStrategy.shouldDetach(n.value.snapshot)?this.detachAndStoreRouteSubtree(n,t):this.deactivateRouteAndOutlet(n,t)}detachAndStoreRouteSubtree(n,t){const o=t.getContext(n.value.outlet),c=o&&n.value.component?o.children:t,h=Ql(n);for(const p of Object.keys(h))this.deactivateRouteAndItsChildren(h[p],c);if(o&&o.outlet){const p=o.outlet.detach(),m=o.children.onOutletDeactivated();this.routeReuseStrategy.store(n.value.snapshot,{componentRef:p,route:n,contexts:m})}}deactivateRouteAndOutlet(n,t){const o=t.getContext(n.value.outlet),c=o&&n.value.component?o.children:t,h=Ql(n);for(const p of Object.keys(h))this.deactivateRouteAndItsChildren(h[p],c);o&&o.outlet&&(o.outlet.deactivate(),o.children.onOutletDeactivated(),o.attachRef=null,o.resolver=null,o.route=null)}activateChildRoutes(n,t,o){const c=Ql(t);n.children.forEach(h=>{this.activateRoutes(h,c[h.value.outlet],o),this.forwardEvent(new dJ(h.value.snapshot))}),n.children.length&&this.forwardEvent(new cJ(n.value.snapshot))}activateRoutes(n,t,o){const c=n.value,h=t?t.value:null;if(UI(c),c===h)if(c.component){const p=o.getOrCreateContext(c.outlet);this.activateChildRoutes(n,t,p.children)}else this.activateChildRoutes(n,t,o);else if(c.component){const p=o.getOrCreateContext(c.outlet);if(this.routeReuseStrategy.shouldAttach(c.snapshot)){const m=this.routeReuseStrategy.retrieve(c.snapshot);this.routeReuseStrategy.store(c.snapshot,null),p.children.onOutletReAttached(m.contexts),p.attachRef=m.componentRef,p.route=m.route.value,p.outlet&&p.outlet.attach(m.componentRef,m.route.value),UI(m.route.value),this.activateChildRoutes(n,null,p.children)}else{const m=gh(c.snapshot),y=m?.get(Nf)??null;p.attachRef=null,p.route=c,p.resolver=y,p.injector=m,p.outlet&&p.outlet.activateWith(c,p.injector),this.activateChildRoutes(n,null,p.children)}}else this.activateChildRoutes(n,null,o)}}class HM{constructor(n){this.path=n,this.route=this.path[this.path.length-1]}}class xm{constructor(n,t){this.component=n,this.route=t}}function DJ(e,n,t){const o=e._root;return mh(o,n?n._root:null,t,[o.value])}function Yl(e,n){const t=Symbol(),o=n.get(e,t);return o===t?"function"!=typeof e||function oG(e){return null!==qp(e)}(e)?n.get(e):e:o}function mh(e,n,t,o,c={canDeactivateChecks:[],canActivateChecks:[]}){const h=Ql(n);return e.children.forEach(p=>{(function AJ(e,n,t,o,c={canDeactivateChecks:[],canActivateChecks:[]}){const h=e.value,p=n?n.value:null,m=t?t.getContext(e.value.outlet):null;if(p&&h.routeConfig===p.routeConfig){const y=function PJ(e,n,t){if("function"==typeof t)return t(e,n);switch(t){case"pathParamsChange":return!Sc(e.url,n.url);case"pathParamsOrQueryParamsChange":return!Sc(e.url,n.url)||!na(e.queryParams,n.queryParams);case"always":return!0;case"paramsOrQueryParamsChange":return!VI(e,n)||!na(e.queryParams,n.queryParams);default:return!VI(e,n)}}(p,h,h.routeConfig.runGuardsAndResolvers);y?c.canActivateChecks.push(new HM(o)):(h.data=p.data,h._resolvedData=p._resolvedData),mh(e,n,h.component?m?m.children:null:t,o,c),y&&m&&m.outlet&&m.outlet.isActivated&&c.canDeactivateChecks.push(new xm(m.outlet.component,p))}else p&&_h(n,m,c),c.canActivateChecks.push(new HM(o)),mh(e,null,h.component?m?m.children:null:t,o,c)})(p,h[p.value.outlet],t,o.concat([p.value]),c),delete h[p.value.outlet]}),si(h,(p,m)=>_h(p,t.getContext(m),c)),c}function _h(e,n,t){const o=Ql(e),c=e.value;si(o,(h,p)=>{_h(h,c.component?n?n.children.getContext(p):null:n,t)}),t.canDeactivateChecks.push(new xm(c.component&&n&&n.outlet&&n.outlet.isActivated?n.outlet.component:null,c))}function vh(e){return"function"==typeof e}function $I(e){return e instanceof Sm||"EmptyError"===e?.name}const Fm=Symbol("INITIAL_VALUE");function Jl(){return ta(e=>iM(e.map(n=>n.pipe(sh(1),function TY(...e){const n=uf(e);return Qr((t,o)=>{(n?wI(e,t,n):wI(e,t)).subscribe(o)})}(Fm)))).pipe(cn(n=>{for(const t of n)if(!0!==t){if(t===Fm)return Fm;if(!1===t||t instanceof yc)return t}return!0}),mu(n=>n!==Fm),sh(1)))}function GM(e){return function AH(...e){return s1(e)}(wi(n=>{if(Ic(n))throw LM(0,n)}),cn(n=>!0===n))}const qI={matched:!1,consumedSegments:[],remainingSegments:[],parameters:{},positionalParamSegments:{}};function zM(e,n,t,o,c){const h=QI(e,n,t);return h.matched?function KJ(e,n,t,o){const c=n.canMatch;return c&&0!==c.length?It(c.map(p=>{const m=Yl(p,e);return yu(function OJ(e){return e&&vh(e.canMatch)}(m)?m.canMatch(n,t):e.runInContext(()=>m(n,t)))})).pipe(Jl(),GM()):It(!0)}(o=VM(n,o),n,t).pipe(cn(p=>!0===p?h:{...qI})):It(h)}function QI(e,n,t){if(""===n.path)return"full"===n.pathMatch&&(e.hasChildren()||t.length>0)?{...qI}:{matched:!0,consumedSegments:[],remainingSegments:t,parameters:{},positionalParamSegments:{}};const c=(n.matcher||AY)(t,e,n);if(!c)return{...qI};const h={};si(c.posParams,(m,y)=>{h[y]=m.path});const p=c.consumed.length>0?{...h,...c.consumed[c.consumed.length-1].parameters}:h;return{matched:!0,consumedSegments:c.consumed,remainingSegments:t.slice(c.consumed.length),parameters:p,positionalParamSegments:c.posParams??{}}}function km(e,n,t,o,c="corrected"){if(t.length>0&&function QJ(e,n,t){return t.some(o=>Mm(e,n,o)&&Bo(o)!==qt)}(e,t,o)){const p=new Jt(n,function qJ(e,n,t,o){const c={};c[qt]=o,o._sourceSegment=e,o._segmentIndexShift=n.length;for(const h of t)if(""===h.path&&Bo(h)!==qt){const p=new Jt([],{});p._sourceSegment=e,p._segmentIndexShift=n.length,c[Bo(h)]=p}return c}(e,n,o,new Jt(t,e.children)));return p._sourceSegment=e,p._segmentIndexShift=n.length,{segmentGroup:p,slicedSegments:[]}}if(0===t.length&&function YJ(e,n,t){return t.some(o=>Mm(e,n,o))}(e,t,o)){const p=new Jt(e.segments,function $J(e,n,t,o,c,h){const p={};for(const m of o)if(Mm(e,t,m)&&!c[Bo(m)]){const y=new Jt([],{});y._sourceSegment=e,y._segmentIndexShift="legacy"===h?e.segments.length:n.length,p[Bo(m)]=y}return{...c,...p}}(e,n,t,o,e.children,c));return p._sourceSegment=e,p._segmentIndexShift=n.length,{segmentGroup:p,slicedSegments:t}}const h=new Jt(e.segments,e.children);return h._sourceSegment=e,h._segmentIndexShift=n.length,{segmentGroup:h,slicedSegments:t}}function Mm(e,n,t){return(!(e.hasChildren()||n.length>0)||"full"!==t.pathMatch)&&""===t.path}function KM(e,n,t,o){return!!(Bo(e)===o||o!==qt&&Mm(n,t,e))&&("**"===e.path||QI(n,e,t).matched)}function $M(e,n,t){return 0===n.length&&!e.children[t]}const Om=!1;class Nm{constructor(n){this.segmentGroup=n||null}}class qM{constructor(n){this.urlTree=n}}function yh(e){return oh(new Nm(e))}function QM(e){return oh(new qM(e))}class eX{constructor(n,t,o,c,h){this.injector=n,this.configLoader=t,this.urlSerializer=o,this.urlTree=c,this.config=h,this.allowRedirects=!0}apply(){const n=km(this.urlTree.root,[],[],this.config).segmentGroup,t=new Jt(n.segments,n.children);return this.expandSegmentGroup(this.injector,this.config,t,qt).pipe(cn(h=>this.createUrlTree(Em(h),this.urlTree.queryParams,this.urlTree.fragment))).pipe(vu(h=>{if(h instanceof qM)return this.allowRedirects=!1,this.match(h.urlTree);throw h instanceof Nm?this.noMatchError(h):h}))}match(n){return this.expandSegmentGroup(this.injector,this.config,n.root,qt).pipe(cn(c=>this.createUrlTree(Em(c),n.queryParams,n.fragment))).pipe(vu(c=>{throw c instanceof Nm?this.noMatchError(c):c}))}noMatchError(n){return new ct(4002,Om)}createUrlTree(n,t,o){const c=FI(n);return new yc(c,t,o)}expandSegmentGroup(n,t,o,c){return 0===o.segments.length&&o.hasChildren()?this.expandChildren(n,t,o).pipe(cn(h=>new Jt([],h))):this.expandSegment(n,o,t,o.segments,c,!0)}expandChildren(n,t,o){const c=[];for(const h of Object.keys(o.children))"primary"===h?c.unshift(h):c.push(h);return Br(c).pipe(vc(h=>{const p=o.children[h],m=jM(t,h);return this.expandSegmentGroup(n,m,p,h).pipe(cn(y=>({segment:y,outlet:h})))}),cM((h,p)=>(h[p.outlet]=p.segment,h),{}),lM())}expandSegment(n,t,o,c,h,p){return Br(o).pipe(vc(m=>this.expandSegmentAgainstRoute(n,t,o,m,c,h,p).pipe(vu(C=>{if(C instanceof Nm)return It(null);throw C}))),_u(m=>!!m),vu((m,y)=>{if($I(m))return $M(t,c,h)?It(new Jt([],{})):yh(t);throw m}))}expandSegmentAgainstRoute(n,t,o,c,h,p,m){return KM(c,t,h,p)?void 0===c.redirectTo?this.matchSegmentAgainstRoute(n,t,c,h,p):m&&this.allowRedirects?this.expandSegmentAgainstRouteUsingRedirect(n,t,o,c,h,p):yh(t):yh(t)}expandSegmentAgainstRouteUsingRedirect(n,t,o,c,h,p){return"**"===c.path?this.expandWildCardWithParamsAgainstRouteUsingRedirect(n,o,c,p):this.expandRegularSegmentAgainstRouteUsingRedirect(n,t,o,c,h,p)}expandWildCardWithParamsAgainstRouteUsingRedirect(n,t,o,c){const h=this.applyRedirectCommands([],o.redirectTo,{});return o.redirectTo.startsWith("/")?QM(h):this.lineralizeSegments(o,h).pipe(oi(p=>{const m=new Jt(p,{});return this.expandSegment(n,m,t,p,c,!1)}))}expandRegularSegmentAgainstRouteUsingRedirect(n,t,o,c,h,p){const{matched:m,consumedSegments:y,remainingSegments:C,positionalParamSegments:w}=QI(t,c,h);if(!m)return yh(t);const P=this.applyRedirectCommands(y,c.redirectTo,w);return c.redirectTo.startsWith("/")?QM(P):this.lineralizeSegments(c,P).pipe(oi(O=>this.expandSegment(n,t,o,O.concat(C),p,!1)))}matchSegmentAgainstRoute(n,t,o,c,h){return"**"===o.path?(n=VM(o,n),o.loadChildren?(o._loadedRoutes?It({routes:o._loadedRoutes,injector:o._loadedInjector}):this.configLoader.loadChildren(n,o)).pipe(cn(m=>(o._loadedRoutes=m.routes,o._loadedInjector=m.injector,new Jt(c,{})))):It(new Jt(c,{}))):zM(t,o,c,n).pipe(ta(({matched:p,consumedSegments:m,remainingSegments:y})=>p?this.getChildConfig(n=o._injector??n,o,c).pipe(oi(w=>{const P=w.injector??n,O=w.routes,{segmentGroup:z,slicedSegments:A}=km(t,m,y,O),ne=new Jt(z.segments,z.children);if(0===A.length&&ne.hasChildren())return this.expandChildren(P,O,ne).pipe(cn(N=>new Jt(m,N)));if(0===O.length&&0===A.length)return It(new Jt(m,{}));const $=Bo(o)===h;return this.expandSegment(P,ne,O,A,$?qt:h,!0).pipe(cn(q=>new Jt(m.concat(q.segments),q.children)))})):yh(t)))}getChildConfig(n,t,o){return t.children?It({routes:t.children,injector:n}):t.loadChildren?void 0!==t._loadedRoutes?It({routes:t._loadedRoutes,injector:t._loadedInjector}):function zJ(e,n,t,o){const c=n.canLoad;return void 0===c||0===c.length?It(!0):It(c.map(p=>{const m=Yl(p,e);return yu(function xJ(e){return e&&vh(e.canLoad)}(m)?m.canLoad(n,t):e.runInContext(()=>m(n,t)))})).pipe(Jl(),GM())}(n,t,o).pipe(oi(c=>c?this.configLoader.loadChildren(n,t).pipe(wi(h=>{t._loadedRoutes=h.routes,t._loadedInjector=h.injector})):function XJ(e){return oh(WM(Om,3))}())):It({routes:[],injector:n})}lineralizeSegments(n,t){let o=[],c=t.root;for(;;){if(o=o.concat(c.segments),0===c.numberOfChildren)return It(o);if(c.numberOfChildren>1||!c.children[qt])return oh(new ct(4e3,Om));c=c.children[qt]}}applyRedirectCommands(n,t,o){return this.applyRedirectCreateUrlTree(t,this.urlSerializer.parse(t),n,o)}applyRedirectCreateUrlTree(n,t,o,c){const h=this.createSegmentGroup(n,t.root,o,c);return new yc(h,this.createQueryParams(t.queryParams,this.urlTree.queryParams),t.fragment)}createQueryParams(n,t){const o={};return si(n,(c,h)=>{if("string"==typeof c&&c.startsWith(":")){const m=c.substring(1);o[h]=t[m]}else o[h]=c}),o}createSegmentGroup(n,t,o,c){const h=this.createSegments(n,t.segments,o,c);let p={};return si(t.children,(m,y)=>{p[y]=this.createSegmentGroup(n,m,o,c)}),new Jt(h,p)}createSegments(n,t,o,c){return t.map(h=>h.path.startsWith(":")?this.findPosParam(n,h,c):this.findOrReturn(h,o))}findPosParam(n,t,o){const c=o[t.path.substring(1)];if(!c)throw new ct(4001,Om);return c}findOrReturn(n,t){let o=0;for(const c of t){if(c.path===n.path)return t.splice(o),c;o++}return n}}class nX{}class oX{constructor(n,t,o,c,h,p,m,y){this.injector=n,this.rootComponentType=t,this.config=o,this.urlTree=c,this.url=h,this.paramsInheritanceStrategy=p,this.relativeLinkResolution=m,this.urlSerializer=y}recognize(){const n=km(this.urlTree.root,[],[],this.config.filter(t=>void 0===t.redirectTo),this.relativeLinkResolution).segmentGroup;return this.processSegmentGroup(this.injector,this.config,n,qt).pipe(cn(t=>{if(null===t)return null;const o=new Pm([],Object.freeze({}),Object.freeze({...this.urlTree.queryParams}),this.urlTree.fragment,{},qt,this.rootComponentType,null,this.urlTree.root,-1,{}),c=new Ba(o,t),h=new OM(this.url,c);return this.inheritParamsAndData(h._root),h}))}inheritParamsAndData(n){const t=n.value,o=MM(t,this.paramsInheritanceStrategy);t.params=Object.freeze(o.params),t.data=Object.freeze(o.data),n.children.forEach(c=>this.inheritParamsAndData(c))}processSegmentGroup(n,t,o,c){return 0===o.segments.length&&o.hasChildren()?this.processChildren(n,t,o):this.processSegment(n,t,o,o.segments,c)}processChildren(n,t,o){return Br(Object.keys(o.children)).pipe(vc(c=>{const h=o.children[c],p=jM(t,c);return this.processSegmentGroup(n,p,h,c)}),cM((c,h)=>c&&h?(c.push(...h),c):null),function wY(e,n=!1){return Qr((t,o)=>{let c=0;t.subscribe(Yr(o,h=>{const p=e(h,c++);(p||n)&&o.next(h),!p&&o.complete()}))})}(c=>null!==c),Im(null),lM(),cn(c=>{if(null===c)return null;const h=YM(c);return function sX(e){e.sort((n,t)=>n.value.outlet===qt?-1:t.value.outlet===qt?1:n.value.outlet.localeCompare(t.value.outlet))}(h),h}))}processSegment(n,t,o,c,h){return Br(t).pipe(vc(p=>this.processSegmentAgainstRoute(p._injector??n,p,o,c,h)),_u(p=>!!p),vu(p=>{if($I(p))return $M(o,c,h)?It([]):It(null);throw p}))}processSegmentAgainstRoute(n,t,o,c,h){if(t.redirectTo||!KM(t,o,c,h))return It(null);let p;if("**"===t.path){const m=c.length>0?hM(c).parameters:{},y=XM(o)+c.length;p=It({snapshot:new Pm(c,m,Object.freeze({...this.urlTree.queryParams}),this.urlTree.fragment,eO(t),Bo(t),t.component??t._loadedComponent??null,t,JM(o),y,tO(t),y),consumedSegments:[],remainingSegments:[]})}else p=zM(o,t,c,n).pipe(cn(({matched:m,consumedSegments:y,remainingSegments:C,parameters:w})=>{if(!m)return null;const P=XM(o)+y.length;return{snapshot:new Pm(y,w,Object.freeze({...this.urlTree.queryParams}),this.urlTree.fragment,eO(t),Bo(t),t.component??t._loadedComponent??null,t,JM(o),P,tO(t),P),consumedSegments:y,remainingSegments:C}}));return p.pipe(ta(m=>{if(null===m)return It(null);const{snapshot:y,consumedSegments:C,remainingSegments:w}=m;n=t._injector??n;const P=t._loadedInjector??n,O=function aX(e){return e.children?e.children:e.loadChildren?e._loadedRoutes:[]}(t),{segmentGroup:z,slicedSegments:A}=km(o,C,w,O.filter($=>void 0===$.redirectTo),this.relativeLinkResolution);if(0===A.length&&z.hasChildren())return this.processChildren(P,O,z).pipe(cn($=>null===$?null:[new Ba(y,$)]));if(0===O.length&&0===A.length)return It([new Ba(y,[])]);const ne=Bo(t)===h;return this.processSegment(P,O,z,A,ne?qt:h).pipe(cn($=>null===$?null:[new Ba(y,$)]))}))}}function uX(e){const n=e.value.routeConfig;return n&&""===n.path&&void 0===n.redirectTo}function YM(e){const n=[],t=new Set;for(const o of e){if(!uX(o)){n.push(o);continue}const c=n.find(h=>o.value.routeConfig===h.value.routeConfig);void 0!==c?(c.children.push(...o.children),t.add(c)):n.push(o)}for(const o of t){const c=YM(o.children);n.push(new Ba(o.value,c))}return n.filter(o=>!t.has(o))}function JM(e){let n=e;for(;n._sourceSegment;)n=n._sourceSegment;return n}function XM(e){let n=e,t=n._segmentIndexShift??0;for(;n._sourceSegment;)n=n._sourceSegment,t+=n._segmentIndexShift??0;return t-1}function eO(e){return e.data||{}}function tO(e){return e.resolve||{}}function nO(e){return"string"==typeof e.title||null===e.title}function YI(e){return ta(n=>{const t=e(n);return t?Br(t).pipe(cn(()=>n)):It(n)})}let rO=(()=>{class e{buildTitle(t){let o,c=t.root;for(;void 0!==c;)o=this.getResolvedTitleForRoute(c)??o,c=c.children.find(h=>h.outlet===qt);return o}getResolvedTitleForRoute(t){return t.data[ah]}}return e.\u0275fac=function(t){return new(t||e)},e.\u0275prov=Ht({token:e,factory:function(){return mr(iO)},providedIn:"root"}),e})(),iO=(()=>{class e extends rO{constructor(t){super(),this.title=t}updateTitle(t){const o=this.buildTitle(t);void 0!==o&&this.title.setTitle(o)}}return e.\u0275fac=function(t){return new(t||e)(Tt(tM))},e.\u0275prov=Ht({token:e,factory:e.\u0275fac,providedIn:"root"}),e})();class mX{}class vX extends class _X{shouldDetach(n){return!1}store(n,t){}shouldAttach(n){return!1}retrieve(n){return null}shouldReuseRoute(n,t){return n.routeConfig===t.routeConfig}}{}const Wm=new At("",{providedIn:"root",factory:()=>({})}),JI=new At("ROUTES");let XI=(()=>{class e{constructor(t,o){this.injector=t,this.compiler=o,this.componentLoaders=new WeakMap,this.childrenLoaders=new WeakMap}loadComponent(t){if(this.componentLoaders.get(t))return this.componentLoaders.get(t);if(t._loadedComponent)return It(t._loadedComponent);this.onLoadStartListener&&this.onLoadStartListener(t);const o=yu(t.loadComponent()).pipe(wi(h=>{this.onLoadEndListener&&this.onLoadEndListener(t),t._loadedComponent=h}),AI(()=>{this.componentLoaders.delete(t)})),c=new aM(o,()=>new Ks).pipe(DI());return this.componentLoaders.set(t,c),c}loadChildren(t,o){if(this.childrenLoaders.get(o))return this.childrenLoaders.get(o);if(o._loadedRoutes)return It({routes:o._loadedRoutes,injector:o._loadedInjector});this.onLoadStartListener&&this.onLoadStartListener(o);const h=this.loadModuleFactoryOrRoutes(o.loadChildren).pipe(cn(m=>{this.onLoadEndListener&&this.onLoadEndListener(o);let y,C,w=!1;Array.isArray(m)?C=m:(y=m.create(t).injector,C=fM(y.get(JI,[],bt.Self|bt.Optional)));return{routes:C.map(KI),injector:y}}),AI(()=>{this.childrenLoaders.delete(o)})),p=new aM(h,()=>new Ks).pipe(DI());return this.childrenLoaders.set(o,p),p}loadModuleFactoryOrRoutes(t){return yu(t()).pipe(oi(o=>o instanceof Qx||Array.isArray(o)?It(o):Br(this.compiler.compileModuleAsync(o))))}}return e.\u0275fac=function(t){return new(t||e)(Tt(ms),Tt(US))},e.\u0275prov=Ht({token:e,factory:e.\u0275fac,providedIn:"root"}),e})();class SX{}class IX{shouldProcessUrl(n){return!0}extract(n){return n}merge(n,t){return n}}function TX(e){throw e}function CX(e,n,t){return n.parse("/")}const bX={paths:"exact",fragment:"ignored",matrixParams:"ignored",queryParams:"exact"},wX={paths:"subset",fragment:"ignored",matrixParams:"ignored",queryParams:"subset"};function sO(){const e=mr(yM),n=mr(ph),t=mr(nI),o=mr(ms),c=mr(US),h=mr(JI,{optional:!0})??[],p=mr(Wm,{optional:!0})??{},m=mr(iO),y=mr(rO,{optional:!0}),C=mr(SX,{optional:!0}),w=mr(mX,{optional:!0}),P=new ai(null,e,n,t,o,c,fM(h));return C&&(P.urlHandlingStrategy=C),w&&(P.routeReuseStrategy=w),P.titleStrategy=y??m,function DX(e,n){e.errorHandler&&(n.errorHandler=e.errorHandler),e.malformedUriErrorHandler&&(n.malformedUriErrorHandler=e.malformedUriErrorHandler),e.onSameUrlNavigation&&(n.onSameUrlNavigation=e.onSameUrlNavigation),e.paramsInheritanceStrategy&&(n.paramsInheritanceStrategy=e.paramsInheritanceStrategy),e.relativeLinkResolution&&(n.relativeLinkResolution=e.relativeLinkResolution),e.urlUpdateStrategy&&(n.urlUpdateStrategy=e.urlUpdateStrategy),e.canceledNavigationResolution&&(n.canceledNavigationResolution=e.canceledNavigationResolution)}(p,P),P}let ai=(()=>{class e{constructor(t,o,c,h,p,m,y){this.rootComponentType=t,this.urlSerializer=o,this.rootContexts=c,this.location=h,this.config=y,this.lastSuccessfulNavigation=null,this.currentNavigation=null,this.disposed=!1,this.navigationId=0,this.currentPageId=0,this.isNgZoneEnabled=!1,this.events=new Ks,this.errorHandler=TX,this.malformedUriErrorHandler=CX,this.navigated=!1,this.lastSuccessfulId=-1,this.afterPreactivation=()=>It(void 0),this.urlHandlingStrategy=new IX,this.routeReuseStrategy=new vX,this.onSameUrlNavigation="ignore",this.paramsInheritanceStrategy="emptyOnly",this.urlUpdateStrategy="deferred",this.relativeLinkResolution="corrected",this.canceledNavigationResolution="replace",this.configLoader=p.get(XI),this.configLoader.onLoadEndListener=O=>this.triggerEvent(new aJ(O)),this.configLoader.onLoadStartListener=O=>this.triggerEvent(new sJ(O)),this.ngModule=p.get(gc),this.console=p.get($K);const P=p.get(Hr);this.isNgZoneEnabled=P instanceof Hr&&Hr.isInAngularZone(),this.resetConfig(y),this.currentUrlTree=function RY(){return new yc(new Jt([],{}),{},null)}(),this.rawUrlTree=this.currentUrlTree,this.browserUrlTree=this.currentUrlTree,this.routerState=kM(this.currentUrlTree,this.rootComponentType),this.transitions=new ws({id:0,targetPageId:0,currentUrlTree:this.currentUrlTree,currentRawUrl:this.currentUrlTree,extractedUrl:this.urlHandlingStrategy.extract(this.currentUrlTree),urlAfterRedirects:this.urlHandlingStrategy.extract(this.currentUrlTree),rawUrl:this.currentUrlTree,extras:{},resolve:null,reject:null,promise:Promise.resolve(!0),source:"imperative",restoredState:null,currentSnapshot:this.routerState.snapshot,targetSnapshot:null,currentRouterState:this.routerState,targetRouterState:null,guards:{canActivateChecks:[],canDeactivateChecks:[]},guardsResult:null}),this.navigations=this.setupNavigations(this.transitions),this.processNavigations()}get browserPageId(){return this.location.getState()?.\u0275routerPageId}setupNavigations(t){const o=this.events;return t.pipe(mu(c=>0!==c.id),cn(c=>({...c,extractedUrl:this.urlHandlingStrategy.extract(c.rawUrl)})),ta(c=>{let h=!1,p=!1;return It(c).pipe(wi(m=>{this.currentNavigation={id:m.id,initialUrl:m.rawUrl,extractedUrl:m.extractedUrl,trigger:m.source,extras:m.extras,previousNavigation:this.lastSuccessfulNavigation?{...this.lastSuccessfulNavigation,previousNavigation:null}:null}}),ta(m=>{const y=this.browserUrlTree.toString(),C=!this.navigated||m.extractedUrl.toString()!==y||y!==this.currentUrlTree.toString();if(("reload"===this.onSameUrlNavigation||C)&&this.urlHandlingStrategy.shouldProcessUrl(m.rawUrl))return aO(m.source)&&(this.browserUrlTree=m.extractedUrl),It(m).pipe(ta(P=>{const O=this.transitions.getValue();return o.next(new NI(P.id,this.serializeUrl(P.extractedUrl),P.source,P.restoredState)),O!==this.transitions.getValue()?Ia:Promise.resolve(P)}),function tX(e,n,t,o){return ta(c=>function ZJ(e,n,t,o,c){return new eX(e,n,t,o,c).apply()}(e,n,t,c.extractedUrl,o).pipe(cn(h=>({...c,urlAfterRedirects:h}))))}(this.ngModule.injector,this.configLoader,this.urlSerializer,this.config),wi(P=>{this.currentNavigation={...this.currentNavigation,finalUrl:P.urlAfterRedirects},c.urlAfterRedirects=P.urlAfterRedirects}),function lX(e,n,t,o,c,h){return oi(p=>function iX(e,n,t,o,c,h,p="emptyOnly",m="legacy"){return new oX(e,n,t,o,c,p,m,h).recognize().pipe(ta(y=>null===y?function rX(e){return new Wr(n=>n.error(e))}(new nX):It(y)))}(e,n,t,p.urlAfterRedirects,o.serialize(p.urlAfterRedirects),o,c,h).pipe(cn(m=>({...p,targetSnapshot:m}))))}(this.ngModule.injector,this.rootComponentType,this.config,this.urlSerializer,this.paramsInheritanceStrategy,this.relativeLinkResolution),wi(P=>{if(c.targetSnapshot=P.targetSnapshot,"eager"===this.urlUpdateStrategy){if(!P.extras.skipLocationChange){const z=this.urlHandlingStrategy.merge(P.urlAfterRedirects,P.rawUrl);this.setBrowserUrl(z,P)}this.browserUrlTree=P.urlAfterRedirects}const O=new tJ(P.id,this.serializeUrl(P.extractedUrl),this.serializeUrl(P.urlAfterRedirects),P.targetSnapshot);o.next(O)}));if(C&&this.rawUrlTree&&this.urlHandlingStrategy.shouldProcessUrl(this.rawUrlTree)){const{id:O,extractedUrl:z,source:A,restoredState:ne,extras:$}=m,K=new NI(O,this.serializeUrl(z),A,ne);o.next(K);const q=kM(z,this.rootComponentType).snapshot;return It(c={...m,targetSnapshot:q,urlAfterRedirects:z,extras:{...$,skipLocationChange:!1,replaceUrl:!1}})}return this.rawUrlTree=m.rawUrl,m.resolve(null),Ia}),wi(m=>{const y=new nJ(m.id,this.serializeUrl(m.extractedUrl),this.serializeUrl(m.urlAfterRedirects),m.targetSnapshot);this.triggerEvent(y)}),cn(m=>c={...m,guards:DJ(m.targetSnapshot,m.currentSnapshot,this.rootContexts)}),function LJ(e,n){return oi(t=>{const{targetSnapshot:o,currentSnapshot:c,guards:{canActivateChecks:h,canDeactivateChecks:p}}=t;return 0===p.length&&0===h.length?It({...t,guardsResult:!0}):function WJ(e,n,t,o){return Br(e).pipe(oi(c=>function GJ(e,n,t,o,c){const h=n&&n.routeConfig?n.routeConfig.canDeactivate:null;return h&&0!==h.length?It(h.map(m=>{const y=gh(n)??c,C=Yl(m,y);return yu(function MJ(e){return e&&vh(e.canDeactivate)}(C)?C.canDeactivate(e,n,t,o):y.runInContext(()=>C(e,n,t,o))).pipe(_u())})).pipe(Jl()):It(!0)}(c.component,c.route,t,n,o)),_u(c=>!0!==c,!0))}(p,o,c,e).pipe(oi(m=>m&&function RJ(e){return"boolean"==typeof e}(m)?function BJ(e,n,t,o){return Br(n).pipe(vc(c=>wI(function VJ(e,n){return null!==e&&n&&n(new uJ(e)),It(!0)}(c.route.parent,o),function UJ(e,n){return null!==e&&n&&n(new lJ(e)),It(!0)}(c.route,o),function HJ(e,n,t){const o=n[n.length-1],h=n.slice(0,n.length-1).reverse().map(p=>function EJ(e){const n=e.routeConfig?e.routeConfig.canActivateChild:null;return n&&0!==n.length?{node:e,guards:n}:null}(p)).filter(p=>null!==p).map(p=>sM(()=>It(p.guards.map(y=>{const C=gh(p.node)??t,w=Yl(y,C);return yu(function kJ(e){return e&&vh(e.canActivateChild)}(w)?w.canActivateChild(o,e):C.runInContext(()=>w(o,e))).pipe(_u())})).pipe(Jl())));return It(h).pipe(Jl())}(e,c.path,t),function jJ(e,n,t){const o=n.routeConfig?n.routeConfig.canActivate:null;if(!o||0===o.length)return It(!0);const c=o.map(h=>sM(()=>{const p=gh(n)??t,m=Yl(h,p);return yu(function FJ(e){return e&&vh(e.canActivate)}(m)?m.canActivate(n,e):p.runInContext(()=>m(n,e))).pipe(_u())}));return It(c).pipe(Jl())}(e,c.route,t))),_u(c=>!0!==c,!0))}(o,h,e,n):It(m)),cn(m=>({...t,guardsResult:m})))})}(this.ngModule.injector,m=>this.triggerEvent(m)),wi(m=>{if(c.guardsResult=m.guardsResult,Ic(m.guardsResult))throw LM(0,m.guardsResult);const y=new rJ(m.id,this.serializeUrl(m.extractedUrl),this.serializeUrl(m.urlAfterRedirects),m.targetSnapshot,!!m.guardsResult);this.triggerEvent(y)}),mu(m=>!!m.guardsResult||(this.restoreHistory(m),this.cancelNavigationTransition(m,"",3),!1)),YI(m=>{if(m.guards.canActivateChecks.length)return It(m).pipe(wi(y=>{const C=new iJ(y.id,this.serializeUrl(y.extractedUrl),this.serializeUrl(y.urlAfterRedirects),y.targetSnapshot);this.triggerEvent(C)}),ta(y=>{let C=!1;return It(y).pipe(function dX(e,n){return oi(t=>{const{targetSnapshot:o,guards:{canActivateChecks:c}}=t;if(!c.length)return It(t);let h=0;return Br(c).pipe(vc(p=>function fX(e,n,t,o){const c=e.routeConfig,h=e._resolve;return void 0!==c?.title&&!nO(c)&&(h[ah]=c.title),function hX(e,n,t,o){const c=function pX(e){return[...Object.keys(e),...Object.getOwnPropertySymbols(e)]}(e);if(0===c.length)return It({});const h={};return Br(c).pipe(oi(p=>function gX(e,n,t,o){const c=gh(n)??o,h=Yl(e,c);return yu(h.resolve?h.resolve(n,t):c.runInContext(()=>h(n,t)))}(e[p],n,t,o).pipe(_u(),wi(m=>{h[p]=m}))),EI(1),function DY(e){return cn(()=>e)}(h),vu(p=>$I(p)?Ia:oh(p)))}(h,e,n,o).pipe(cn(p=>(e._resolvedData=p,e.data=MM(e,t).resolve,c&&nO(c)&&(e.data[ah]=c.title),null)))}(p.route,o,e,n)),wi(()=>h++),EI(1),oi(p=>h===c.length?It(t):Ia))})}(this.paramsInheritanceStrategy,this.ngModule.injector),wi({next:()=>C=!0,complete:()=>{C||(this.restoreHistory(y),this.cancelNavigationTransition(y,"",2))}}))}),wi(y=>{const C=new oJ(y.id,this.serializeUrl(y.extractedUrl),this.serializeUrl(y.urlAfterRedirects),y.targetSnapshot);this.triggerEvent(C)}))}),YI(m=>{const y=C=>{const w=[];C.routeConfig?.loadComponent&&!C.routeConfig._loadedComponent&&w.push(this.configLoader.loadComponent(C.routeConfig).pipe(wi(P=>{C.component=P}),cn(()=>{})));for(const P of C.children)w.push(...y(P));return w};return iM(y(m.targetSnapshot.root)).pipe(Im(),sh(1))}),YI(()=>this.afterPreactivation()),cn(m=>{const y=function gJ(e,n,t){const o=hh(e,n._root,t?t._root:void 0);return new FM(o,n)}(this.routeReuseStrategy,m.targetSnapshot,m.currentRouterState);return c={...m,targetRouterState:y}}),wi(m=>{this.currentUrlTree=m.urlAfterRedirects,this.rawUrlTree=this.urlHandlingStrategy.merge(m.urlAfterRedirects,m.rawUrl),this.routerState=m.targetRouterState,"deferred"===this.urlUpdateStrategy&&(m.extras.skipLocationChange||this.setBrowserUrl(this.rawUrlTree,m),this.browserUrlTree=m.urlAfterRedirects)}),((e,n,t)=>cn(o=>(new wJ(n,o.targetRouterState,o.currentRouterState,t).activate(e),o)))(this.rootContexts,this.routeReuseStrategy,m=>this.triggerEvent(m)),wi({next(){h=!0},complete(){h=!0}}),AI(()=>{h||p||this.cancelNavigationTransition(c,"",1),this.currentNavigation?.id===c.id&&(this.currentNavigation=null)}),vu(m=>{if(p=!0,UM(m)){BM(m)||(this.navigated=!0,this.restoreHistory(c,!0));const y=new Am(c.id,this.serializeUrl(c.extractedUrl),m.message,m.cancellationCode);if(o.next(y),BM(m)){const C=this.urlHandlingStrategy.merge(m.url,this.rawUrlTree),w={skipLocationChange:c.extras.skipLocationChange,replaceUrl:"eager"===this.urlUpdateStrategy||aO(c.source)};this.scheduleNavigation(C,"imperative",null,w,{resolve:c.resolve,reject:c.reject,promise:c.promise})}else c.resolve(!1)}else{this.restoreHistory(c,!0);const y=new PM(c.id,this.serializeUrl(c.extractedUrl),m,c.targetSnapshot??void 0);o.next(y);try{c.resolve(this.errorHandler(m))}catch(C){c.reject(C)}}return Ia}))}))}resetRootComponentType(t){this.rootComponentType=t,this.routerState.root.component=this.rootComponentType}setTransition(t){this.transitions.next({...this.transitions.value,...t})}initialNavigation(){this.setUpLocationChangeListener(),0===this.navigationId&&this.navigateByUrl(this.location.path(!0),{replaceUrl:!0})}setUpLocationChangeListener(){this.locationSubscription||(this.locationSubscription=this.location.subscribe(t=>{const o="popstate"===t.type?"popstate":"hashchange";"popstate"===o&&setTimeout(()=>{const c={replaceUrl:!0},h=t.state?.navigationId?t.state:null;if(h){const m={...h};delete m.navigationId,delete m.\u0275routerPageId,0!==Object.keys(m).length&&(c.state=m)}const p=this.parseUrl(t.url);this.scheduleNavigation(p,o,h,c)},0)}))}get url(){return this.serializeUrl(this.currentUrlTree)}getCurrentNavigation(){return this.currentNavigation}triggerEvent(t){this.events.next(t)}resetConfig(t){this.config=t.map(KI),this.navigated=!1,this.lastSuccessfulId=-1}ngOnDestroy(){this.dispose()}dispose(){this.transitions.complete(),this.locationSubscription&&(this.locationSubscription.unsubscribe(),this.locationSubscription=void 0),this.disposed=!0}createUrlTree(t,o={}){const{relativeTo:c,queryParams:h,fragment:p,queryParamsHandling:m,preserveFragment:y}=o,C=c||this.routerState.root,w=y?this.currentUrlTree.fragment:p;let P=null;switch(m){case"merge":P={...this.currentUrlTree.queryParams,...h};break;case"preserve":P=this.currentUrlTree.queryParams;break;default:P=h||null}return null!==P&&(P=this.removeEmptyProps(P)),QY(C,this.currentUrlTree,t,P,w??null)}navigateByUrl(t,o={skipLocationChange:!1}){const c=Ic(t)?t:this.parseUrl(t),h=this.urlHandlingStrategy.merge(c,this.rawUrlTree);return this.scheduleNavigation(h,"imperative",null,o)}navigate(t,o={skipLocationChange:!1}){return function EX(e){for(let n=0;n<e.length;n++){if(null==e[n])throw new ct(4008,false)}}(t),this.navigateByUrl(this.createUrlTree(t,o),o)}serializeUrl(t){return this.urlSerializer.serialize(t)}parseUrl(t){let o;try{o=this.urlSerializer.parse(t)}catch(c){o=this.malformedUriErrorHandler(c,this.urlSerializer,t)}return o}isActive(t,o){let c;if(c=!0===o?{...bX}:!1===o?{...wX}:o,Ic(t))return gM(this.currentUrlTree,t,c);const h=this.parseUrl(t);return gM(this.currentUrlTree,h,c)}removeEmptyProps(t){return Object.keys(t).reduce((o,c)=>{const h=t[c];return null!=h&&(o[c]=h),o},{})}processNavigations(){this.navigations.subscribe(t=>{this.navigated=!0,this.lastSuccessfulId=t.id,this.currentPageId=t.targetPageId,this.events.next(new Tc(t.id,this.serializeUrl(t.extractedUrl),this.serializeUrl(this.currentUrlTree))),this.lastSuccessfulNavigation=this.currentNavigation,this.titleStrategy?.updateTitle(this.routerState.snapshot),t.resolve(!0)},t=>{this.console.warn(`Unhandled Navigation Error: ${t}`)})}scheduleNavigation(t,o,c,h,p){if(this.disposed)return Promise.resolve(!1);let m,y,C;p?(m=p.resolve,y=p.reject,C=p.promise):C=new Promise((O,z)=>{m=O,y=z});const w=++this.navigationId;let P;return"computed"===this.canceledNavigationResolution?(0===this.currentPageId&&(c=this.location.getState()),P=c&&c.\u0275routerPageId?c.\u0275routerPageId:h.replaceUrl||h.skipLocationChange?this.browserPageId??0:(this.browserPageId??0)+1):P=0,this.setTransition({id:w,targetPageId:P,source:o,restoredState:c,currentUrlTree:this.currentUrlTree,currentRawUrl:this.rawUrlTree,rawUrl:t,extras:h,resolve:m,reject:y,promise:C,currentSnapshot:this.routerState.snapshot,currentRouterState:this.routerState}),C.catch(O=>Promise.reject(O))}setBrowserUrl(t,o){const c=this.urlSerializer.serialize(t),h={...o.extras.state,...this.generateNgRouterState(o.id,o.targetPageId)};this.location.isCurrentPathEqualTo(c)||o.extras.replaceUrl?this.location.replaceState(c,"",h):this.location.go(c,"",h)}restoreHistory(t,o=!1){if("computed"===this.canceledNavigationResolution){const c=this.currentPageId-t.targetPageId;"popstate"!==t.source&&"eager"!==this.urlUpdateStrategy&&this.currentUrlTree!==this.currentNavigation?.finalUrl||0===c?this.currentUrlTree===this.currentNavigation?.finalUrl&&0===c&&(this.resetState(t),this.browserUrlTree=t.currentUrlTree,this.resetUrlToCurrentUrlTree()):this.location.historyGo(c)}else"replace"===this.canceledNavigationResolution&&(o&&this.resetState(t),this.resetUrlToCurrentUrlTree())}resetState(t){this.routerState=t.currentRouterState,this.currentUrlTree=t.currentUrlTree,this.rawUrlTree=this.urlHandlingStrategy.merge(this.currentUrlTree,t.rawUrl)}resetUrlToCurrentUrlTree(){this.location.replaceState(this.urlSerializer.serialize(this.rawUrlTree),"",this.generateNgRouterState(this.lastSuccessfulId,this.currentPageId))}cancelNavigationTransition(t,o,c){const h=new Am(t.id,this.serializeUrl(t.extractedUrl),o,c);this.triggerEvent(h),t.resolve(!1)}generateNgRouterState(t,o){return"computed"===this.canceledNavigationResolution?{navigationId:t,\u0275routerPageId:o}:{navigationId:t}}}return e.\u0275fac=function(t){B0()},e.\u0275prov=Ht({token:e,factory:function(){return sO()},providedIn:"root"}),e})();function aO(e){return"imperative"!==e}let Sh=(()=>{class e{constructor(t,o,c){this.router=t,this.route=o,this.locationStrategy=c,this._preserveFragment=!1,this._skipLocationChange=!1,this._replaceUrl=!1,this.commands=null,this.href=null,this.onChanges=new Ks,this.subscription=t.events.subscribe(h=>{h instanceof Tc&&this.updateTargetUrlAndHref()})}set preserveFragment(t){this._preserveFragment=zl(t)}get preserveFragment(){return this._preserveFragment}set skipLocationChange(t){this._skipLocationChange=zl(t)}get skipLocationChange(){return this._skipLocationChange}set replaceUrl(t){this._replaceUrl=zl(t)}get replaceUrl(){return this._replaceUrl}set routerLink(t){this.commands=null!=t?Array.isArray(t)?t:[t]:null}ngOnChanges(t){this.updateTargetUrlAndHref(),this.onChanges.next(this)}ngOnDestroy(){this.subscription.unsubscribe()}onClick(t,o,c,h,p){return!!(0!==t||o||c||h||p||"string"==typeof this.target&&"_self"!=this.target||null===this.urlTree)||(this.router.navigateByUrl(this.urlTree,{skipLocationChange:this.skipLocationChange,replaceUrl:this.replaceUrl,state:this.state}),!1)}updateTargetUrlAndHref(){this.href=null!==this.urlTree?this.locationStrategy.prepareExternalUrl(this.router.serializeUrl(this.urlTree)):null}get urlTree(){return null===this.commands?null:this.router.createUrlTree(this.commands,{relativeTo:void 0!==this.relativeTo?this.relativeTo:this.route,queryParams:this.queryParams,fragment:this.fragment,queryParamsHandling:this.queryParamsHandling,preserveFragment:this.preserveFragment})}}return e.\u0275fac=function(t){return new(t||e)(_t(ai),_t(Cc),_t(_c))},e.\u0275dir=Si({type:e,selectors:[["a","routerLink",""],["area","routerLink",""]],hostVars:2,hostBindings:function(t,o){1&t&&_r("click",function(h){return o.onClick(h.button,h.ctrlKey,h.shiftKey,h.altKey,h.metaKey)}),2&t&&lS("target",o.target)("href",o.href,b0)},inputs:{target:"target",queryParams:"queryParams",fragment:"fragment",queryParamsHandling:"queryParamsHandling",state:"state",relativeTo:"relativeTo",preserveFragment:"preserveFragment",skipLocationChange:"skipLocationChange",replaceUrl:"replaceUrl",routerLink:"routerLink"},standalone:!0,features:[ac]}),e})();class uO{}let RX=(()=>{class e{constructor(t,o,c,h,p){this.router=t,this.injector=c,this.preloadingStrategy=h,this.loader=p}setUpPreloading(){this.subscription=this.router.events.pipe(mu(t=>t instanceof Tc),vc(()=>this.preload())).subscribe(()=>{})}preload(){return this.processRoutes(this.injector,this.router.config)}ngOnDestroy(){this.subscription&&this.subscription.unsubscribe()}processRoutes(t,o){const c=[];for(const h of o){h.providers&&!h._injector&&(h._injector=Kg(h.providers,t,`Route: ${h.path}`));const p=h._injector??t,m=h._loadedInjector??p;h.loadChildren&&!h._loadedRoutes&&void 0===h.canLoad||h.loadComponent&&!h._loadedComponent?c.push(this.preloadConfig(p,h)):(h.children||h._loadedRoutes)&&c.push(this.processRoutes(m,h.children??h._loadedRoutes))}return Br(c).pipe(il())}preloadConfig(t,o){return this.preloadingStrategy.preload(o,()=>{let c;c=o.loadChildren&&void 0===o.canLoad?this.loader.loadChildren(t,o):It(null);const h=c.pipe(oi(p=>null===p?It(void 0):(o._loadedRoutes=p.routes,o._loadedInjector=p.injector,this.processRoutes(p.injector??t,p.routes))));return o.loadComponent&&!o._loadedComponent?Br([h,this.loader.loadComponent(o)]).pipe(il()):h})}}return e.\u0275fac=function(t){return new(t||e)(Tt(ai),Tt(US),Tt(cu),Tt(uO),Tt(XI))},e.\u0275prov=Ht({token:e,factory:e.\u0275fac,providedIn:"root"}),e})();const eT=new At("");let cO=(()=>{class e{constructor(t,o,c={}){this.router=t,this.viewportScroller=o,this.options=c,this.lastId=0,this.lastSource="imperative",this.restoredId=0,this.store={},c.scrollPositionRestoration=c.scrollPositionRestoration||"disabled",c.anchorScrolling=c.anchorScrolling||"disabled"}init(){"disabled"!==this.options.scrollPositionRestoration&&this.viewportScroller.setHistoryScrollRestoration("manual"),this.routerEventsSubscription=this.createScrollEvents(),this.scrollEventsSubscription=this.consumeScrollEvents()}createScrollEvents(){return this.router.events.subscribe(t=>{t instanceof NI?(this.store[this.lastId]=this.viewportScroller.getScrollPosition(),this.lastSource=t.navigationTrigger,this.restoredId=t.restoredState?t.restoredState.navigationId:0):t instanceof Tc&&(this.lastId=t.id,this.scheduleScrollEvent(t,this.router.parseUrl(t.urlAfterRedirects).fragment))})}consumeScrollEvents(){return this.router.events.subscribe(t=>{t instanceof RM&&(t.position?"top"===this.options.scrollPositionRestoration?this.viewportScroller.scrollToPosition([0,0]):"enabled"===this.options.scrollPositionRestoration&&this.viewportScroller.scrollToPosition(t.position):t.anchor&&"enabled"===this.options.anchorScrolling?this.viewportScroller.scrollToAnchor(t.anchor):"disabled"!==this.options.scrollPositionRestoration&&this.viewportScroller.scrollToPosition([0,0]))})}scheduleScrollEvent(t,o){this.router.triggerEvent(new RM(t,"popstate"===this.lastSource?this.store[this.restoredId]:null,o))}ngOnDestroy(){this.routerEventsSubscription&&this.routerEventsSubscription.unsubscribe(),this.scrollEventsSubscription&&this.scrollEventsSubscription.unsubscribe()}}return e.\u0275fac=function(t){B0()},e.\u0275prov=Ht({token:e,factory:e.\u0275fac}),e})();function Xl(e,n){return{\u0275kind:e,\u0275providers:n}}function tT(e){return[{provide:JI,multi:!0,useValue:e}]}function dO(){const e=mr(ms);return n=>{const t=e.get(Zg);if(n!==t.components[0])return;const o=e.get(ai),c=e.get(fO);1===e.get(nT)&&o.initialNavigation(),e.get(hO,null,bt.Optional)?.setUpPreloading(),e.get(eT,null,bt.Optional)?.init(),o.resetRootComponentType(t.componentTypes[0]),c.closed||(c.next(),c.unsubscribe())}}const fO=new At("",{factory:()=>new Ks}),nT=new At("",{providedIn:"root",factory:()=>1});const hO=new At("");function MX(e){return Xl(0,[{provide:hO,useExisting:RX},{provide:uO,useExisting:e}])}const pO=new At("ROUTER_FORROOT_GUARD"),OX=[nI,{provide:yM,useClass:RI},{provide:ai,useFactory:sO},ph,{provide:Cc,useFactory:function lO(e){return e.routerState.root},deps:[ai]},XI];function NX(){return new zF("Router",ai)}let gO=(()=>{class e{constructor(t){}static forRoot(t,o){return{ngModule:e,providers:[OX,[],tT(t),{provide:pO,useFactory:UX,deps:[[ai,new Df,new Ef]]},{provide:Wm,useValue:o||{}},o?.useHash?{provide:_c,useClass:O$}:{provide:_c,useClass:mk},{provide:eT,useFactory:()=>{const e=mr(ai),n=mr(nQ),t=mr(Wm);return t.scrollOffset&&n.setOffset(t.scrollOffset),new cO(e,n,t)}},o?.preloadingStrategy?MX(o.preloadingStrategy).\u0275providers:[],{provide:zF,multi:!0,useFactory:NX},o?.initialNavigation?VX(o):[],[{provide:mO,useFactory:dO},{provide:WF,multi:!0,useExisting:mO}]]}}static forChild(t){return{ngModule:e,providers:[tT(t)]}}}return e.\u0275fac=function(t){return new(t||e)(Tt(pO,8))},e.\u0275mod=tc({type:e}),e.\u0275inj=ru({imports:[GI]}),e})();function UX(e){return"guarded"}function VX(e){return["disabled"===e.initialNavigation?Xl(3,[{provide:Yg,multi:!0,useFactory:()=>{const n=mr(ai);return()=>{n.setUpLocationChangeListener()}}},{provide:nT,useValue:2}]).\u0275providers:[],"enabledBlocking"===e.initialNavigation?Xl(2,[{provide:nT,useValue:0},{provide:Yg,multi:!0,deps:[ms],useFactory:n=>{const t=n.get(k$,Promise.resolve());let o=!1;return()=>t.then(()=>new Promise(h=>{const p=n.get(ai),m=n.get(fO);(function c(h){n.get(ai).events.pipe(mu(m=>m instanceof Tc||m instanceof Am||m instanceof PM),cn(m=>m instanceof Tc||m instanceof Am&&(0===m.code||1===m.code)&&null),mu(m=>null!==m),sh(1)).subscribe(()=>{h()})})(()=>{h(!0),o=!0}),p.afterPreactivation=()=>(h(!0),o||m.closed?It(void 0):m),p.initialNavigation()}))}}]).\u0275providers:[]]}const mO=new At(""),HX=[{id:"acquire-image",name:"Acquire Image",description:"The basic document scanning functionality"},{id:"image-editor",name:"Image Editor",description:"Image editing: rotate, mirror, flip and more"},{id:"remote-scan",name:"Remote Scan",description:"Scan documents without installing Dynamsoft service"}],GX=function(){return["/acquire-image"]};function zX(e,n){if(1&e&&(Pt(0,"a",3),Yt(1),Rt()),2&e){const t=Vf().$implicit;vs("title",t.name+" details")("routerLink",qf(3,GX)),Ra(1),hc("> ",t.name," ")}}const KX=function(){return["/image-editor"]};function $X(e,n){if(1&e&&(Pt(0,"a",3),Yt(1),Rt()),2&e){const t=Vf().$implicit;vs("title",t.name+" details")("routerLink",qf(3,KX)),Ra(1),hc("> ",t.name," ")}}const qX=function(){return["/remote-scan"]};function QX(e,n){if(1&e&&(Pt(0,"a",3),Yt(1),Rt()),2&e){const t=Vf().$implicit;vs("title",t.name+" details")("routerLink",qf(3,qX)),Ra(1),hc("> ",t.name," ")}}function YX(e,n){if(1&e&&(Pt(0,"p"),Yt(1),Rt()),2&e){const t=Vf().$implicit;Ra(1),hc("Description: ",t.description,"")}}function JX(e,n){if(1&e&&(Pt(0,"div")(1,"h3")(2,"div"),Bl(3,zX,2,4,"ng-template",1),Bl(4,$X,2,4,"ng-template",1),Bl(5,QX,2,4,"ng-template",1),Rt()(),Bl(6,YX,2,1,"p",2),Rt()),2&e){const t=n.$implicit;Ra(3),vs("ngIf","acquire-image"===t.id),Ra(1),vs("ngIf","image-editor"===t.id),Ra(1),vs("ngIf","remote-scan"===t.id),Ra(1),vs("ngIf",t.description)}}let XX=(()=>{class e{constructor(){this.products=HX}}return e.\u0275fac=function(t){return new(t||e)},e.\u0275cmp=ba({type:e,selectors:[["app-product-list"]],decls:1,vars:1,consts:[[4,"ngFor","ngForOf"],[3,"ngIf"],[4,"ngIf"],[3,"title","routerLink"]],template:function(t,o){1&t&&Bl(0,JX,7,4,"div",0),2&t&&vs("ngForOf",o.products)},dependencies:[Ak,Rk,Sh]}),e})();var e,B,Uo=self||window||{};(e=B=Uo.Dynamsoft||{}).DWT||(e.DWT={}),e.DWT.LTS||(e.DWT.LTS={}),e.Lib||(e.Lib={}),e.Lib.UI||(e.Lib.UI={}),e.Lib.html5||(e.Lib.html5={}),Uo.Dynamsoft=e,function(e){if(!e.WeakSet){let p=function(m){this.name="__st"+(1e9*Math.random()>>>0)+n+++"__",m&&m.forEach&&m.forEach(this.add,this)};e.WeakSet=p;var n=Date.now()%1e9,t=p.prototype;t.add=function(m){var y=this.name;return m[y]||Object.defineProperty(m,y,{value:!0,writable:!0}),this},t.delete=function(m){return!!m[this.name]&&(m[this.name]=void 0,!0)},t.has=function(m){return!!m[this.name]}}if(!e.WeakMap){let p=function(m){return Object(m)===m};var o=Object.prototype.hasOwnProperty,c=Object.defineProperty&&function(){try{return 1===Object.defineProperty({},"x",{value:1}).x}catch{}}(),h=function(m,y,C){c?Object.defineProperty(m,y,{configurable:!0,writable:!0,value:C}):m[y]=C};e.WeakMap=function(){function m(){if(void 0===this)throw new TypeError("Constructor WeakMap requires 'new'");if(h(this,"_id",C("_WeakMap")),arguments.length>0)throw new TypeError("WeakMap iterable is not supported")}function y(P,O){if(!p(P)||!o.call(P,"_id"))throw new TypeError(O+" method called on incompatible receiver "+typeof P)}function C(P){return P+"_"+w()+"."+w()}function w(){return Math.random().toString().substring(2)}return h(m.prototype,"delete",function(P){if(y(this,"delete"),!p(P))return!1;var O=P[this._id];return!(!O||O[0]!==P||(delete P[this._id],0))}),h(m.prototype,"get",function(P){if(y(this,"get"),p(P)){var O=P[this._id];if(O&&O[0]===P)return O[1]}}),h(m.prototype,"has",function(P){if(y(this,"has"),!p(P))return!1;var O=P[this._id];return!(!O||O[0]!==P)}),h(m.prototype,"set",function(P,O){if(y(this,"set"),!p(P))throw new TypeError("Invalid value used as weak map key");var z=P[this._id];return z&&z[0]===P?(z[1]=O,this):(h(P,this._id,[P,O]),this)}),h(m,"_polyfill",!0),m}()}}(typeof Uo<"u"?Uo:typeof self<"u"?self:typeof window<"u"?window:typeof global<"u"?global:void 0),function(e){if("object"==typeof exports)module.exports=e();else if("function"==typeof define&&define.amd)define(e);else{var n;try{n=window}catch{n=self}n.SparkMD5=e()}}(function(e){var t=["0","1","2","3","4","5","6","7","8","9","a","b","c","d","e","f"];function c(K,q){var N=K[0],H=K[1],re=K[2],ie=K[3];H=((H+=((re=((re+=((ie=((ie+=((N=((N+=(H&re|~H&ie)+q[0]-680876936|0)<<7|N>>>25)+H|0)&H|~N&re)+q[1]-389564586|0)<<12|ie>>>20)+N|0)&N|~ie&H)+q[2]+606105819|0)<<17|re>>>15)+ie|0)&ie|~re&N)+q[3]-1044525330|0)<<22|H>>>10)+re|0,H=((H+=((re=((re+=((ie=((ie+=((N=((N+=(H&re|~H&ie)+q[4]-176418897|0)<<7|N>>>25)+H|0)&H|~N&re)+q[5]+1200080426|0)<<12|ie>>>20)+N|0)&N|~ie&H)+q[6]-1473231341|0)<<17|re>>>15)+ie|0)&ie|~re&N)+q[7]-45705983|0)<<22|H>>>10)+re|0,H=((H+=((re=((re+=((ie=((ie+=((N=((N+=(H&re|~H&ie)+q[8]+1770035416|0)<<7|N>>>25)+H|0)&H|~N&re)+q[9]-1958414417|0)<<12|ie>>>20)+N|0)&N|~ie&H)+q[10]-42063|0)<<17|re>>>15)+ie|0)&ie|~re&N)+q[11]-1990404162|0)<<22|H>>>10)+re|0,H=((H+=((re=((re+=((ie=((ie+=((N=((N+=(H&re|~H&ie)+q[12]+1804603682|0)<<7|N>>>25)+H|0)&H|~N&re)+q[13]-40341101|0)<<12|ie>>>20)+N|0)&N|~ie&H)+q[14]-1502002290|0)<<17|re>>>15)+ie|0)&ie|~re&N)+q[15]+1236535329|0)<<22|H>>>10)+re|0,H=((H+=((re=((re+=((ie=((ie+=((N=((N+=(H&ie|re&~ie)+q[1]-165796510|0)<<5|N>>>27)+H|0)&re|H&~re)+q[6]-1069501632|0)<<9|ie>>>23)+N|0)&H|N&~H)+q[11]+643717713|0)<<14|re>>>18)+ie|0)&N|ie&~N)+q[0]-373897302|0)<<20|H>>>12)+re|0,H=((H+=((re=((re+=((ie=((ie+=((N=((N+=(H&ie|re&~ie)+q[5]-701558691|0)<<5|N>>>27)+H|0)&re|H&~re)+q[10]+38016083|0)<<9|ie>>>23)+N|0)&H|N&~H)+q[15]-660478335|0)<<14|re>>>18)+ie|0)&N|ie&~N)+q[4]-405537848|0)<<20|H>>>12)+re|0,H=((H+=((re=((re+=((ie=((ie+=((N=((N+=(H&ie|re&~ie)+q[9]+568446438|0)<<5|N>>>27)+H|0)&re|H&~re)+q[14]-1019803690|0)<<9|ie>>>23)+N|0)&H|N&~H)+q[3]-187363961|0)<<14|re>>>18)+ie|0)&N|ie&~N)+q[8]+1163531501|0)<<20|H>>>12)+re|0,H=((H+=((re=((re+=((ie=((ie+=((N=((N+=(H&ie|re&~ie)+q[13]-1444681467|0)<<5|N>>>27)+H|0)&re|H&~re)+q[2]-51403784|0)<<9|ie>>>23)+N|0)&H|N&~H)+q[7]+1735328473|0)<<14|re>>>18)+ie|0)&N|ie&~N)+q[12]-1926607734|0)<<20|H>>>12)+re|0,H=((H+=((re=((re+=((ie=((ie+=((N=((N+=(H^re^ie)+q[5]-378558|0)<<4|N>>>28)+H|0)^H^re)+q[8]-2022574463|0)<<11|ie>>>21)+N|0)^N^H)+q[11]+1839030562|0)<<16|re>>>16)+ie|0)^ie^N)+q[14]-35309556|0)<<23|H>>>9)+re|0,H=((H+=((re=((re+=((ie=((ie+=((N=((N+=(H^re^ie)+q[1]-1530992060|0)<<4|N>>>28)+H|0)^H^re)+q[4]+1272893353|0)<<11|ie>>>21)+N|0)^N^H)+q[7]-155497632|0)<<16|re>>>16)+ie|0)^ie^N)+q[10]-1094730640|0)<<23|H>>>9)+re|0,H=((H+=((re=((re+=((ie=((ie+=((N=((N+=(H^re^ie)+q[13]+681279174|0)<<4|N>>>28)+H|0)^H^re)+q[0]-358537222|0)<<11|ie>>>21)+N|0)^N^H)+q[3]-722521979|0)<<16|re>>>16)+ie|0)^ie^N)+q[6]+76029189|0)<<23|H>>>9)+re|0,H=((H+=((re=((re+=((ie=((ie+=((N=((N+=(H^re^ie)+q[9]-640364487|0)<<4|N>>>28)+H|0)^H^re)+q[12]-421815835|0)<<11|ie>>>21)+N|0)^N^H)+q[15]+530742520|0)<<16|re>>>16)+ie|0)^ie^N)+q[2]-995338651|0)<<23|H>>>9)+re|0,H=((H+=((ie=((ie+=(H^((N=((N+=(re^(H|~ie))+q[0]-198630844|0)<<6|N>>>26)+H|0)|~re))+q[7]+1126891415|0)<<10|ie>>>22)+N|0)^((re=((re+=(N^(ie|~H))+q[14]-1416354905|0)<<15|re>>>17)+ie|0)|~N))+q[5]-57434055|0)<<21|H>>>11)+re|0,H=((H+=((ie=((ie+=(H^((N=((N+=(re^(H|~ie))+q[12]+1700485571|0)<<6|N>>>26)+H|0)|~re))+q[3]-1894986606|0)<<10|ie>>>22)+N|0)^((re=((re+=(N^(ie|~H))+q[10]-1051523|0)<<15|re>>>17)+ie|0)|~N))+q[1]-2054922799|0)<<21|H>>>11)+re|0,H=((H+=((ie=((ie+=(H^((N=((N+=(re^(H|~ie))+q[8]+1873313359|0)<<6|N>>>26)+H|0)|~re))+q[15]-30611744|0)<<10|ie>>>22)+N|0)^((re=((re+=(N^(ie|~H))+q[6]-1560198380|0)<<15|re>>>17)+ie|0)|~N))+q[13]+1309151649|0)<<21|H>>>11)+re|0,H=((H+=((ie=((ie+=(H^((N=((N+=(re^(H|~ie))+q[4]-145523070|0)<<6|N>>>26)+H|0)|~re))+q[11]-1120210379|0)<<10|ie>>>22)+N|0)^((re=((re+=(N^(ie|~H))+q[2]+718787259|0)<<15|re>>>17)+ie|0)|~N))+q[9]-343485551|0)<<21|H>>>11)+re|0,K[0]=N+K[0]|0,K[1]=H+K[1]|0,K[2]=re+K[2]|0,K[3]=ie+K[3]|0}function h(K){var N,q=[];for(N=0;N<64;N+=4)q[N>>2]=K.charCodeAt(N)+(K.charCodeAt(N+1)<<8)+(K.charCodeAt(N+2)<<16)+(K.charCodeAt(N+3)<<24);return q}function p(K){var N,q=[];for(N=0;N<64;N+=4)q[N>>2]=K[N]+(K[N+1]<<8)+(K[N+2]<<16)+(K[N+3]<<24);return q}function m(K){var H,re,ie,De,ee,ue,q=K.length,N=[1732584193,-271733879,-1732584194,271733878];for(H=64;H<=q;H+=64)c(N,h(K.substring(H-64,H)));for(re=(K=K.substring(H-64)).length,ie=[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0],H=0;H<re;H+=1)ie[H>>2]|=K.charCodeAt(H)<<(H%4<<3);if(ie[H>>2]|=128<<(H%4<<3),H>55)for(c(N,ie),H=0;H<16;H+=1)ie[H]=0;return De=(De=8*q).toString(16).match(/(.*?)(.{0,8})$/),ee=parseInt(De[2],16),ue=parseInt(De[1],16)||0,ie[14]=ee,ie[15]=ue,c(N,ie),N}function C(K){var N,q="";for(N=0;N<4;N+=1)q+=t[K>>8*N+4&15]+t[K>>8*N&15];return q}function w(K){var q;for(q=0;q<K.length;q+=1)K[q]=C(K[q]);return K.join("")}function P(K){return/[\u0080-\uFFFF]/.test(K)&&(K=unescape(encodeURIComponent(K))),K}function ne(K){var H,q=[],N=K.length;for(H=0;H<N-1;H+=2)q.push(parseInt(K.substr(H,2),16));return String.fromCharCode.apply(String,q)}function $(){this.reset()}return w(m("hello")),typeof ArrayBuffer<"u"&&!ArrayBuffer.prototype.slice&&function(){function K(q,N){return(q=0|q||0)<0?Math.max(q+N,0):Math.min(q,N)}ArrayBuffer.prototype.slice=function(q,N){var De,ee,ue,ce,H=this.byteLength,re=K(q,H),ie=H;return N!==e&&(ie=K(N,H)),re>ie?new ArrayBuffer(0):(De=ie-re,ee=new ArrayBuffer(De),ue=new Uint8Array(ee),ce=new Uint8Array(this,re,De),ue.set(ce),ee)}}(),$.prototype.append=function(K){return this.appendBinary(P(K)),this},$.prototype.appendBinary=function(K){this._buff+=K,this._length+=K.length;var N,q=this._buff.length;for(N=64;N<=q;N+=64)c(this._hash,h(this._buff.substring(N-64,N)));return this._buff=this._buff.substring(N-64),this},$.prototype.end=function(K){var H,ie,q=this._buff,N=q.length,re=[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0];for(H=0;H<N;H+=1)re[H>>2]|=q.charCodeAt(H)<<(H%4<<3);return this._finish(re,N),ie=w(this._hash),K&&(ie=ne(ie)),this.reset(),ie},$.prototype.reset=function(){return this._buff="",this._length=0,this._hash=[1732584193,-271733879,-1732584194,271733878],this},$.prototype.getState=function(){return{buff:this._buff,length:this._length,hash:this._hash.slice()}},$.prototype.setState=function(K){return this._buff=K.buff,this._length=K.length,this._hash=K.hash,this},$.prototype.destroy=function(){delete this._hash,delete this._buff,delete this._length},$.prototype._finish=function(K,q){var H,re,ie,N=q;if(K[N>>2]|=128<<(N%4<<3),N>55)for(c(this._hash,K),N=0;N<16;N+=1)K[N]=0;H=(H=8*this._length).toString(16).match(/(.*?)(.{0,8})$/),re=parseInt(H[2],16),ie=parseInt(H[1],16)||0,K[14]=re,K[15]=ie,c(this._hash,K)},$.hash=function(K,q){return $.hashBinary(P(K),q)},$.hashBinary=function(K,q){var H=w(m(K));return q?ne(H):H},($.ArrayBuffer=function(){this.reset()}).prototype.append=function(K){var H,q=function A(K,q,N){var H=new Uint8Array(K.byteLength+q.byteLength);return H.set(new Uint8Array(K)),H.set(new Uint8Array(q),K.byteLength),N?H:H.buffer}(this._buff.buffer,K,!0),N=q.length;for(this._length+=K.byteLength,H=64;H<=N;H+=64)c(this._hash,p(q.subarray(H-64,H)));return this._buff=H-64<N?new Uint8Array(q.buffer.slice(H-64)):new Uint8Array(0),this},$.ArrayBuffer.prototype.end=function(K){var re,ie,q=this._buff,N=q.length,H=[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0];for(re=0;re<N;re+=1)H[re>>2]|=q[re]<<(re%4<<3);return this._finish(H,N),ie=w(this._hash),K&&(ie=ne(ie)),this.reset(),ie},$.ArrayBuffer.prototype.reset=function(){return this._buff=new Uint8Array(0),this._length=0,this._hash=[1732584193,-271733879,-1732584194,271733878],this},$.ArrayBuffer.prototype.getState=function(){var K=$.prototype.getState.call(this);return K.buff=function z(K){return String.fromCharCode.apply(null,new Uint8Array(K))}(K.buff),K},$.ArrayBuffer.prototype.setState=function(K){return K.buff=function O(K,q){var ie,N=K.length,H=new ArrayBuffer(N),re=new Uint8Array(H);for(ie=0;ie<N;ie+=1)re[ie]=K.charCodeAt(ie);return q?re:H}(K.buff,!0),$.prototype.setState.call(this,K)},$.ArrayBuffer.prototype.destroy=$.prototype.destroy,$.ArrayBuffer.prototype._finish=$.prototype._finish,$.ArrayBuffer.hash=function(K,q){var N=function y(K){var H,re,ie,De,ee,ue,q=K.length,N=[1732584193,-271733879,-1732584194,271733878];for(H=64;H<=q;H+=64)c(N,p(K.subarray(H-64,H)));for(re=(K=H-64<q?K.subarray(H-64):new Uint8Array(0)).length,ie=[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0],H=0;H<re;H+=1)ie[H>>2]|=K[H]<<(H%4<<3);if(ie[H>>2]|=128<<(H%4<<3),H>55)for(c(N,ie),H=0;H<16;H+=1)ie[H]=0;return De=(De=8*q).toString(16).match(/(.*?)(.{0,8})$/),ee=parseInt(De[2],16),ue=parseInt(De[1],16)||0,ie[14]=ee,ie[15]=ue,c(N,ie),N}(new Uint8Array(K)),H=w(N);return q?ne(H):H},$}),function(){function e(r){return(e="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(i){return typeof i}:function(i){return i&&"function"==typeof Symbol&&i.constructor===Symbol&&i!==Symbol.prototype?"symbol":typeof i})(r)}function n(r,i){if(!(r instanceof i))throw new TypeError("Cannot call a class as a function")}function t(r){var i=function(a,s){if("object"!==e(a)||null===a)return a;var u=a[Symbol.toPrimitive];if(void 0!==u){var l=u.call(a,"string");if("object"!==e(l))return l;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(a)}(r);return"symbol"===e(i)?i:String(i)}function o(r,i){for(var a=0;a<i.length;a++){var s=i[a];s.enumerable=s.enumerable||!1,s.configurable=!0,"value"in s&&(s.writable=!0),Object.defineProperty(r,t(s.key),s)}}function c(r,i,a){return i&&o(r.prototype,i),a&&o(r,a),Object.defineProperty(r,"prototype",{writable:!1}),r}var h=typeof Uo<"u"?Uo:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};function p(r){return r&&r.__esModule&&Object.prototype.hasOwnProperty.call(r,"default")?r.default:r}var m={exports:{}},y={exports:{}};!function(r){function i(a){return r.exports=i="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(s){return typeof s}:function(s){return s&&"function"==typeof Symbol&&s.constructor===Symbol&&s!==Symbol.prototype?"symbol":typeof s},r.exports.__esModule=!0,r.exports.default=r.exports,i(a)}r.exports=i,r.exports.__esModule=!0,r.exports.default=r.exports}(y);var C=y.exports;!function(r){var i=C.default;function a(){r.exports=a=function(){return s},r.exports.__esModule=!0,r.exports.default=r.exports;var s={},u=Object.prototype,l=u.hasOwnProperty,d=Object.defineProperty||function(X,ae,he){X[ae]=he.value},f="function"==typeof Symbol?Symbol:{},g=f.iterator||"@@iterator",_=f.asyncIterator||"@@asyncIterator",T=f.toStringTag||"@@toStringTag";function S(X,ae,he){return Object.defineProperty(X,ae,{value:he,enumerable:!0,configurable:!0,writable:!0}),X[ae]}try{S({},"")}catch{S=function(ae,he,ye){return ae[he]=ye}}function I(X,ae,he,ye){var Ke=Object.create((ae&&ae.prototype instanceof R?ae:R).prototype),Ze=new J(ye||[]);return d(Ke,"_invoke",{value:E(X,he,Ze)}),Ke}function b(X,ae,he){try{return{type:"normal",arg:X.call(ae,he)}}catch(ye){return{type:"throw",arg:ye}}}s.wrap=I;var D={};function R(){}function L(){}function x(){}var U={};S(U,g,function(){return this});var Y=Object.getPrototypeOf,Z=Y&&Y(Y(Q([])));Z&&Z!==u&&l.call(Z,g)&&(U=Z);var oe=x.prototype=R.prototype=Object.create(U);function se(X){["next","throw","return"].forEach(function(ae){S(X,ae,function(he){return this._invoke(ae,he)})})}function k(X,ae){function he(Ce,Ke,Ze,dt){var ft=b(X[Ce],X,Ke);if("throw"!==ft.type){var ke=ft.arg,Te=ke.value;return Te&&"object"==i(Te)&&l.call(Te,"__await")?ae.resolve(Te.__await).then(function(Oe){he("next",Oe,Ze,dt)},function(Oe){he("throw",Oe,Ze,dt)}):ae.resolve(Te).then(function(Oe){ke.value=Oe,Ze(ke)},function(Oe){return he("throw",Oe,Ze,dt)})}dt(ft.arg)}var ye;d(this,"_invoke",{value:function(Ce,Ke){function Ze(){return new ae(function(dt,ft){he(Ce,Ke,dt,ft)})}return ye=ye?ye.then(Ze,Ze):Ze()}})}function E(X,ae,he){var ye="suspendedStart";return function(Ce,Ke){if("executing"===ye)throw new Error("Generator is already running");if("completed"===ye){if("throw"===Ce)throw Ke;return{value:void 0,done:!0}}for(he.method=Ce,he.arg=Ke;;){var Ze=he.delegate;if(Ze){var dt=M(Ze,he);if(dt){if(dt===D)continue;return dt}}if("next"===he.method)he.sent=he._sent=he.arg;else if("throw"===he.method){if("suspendedStart"===ye)throw ye="completed",he.arg;he.dispatchException(he.arg)}else"return"===he.method&&he.abrupt("return",he.arg);ye="executing";var ft=b(X,ae,he);if("normal"===ft.type){if(ye=he.done?"completed":"suspendedYield",ft.arg===D)continue;return{value:ft.arg,done:he.done}}"throw"===ft.type&&(ye="completed",he.method="throw",he.arg=ft.arg)}}}function M(X,ae){var he=ae.method,ye=X.iterator[he];if(void 0===ye)return ae.delegate=null,"throw"===he&&X.iterator.return&&(ae.method="return",ae.arg=void 0,M(X,ae),"throw"===ae.method)||"return"!==he&&(ae.method="throw",ae.arg=new TypeError("The iterator does not provide a '"+he+"' method")),D;var Ce=b(ye,X.iterator,ae.arg);if("throw"===Ce.type)return ae.method="throw",ae.arg=Ce.arg,ae.delegate=null,D;var Ke=Ce.arg;return Ke?Ke.done?(ae[X.resultName]=Ke.value,ae.next=X.nextLoc,"return"!==ae.method&&(ae.method="next",ae.arg=void 0),ae.delegate=null,D):Ke:(ae.method="throw",ae.arg=new TypeError("iterator result is not an object"),ae.delegate=null,D)}function G(X){var ae={tryLoc:X[0]};1 in X&&(ae.catchLoc=X[1]),2 in X&&(ae.finallyLoc=X[2],ae.afterLoc=X[3]),this.tryEntries.push(ae)}function V(X){var ae=X.completion||{};ae.type="normal",delete ae.arg,X.completion=ae}function J(X){this.tryEntries=[{tryLoc:"root"}],X.forEach(G,this),this.reset(!0)}function Q(X){if(X){var ae=X[g];if(ae)return ae.call(X);if("function"==typeof X.next)return X;if(!isNaN(X.length)){var he=-1,ye=function Ce(){for(;++he<X.length;)if(l.call(X,he))return Ce.value=X[he],Ce.done=!1,Ce;return Ce.value=void 0,Ce.done=!0,Ce};return ye.next=ye}}return{next:te}}function te(){return{value:void 0,done:!0}}return L.prototype=x,d(oe,"constructor",{value:x,configurable:!0}),d(x,"constructor",{value:L,configurable:!0}),L.displayName=S(x,T,"GeneratorFunction"),s.isGeneratorFunction=function(X){var ae="function"==typeof X&&X.constructor;return!!ae&&(ae===L||"GeneratorFunction"===(ae.displayName||ae.name))},s.mark=function(X){return Object.setPrototypeOf?Object.setPrototypeOf(X,x):(X.__proto__=x,S(X,T,"GeneratorFunction")),X.prototype=Object.create(oe),X},s.awrap=function(X){return{__await:X}},se(k.prototype),S(k.prototype,_,function(){return this}),s.AsyncIterator=k,s.async=function(X,ae,he,ye,Ce){void 0===Ce&&(Ce=Promise);var Ke=new k(I(X,ae,he,ye),Ce);return s.isGeneratorFunction(ae)?Ke:Ke.next().then(function(Ze){return Ze.done?Ze.value:Ke.next()})},se(oe),S(oe,T,"Generator"),S(oe,g,function(){return this}),S(oe,"toString",function(){return"[object Generator]"}),s.keys=function(X){var ae=Object(X),he=[];for(var ye in ae)he.push(ye);return he.reverse(),function Ce(){for(;he.length;){var Ke=he.pop();if(Ke in ae)return Ce.value=Ke,Ce.done=!1,Ce}return Ce.done=!0,Ce}},s.values=Q,J.prototype={constructor:J,reset:function(X){if(this.prev=0,this.next=0,this.sent=this._sent=void 0,this.done=!1,this.delegate=null,this.method="next",this.arg=void 0,this.tryEntries.forEach(V),!X)for(var ae in this)"t"===ae.charAt(0)&&l.call(this,ae)&&!isNaN(+ae.slice(1))&&(this[ae]=void 0)},stop:function(){this.done=!0;var X=this.tryEntries[0].completion;if("throw"===X.type)throw X.arg;return this.rval},dispatchException:function(X){if(this.done)throw X;var ae=this;function he(ft,ke){return Ke.type="throw",Ke.arg=X,ae.next=ft,ke&&(ae.method="next",ae.arg=void 0),!!ke}for(var ye=this.tryEntries.length-1;ye>=0;--ye){var Ce=this.tryEntries[ye],Ke=Ce.completion;if("root"===Ce.tryLoc)return he("end");if(Ce.tryLoc<=this.prev){var Ze=l.call(Ce,"catchLoc"),dt=l.call(Ce,"finallyLoc");if(Ze&&dt){if(this.prev<Ce.catchLoc)return he(Ce.catchLoc,!0);if(this.prev<Ce.finallyLoc)return he(Ce.finallyLoc)}else if(Ze){if(this.prev<Ce.catchLoc)return he(Ce.catchLoc,!0)}else{if(!dt)throw new Error("try statement without catch or finally");if(this.prev<Ce.finallyLoc)return he(Ce.finallyLoc)}}}},abrupt:function(X,ae){for(var he=this.tryEntries.length-1;he>=0;--he){var ye=this.tryEntries[he];if(ye.tryLoc<=this.prev&&l.call(ye,"finallyLoc")&&this.prev<ye.finallyLoc){var Ce=ye;break}}Ce&&("break"===X||"continue"===X)&&Ce.tryLoc<=ae&&ae<=Ce.finallyLoc&&(Ce=null);var Ke=Ce?Ce.completion:{};return Ke.type=X,Ke.arg=ae,Ce?(this.method="next",this.next=Ce.finallyLoc,D):this.complete(Ke)},complete:function(X,ae){if("throw"===X.type)throw X.arg;return"break"===X.type||"continue"===X.type?this.next=X.arg:"return"===X.type?(this.rval=this.arg=X.arg,this.method="return",this.next="end"):"normal"===X.type&&ae&&(this.next=ae),D},finish:function(X){for(var ae=this.tryEntries.length-1;ae>=0;--ae){var he=this.tryEntries[ae];if(he.finallyLoc===X)return this.complete(he.completion,he.afterLoc),V(he),D}},catch:function(X){for(var ae=this.tryEntries.length-1;ae>=0;--ae){var he=this.tryEntries[ae];if(he.tryLoc===X){var ye=he.completion;if("throw"===ye.type){var Ce=ye.arg;V(he)}return Ce}}throw new Error("illegal catch attempt")},delegateYield:function(X,ae,he){return this.delegate={iterator:Q(X),resultName:ae,nextLoc:he},"next"===this.method&&(this.arg=void 0),D}},s}r.exports=a,r.exports.__esModule=!0,r.exports.default=r.exports}(m);var w=(0,m.exports)(),P=w;try{regeneratorRuntime=w}catch{"object"==typeof Uo?Uo.regeneratorRuntime=w:Function("r","regeneratorRuntime = r")(w)}var O,z,A=p(P);function ne(r){var i=r?new Date(r):new Date,a="yyyy-MM-dd HH:mm:ss.SSSZ",s={"M+":i.getUTCMonth()+1,"d+":i.getUTCDate(),"H+":i.getUTCHours(),"h+":i.getUTCHours()%12||12,"m+":i.getUTCMinutes(),"s+":i.getUTCSeconds(),"q+":Math.floor((i.getUTCMonth()+3)/3),"S+":i.getUTCMilliseconds()};for(var u in/(y+)/.test(a)&&(a=a.replace(RegExp.$1,(i.getUTCFullYear()+"").substr(4-RegExp.$1.length))),s)new RegExp("("+u+")").test(a)&&(a=a.replace(RegExp.$1,1==RegExp.$1.length?s[u]:("000"+s[u]).substr(("000"+s[u]).length-RegExp.$1.length)));return a}function $(r){return r===z}function K(r){return r!==z}function q(r){return null===r}O="object"===(typeof window>"u"?"undefined":e(window))?window:{};var N={"[object Function]":"function","[object AsyncFunction]":"function","[object String]":"string","[object Object]":"object","[object Boolean]":"boolean","[object Number]":"number","[object Array]":"array"};function H(r){return q(r)||$(r)?String(r):N[{}.toString.call(r)]||"object"}function re(r){return"function"===H(r)}function ie(r){return"string"===H(r)}function De(r){return"object"===H(r)}function ee(r){return"boolean"===H(r)}function ue(r){return"number"===H(r)}function ce(r){return Array.isArray?Array.isArray(r):"array"===H(r)}function fe(r){if(null==r)return[];if(ce(r))return r;var i=e(r.length),a=e(r);if("number"!==i||r.alert||"string"===a||"function"===a&&(!("item"in r)||"number"!==i))return[r];for(var s=[],u=0,l=r.length;u<l;u++)s[u]=r[u];return s}var le,me,Pe={debug:!1,showConsoleError:!1};function pe(){return le}function Re(r){le=r}function xe(r,i,a,s){if(Pe.debug&&me&&re(me.log)){var u=ne((new Date).getTime()),l=fe(arguments);me.log(["[",u,"] ",l].join(""))}}function Fe(r,i,a,s){if((Pe.debug||Pe.showConsoleError)&&me&&re(me.error)){var u=ne((new Date).getTime()),l=fe(arguments);me.error(["[",u,"] ",l].join(""))}}function Xe(r,i,a,s){if(Pe.debug&&me&&re(me.warn)){var u=ne((new Date).getTime()),l=fe(arguments);me.warn(["[",u,"] ",l].join(""))}}function st(r,i,a,s){if(Pe.debug&&me&&re(me.info)){var u=ne((new Date).getTime()),l=fe(arguments);me.info(["[",u,"] ",l].join(""))}}O&&K(O.console)&&(re((me=O.console).log)&&re(me.error)?le={log:xe,error:Fe,info:st,warn:Xe,debug:function(r,i,a,s){if(Pe.debug&&me&&re(me.debug)){var u=ne((new Date).getTime()),l=fe(arguments);me.debug(["[",u,"] ",l].join(""))}}}:(me=!1,le=!1));var Ge={queue:[],doNextStarted:!1,timer:null,pushToDo:function(r,i,a){Ge.queue.push({obj:r,method:i,args:a})},doNext:function(){if(Ge.doNextStarted)if(0!=Ge.queue.length){var r=Ge.queue[0],i=r.obj,a=r.method,s=r.args;if(Ge.queue.splice(0,1),i&&re(i[a])){var u=!1;if(s.length>2){var l=s[s.length-2],d=s[s.length-1];re(l)&&re(d)&&(s[s.length-2]=function(){try{l.apply(i,arguments)}catch{}Ge.timer=setTimeout(Ge.doNext,0)},s[s.length-1]=function(){try{d.apply(i,arguments)}catch{}Ge.timer=setTimeout(Ge.doNext,0)},u=!0)}try{i[a].apply(i,s)}catch{}u||(Ge.timer=setTimeout(Ge.doNext,0))}else if(null===i&&re(a)){try{a.apply(null,s)}catch{}Ge.timer=setTimeout(Ge.doNext,0)}else xe("not invoke a function: "+a),Ge.timer=setTimeout(Ge.doNext,0)}else Ge.stop();else Ge.stop()},start:function(){Ge.doNextStarted||(Ge.doNextStarted=!0,Ge.timer=setTimeout(Ge.doNext,0))},stop:function(){clearTimeout(Ge.timer),Ge.timer=null,Ge.doNextStarted=!1,Ge.queue=[]}},nt=!0,ut=!1;function en(r,i,a){if(r){var s,u,l,d=0,f=r.length;if(a=a||null,$(f)||re(r))for(l=Object.keys(r);d<l.length&&i.call(a,r[s=l[d]],s,r)!==ut;d++);else for(u=r[0];d<f&&i.call(a,u,d,r)!==ut;u=r[++d]);}return r}var nn={fire:function(r){var i,a=this;a.exec=a.exec||{},r=r.toLowerCase(),i=Array.prototype.slice.call(arguments,1),en(a.exec[r]||[],function(s){var u=s.f,l=s.c||a;try{u.apply(l,i)}catch(d){xe(d)}})},on:function(r,i,a){var s=this;s.exec=s.exec||{},r=r.toLowerCase(),s.exec[r]=s.exec[r]||[],s.exec[r].push({f:i,c:a})},off:function(r,i,a){var s=this.exec;if(s)if(r)if(r=r.toLowerCase(),i)for(var u=s[r]||[],l=u.length-1;l>=0;l--)u[l]===i&&u.splice(l,1);else s[r]=null;else this.exec=null}};function hn(r){return null!=r&&r==r.window}function Wn(r){r&&/\S/.test(r)&&(O.execScript?O.execScript(r):O.eval.call(O,r))}var ge,j,Be,Je,Qe,xt=navigator,Dn=!0;if("userAgentData"in xt){var pn=xt.userAgentData,ui=[];pn.platform&&""!=pn.platform&&("brands"in pn&&Array.isArray(pn.brands)&&pn.brands.length>0?ui=pn.brands:"uaList"in pn&&Array.isArray(pn.uaList)&&pn.uaList.length>0&&(ui=pn.uaList),ui.length>0&&(Dn=!1,Be=pn.platform.toLowerCase(),j=function(r,i,a){var s,u,l,d,f,g,_,T,S,I=!1,b=!1,D=!1,R=r.mobile,L=!1,x="",U=navigator.maxTouchPoints||0;for(u=i.length,s=0;s<u;s++){var Y=i[s].brand.toLowerCase();if(Y.indexOf("chrome")>=0){D=!0,x=i[s].version;break}if(Y.indexOf("edge")>=0){I=!0,x=i[s].version;break}if(Y.indexOf("opera")>=0){b=!0,x=i[s].version;break}}return D||I||b||(D=!0,x="100"),l=/windows/g.test(a),d=/mac/g.test(a),f=/linux/g.test(a),g=/android/g.test(a),_=/harmony/g.test(a),T=/(chromeos|chrome\sos)/g.test(a),S=/iphone/g.test(a),l||g||f||S||(L=/macintel/g.test(a)&&U>1),(g||_||S||L)&&(R=!0),{bUseUserAgent:!1,bWin:l,bMac:d,bLinux:f,bAndroid:g,bHarmonyOS:_,bChromeOS:T,bIE:!1,bEdge:I,bUC:!1,bPlaybook:!1,bBlackBerry:!1,bHuaWeiBrowser:!1,bOpera:b,bFirefox:!1,bChrome:D,bJSDom:!1,biPhone:S,biPad:L,bPad:g&&!r.mobile,bSafari:!1,bMobile:R,strBrowserVersion:x,bHTML5Edition:!0,IEVersion:0,IEMode:0}}(pn,ui,Be)))}Dn&&(Je||(Je=xt.userAgent.toLowerCase()),Qe||(Qe=xt.platform.toLowerCase()),j=function(r,i){var a,s=r.toLowerCase(),u=i.toLowerCase(),l=/harmonyos/g.test(s);"linux"==u&&s.indexOf("windows nt")>=0&&(u="harmonyos",l=!0);var d=!l&&/cros/.test(s),f=!l&&/android/g.test(s)||/android/g.test(u),g=/iphone/g.test(s)||/iphone/g.test(u),_=/macintosh/.test(s),T=navigator.maxTouchPoints||0,S=/ipad/g.test(s)||(_||"macintel"==u)&&T>1,I=/ucweb|ucbrowser/g.test(s),b=!I&&/nexus/g.test(s)&&/version\/[\d.]+.*safari\//g.test(s),D=/playbook/g.test(s),R=/hp-tablet/g.test(s),L=/blackberry|bb10/g.test(s),x=/symbian/g.test(s),U=/windows phone/g.test(s),Y=/mobile/g.test(s),Z=/arm64|aarch64/g.test(s),oe=/mips64/g.test(s),se=/huaweibrowser/g.test(s),k=/jsdom/g.test(s),E=D||S||R,M=!E&&!d&&(g||b||L||x||U||f||l||Y),G=!M&&!E&&!d,V=G&&/win32|win64|windows/.test(u),J=V&&/win64|x64/.test(s),Q=G&&/mac68k|macppc|macintosh|macintel/.test(s),te=G&&/linux/.test(u),X="win64"==u||/wow64|x86_64|win64|x64/.test(s)||Z||oe,ae=/wow64/g.test(s),he=ut,ye=/opera|opr/g.test(s),Ce=/360se/g.test(s),Ke=/maxthon/g.test(s),Ze=/tencenttraveler|qqbrowser/g.test(s),dt=/the world/g.test(s),ft=/metasr/g.test(s),ke=/avant/g.test(s),Te=/firefox|fxios/g.test(s),Oe=/gecko/g.test(s),Me=!(Te||se)&&/edge\/|edga\/|edgios\/|edg\//g.test(s),et=!(L||D||I||ye||Me||se||k)&&/chrome|crios/g.test(s),qe=!1,ln=0,St=0,tt="";if(V&&!Me&&!Te&&!et){var it=s.indexOf("msie "),Or=s.indexOf("trident"),_i=s.indexOf("rv:");qe=-1!=it||-1!=Or||-1!=_i}if(!(Q||g||S||V||L||D||b)||I||ye||Me||qe||Te||(a=s.match(/version\/([\d.]+).*safari\//))&&(L||D||b||(he=nt,et=ut),tt=a[1]),Me){var Vt=s.indexOf("edge/");Vt>-1?Vt+=5:(Vt=s.indexOf("edg/"))>-1?Vt+=4:(Vt=s.indexOf("edga/"))>-1?Vt+=5:(Vt=s.indexOf("edgios/"))>-1&&(Vt+=7),Vt>-1&&(a=(tt=s.slice(Vt)).indexOf(" "))>-1&&(tt=tt.slice(0,a))}else if(Te)if((a=s.indexOf("firefox/"))>-1){var Nn=(a=s.slice(a+8)).indexOf(" ");Nn>-1&&(a=a.slice(0,Nn)),tt=a,(Nn=a.indexOf("."))>-1&&(a=tt.slice(0,Nn))}else(g||S)&&(a=s.indexOf("fxios/"))>-1&&(tt=a=(a=s.slice(a+6)).slice(0,a.indexOf(" ")));else if(qe){var gr=s.indexOf("msie "),Qu=s.indexOf("trident"),vi=s.indexOf("rv:");-1!=gr?a=(a=s.slice(gr+5)).slice(0,a.indexOf(";")):-1!=vi?a=(a=(a=s.slice(vi+3)).slice(0,a.indexOf(";"))).slice(0,a.indexOf(")")):-1!=Qu&&(a=(a=s.slice(Qu+7)).slice(0,a.indexOf(";"))),tt=a}else if(he)(a=tt.indexOf("."))>-1&&(a=tt.slice(0,a));else if(I)(a=s.indexOf("ucweb"))>-1?tt=s.slice(a+5):(a=s.indexOf("ucbrowser/"))>-1&&(a=(tt=s.slice(a+10)).indexOf(" "))>-1&&(tt=tt.slice(0,a));else if(ye)(a=s.indexOf("version/"))>-1?tt=s.slice(a+8):(a=s.indexOf("opr/"))>-1&&(tt=s.slice(a+4));else if(x)(a=s.indexOf("browserng/"))>-1&&(tt=s.slice(a+10));else if(U)(a=s.indexOf("iemobile/"))>-1&&(tt=s.slice(a+9));else if(et){var ri=s.indexOf("chrome/");ri>-1?(a=(tt=s.slice(ri+7)).indexOf(" "))>-1&&(tt=tt.slice(0,a)):(ri=s.indexOf("crios/"))>-1&&(a=(tt=s.slice(ri+6)).indexOf(" "))>-1&&(tt=tt.slice(0,a)),(a=tt.indexOf("."))>-1&&(a=tt.slice(0,a))}else if(se){var ki=s.indexOf("huaweibrowser");ki>-1&&(a=(tt=s.slice(ki+14)).indexOf(" "))>-1&&(tt=tt.slice(0,a))}else if(k){var us=s.indexOf("jsdom");us>-1&&(a=(tt=s.slice(us+6)).indexOf(" "))>-1&&(tt=tt.slice(0,a))}if(Me||qe){var zn=window.document;zn&&zn.documentMode?ln=zn.documentMode:(ln=5,zn.compatMode&&"CSS1Compat"==zn.compatMode&&(ln=7)),qe&&(St=parseInt(tt))}return(Q||te)&&(X=!0,Q&&(a=s.match(/mac os x (\d+)(_|\.)(\d+)/))&&a.length>3&&(10==a[1]&&a[3]<14||a[1]<10)&&(X=!1)),V||Q||te||Z||oe||(M=!0),{bUseUserAgent:!0,bWin:V,bMac:Q,bLinux:te,bMobile:M,bPad:E,bChromeOS:d,bHarmonyOS:l,bArm64:Z,bMips64:oe,bEmbed:Z||oe,bAndroid:f,biPhone:g,biPad:S,bWin64:J,bWOW64:ae,bOSx64:X,bIE:qe,bEdge:Me,bChrome:et,bFirefox:Te,bSafari:he,bOpera:ye,bNexus:b,bUC:I,b360SE:Ce,bMaxthon:Ke,bTencentTraveler:Ze,bTheWorld:dt,bMetaSr:ft,bAvant:ke,bHuaWeiBrowser:se,bJSDom:k,bGecko:Oe,bHTML5Edition:!0,strBrowserVersion:tt,IEVersion:St,IEMode:ln}}(Je,Qe));var zr=null===(ge=O?.location)||void 0===ge?void 0:ge.protocol;function ji(r){return j.bGecko&&"mousewheel"===r?"DOMMouseScroll":r}function Su(r,i,a){var s=ji(i);r&&r.addEventListener(s,a,!1)}function iT(r,i,a){var s=ji(i);r&&r.removeEventListener(s,a,!1)}function Ih(r){var i=r||O.event;i.preventDefault&&i.preventDefault(),i.stopPropagation&&i.stopPropagation(),i.returnValue=!1,i.cancelBubble=!0}function jm(r,i){var a=O.document.createEvent("HTMLEvents");a.initEvent(r,nt,nt),i.dispatchEvent&&i.dispatchEvent(a)}zr||(zr="http:"),j.protocol=zr,j.bSSL="https:"===zr,j.bFileSystem="https:"!==zr&&"http:"!==zr;var bc,Iu,Ds,Th,ra=O.document,Ch=[],wc=Ch.push,Hm=/^(?:#([\w-]+)|(\w+)|\.([\w-]+))$/,Fn=function(){Iu()};function Ie(r,i,a,s){var u,l,d,f=i&&i.ownerDocument,g=i?i.nodeType:9;if(a=a||[],"string"!=typeof r||!r||1!==g&&9!==g&&11!==g)return a;if(!s&&((i?i.ownerDocument||i:ra)!==Ds&&Iu(i),i=i||Ds,11!==g&&(d=Hm.exec(r))))if(u=d[1]){if(9===g){if(!(l=i.getElementById(u)))return a;if(l.id===u)return a.push(l),a}else if(f&&(l=f.getElementById(u))&&Th(i,l)&&l.id===u)return a.push(l),a}else{if(d[2])return wc.apply(a,i.getElementsByTagName(r)),a;if((u=d[3])&&i.getElementsByClassName)return wc.apply(a,i.getElementsByClassName(u)),a}return a}wc.apply(Ch.slice.call(ra.childNodes),ra.childNodes),Iu=Ie.setDocument=function(r){var i,a=r?r.ownerDocument||r:ra;return a!==Ds&&9===a.nodeType&&a.documentElement&&(ra!==(Ds=a)&&(i=Ds.defaultView)&&i.top!==i&&(i.addEventListener?i.addEventListener("unload",Fn,!1):i.attachEvent&&i.attachEvent("onunload",Fn)),Th=function(s,u){if(u)for(;u=u.parentNode;)if(u===s)return!0;return!1}),Ds},Ie.contains=function(r,i){return(r.ownerDocument||r)!==Ds&&Iu(r),Th(r,i)},Ie.error=function(r){throw new Error("Syntax error: "+r)},bc=Ie.getText=function(r){var i,a="",s=0,u=r.nodeType;if(u){if(1===u||9===u||11===u){if("string"==typeof r.textContent)return r.textContent;for(r=r.firstChild;r;r=r.nextSibling)a+=bc(r)}else if(3===u||4===u)return r.nodeValue}else for(;i=r[s++];)a+=bc(i);return a},Iu();var Se={encodeChars:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=",decodeChars:[-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,62,-1,-1,-1,63,52,53,54,55,56,57,58,59,60,61,-1,-1,-1,-1,-1,-1,-1,0,1,2,3,4,5,6,7,8,9,10,11,12,13,14,15,16,17,18,19,20,21,22,23,24,25,-1,-1,-1,-1,-1,-1,26,27,28,29,30,31,32,33,34,35,36,37,38,39,40,41,42,43,44,45,46,47,48,49,50,51,-1,-1,-1,-1,-1]},Ve={UTF16ToUTF8:function(r){for(var i,a,s=[],u=r.length,l=0;l<u;l++){var d=r.charCodeAt(l);if(d>0&&d<=127)s.push(r.charAt(l));else if(d>=128&&d<=2047)i=192|d>>6&31,a=128|63&d,s.push(String.fromCharCode(i),String.fromCharCode(a));else if(d>=2048&&d<=65535){i=224|d>>12&15,a=128|d>>6&63;var f=128|63&d;s.push(String.fromCharCode(i),String.fromCharCode(a),String.fromCharCode(f))}}return s.join("")},UTF8ToUTF16:function(r){var i,a,s,u,l=[],d=r.length;for(i=0;i<d;i++)0==((a=r.charCodeAt(i))>>7&255)?l.push(r.charAt(i)):6==(a>>5&255)?(u=(31&a)<<6|63&(s=r.charCodeAt(++i)),l.push(String.fromCharCode(u))):14==(a>>4&255)&&(u=(255&(a<<4|(s=r.charCodeAt(++i))>>2&15))<<8|(3&s)<<6|63&r.charCodeAt(++i),l.push(String.fromCharCode(u)));return l.join("")},encode:function(r){for(var i,a,s,u=this.UTF16ToUTF8(r),l=[],d=0,f=u.length;d<f;){if(i=255&u.charCodeAt(d++),d==f){l.push(Se.encodeChars.charAt(i>>2)),l.push(Se.encodeChars.charAt((3&i)<<4)),l.push("==");break}if(a=u.charCodeAt(d++),d==f){l.push(Se.encodeChars.charAt(i>>2)),l.push(Se.encodeChars.charAt((3&i)<<4|(240&a)>>4)),l.push(Se.encodeChars.charAt((15&a)<<2)),l.push("=");break}s=u.charCodeAt(d++),l.push(Se.encodeChars.charAt(i>>2)),l.push(Se.encodeChars.charAt((3&i)<<4|(240&a)>>4)),l.push(Se.encodeChars.charAt((15&a)<<2|(192&s)>>6)),l.push(Se.encodeChars.charAt(63&s))}return l.join("")},encodeArray:function(r){for(var i,a,s,u=[],l=0,d=r.length;l<d;){if(i=255&r[l++],l==d){u.push(Se.encodeChars.charAt(i>>2)),u.push(Se.encodeChars.charAt((3&i)<<4)),u.push("==");break}if(a=255&r[l++],l==d){u.push(Se.encodeChars.charAt(i>>2)),u.push(Se.encodeChars.charAt((3&i)<<4|(240&a)>>4)),u.push(Se.encodeChars.charAt((15&a)<<2)),u.push("=");break}s=255&r[l++],u.push(Se.encodeChars.charAt(i>>2)),u.push(Se.encodeChars.charAt((3&i)<<4|(240&a)>>4)),u.push(Se.encodeChars.charAt((15&a)<<2|(192&s)>>6)),u.push(Se.encodeChars.charAt(63&s))}return u.join("")},decode:function(r,i){for(var a,s,u,l,d=this,f=[],g=0,_=r.length;g<_;){do{a=Se.decodeChars[255&r.charCodeAt(g++)]}while(g<_&&-1==a);if(-1==a)break;do{s=Se.decodeChars[255&r.charCodeAt(g++)]}while(g<_&&-1==s);if(-1==s)break;f.push(i?a<<2|(48&s)>>4:String.fromCharCode(a<<2|(48&s)>>4));do{if(61==(u=255&r.charCodeAt(g++)))return i?f:d.UTF8ToUTF16(f.join(""));u=Se.decodeChars[u]}while(g<_&&-1==u);if(-1==u)break;f.push(i?(15&s)<<4|(60&u)>>2:String.fromCharCode((15&s)<<4|(60&u)>>2));do{if(61==(l=255&r.charCodeAt(g++)))return i?f:d.UTF8ToUTF16(f.join(""));l=Se.decodeChars[l]}while(g<_&&-1==l);if(-1==l)break;f.push(i?(3&u)<<6|l:String.fromCharCode((3&u)<<6|l))}return i?f:d.UTF8ToUTF16(f.join(""))}},je={fromUTF16:function(r){for(var i,a=[],s=0,u=r.length;s<u;)(i=r.charCodeAt(s))>=1&&i<=127?a.push(r.charAt(s)):i>2047?(a.push(String.fromCharCode(224|i>>12&15)),a.push(String.fromCharCode(128|i>>6&63)),a.push(String.fromCharCode(128|i>>0&63))):(a.push(String.fromCharCode(192|i>>6&31)),a.push(String.fromCharCode(128|i>>0&63))),s++;return a.join("")},toUTF16:function(r){for(var i,a,s,u=[],l=0,d=r.length;l<d;)switch((i=r.charCodeAt(l++))>>4){case 0:case 1:case 2:case 3:case 4:case 5:case 6:case 7:u.push(r.charAt(l-1));break;case 12:case 13:a=r.charCodeAt(l++),u.push(String.fromCharCode((31&i)<<6|63&a));break;case 14:a=r.charCodeAt(l++),s=r.charCodeAt(l++),u.push(String.fromCharCode((15&i)<<12|(63&a)<<6|(63&s)<<0))}return u.join("")}};function ht(r){if(null==r||"object"!=e(r))return r;var i,a,s;if(r instanceof Date)return(i=new Date).setTime(r.getTime()),i;if(r instanceof Array){for(i=[],s=r.length,a=0;a<s;a++)i[a]=ht(r[a]);return i}if(r instanceof Object){for(a in i={},r)r.hasOwnProperty(a)&&(i[a]=ht(r[a]));return i}return 0}function Ft(r){return Math.random().toString(16).substring(2,2+r)}function an(r){var i=[Ft(8),"-",Ft(4),"-",Ft(4),"-",Ft(4),"-",Ft(8)];return r&&i.unshift(r),i.join("")}var In=Date.now||function(){return+new Date},$n=function(){return""+In()};function ar(){for(var r,i=In()%1e4,a=[],s=0;s<5;s++)r=Math.floor(10*Math.random()),0!=s||0!=r?a.push(r):s=-1;return i<10?a.push("000"):i<100?a.push("00"):i<1e3&&a.push("0"),a.push(i),a.join("")}function Es(r,i){var a;for(a in i)i.hasOwnProperty(a)&&(r[a]=i[a]);return r}var Gm=!1;"wakeLock"in navigator&&(Gm=!0);var Tu=null;function oZ(){Gm&&(null==Tu?function(){!function As(r,i,a,s){new(a||(a=Promise))(function(u,l){function d(_){try{g(s.next(_))}catch(T){l(T)}}function f(_){try{g(s.throw(_))}catch(T){l(T)}}function g(_){var T;_.done?u(_.value):(T=_.value,T instanceof a?T:new a(function(S){S(T)})).then(d,f)}g((s=s.apply(r,i||[])).next())})}(this,void 0,void 0,A.mark(function r(){return A.wrap(function(i){for(;;)switch(i.prev=i.next){case 0:return i.prev=0,i.next=3,navigator.wakeLock.request("screen");case 3:Tu=i.sent,i.next=9;break;case 6:i.prev=6,i.t0=i.catch(0),Tu=null;case 9:case"end":return i.stop()}},r,null,[[0,6]])}))}():Tu.release().then(function(){Tu=null}))}function sZ(){return Tu}var _O=Array.prototype;function Zl(r,i,a){return _O.filter.call(r,i,a||this)}function aZ(r,i){return _O.indexOf.call(i,r)}function uZ(r){var i,a,s=[],u=r.length;for(i=0;i<u;i++){for(a=i+1;a<u;a++)r[i]===r[a]&&(a=++i);s.push(r[i])}return s}var sT=/^(\/?)([\s\S]+\/(?!$)|\/)?((?:\.{1,2}$|[\s\S]+?)?(\.[^.\/]*)?)$/;function vO(r,i){var a,s=[];for(a=0;a<r.length;a++){var u=r[a];u&&"."!==u&&(".."===u?s.length&&".."!==s[s.length-1]?s.pop():i&&s.push(".."):s.push(u))}return s}function aT(r){var i="/"===r.charAt(0),a="/"===r.slice(-1);return(r=vO(Zl(r.split("/"),function(s){return!!s}),!i).join("/"))||i||(r="."),r&&a&&(r+="/"),(i?"/":"")+r}var cZ=function(){function r(){n(this,r)}return c(r,[{key:"resolve",value:function(){var i,a,s="",u=arguments,l=!1;for(i=u.length-1;i>=0&&!l;i--)ie(a=u[i])&&a&&(s=a+"/"+s,l="/"===a.charAt(0));return(l?"/":"")+vO(Zl(s.split("/"),function(d){return!!d}),!l).join("/")||"."}},{key:"join",value:function(){return aT(Zl(fe(arguments),function(i){return i&&ie(i)}).join("/"))}},{key:"relative",value:function(i,a){i=aT(i),a=aT(a);var s,u,l=Zl(i.split("/"),function(_){return!!_}),d=[],f=Zl(a.split("/"),function(_){return!!_}),g=Math.min(l.length,f.length);for(s=0;s<g&&l[s]===f[s];s++);for(u=s;s<l.length;)d.push(".."),s++;return(d=d.concat(f.slice(u))).join("/")}},{key:"basename",value:function(i,a){var s;return s=(i.match(sT)||[])[3]||"",a&&s&&s.slice(-1*a.length)===a&&(s=s.slice(0,-1*a.length)),s}},{key:"dirname",value:function(i){var a=i.match(sT)||[],s=a[1]||"",u=a[2]||"";return s||u?(u&&(u=u.substring(0,u.length-1)),s+u):"."}},{key:"extname",value:function(i){return(i.match(sT)||[])[4]||""}}]),r}(),uT={}.hasOwnProperty;function lZ(r){if(!r||"object"!==H(r)||r.nodeType||r.window==r)return ut;var i,a;try{if((a=r.constructor)&&!uT(r,"constructor")&&!uT(a.prototype,"isPrototypeOf"))return ut}catch{return ut}for(i in r);return $(i)||uT(r,i)}var dZ="object"===(typeof HTMLElement>"u"?"undefined":e(HTMLElement));function yO(r){return dZ?r instanceof HTMLElement:r&&"object"===e(r)&&(1===r.nodeType||9===r.nodeType)&&"string"==typeof r.nodeName}function fZ(r){var i=r;if(yO(r))for(;!i&&i!=document.body;)i=i.parentNode;else i=0;return!!i}function hZ(r,i){return 0===r.lastIndexOf(i,0)}function pZ(r,i){var a=r.length-i.length;return a>=0&&r.indexOf(i,a)===a}function gZ(r){return null==r?"":String.prototype.trim.call(r)}function mZ(r){var i;if(r)for(i in r)if(!$(i))return!1;return!0}function _Z(r){return ie(r)?r.replace(/[^\x20-\x7E]/g,""):r}function vZ(r,i,a){return r.replace(new RegExp(i,"gi"),a)}function yZ(r){return r.charAt(0).toUpperCase()+r.substr(1)}var cT="none",SZ={getOffset:function(r,i,a){var s,u;r=r||O.event;for(var l,d,f=a||r.target,g=0,_=0,T=0,S=0,I=!1,b=O.document;f&&!isNaN(f.offsetLeft)&&!isNaN(f.offsetTop);)d=f.scrollLeft,l=f.scrollTop,"BODY"===f.tagName?I?(d=0,l=0):(d|=null===(s=b.documentElement)||void 0===s?void 0:s.scrollLeft,l|=null===(u=b.documentElement)||void 0===u?void 0:u.scrollTop):"fixed"===f.style.position&&(I=!0),g+=f.offsetLeft-d,_+=f.offsetTop-l,f=f.offsetParent;return i&&(T=i.Left,S=i.Top),{x:g=r.clientX-g-T,y:_=r.clientY-_-S}},getElDimensions:function(r,i){var a,s;return r?(a=r.style.display,r.style.display="",s=i?{offsetTop:r.offsetTop,offsetLeft:r.offsetLeft,offsetWidth:r.offsetWidth,offsetHeight:r.offsetHeight}:{clientTop:r.clientTop,clientLeft:r.clientLeft,clientWidth:r.clientWidth?r.clientWidth:parseInt(r.style.width)?parseInt(r.style.width):0,clientHeight:r.clientHeight?r.clientHeight:parseInt(r.style.height)?parseInt(r.style.height):0},r.style.display=a,s):{offsetTop:0,offsetLeft:0,offsetWidth:0,offsetHeight:0}}};function zm(r){return document.getElementById(r)}function IZ(r){var i=ie(r)?zm(r):r;i&&(i.length>0&&(i=i[0]),i.style.display=cT)}function TZ(r){var i=ie(r)?zm(r):r;i&&(i.length>0&&(i=i[0]),i.style.display="")}function CZ(r){var i=ie(r)?zm(r):r;i&&(i.length>0&&(i=i[0]),i.style.display=i.style.display===cT?"":cT)}function bZ(r){if(r)for(;r.firstChild;)r.removeChild(r.firstChild)}function wZ(r){return encodeURIComponent(String(r))}function DZ(r){return decodeURIComponent(r.replace(/\+/g," "))}var ed=document,EZ=ed&&ed.documentElement,td=ed.getElementsByTagName("head")[0]||EZ,lT=ed.createElement("script").readyState?function(r,i){var a=r.onreadystatechange;r.onreadystatechange=function(){var s=r.readyState;"loaded"===s||"complete"===s?(r.onreadystatechange=null,a&&a(),i.call(this,{type:"load",path:[r]})):"loading"===s||i.call(this,{type:"error",path:[r]})}}:function(r,i){r.addEventListener("load",i,ut),r.addEventListener("error",i,ut)};function AZ(r,i,a){return dT(r,i,!1,a)}function dT(r,i,a,s){var u,l,d=s;if(re(d)||(d=function(){}),ie(r)&&""!=r)return u=ed.createElement("script"),l=["",r].join(""),u.src=l,i&&(u.async=!0),u.charset="utf-8",lT(u,d),a?td.appendChild(u):td.insertBefore(u,td.firstChild),u;d()}function PZ(r,i,a){return IO(r,i,!1,a)}function IO(r,i,a,s){var u=s;if(re(u)||(u=function(){}),j.bJSDom)u("ok");else if(ce(r)){var l=r.length,d=function(f){f&&"load"==f.type?l--:(f&&"error"==f.type&&Fe(["Failed to load resource: ",f.target.src,"."].join("")),u()),l<=0&&u("ok")};l<=0?u("ok"):en(r,function(f){dT(f,i,a,d)})}else u()}function RZ(r,i){return fT(r,!1,i)}function fT(r,i,a){var s,u=a;if(re(u)||(u=!1),ie(r)&&""!=r){if(!j.bJSDom)return(s=ed.createElement("link")).href=r,s.rel="stylesheet",s.async=!0,u&&lT(s,u),i?td.appendChild(s):td.insertBefore(s,td.firstChild),s;u&&u()}else u&&u()}function xZ(r,i){return TO(r,!1,i)}function TO(r,i,a){if(j.bJSDom)a&&a("ok");else if(ce(r)){var s=r.length,u=function(l){l&&"load"==l.type&&s--,l&&"load"!=l.type&&(l&&"error"==l.type&&Fe(["Failed to load resource: ",l.target.href,"."].join("")),a()),s<=0&&a("ok")};en(r,function(l){fT(l,i,u)})}else a&&a()}function CO(r){var i,a;if(!j.bJSDom){var s=document;if(s&&ie(a=r.body)&&""!=a){(i=s.createElement("script")).charset="utf-8",j.bIE?i.text=a:i.appendChild(s.createTextNode(a)),i.language=r.language?r.language:"javascript",i.type=r.type?r.type:"text/javascript";var u=s&&s.documentElement,l=s.getElementsByTagName("head")[0]||u;l.insertBefore(i,l.firstChild)}}}function FZ(r){CO({body:r})}function kZ(r){CO({body:r,language:"vbscript",type:"text/vbscript"})}var W,r,MZ=function(){function r(){n(this,r),this.nil=void 0,this.bNode=!1,this.noop=function(){},this.mix=Es,this.clone=ht,this.keys=Object.keys,this.now=$n,this.getFormatedNow=ne,this.getRandom=ar,this.guid=an,this.get=zm,this.show=TZ,this.hide=IZ,this.toggle=CZ,this.empty=bZ,this.stringify=O.JSON.stringify,this.parse=O.JSON.parse,this.isDef=K,this.isUndef=$,this.isUndefined=$,this.isNull=q,this.isNaN=isNaN,this.isFunction=re,this.isString=ie,this.isObject=De,this.isBoolean=ee,this.isNumber=ue,this.isArray=ce,this.type=H,this.isPlainObject=lZ,this.isDOM=yO,this.isDOMInBody=fZ,this.each=en,this.getLogger=pe,this.setLogger=Re,this.log=xe,this.error=Fe,this.warn=Xe,this.info=st,this.filter=Zl,this.indexOf=aZ,this.uniq=uZ,this.startsWith=hZ,this.endsWith=pZ,this.replaceAll=vZ,this.upperCaseFirst=yZ,this.removeNonPrintableChar=_Z,this.trim=gZ,this.makeArray=fe,this.isEmptyObject=mZ,this.Path=new cZ,this.DOM=SZ,this.isWindow=hn,this.globalEval=Wn,this.obj={customEvent:nn},this.addEventListener=Su,this.removeEventListener=iT,this.stopPropagation=Ih,this.fireEvent=jm,this.base64=Ve,this.utf8=je,this.btoa=function(i){return O.btoa(i)},this.atob=function(i){return O.atob(i)},this.asyncQueue=Ge,this.sizzle=Ie,this.toggleWakeLock=oZ,this.getWakeLock=sZ,this.urlEncode=wZ,this.urlDecode=DZ,this.scriptOnload=lT,this.addAllCss=TO,this.getAllCss=xZ,this.addCss=fT,this.getCss=RZ,this.addScripts=IO,this.getScripts=PZ,this.addScript=dT,this.getScript=AZ,this.addJS=FZ,this.addVBS=kZ}return c(r,[{key:"debug",get:function(){return Pe.debug},set:function(i){Pe.debug=i}},{key:"showConsoleError",get:function(){return Pe.debug},set:function(i){Pe.showConsoleError=i}}]),r}(),v=new MZ,wO=!!("object"==(typeof global>"u"?"undefined":e(global))&&global.process&&global.process.release&&global.process.release.name&&typeof HTMLCanvasElement>"u"),hT=wO?global:self||{},F=hT.Dynamsoft;function ei(r){return Math.floor(r)}function Bn(r,i){if(!(r instanceof i))throw new TypeError("Cannot call a class as a function")}F?F.Lib||(F.Lib={}):(F={Lib:{},DWT:{}},hT&&(hT.Dynamsoft=F)),W=v.mix(F.Lib,v),(r=F).DWT||(r.DWT={}),r.DWT.LTS||(r.DWT.LTS={}),r.Lib.UI||(r.Lib.UI={}),r.Lib.html5||(r.Lib.html5={});var DO={exports:{}},Km=function(r){return r&&r.Math==Math&&r},Un=Km("object"==typeof Uo&&Uo)||Km("object"==typeof window&&window)||Km("object"==typeof self&&self)||Km("object"==typeof h&&h)||function(){return this}()||h||Function("return this")(),gn=function(r){try{return!!r()}catch{return!0}},bh=!gn(function(){var r=function(){}.bind();return"function"!=typeof r||r.hasOwnProperty("prototype")}),EO=Function.prototype,AO=EO.apply,PO=EO.call,wh="object"==typeof Reflect&&Reflect.apply||(bh?PO.bind(AO):function(){return PO.apply(AO,arguments)}),RO=bh,xO=Function.prototype,pT=xO.call,NZ=RO&&xO.bind.bind(pT,pT),vn=RO?NZ:function(r){return function(){return pT.apply(r,arguments)}},FO=vn,LZ=FO({}.toString),WZ=FO("".slice),Cu=function(r){return WZ(LZ(r),8,-1)},BZ=Cu,UZ=vn,nd=function(r){if("Function"===BZ(r))return UZ(r)},gT="object"==typeof document&&document.all,$m={all:gT,IS_HTMLDDA:void 0===gT&&void 0!==gT},VZ=$m.all,ur=$m.IS_HTMLDDA?function(r){return"function"==typeof r||r===VZ}:function(r){return"function"==typeof r},ia={},Kr=!gn(function(){return 7!=Object.defineProperty({},1,{get:function(){return 7}})[1]}),qm=Function.prototype.call,Rr=bh?qm.bind(qm):function(){return qm.apply(qm,arguments)},Dh={},kO={}.propertyIsEnumerable,MO=Object.getOwnPropertyDescriptor,HZ=MO&&!kO.call({1:2},1);Dh.f=HZ?function(r){var i=MO(this,r);return!!i&&i.enumerable}:kO;var bu,Qm,wu=function(r,i){return{enumerable:!(1&r),configurable:!(2&r),writable:!(4&r),value:i}},GZ=gn,zZ=Cu,mT=Object,KZ=vn("".split),_T=GZ(function(){return!mT("z").propertyIsEnumerable(0)})?function(r){return"String"==zZ(r)?KZ(r,""):mT(r)}:mT,Ym=function(r){return null==r},$Z=Ym,qZ=TypeError,rd=function(r){if($Z(r))throw qZ("Can't call method on "+r);return r},QZ=_T,YZ=rd,Ps=function(r){return QZ(YZ(r))},OO=ur,JZ=$m.all,ci=$m.IS_HTMLDDA?function(r){return"object"==typeof r?null!==r:OO(r)||r===JZ}:function(r){return"object"==typeof r?null!==r:OO(r)},Vn={},vT=Vn,yT=Un,XZ=ur,NO=function(r){return XZ(r)?r:void 0},Di=function(r,i){return arguments.length<2?NO(vT[r])||NO(yT[r]):vT[r]&&vT[r][i]||yT[r]&&yT[r][i]},Sr=vn({}.isPrototypeOf),Eh=typeof navigator<"u"&&String(navigator.userAgent)||"",ST=Eh,WO=Un.process,BO=Un.Deno,UO=WO&&WO.versions||BO&&BO.version,VO=UO&&UO.v8;VO&&(Qm=(bu=VO.split("."))[0]>0&&bu[0]<4?1:+(bu[0]+bu[1])),!Qm&&ST&&(!(bu=ST.match(/Edge\/(\d+)/))||bu[1]>=74)&&(bu=ST.match(/Chrome\/(\d+)/))&&(Qm=+bu[1]);var Jm=Qm,jO=Jm,eee=Un.String,id=!!Object.getOwnPropertySymbols&&!gn(function(){var r=Symbol();return!eee(r)||!(Object(r)instanceof Symbol)||!Symbol.sham&&jO&&jO<41}),HO=id&&!Symbol.sham&&"symbol"==typeof Symbol.iterator,tee=Di,nee=ur,ree=Sr,iee=Object,Ah=HO?function(r){return"symbol"==typeof r}:function(r){var i=tee("Symbol");return nee(i)&&ree(i.prototype,iee(r))},oee=String,od=function(r){try{return oee(r)}catch{return"Object"}},see=ur,aee=od,uee=TypeError,Rs=function(r){if(see(r))return r;throw uee(aee(r)+" is not a function")},cee=Rs,lee=Ym,IT=function(r,i){var a=r[i];return lee(a)?void 0:cee(a)},TT=Rr,CT=ur,bT=ci,dee=TypeError,GO={exports:{}},zO=Un,fee=Object.defineProperty,KO="__core-js_shared__",wT=Un[KO]||function(r,i){try{fee(zO,r,{value:i,configurable:!0,writable:!0})}catch{zO[r]=i}return i}(KO,{}),$O=wT;(GO.exports=function(r,i){return $O[r]||($O[r]=void 0!==i?i:{})})("versions",[]).push({version:"3.31.0",mode:"pure",copyright:"\xa9 2014-2023 Denis Pushkarev (zloirock.ru)",license:"https://github.com/zloirock/core-js/blob/v3.31.0/LICENSE",source:"https://github.com/zloirock/core-js"});var sd=GO.exports,pee=rd,gee=Object,xs=function(r){return gee(pee(r))},mee=xs,_ee=vn({}.hasOwnProperty),xr=Object.hasOwn||function(r,i){return _ee(mee(r),i)},vee=vn,yee=0,See=Math.random(),Iee=vee(1..toString),DT=function(r){return"Symbol("+(void 0===r?"":r)+")_"+Iee(++yee+See,36)},qO=xr,Cee=DT,bee=id,wee=HO,ad=Un.Symbol,ET=sd("wks"),Dee=wee?ad.for||ad:ad&&ad.withoutSetter||Cee,En=function(r){return qO(ET,r)||(ET[r]=bee&&qO(ad,r)?ad[r]:Dee("Symbol."+r)),ET[r]},Eee=Rr,QO=ci,YO=Ah,Aee=IT,Ree=TypeError,xee=En("toPrimitive"),kee=Ah,Xm=function(r){var i=function(r,i){if(!QO(r)||YO(r))return r;var a,s=Aee(r,xee);if(s){if(void 0===i&&(i="default"),a=Eee(s,r,i),!QO(a)||YO(a))return a;throw Ree("Can't convert object to primitive value")}return void 0===i&&(i="number"),function(r,i){var a,s;if("string"===i&&CT(a=r.toString)&&!bT(s=TT(a,r))||CT(a=r.valueOf)&&!bT(s=TT(a,r))||"string"!==i&&CT(a=r.toString)&&!bT(s=TT(a,r)))return s;throw dee("Can't convert object to primitive value")}(r,i)}(r,"string");return kee(i)?i:i+""},JO=ci,AT=Un.document,Mee=JO(AT)&&JO(AT.createElement),PT=function(r){return Mee?AT.createElement(r):{}},Oee=PT,XO=!Kr&&!gn(function(){return 7!=Object.defineProperty(Oee("div"),"a",{get:function(){return 7}}).a}),Lee=Rr,Wee=Dh,Bee=wu,Uee=Ps,Vee=Xm,jee=xr,Hee=XO,ZO=Object.getOwnPropertyDescriptor;ia.f=Kr?ZO:function(r,i){if(r=Uee(r),i=Vee(i),Hee)try{return ZO(r,i)}catch{}if(jee(r,i))return Bee(!Lee(Wee.f,r,i),r[i])};var Gee=gn,zee=ur,Kee=/#|\.prototype\./,Ph=function(r,i){var a=qee[$ee(r)];return a==Yee||a!=Qee&&(zee(i)?Gee(i):!!i)},$ee=Ph.normalize=function(r){return String(r).replace(Kee,".").toLowerCase()},qee=Ph.data={},Qee=Ph.NATIVE="N",Yee=Ph.POLYFILL="P",eN=Ph,Jee=Rs,Xee=bh,Zee=nd(nd.bind),Du=function(r,i){return Jee(r),void 0===i?r:Xee?Zee(r,i):function(){return r.apply(i,arguments)}},Vo={},tN=Kr&&gn(function(){return 42!=Object.defineProperty(function(){},"prototype",{value:42,writable:!1}).prototype}),ete=ci,tte=String,nte=TypeError,Hi=function(r){if(ete(r))return r;throw nte(tte(r)+" is not an object")},ite=XO,Zm=Hi,nN=Xm,ste=TypeError,RT=Object.defineProperty,ate=Object.getOwnPropertyDescriptor,xT="enumerable",FT="configurable",kT="writable";Vo.f=Kr?tN?function(r,i,a){if(Zm(r),i=nN(i),Zm(a),"function"==typeof r&&"prototype"===i&&"value"in a&&kT in a&&!a[kT]){var s=ate(r,i);s&&s[kT]&&(r[i]=a.value,a={configurable:FT in a?a[FT]:s[FT],enumerable:xT in a?a[xT]:s[xT],writable:!1})}return RT(r,i,a)}:RT:function(r,i,a){if(Zm(r),i=nN(i),Zm(a),ite)try{return RT(r,i,a)}catch{}if("get"in a||"set"in a)throw ste("Accessors not supported");return"value"in a&&(r[i]=a.value),r};var ute=Vo,cte=wu,Eu=Kr?function(r,i,a){return ute.f(r,i,cte(1,a))}:function(r,i,a){return r[i]=a,r},e_=Un,lte=wh,dte=nd,fte=ur,hte=ia.f,pte=eN,ud=Vn,gte=Du,cd=Eu,rN=xr,mte=function(r){var i=function(a,s,u){if(this instanceof i){switch(arguments.length){case 0:return new r;case 1:return new r(a);case 2:return new r(a,s)}return new r(a,s,u)}return lte(r,this,arguments)};return i.prototype=r.prototype,i},gt=function(r,i){var a,s,u,l,d,f,g,_,T,S=r.target,I=r.global,b=r.stat,D=r.proto,R=I?e_:b?e_[S]:(e_[S]||{}).prototype,L=I?ud:ud[S]||cd(ud,S,{})[S],x=L.prototype;for(l in i)s=!(a=pte(I?l:S+(b?".":"#")+l,r.forced))&&R&&rN(R,l),f=L[l],s&&(g=r.dontCallGetSet?(T=hte(R,l))&&T.value:R[l]),d=s&&g?g:i[l],s&&typeof f==typeof d||(_=r.bind&&s?gte(d,e_):r.wrap&&s?mte(d):D&&fte(d)?dte(d):d,(r.sham||d&&d.sham||f&&f.sham)&&cd(_,"sham",!0),cd(L,l,_),D&&(rN(ud,u=S+"Prototype")||cd(ud,u,{}),cd(ud[u],l,d),r.real&&x&&(a||!x[l])&&cd(x,l,d)))},iN=Vo.f;gt({target:"Object",stat:!0,forced:Object.defineProperty!==iN,sham:!Kr},{defineProperty:iN});var oN=Vn.Object,yte=DO.exports=function(r,i,a){return oN.defineProperty(r,i,a)};oN.defineProperty.sham&&(yte.sham=!0);var sN=DO.exports,aN=sN,t_=p(aN),Ste=Cu,Dc=Array.isArray||function(r){return"Array"==Ste(r)},Ite=Math.ceil,Tte=Math.floor,Cte=Math.trunc||function(r){var i=+r;return(i>0?Tte:Ite)(i)},n_=function(r){var i=+r;return i!=i||0===i?0:Cte(i)},bte=n_,wte=Math.min,MT=function(r){return r>0?wte(bte(r),9007199254740991):0},Dte=MT,Ua=function(r){return Dte(r.length)},Ete=TypeError,OT=function(r){if(r>9007199254740991)throw Ete("Maximum allowed index exceeded");return r},Ate=Xm,Pte=Vo,Rte=wu,ld=function(r,i,a){var s=Ate(i);s in r?Pte.f(r,s,Rte(0,a)):r[s]=a},uN={};uN[En("toStringTag")]="z";var NT="[object z]"===String(uN),xte=NT,Fte=ur,r_=Cu,kte=En("toStringTag"),Mte=Object,Ote="Arguments"==r_(function(){return arguments}()),Au=xte?r_:function(r){var i,a,s;return void 0===r?"Undefined":null===r?"Null":"string"==typeof(a=function(u,l){try{return u[l]}catch{}}(i=Mte(r),kte))?a:Ote?r_(i):"Object"==(s=r_(i))&&Fte(i.callee)?"Arguments":s},Nte=ur,LT=wT,Lte=vn(Function.toString);Nte(LT.inspectSource)||(LT.inspectSource=function(r){return Lte(r)});var cN=LT.inspectSource,Wte=vn,Bte=gn,lN=ur,Ute=Au,Vte=cN,dN=function(){},jte=[],fN=Di("Reflect","construct"),WT=/^\s*(?:class|function)\b/,Hte=Wte(WT.exec),Gte=!WT.exec(dN),Rh=function(r){if(!lN(r))return!1;try{return fN(dN,jte,r),!0}catch{return!1}},hN=function(r){if(!lN(r))return!1;switch(Ute(r)){case"AsyncFunction":case"GeneratorFunction":case"AsyncGeneratorFunction":return!1}try{return Gte||!!Hte(WT,Vte(r))}catch{return!0}};hN.sham=!0;var i_=!fN||Bte(function(){var r;return Rh(Rh.call)||!Rh(Object)||!Rh(function(){r=!0})||r})?hN:Rh,pN=Dc,zte=i_,Kte=ci,$te=En("species"),gN=Array,BT=function(r,i){return new(function(r){var i;return pN(r)&&(zte(i=r.constructor)&&(i===gN||pN(i.prototype))||Kte(i)&&null===(i=i[$te]))&&(i=void 0),void 0===i?gN:i}(r))(0===i?0:i)},Qte=gn,Yte=Jm,Jte=En("species"),xh=function(r){return Yte>=51||!Qte(function(){var i=[];return(i.constructor={})[Jte]=function(){return{foo:1}},1!==i[r](Boolean).foo})},Xte=gt,Zte=gn,ene=Dc,tne=ci,nne=xs,rne=Ua,mN=OT,_N=ld,ine=BT,one=xh,sne=Jm,vN=En("isConcatSpreadable"),ane=sne>=51||!Zte(function(){var r=[];return r[vN]=!1,r.concat()[0]!==r}),une=function(r){if(!tne(r))return!1;var i=r[vN];return void 0!==i?!!i:ene(r)};Xte({target:"Array",proto:!0,arity:1,forced:!ane||!one("concat")},{concat:function(r){var i,a,s,u,l,d=nne(this),f=ine(d,0),g=0;for(i=-1,s=arguments.length;i<s;i++)if(une(l=-1===i?d:arguments[i]))for(u=rne(l),mN(g+u),a=0;a<u;a++,g++)a in l&&_N(f,g,l[a]);else mN(g+1),_N(f,g++,l);return f.length=g,f}});var cne=Au,lne=String,eo=function(r){if("Symbol"===cne(r))throw TypeError("Cannot convert a Symbol value to a string");return lne(r)},o_={},dne=n_,fne=Math.max,hne=Math.min,s_=function(r,i){var a=dne(r);return a<0?fne(a+i,0):hne(a,i)},pne=Ps,gne=s_,mne=Ua,yN=function(r){return function(i,a,s){var u,l=pne(i),d=mne(l),f=gne(s,d);if(r&&a!=a){for(;d>f;)if((u=l[f++])!=u)return!0}else for(;d>f;f++)if((r||f in l)&&l[f]===a)return r||f||0;return!r&&-1}},SN={includes:yN(!0),indexOf:yN(!1)},a_={},UT=xr,_ne=Ps,vne=SN.indexOf,yne=a_,IN=vn([].push),TN=function(r,i){var a,s=_ne(r),u=0,l=[];for(a in s)!UT(yne,a)&&UT(s,a)&&IN(l,a);for(;i.length>u;)UT(s,a=i[u++])&&(~vne(l,a)||IN(l,a));return l},VT=["constructor","hasOwnProperty","isPrototypeOf","propertyIsEnumerable","toLocaleString","toString","valueOf"],Sne=TN,Ine=VT,Fh=Object.keys||function(r){return Sne(r,Ine)},bne=Vo,wne=Hi,Dne=Ps,Ene=Fh;o_.f=Kr&&!tN?Object.defineProperties:function(r,i){wne(r);for(var a,s=Dne(i),u=Ene(i),l=u.length,d=0;l>d;)bne.f(r,a=u[d++],s[a]);return r};var u_,CN=Di("document","documentElement"),Ane=DT,bN=sd("keys"),c_=function(r){return bN[r]||(bN[r]=Ane(r))},Pne=Hi,Rne=o_,wN=VT,xne=a_,Fne=CN,kne=PT,jT="prototype",DN=c_("IE_PROTO"),GT=function(){},EN=function(r){return"<script>"+r+"<\/script>"},AN=function(r){r.write(EN("")),r.close();var i=r.parentWindow.Object;return r=null,i},l_=function(){try{u_=new ActiveXObject("htmlfile")}catch{}var r,i;l_=typeof document<"u"?document.domain&&u_?AN(u_):((i=kne("iframe")).style.display="none",Fne.appendChild(i),i.src=String("javascript:"),(r=i.contentWindow.document).open(),r.write(EN("document.F=Object")),r.close(),r.F):AN(u_);for(var s=wN.length;s--;)delete l_[jT][wN[s]];return l_()};xne[DN]=!0;var Ec=Object.create||function(r,i){var a;return null!==r?(GT[jT]=Pne(r),a=new GT,GT[jT]=null,a[DN]=r):a=l_(),void 0===i?a:Rne.f(a,i)},d_={},Mne=TN,One=VT.concat("length","prototype");d_.f=Object.getOwnPropertyNames||function(r){return Mne(r,One)};var PN={},RN=s_,Nne=Ua,Lne=ld,Wne=Array,Bne=Math.max,zT=function(r,i,a){for(var s=Nne(r),u=RN(i,s),l=RN(void 0===a?s:a,s),d=Wne(Bne(l-u,0)),f=0;u<l;u++,f++)Lne(d,f,r[u]);return d.length=f,d},Une=Cu,Vne=Ps,xN=d_.f,jne=zT,FN="object"==typeof window&&window&&Object.getOwnPropertyNames?Object.getOwnPropertyNames(window):[];PN.f=function(r){return FN&&"Window"==Une(r)?function(i){try{return xN(i)}catch{return jne(FN)}}(r):xN(Vne(r))};var kh={};kh.f=Object.getOwnPropertySymbols;var Hne=Eu,Pu=function(r,i,a,s){return s&&s.enumerable?r[i]=a:Hne(r,i,a),r},Gne=Vo,f_=function(r,i,a){return Gne.f(r,i,a)},Mh={};Mh.f=En;var h_,Oh,p_,kN=Vn,Kne=xr,$ne=Mh,qne=Vo.f,cr=function(r){var i=kN.Symbol||(kN.Symbol={});Kne(i,r)||qne(i,r,{value:$ne.f(r)})},Qne=Rr,Yne=Di,Jne=En,Xne=Pu,MN=function(){var r=Yne("Symbol"),i=r&&r.prototype,a=i&&i.valueOf,s=Jne("toPrimitive");i&&!i[s]&&Xne(i,s,function(u){return Qne(a,this)},{arity:1})},Zne=Au,tre=NT,nre=Vo.f,rre=Eu,ire=xr,ore=NT?{}.toString:function(){return"[object "+Zne(this)+"]"},ON=En("toStringTag"),Ru=function(r,i,a,s){if(r){var u=a?r:r.prototype;ire(u,ON)||nre(u,ON,{configurable:!0,value:i}),s&&!tre&&rre(u,"toString",ore)}},NN=Un.WeakMap,are=ur(NN)&&/native code/.test(String(NN)),ure=ci,cre=Eu,KT=xr,lre=c_,dre=a_,WN="Object already initialized",qT=Un.TypeError;if(are||wT.state){var oa=wT.state||(wT.state=new(0,Un.WeakMap));oa.get=oa.get,oa.has=oa.has,oa.set=oa.set,h_=function(r,i){if(oa.has(r))throw qT(WN);return i.facade=r,oa.set(r,i),i},Oh=function(r){return oa.get(r)||{}},p_=function(r){return oa.has(r)}}else{var dd=lre("state");dre[dd]=!0,h_=function(r,i){if(KT(r,dd))throw qT(WN);return i.facade=r,cre(r,dd,i),i},Oh=function(r){return KT(r,dd)?r[dd]:{}},p_=function(r){return KT(r,dd)}}var fd={set:h_,get:Oh,has:p_,enforce:function(r){return p_(r)?Oh(r):h_(r,{})},getterFor:function(r){return function(i){var a;if(!ure(i)||(a=Oh(i)).type!==r)throw qT("Incompatible receiver, "+r+" required");return a}}},hre=Du,pre=_T,gre=xs,mre=Ua,_re=BT,BN=vn([].push),xu=function(r){var i=1==r,a=2==r,s=3==r,u=4==r,l=6==r,d=7==r,f=5==r||l;return function(g,_,T,S){for(var I,b,D=gre(g),R=pre(D),L=hre(_,T),x=mre(R),U=0,Y=S||_re,Z=i?Y(g,x):a||d?Y(g,0):void 0;x>U;U++)if((f||U in R)&&(b=L(I=R[U],U,D),r))if(i)Z[U]=b;else if(b)switch(r){case 3:return!0;case 5:return I;case 6:return U;case 2:BN(Z,I)}else switch(r){case 4:return!1;case 7:BN(Z,I)}return l?-1:s||u?u:Z}},hd={forEach:xu(0),map:xu(1),filter:xu(2),some:xu(3),every:xu(4),find:xu(5),findIndex:xu(6),filterReject:xu(7)},g_=gt,QT=Un,YT=Rr,vre=vn,pd=Kr,gd=id,yre=gn,ti=xr,Sre=Sr,JT=Hi,m_=Ps,XT=Xm,Ire=eo,ZT=wu,Nh=Ec,UN=Fh,Tre=d_,VN=PN,Cre=kh,jN=ia,HN=Vo,bre=o_,GN=Dh,zN=Pu,wre=f_,eC=sd,KN=a_,$N=DT,Dre=En,Ere=Mh,Are=cr,Pre=MN,Rre=Ru,qN=fd,__=hd.forEach,to=c_("hidden"),v_="Symbol",Lh="prototype",xre=qN.set,QN=qN.getterFor(v_),Fs=Object[Lh],Ac=QT.Symbol,y_=Ac&&Ac[Lh],Fre=QT.TypeError,tC=QT.QObject,YN=jN.f,Pc=HN.f,JN=VN.f,kre=GN.f,XN=vre([].push),Va=eC("symbols"),Wh=eC("op-symbols"),Mre=eC("wks"),nC=!tC||!tC[Lh]||!tC[Lh].findChild,rC=pd&&yre(function(){return 7!=Nh(Pc({},"a",{get:function(){return Pc(this,"a",{value:7}).a}})).a})?function(r,i,a){var s=YN(Fs,i);s&&delete Fs[i],Pc(r,i,a),s&&r!==Fs&&Pc(Fs,i,s)}:Pc,iC=function(r,i){var a=Va[r]=Nh(y_);return xre(a,{type:v_,tag:r,description:i}),pd||(a.description=i),a},S_=function(r,i,a){r===Fs&&S_(Wh,i,a),JT(r);var s=XT(i);return JT(a),ti(Va,s)?(a.enumerable?(ti(r,to)&&r[to][s]&&(r[to][s]=!1),a=Nh(a,{enumerable:ZT(0,!1)})):(ti(r,to)||Pc(r,to,ZT(1,{})),r[to][s]=!0),rC(r,s,a)):Pc(r,s,a)},oC=function(r,i){JT(r);var a=m_(i),s=UN(a).concat(nL(a));return __(s,function(u){pd&&!YT(ZN,a,u)||S_(r,u,a[u])}),r},ZN=function(r){var i=XT(r),a=YT(kre,this,i);return!(this===Fs&&ti(Va,i)&&!ti(Wh,i))&&(!(a||!ti(this,i)||!ti(Va,i)||ti(this,to)&&this[to][i])||a)},eL=function(r,i){var a=m_(r),s=XT(i);if(a!==Fs||!ti(Va,s)||ti(Wh,s)){var u=YN(a,s);return!u||!ti(Va,s)||ti(a,to)&&a[to][s]||(u.enumerable=!0),u}},tL=function(r){var i=JN(m_(r)),a=[];return __(i,function(s){ti(Va,s)||ti(KN,s)||XN(a,s)}),a},nL=function(r){var i=r===Fs,a=JN(i?Wh:m_(r)),s=[];return __(a,function(u){!ti(Va,u)||i&&!ti(Fs,u)||XN(s,Va[u])}),s};gd||(Ac=function(){if(Sre(y_,this))throw Fre("Symbol is not a constructor");var r=arguments.length&&void 0!==arguments[0]?Ire(arguments[0]):void 0,i=$N(r),a=function(s){this===Fs&&YT(a,Wh,s),ti(this,to)&&ti(this[to],i)&&(this[to][i]=!1),rC(this,i,ZT(1,s))};return pd&&nC&&rC(Fs,i,{configurable:!0,set:a}),iC(i,r)},zN(y_=Ac[Lh],"toString",function(){return QN(this).tag}),zN(Ac,"withoutSetter",function(r){return iC($N(r),r)}),GN.f=ZN,HN.f=S_,bre.f=oC,jN.f=eL,Tre.f=VN.f=tL,Cre.f=nL,Ere.f=function(r){return iC(Dre(r),r)},pd&&wre(y_,"description",{configurable:!0,get:function(){return QN(this).description}})),g_({global:!0,constructor:!0,wrap:!0,forced:!gd,sham:!gd},{Symbol:Ac}),__(UN(Mre),function(r){Are(r)}),g_({target:v_,stat:!0,forced:!gd},{useSetter:function(){nC=!0},useSimple:function(){nC=!1}}),g_({target:"Object",stat:!0,forced:!gd,sham:!pd},{create:function(r,i){return void 0===i?Nh(r):oC(Nh(r),i)},defineProperty:S_,defineProperties:oC,getOwnPropertyDescriptor:eL}),g_({target:"Object",stat:!0,forced:!gd},{getOwnPropertyNames:tL}),Pre(),Rre(Ac,v_),KN[to]=!0;var rL=id&&!!Symbol.for&&!!Symbol.keyFor,Ore=gt,Nre=Di,Lre=xr,Wre=eo,iL=sd,Bre=rL,sC=iL("string-to-symbol-registry"),Ure=iL("symbol-to-string-registry");Ore({target:"Symbol",stat:!0,forced:!Bre},{for:function(r){var i=Wre(r);if(Lre(sC,i))return sC[i];var a=Nre("Symbol")(i);return sC[i]=a,Ure[a]=i,a}});var Vre=gt,jre=xr,Hre=Ah,Gre=od,zre=rL,oL=sd("symbol-to-string-registry");Vre({target:"Symbol",stat:!0,forced:!zre},{keyFor:function(r){if(!Hre(r))throw TypeError(Gre(r)+" is not a symbol");if(jre(oL,r))return oL[r]}});var Bh=vn([].slice),sL=Dc,Kre=ur,aL=Cu,$re=eo,uL=vn([].push),qre=gt,cL=Di,lL=wh,Qre=Rr,Uh=vn,dL=gn,fL=ur,hL=Ah,pL=Bh,Yre=function(r){if(Kre(r))return r;if(sL(r)){for(var i=r.length,a=[],s=0;s<i;s++){var u=r[s];"string"==typeof u?uL(a,u):"number"!=typeof u&&"Number"!=aL(u)&&"String"!=aL(u)||uL(a,$re(u))}var l=a.length,d=!0;return function(f,g){if(d)return d=!1,g;if(sL(this))return g;for(var _=0;_<l;_++)if(a[_]===f)return g}}},Jre=id,Xre=String,Fu=cL("JSON","stringify"),I_=Uh(/./.exec),gL=Uh("".charAt),Zre=Uh("".charCodeAt),eie=Uh("".replace),tie=Uh(1..toString),nie=/[\uD800-\uDFFF]/g,mL=/^[\uD800-\uDBFF]$/,_L=/^[\uDC00-\uDFFF]$/,vL=!Jre||dL(function(){var r=cL("Symbol")();return"[null]"!=Fu([r])||"{}"!=Fu({a:r})||"{}"!=Fu(Object(r))}),yL=dL(function(){return'"\\udf06\\ud834"'!==Fu("\udf06\ud834")||'"\\udead"'!==Fu("\udead")}),rie=function(r,i){var a=pL(arguments),s=Yre(i);if(fL(s)||void 0!==r&&!hL(r))return a[1]=function(u,l){if(fL(s)&&(l=Qre(s,this,Xre(u),l)),!hL(l))return l},lL(Fu,null,a)},iie=function(r,i,a){var s=gL(a,i-1),u=gL(a,i+1);return I_(mL,r)&&!I_(_L,u)||I_(_L,r)&&!I_(mL,s)?"\\u"+tie(Zre(r,0),16):r};Fu&&qre({target:"JSON",stat:!0,arity:3,forced:vL||yL},{stringify:function(r,i,a){var s=pL(arguments),u=lL(vL?rie:Fu,null,s);return yL&&"string"==typeof u?eie(u,nie,iie):u}});var SL=kh,oie=xs;gt({target:"Object",stat:!0,forced:!id||gn(function(){SL.f(1)})},{getOwnPropertySymbols:function(r){var i=SL.f;return i?i(oie(r)):[]}}),cr("asyncIterator"),cr("hasInstance"),cr("isConcatSpreadable"),cr("iterator"),cr("match"),cr("matchAll"),cr("replace"),cr("search"),cr("species"),cr("split");var sie=MN;cr("toPrimitive"),sie();var aie=Di,uie=Ru;cr("toStringTag"),uie(aie("Symbol"),"Symbol"),cr("unscopables"),Ru(Un.JSON,"JSON",!0);var Rc,IL,TL,cie=Vn.Symbol,md={},aC=Kr,CL=Function.prototype,die=aC&&Object.getOwnPropertyDescriptor,uC=xr(CL,"name"),bL={EXISTS:uC,PROPER:uC&&"something"===function(){}.name,CONFIGURABLE:uC&&(!aC||aC&&die(CL,"name").configurable)},wL=!gn(function(){function r(){}return r.prototype.constructor=null,Object.getPrototypeOf(new r)!==r.prototype}),fie=xr,hie=ur,pie=xs,gie=wL,DL=c_("IE_PROTO"),cC=Object,mie=cC.prototype,_d=gie?cC.getPrototypeOf:function(r){var i=pie(r);if(fie(i,DL))return i[DL];var a=i.constructor;return hie(a)&&i instanceof a?a.prototype:i instanceof cC?mie:null},_ie=gn,vie=ur,yie=ci,Sie=Ec,EL=_d,Iie=Pu,lC=En("iterator"),AL=!1;[].keys&&("next"in(TL=[].keys())?(IL=EL(EL(TL)))!==Object.prototype&&(Rc=IL):AL=!0);var Tie=!yie(Rc)||_ie(function(){var r={};return Rc[lC].call(r)!==r});vie((Rc=Tie?{}:Sie(Rc))[lC])||Iie(Rc,lC,function(){return this});var PL={IteratorPrototype:Rc,BUGGY_SAFARI_ITERATORS:AL},Cie=PL.IteratorPrototype,bie=Ec,wie=wu,Die=Ru,Eie=md,Aie=function(){return this},RL=function(r,i,a,s){var u=i+" Iterator";return r.prototype=bie(Cie,{next:wie(+!s,a)}),Die(r,u,!1,!0),Eie[u]=Aie,r},Pie=vn,Rie=Rs,xie=ur,Fie=String,kie=TypeError,Oie=Hi,xL=Object.setPrototypeOf||("__proto__"in{}?function(){var r,i=!1,a={};try{(r=function(r,i,a){try{return Pie(Rie(Object.getOwnPropertyDescriptor(r,"__proto__").set))}catch{}}(Object.prototype))(a,[]),i=a instanceof Array}catch{}return function(s,u){return Oie(s),function(r){if("object"==typeof r||xie(r))return r;throw kie("Can't set "+Fie(r)+" as a prototype")}(u),i?r(s,u):s.__proto__=u,s}}():void 0),Lie=gt,Wie=Rr,Uie=RL,Vie=_d,jie=Ru,FL=Pu,kL=md,Gie=bL.PROPER,T_=PL.BUGGY_SAFARI_ITERATORS,dC=En("iterator"),C_="values",OL="entries",zie=function(){return this},NL=function(r,i,a,s,u,l,d){Uie(a,i,s);var f,g,_,T=function(x){if(x===u&&R)return R;if(!T_&&x in b)return b[x];switch(x){case"keys":case C_:case OL:return function(){return new a(this,x)}}return function(){return new a(this)}},S=i+" Iterator",I=!1,b=r.prototype,D=b[dC]||b["@@iterator"]||u&&b[u],R=!T_&&D||T(u),L="Array"==i&&b.entries||D;if(L&&(f=Vie(L.call(new r)))!==Object.prototype&&f.next&&(jie(f,S,!0,!0),kL[S]=zie),Gie&&u==C_&&D&&D.name!==C_&&(I=!0,R=function(){return Wie(D,this)}),u)if(g={values:T(C_),keys:l?R:T("keys"),entries:T(OL)},d)for(_ in g)(T_||I||!(_ in b))&&FL(b,_,g[_]);else Lie({target:i,proto:!0,forced:T_||I},g);return d&&b[dC]!==R&&FL(b,dC,R,{name:u}),kL[i]=R,g},LL=function(r,i){return{value:r,done:i}},Kie=Ps,WL=md,$ie=NL,UL=LL,VL="Array Iterator",qie=fd.set,Qie=fd.getterFor(VL);$ie(Array,"Array",function(r,i){qie(this,{type:VL,target:Kie(r),index:0,kind:i})},function(){var r=Qie(this),i=r.target,a=r.kind,s=r.index++;return!i||s>=i.length?(r.target=void 0,UL(void 0,!0)):UL("keys"==a?s:"values"==a?i[s]:[s,i[s]],!1)},"values"),WL.Arguments=WL.Array;var Jie=Un,Xie=Au,Zie=Eu,jL=md,HL=En("toStringTag");for(var fC in{CSSRuleList:0,CSSStyleDeclaration:0,CSSValueList:0,ClientRectList:0,DOMRectList:0,DOMStringList:0,DOMTokenList:1,DataTransferItemList:0,FileList:0,HTMLAllCollection:0,HTMLCollection:0,HTMLFormElement:0,HTMLSelectElement:0,MediaList:0,MimeTypeArray:0,NamedNodeMap:0,NodeList:1,PaintRequestList:0,Plugin:0,PluginArray:0,SVGLengthList:0,SVGNumberList:0,SVGPathSegList:0,SVGPointList:0,SVGStringList:0,SVGTransformList:0,SourceBufferList:0,StyleSheetList:0,TextTrackCueList:0,TextTrackList:0,TouchList:0}){var GL=Jie[fC],hC=GL&&GL.prototype;hC&&Xie(hC)!==HL&&Zie(hC,HL,fC),jL[fC]=jL.Array}var eoe=cie,noe=Vo.f,zL=En("metadata"),KL=Function.prototype;void 0===KL[zL]&&noe(KL,zL,{value:null}),cr("dispose"),cr("metadata");var roe=eoe;cr("asyncDispose");var ioe=vn,pC=Di("Symbol"),ooe=pC.keyFor,soe=ioe(pC.prototype.valueOf),$L=pC.isRegisteredSymbol||function(r){try{return void 0!==ooe(soe(r))}catch{return!1}};gt({target:"Symbol",stat:!0},{isRegisteredSymbol:$L});for(var aoe=sd,qL=Di,uoe=vn,coe=Ah,loe=En,b_=qL("Symbol"),QL=b_.isWellKnownSymbol,YL=qL("Object","getOwnPropertyNames"),doe=uoe(b_.prototype.valueOf),JL=aoe("wks"),gC=0,XL=YL(b_),foe=XL.length;gC<foe;gC++)try{var ZL=XL[gC];coe(b_[ZL])&&loe(ZL)}catch{}var eW=function(r){if(QL&&QL(r))return!0;try{for(var i=doe(r),a=0,s=YL(JL),u=s.length;a<u;a++)if(JL[s[a]]==i)return!0}catch{}return!1};gt({target:"Symbol",stat:!0,forced:!0},{isWellKnownSymbol:eW}),cr("matcher"),cr("observable"),gt({target:"Symbol",stat:!0,name:"isRegisteredSymbol"},{isRegistered:$L}),gt({target:"Symbol",stat:!0,name:"isWellKnownSymbol",forced:!0},{isWellKnown:eW}),cr("metadataKey"),cr("patternMatch"),cr("replaceAll");var mC=roe,vd=p(mC),_C=vn,hoe=n_,poe=eo,goe=rd,moe=_C("".charAt),tW=_C("".charCodeAt),_oe=_C("".slice),nW=function(r){return function(i,a){var s,u,l=poe(goe(i)),d=hoe(a),f=l.length;return d<0||d>=f?r?"":void 0:(s=tW(l,d))<55296||s>56319||d+1===f||(u=tW(l,d+1))<56320||u>57343?r?moe(l,d):s:r?_oe(l,d,d+2):u-56320+(s-55296<<10)+65536}},rW={codeAt:nW(!1),charAt:nW(!0)},voe=rW.charAt,yoe=eo,Soe=NL,oW=LL,sW="String Iterator",Ioe=fd.set,Toe=fd.getterFor(sW);Soe(String,"String",function(r){Ioe(this,{type:sW,string:yoe(r),index:0})},function(){var r,i=Toe(this),a=i.string,s=i.index;return s>=a.length?oW(void 0,!0):(r=voe(a,s),i.index+=r.length,oW(r,!1))});var aW=Mh.f("iterator"),Coe=p(aW);function jo(r){return(jo="function"==typeof vd&&"symbol"==typeof Coe?function(i){return typeof i}:function(i){return i&&"function"==typeof vd&&i.constructor===vd&&i!==vd.prototype?"symbol":typeof i})(r)}var boe=p(Mh.f("toPrimitive"));function uW(r){var i=function(a,s){if("object"!==jo(a)||null===a)return a;var u=a[boe];if(void 0!==u){var l=u.call(a,"string");if("object"!==jo(l))return l;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(a)}(r);return"symbol"===jo(i)?i:String(i)}function cW(r,i){for(var a=0;a<i.length;a++){var s=i[a];s.enumerable=s.enumerable||!1,s.configurable=!0,"value"in s&&(s.writable=!0),t_(r,uW(s.key),s)}}function jn(r,i,a){return i&&cW(r.prototype,i),a&&cW(r,a),t_(r,"prototype",{writable:!1}),r}var w_="\t\n\v\f\r \xa0\u1680\u2000\u2001\u2002\u2003\u2004\u2005\u2006\u2007\u2008\u2009\u200a\u202f\u205f\u3000\u2028\u2029\ufeff",woe=rd,Doe=eo,vC=w_,lW=vn("".replace),Eoe=RegExp("^["+vC+"]+"),Aoe=RegExp("(^|[^"+vC+"])["+vC+"]+$"),yC=function(r){return function(i){var a=Doe(woe(i));return 1&r&&(a=lW(a,Eoe,"")),2&r&&(a=lW(a,Aoe,"$1")),a}},SC={start:yC(1),end:yC(2),trim:yC(3)},Poe=bL.PROPER,Roe=gn,dW=w_,xoe=SC.trim;gt({target:"String",proto:!0,forced:function(r){return Roe(function(){return!!dW[r]()||"\u200b\x85\u180e"!=="\u200b\x85\u180e"[r]()||Poe&&dW[r].name!==r})}("trim")},{trim:function(){return xoe(this)}});var Foe=Vn,Ei=function(r){return Foe[r+"Prototype"]},koe=Ei("String").trim,Moe=Sr,Ooe=koe,IC=String.prototype,Vh=p(function(r){var i=r.trim;return"string"==typeof r||r===IC||Moe(IC,r)&&i===IC.trim?Ooe:i}),Noe=gn,fW=function(r,i){var a=[][r];return!!a&&Noe(function(){a.call(null,i||function(){return 1},1)})},Loe=gt,Woe=SN.indexOf,Boe=fW,TC=nd([].indexOf),hW=!!TC&&1/TC([1],1,-0)<0;Loe({target:"Array",proto:!0,forced:hW||!Boe("indexOf")},{indexOf:function(r){var i=arguments.length>1?arguments[1]:void 0;return hW?TC(this,r,i)||0:Woe(this,r,i)}});var Uoe=Ei("Array").indexOf,Voe=Sr,joe=Uoe,CC=Array.prototype,Ir=p(function(r){var i=r.indexOf;return r===CC||Voe(CC,r)&&i===CC.indexOf?joe:i}),Hoe=Ei("Array").keys,Goe=Au,zoe=xr,Koe=Sr,$oe=Hoe,bC=Array.prototype,qoe={DOMTokenList:!0,NodeList:!0},wC=p(function(r){var i=r.keys;return r===bC||Koe(bC,r)&&i===bC.keys||zoe(qoe,Goe(r))?$oe:i}),Qoe=gt,pW=Dc,Yoe=i_,Joe=ci,gW=s_,Xoe=Ua,Zoe=Ps,ese=ld,tse=En,nse=Bh,rse=xh("slice"),ise=tse("species"),DC=Array,ose=Math.max;Qoe({target:"Array",proto:!0,forced:!rse},{slice:function(r,i){var a,s,u,l=Zoe(this),d=Xoe(l),f=gW(r,d),g=gW(void 0===i?d:i,d);if(pW(l)&&((Yoe(a=l.constructor)&&(a===DC||pW(a.prototype))||Joe(a)&&null===(a=a[ise]))&&(a=void 0),a===DC||void 0===a))return nse(l,f,g);for(s=new(void 0===a?DC:a)(ose(g-f,0)),u=0;f<g;f++,u++)f in l&&ese(s,u,l[f]);return s.length=u,s}});var sse=Ei("Array").slice,ase=Sr,use=sse,EC=Array.prototype,mW=function(r){var i=r.slice;return r===EC||ase(EC,r)&&i===EC.slice?use:i},ks=p(mW),cse=gn,dse=eo,fse=SC.trim,vW=w_,jh=Un.parseInt,yW=Un.Symbol,SW=yW&&yW.iterator,IW=/^[+-]?0x/i,hse=vn(IW.exec),TW=8!==jh(vW+"08")||22!==jh(vW+"0x16")||SW&&!cse(function(){jh(Object(SW))})?function(r,i){var a=fse(dse(r));return jh(a,i>>>0||(hse(IW,a)?16:10))}:jh;gt({global:!0,forced:parseInt!=TW},{parseInt:TW});var ja=p(Vn.parseInt);gt({target:"Array",stat:!0},{isArray:Dc});var CW=Vn.Array.isArray,D_=p(CW),pse="function"==typeof Bun&&Bun&&"string"==typeof Bun.version,gse=TypeError,Hh=function(r,i){if(r<i)throw gse("Not enough arguments");return r},bW=Un,mse=wh,_se=ur,vse=pse,Sse=Bh,Ise=Hh,Tse=bW.Function,Cse=/MSIE .\./.test(Eh)||vse&&function(){var r=bW.Bun.version.split(".");return r.length<3||0==r[0]&&(r[1]<3||3==r[1]&&0==r[2])}(),wW=function(r,i){var a=i?2:1;return Cse?function(s,u){var l=Ise(arguments.length,1)>a,d=_se(s)?s:Tse(s),f=l?Sse(arguments,a):[],g=l?function(){mse(d,this,f)}:d;return i?r(g,u):r(g)}:r},bse=gt,DW=Un,EW=wW(DW.setInterval,!0);bse({global:!0,bind:!0,forced:DW.setInterval!==EW},{setInterval:EW});var wse=gt,AW=Un,PW=wW(AW.setTimeout,!0);wse({global:!0,bind:!0,forced:AW.setTimeout!==PW},{setTimeout:PW});var Dse=p(Vn.setTimeout),Ase=Dc,Pse=TypeError,Rse=Object.getOwnPropertyDescriptor,RW=Kr&&!function(){if(void 0!==this)return!0;try{Object.defineProperty([],"length",{writable:!1}).length=1}catch(r){return r instanceof TypeError}}()?function(r,i){if(Ase(r)&&!Rse(r,"length").writable)throw Pse("Cannot set read only .length");return r.length=i}:function(r,i){return r.length=i},xW=od,xse=TypeError,Fse=gt,kse=xs,Mse=s_,Ose=n_,Nse=Ua,Lse=RW,Wse=OT,Bse=BT,Use=ld,AC=function(r,i){if(!delete r[i])throw xse("Cannot delete property "+xW(i)+" of "+xW(r))},Vse=xh("splice"),jse=Math.max,Hse=Math.min;Fse({target:"Array",proto:!0,forced:!Vse},{splice:function(r,i){var a,s,u,l,d,f,g=kse(this),_=Nse(g),T=Mse(r,_),S=arguments.length;for(0===S?a=s=0:1===S?(a=0,s=_-T):(a=S-2,s=Hse(jse(Ose(i),0),_-T)),Wse(_+a-s),u=Bse(g,s),l=0;l<s;l++)(d=T+l)in g&&Use(u,l,g[d]);if(u.length=s,a<s){for(l=T;l<_-s;l++)f=l+a,(d=l+s)in g?g[f]=g[d]:AC(g,f);for(l=_;l>_-s+a;l--)AC(g,l-1)}else if(a>s)for(l=_-s;l>T;l--)f=l+a-1,(d=l+s-1)in g?g[f]=g[d]:AC(g,f);for(l=0;l<a;l++)g[l+T]=arguments[l+2];return Lse(g,_-s+a),u}});var Gse=Ei("Array").splice,zse=Sr,Kse=Gse,PC=Array.prototype,Ai=p(function(r){var i=r.splice;return r===PC||zse(PC,r)&&i===PC.splice?Kse:i}),$se=Di,qse=d_,Qse=kh,Yse=Hi,Jse=vn([].concat),FW=$se("Reflect","ownKeys")||function(r){var i=qse.f(Yse(r)),a=Qse.f;return a?Jse(i,a(r)):i},kW=xr,Xse=FW,Zse=ia,eae=Vo,tae=ci,nae=Eu,MW=Error,rae=vn("".replace),iae=String(MW("zxcasd").stack),OW=/\n\s*at [^:]*:[^\n]*/,oae=OW.test(iae),sae=wu,aae=!gn(function(){var r=Error("a");return!("stack"in r)||(Object.defineProperty(r,"stack",sae(1,7)),7!==r.stack)}),uae=Eu,lae=aae,NW=Error.captureStackTrace,dae=md,fae=En("iterator"),hae=Array.prototype,LW=function(r){return void 0!==r&&(dae.Array===r||hae[fae]===r)},pae=Au,WW=IT,gae=Ym,mae=md,_ae=En("iterator"),Gh=function(r){if(!gae(r))return WW(r,_ae)||WW(r,"@@iterator")||mae[pae(r)]},vae=Rr,yae=Rs,Sae=Hi,Iae=od,Tae=Gh,Cae=TypeError,RC=function(r,i){var a=arguments.length<2?Tae(r):i;if(yae(a))return Sae(vae(a,r));throw Cae(Iae(r)+" is not iterable")},bae=Rr,BW=Hi,wae=IT,UW=function(r,i,a){var s,u;BW(r);try{if(!(s=wae(r,"return"))){if("throw"===i)throw a;return a}s=bae(s,r)}catch(l){u=!0,s=l}if("throw"===i)throw a;if(u)throw s;return BW(s),a},Dae=Du,Eae=Rr,Aae=Hi,Pae=od,Rae=LW,xae=Ua,VW=Sr,Fae=RC,kae=Gh,jW=UW,Mae=TypeError,E_=function(r,i){this.stopped=r,this.result=i},HW=E_.prototype,zh=function(r,i,a){var s,u,l,d,f,g,_,S=!(!a||!a.AS_ENTRIES),I=!(!a||!a.IS_RECORD),b=!(!a||!a.IS_ITERATOR),D=!(!a||!a.INTERRUPTED),R=Dae(i,a&&a.that),L=function(U){return s&&jW(s,"normal",U),new E_(!0,U)},x=function(U){return S?(Aae(U),D?R(U[0],U[1],L):R(U[0],U[1])):D?R(U,L):R(U)};if(I)s=r.iterator;else if(b)s=r;else{if(!(u=kae(r)))throw Mae(Pae(r)+" is not iterable");if(Rae(u)){for(l=0,d=xae(r);d>l;l++)if((f=x(r[l]))&&VW(HW,f))return f;return new E_(!1)}s=Fae(r,u)}for(g=I?r.next:s.next;!(_=Eae(g,s)).done;){try{f=x(_.value)}catch(U){jW(s,"throw",U)}if("object"==typeof f&&f&&VW(HW,f))return f}return new E_(!1)},Oae=eo,Nae=gt,Lae=Sr,Wae=_d,A_=xL,GW=Ec,xC=Eu,FC=wu,Uae=function(r,i){tae(i)&&"cause"in i&&nae(r,"cause",i.cause)},Vae=function(r,i,a,s){lae&&(NW?NW(r,i):uae(r,"stack",function(r,i){if(oae&&"string"==typeof r&&!MW.prepareStackTrace)for(;i--;)r=rae(r,OW,"");return r}(a,s)))},jae=zh,Hae=function(r,i){return void 0===r?arguments.length<2?"":i:Oae(r)},Gae=En("toStringTag"),P_=Error,zae=[].push,yd=function(r,i){var a,s=Lae(kC,this);A_?a=A_(P_(),s?Wae(this):kC):(a=s?this:GW(kC),xC(a,Gae,"Error")),void 0!==i&&xC(a,"message",Hae(i)),Vae(a,yd,a.stack,1),arguments.length>2&&Uae(a,arguments[2]);var u=[];return jae(r,zae,{that:u}),xC(a,"errors",u),a};A_?A_(yd,P_):function(r,i,a){for(var s=Xse(i),u=eae.f,l=Zse.f,d=0;d<s.length;d++){var f=s[d];kW(r,f)||a&&kW(a,f)||u(r,f,l(i,f))}}(yd,P_,{name:!0});var kC=yd.prototype=GW(P_.prototype,{constructor:FC(1,yd),message:FC(1,""),name:FC(1,"AggregateError")});Nae({global:!0,constructor:!0,arity:2},{AggregateError:yd});var Kh,Sd,zW,MC,R_=typeof process<"u"&&"process"==Cu(process),Kae=Di,$ae=f_,qae=Kr,KW=En("species"),Qae=Sr,Yae=TypeError,OC=function(r,i){if(Qae(i,r))return r;throw Yae("Incorrect invocation")},Jae=i_,Xae=od,Zae=TypeError,$W=function(r){if(Jae(r))return r;throw Zae(Xae(r)+" is not a constructor")},qW=Hi,eue=$W,tue=Ym,nue=En("species"),QW=function(r,i){var a,s=qW(r).constructor;return void 0===s||tue(a=qW(s)[nue])?i:eue(a)},YW=/(?:ipad|iphone|ipod).*applewebkit/i.test(Eh),To=Un,rue=wh,iue=Du,JW=ur,oue=xr,XW=gn,ZW=CN,sue=Bh,e2=PT,aue=Hh,uue=YW,cue=R_,NC=To.setImmediate,LC=To.clearImmediate,lue=To.process,WC=To.Dispatch,due=To.Function,t2=To.MessageChannel,fue=To.String,BC=0,$h={},n2="onreadystatechange";XW(function(){Kh=To.location});var UC=function(r){if(oue($h,r)){var i=$h[r];delete $h[r],i()}},VC=function(r){return function(){UC(r)}},r2=function(r){UC(r.data)},i2=function(r){To.postMessage(fue(r),Kh.protocol+"//"+Kh.host)};NC&&LC||(NC=function(r){aue(arguments.length,1);var i=JW(r)?r:due(r),a=sue(arguments,1);return $h[++BC]=function(){rue(i,void 0,a)},Sd(BC),BC},LC=function(r){delete $h[r]},cue?Sd=function(r){lue.nextTick(VC(r))}:WC&&WC.now?Sd=function(r){WC.now(VC(r))}:t2&&!uue?(MC=(zW=new t2).port2,zW.port1.onmessage=r2,Sd=iue(MC.postMessage,MC)):To.addEventListener&&JW(To.postMessage)&&!To.importScripts&&Kh&&"file:"!==Kh.protocol&&!XW(i2)?(Sd=i2,To.addEventListener("message",r2,!1)):Sd=n2 in e2("script")?function(r){ZW.appendChild(e2("script"))[n2]=function(){ZW.removeChild(this),UC(r)}}:function(r){setTimeout(VC(r),0)});var o2={set:NC,clear:LC},s2=function(){this.head=null,this.tail=null};s2.prototype={add:function(r){var i={item:r,next:null},a=this.tail;a?a.next=i:this.head=i,this.tail=i},get:function(){var r=this.head;if(r)return null===(this.head=r.next)&&(this.tail=null),r.item}};var Id,jC,HC,GC,a2,u2=s2,hue=/ipad|iphone|ipod/i.test(Eh)&&typeof Pebble<"u",pue=/web0s(?!.*chrome)/i.test(Eh),xc=Un,c2=Du,zC=o2.set,mue=u2,_ue=YW,vue=hue,yue=pue,KC=R_,l2=xc.MutationObserver||xc.WebKitMutationObserver,d2=xc.document,f2=xc.process,x_=xc.Promise,h2=(0,ia.f)(xc,"queueMicrotask"),$C=h2&&h2.value;if(!$C){var F_=new mue,k_=function(){var r,i;for(KC&&(r=f2.domain)&&r.exit();i=F_.get();)try{i()}catch(a){throw F_.head&&Id(),a}r&&r.enter()};_ue||KC||yue||!l2||!d2?!vue&&x_&&x_.resolve?((GC=x_.resolve(void 0)).constructor=x_,a2=c2(GC.then,GC),Id=function(){a2(k_)}):KC?Id=function(){f2.nextTick(k_)}:(zC=c2(zC,xc),Id=function(){zC(k_)}):(jC=!0,HC=d2.createTextNode(""),new l2(k_).observe(HC,{characterData:!0}),Id=function(){HC.data=jC=!jC}),$C=function(r){F_.head||Id(),F_.add(r)}}var Sue=$C,Td=function(r){try{return{error:!1,value:r()}}catch(i){return{error:!0,value:i}}},Fc=Un.Promise,p2="object"==typeof Deno&&Deno&&"object"==typeof Deno.version,Iue=!p2&&!R_&&"object"==typeof window&&"object"==typeof document,Tue=Un,qh=Fc,Cue=ur,bue=eN,wue=cN,Eue=Iue,Aue=p2,qC=Jm,g2=qh&&qh.prototype,Pue=En("species"),m2=!1,_2=Cue(Tue.PromiseRejectionEvent),Rue=bue("Promise",function(){var r=wue(qh),i=r!==String(qh);if(!i&&66===qC||!g2.catch||!g2.finally)return!0;if(!qC||qC<51||!/native code/.test(r)){var a=new qh(function(u){u(1)}),s=function(u){u(function(){},function(){})};if((a.constructor={})[Pue]=s,!(m2=a.then(function(){})instanceof s))return!0}return!i&&(Eue||Aue)&&!_2}),Qh={CONSTRUCTOR:Rue,REJECTION_EVENT:_2,SUBCLASSING:m2},sa={},v2=Rs,xue=TypeError,Fue=function(r){var i,a;this.promise=new r(function(s,u){if(void 0!==i||void 0!==a)throw xue("Bad Promise constructor");i=s,a=u}),this.resolve=v2(i),this.reject=v2(a)};sa.f=function(r){return new Fue(r)};var QC,y2,i,kue=gt,M_=R_,ku=Un,Yh=Rr,Mue=Pu,Oue=Ru,Lue=Rs,YC=ur,Wue=ci,Bue=OC,Uue=QW,S2=o2.set,JC=Sue,jue=Td,Hue=u2,I2=fd,XC=Fc,C2=sa,O_="Promise",b2=Qh.CONSTRUCTOR,Gue=Qh.REJECTION_EVENT,ZC=I2.getterFor(O_),zue=I2.set,Jh=XC,eb=XC&&XC.prototype,w2=ku.TypeError,tb=ku.document,nb=ku.process,rb=C2.f,$ue=rb,que=!!(tb&&tb.createEvent&&ku.dispatchEvent),E2=function(r){var i;return!(!Wue(r)||!YC(i=r.then))&&i},A2=function(r,i){var a,s,u,l=i.value,d=1==i.state,f=d?r.ok:r.fail,g=r.resolve,_=r.reject,T=r.domain;try{f?(d||(2===i.rejection&&Yue(i),i.rejection=1),!0===f?a=l:(T&&T.enter(),a=f(l),T&&(T.exit(),u=!0)),a===r.promise?_(w2("Promise-chain cycle")):(s=E2(a))?Yh(s,a,g,_):g(a)):_(l)}catch(S){T&&!u&&T.exit(),_(S)}},P2=function(r,i){r.notified||(r.notified=!0,JC(function(){for(var a,s=r.reactions;a=s.get();)A2(a,r);r.notified=!1,i&&!r.rejection&&Que(r)}))},R2=function(r,i,a){var s,u;que?((s=tb.createEvent("Event")).promise=i,s.reason=a,s.initEvent(r,!1,!0),ku.dispatchEvent(s)):s={promise:i,reason:a},!Gue&&(u=ku["on"+r])&&u(s)},Que=function(r){Yh(S2,ku,function(){var i,a=r.facade,s=r.value;if(x2(r)&&(i=jue(function(){M_?nb.emit("unhandledRejection",s,a):R2("unhandledrejection",a,s)}),r.rejection=M_||x2(r)?2:1,i.error))throw i.value})},x2=function(r){return 1!==r.rejection&&!r.parent},Yue=function(r){Yh(S2,ku,function(){var i=r.facade;M_?nb.emit("rejectionHandled",i):R2("rejectionhandled",i,r.value)})},Cd=function(r,i,a){return function(s){r(i,s,a)}},bd=function(r,i,a){r.done||(r.done=!0,a&&(r=a),r.value=i,r.state=2,P2(r,!0))},ib=function(r,i,a){if(!r.done){r.done=!0,a&&(r=a);try{if(r.facade===i)throw w2("Promise can't be resolved itself");var s=E2(i);s?JC(function(){var u={done:!1};try{Yh(s,i,Cd(ib,u,r),Cd(bd,u,r))}catch(l){bd(u,l,r)}}):(r.value=i,r.state=1,P2(r,!1))}catch(u){bd({done:!1},u,r)}}};b2&&(eb=(Jh=function(r){Bue(this,eb),Lue(r),Yh(QC,this);var i=ZC(this);try{r(Cd(ib,i),Cd(bd,i))}catch(a){bd(i,a)}}).prototype,(QC=function(r){zue(this,{type:O_,done:!1,notified:!1,parent:!1,reactions:new Hue,rejection:!1,state:0,value:void 0})}).prototype=Mue(eb,"then",function(r,i){var a=ZC(this),s=rb(Uue(this,Jh));return a.parent=!0,s.ok=!YC(r)||r,s.fail=YC(i)&&i,s.domain=M_?nb.domain:void 0,0==a.state?a.reactions.add(s):JC(function(){A2(s,a)}),s.promise}),y2=function(){var r=new QC,i=ZC(r);this.promise=r,this.resolve=Cd(ib,i),this.reject=Cd(bd,i)},C2.f=rb=function(r){return r===Jh||void 0===r?new y2(r):$ue(r)}),kue({global:!0,constructor:!0,wrap:!0,forced:b2},{Promise:Jh}),Oue(Jh,O_,!1,!0),i=Kae("Promise"),qae&&i&&!i[KW]&&$ae(i,KW,{configurable:!0,get:function(){return this}});var F2=En("iterator"),k2=!1;try{var Jue=0,M2={next:function(){return{done:!!Jue++}},return:function(){k2=!0}};M2[F2]=function(){return this},Array.from(M2,function(){throw 2})}catch{}var O2=function(r,i){if(!i&&!k2)return!1;var a=!1;try{var s={};s[F2]=function(){return{next:function(){return{done:a=!0}}}},r(s)}catch{}return a},Xue=Fc,N_=Qh.CONSTRUCTOR||!O2(function(r){Xue.all(r).then(void 0,function(){})}),Zue=Rr,ece=Rs,tce=sa,nce=Td,rce=zh;gt({target:"Promise",stat:!0,forced:N_},{all:function(r){var i=this,a=tce.f(i),s=a.resolve,u=a.reject,l=nce(function(){var d=ece(i.resolve),f=[],g=0,_=1;rce(r,function(T){var S=g++,I=!1;_++,Zue(d,i,T).then(function(b){I||(I=!0,f[S]=b,--_||s(f))},u)}),--_||s(f)});return l.error&&u(l.value),a.promise}}),gt({target:"Promise",proto:!0,forced:Qh.CONSTRUCTOR,real:!0},{catch:function(r){return this.then(void 0,r)}});var sce=Rr,ace=Rs,uce=sa,cce=Td,lce=zh;gt({target:"Promise",stat:!0,forced:N_},{race:function(r){var i=this,a=uce.f(i),s=a.reject,u=cce(function(){var l=ace(i.resolve);lce(r,function(d){sce(l,i,d).then(a.resolve,s)})});return u.error&&s(u.value),a.promise}});var dce=Rr,fce=sa;gt({target:"Promise",stat:!0,forced:Qh.CONSTRUCTOR},{reject:function(r){var i=fce.f(this);return dce(i.reject,void 0,r),i.promise}});var hce=Hi,pce=ci,gce=sa,N2=function(r,i){if(hce(r),pce(i)&&i.constructor===r)return i;var a=gce.f(r);return(0,a.resolve)(i),a.promise},mce=gt,_ce=Fc,vce=Qh.CONSTRUCTOR,yce=N2,Sce=Di("Promise"),Ice=!vce;mce({target:"Promise",stat:!0,forced:!0},{resolve:function(r){return yce(Ice&&this===Sce?_ce:this,r)}});var Tce=Rr,Cce=Rs,bce=sa,wce=Td,Dce=zh;gt({target:"Promise",stat:!0,forced:N_},{allSettled:function(r){var i=this,a=bce.f(i),s=a.resolve,u=a.reject,l=wce(function(){var d=Cce(i.resolve),f=[],g=0,_=1;Dce(r,function(T){var S=g++,I=!1;_++,Tce(d,i,T).then(function(b){I||(I=!0,f[S]={status:"fulfilled",value:b},--_||s(f))},function(b){I||(I=!0,f[S]={status:"rejected",reason:b},--_||s(f))})}),--_||s(f)});return l.error&&u(l.value),a.promise}});var Ece=Rr,Ace=Rs,Pce=Di,Rce=sa,xce=Td,Fce=zh,L2="No one promise resolved";gt({target:"Promise",stat:!0,forced:N_},{any:function(r){var i=this,a=Pce("AggregateError"),s=Rce.f(i),u=s.resolve,l=s.reject,d=xce(function(){var f=Ace(i.resolve),g=[],_=0,T=1,S=!1;Fce(r,function(I){var b=_++,D=!1;T++,Ece(f,i,I).then(function(R){D||S||(S=!0,u(R))},function(R){D||S||(D=!0,g[b]=R,--T||l(new a(g,L2)))})}),--T||l(new a(g,L2))});return d.error&&l(d.value),s.promise}});var Oce=Di,Nce=ur,Lce=QW,W2=N2,Wce=Fc&&Fc.prototype;gt({target:"Promise",proto:!0,real:!0,forced:!!Fc&&gn(function(){Wce.finally.call({then:function(){}},function(){})})},{finally:function(r){var i=Lce(this,Oce("Promise")),a=Nce(r);return this.then(a?function(s){return W2(i,r()).then(function(){return s})}:r,a?function(s){return W2(i,r()).then(function(){throw s})}:r)}});var B2=Vn.Promise,kc=p(B2),Bce=ci,Uce=Cu,Vce=En("match"),Hce=TypeError,U2=function(r){if(function(r){var i;return Bce(r)&&(void 0!==(i=r[Vce])?!!i:"RegExp"==Uce(r))}(r))throw Hce("The method doesn't accept regular expressions");return r},Gce=En("match"),V2=function(r){var i=/./;try{"/./"[r](i)}catch{try{return i[Gce]=!1,"/./"[r](i)}catch{}}return!1},zce=gt,j2=nd,Kce=MT,H2=eo,$ce=U2,qce=rd,Qce=V2,G2=j2("".endsWith),Yce=j2("".slice),Jce=Math.min;zce({target:"String",proto:!0,forced:!Qce("endsWith")},{endsWith:function(r){var i=H2(qce(this));$ce(r);var a=arguments.length>1?arguments[1]:void 0,s=i.length,u=void 0===a?s:Jce(Kce(a),s),l=H2(r);return G2?G2(i,l,u):Yce(i,u-l.length,u)===l}});var Xce=Ei("String").endsWith,Zce=Sr,ele=Xce,sb=String.prototype,z2=p(function(r){var i=r.endsWith;return"string"==typeof r||r===sb||Zce(sb,r)&&i===sb.endsWith?ele:i}),K2=vn,tle=Rs,nle=ci,rle=xr,$2=Bh,ile=bh,q2=Function,ole=K2([].concat),sle=K2([].join),ab={},Q2=ile?q2.bind:function(r){var i=tle(this),a=i.prototype,s=$2(arguments,1),u=function(){var l=ole(s,$2(arguments));return this instanceof u?function(d,f,g){if(!rle(ab,f)){for(var _=[],T=0;T<f;T++)_[T]="a["+T+"]";ab[f]=q2("C,a","return new C("+sle(_,",")+")")}return ab[f](d,g)}(i,l.length,l):i.apply(r,l)};return nle(a)&&(u.prototype=a),u};gt({target:"Function",proto:!0,forced:Function.bind!==Q2},{bind:Q2});var ale=Ei("Function").bind,ule=Sr,cle=ale,ub=Function.prototype,J2=function(r){var i=r.bind;return r===ub||ule(ub,r)&&i===ub.bind?cle:i},cb=p(J2),X2=Un,lle=gn,dle=eo,fle=SC.trim,ple=vn("".charAt),L_=X2.parseFloat,Z2=X2.Symbol,eB=Z2&&Z2.iterator,tB=1/L_("\t\n\v\f\r \xa0\u1680\u2000\u2001\u2002\u2003\u2004\u2005\u2006\u2007\u2008\u2009\u200a\u202f\u205f\u3000\u2028\u2029\ufeff-0")!=-1/0||eB&&!lle(function(){L_(Object(eB))})?function(r){var i=fle(dle(r)),a=L_(i);return 0===a&&"-"==ple(i,0)?-0:a}:L_;gt({global:!0,forced:parseFloat!=tB},{parseFloat:tB});var lb=p(Vn.parseFloat),gle=gt,nB=nd,mle=MT,rB=eo,_le=U2,vle=rd,yle=V2,iB=nB("".startsWith),Sle=nB("".slice),Ile=Math.min;gle({target:"String",proto:!0,forced:!yle("startsWith")},{startsWith:function(r){var i=rB(vle(this));_le(r);var a=mle(Ile(arguments.length>1?arguments[1]:void 0,i.length)),s=rB(r);return iB?iB(i,s,a):Sle(i,a,a+s.length)===s}});var oB,Tle=Ei("String").startsWith,Cle=Sr,ble=Tle,db=String.prototype,wle=p(function(r){var i=r.startsWith;return"string"==typeof r||r===db||Cle(db,r)&&i===db.startsWith?ble:i});function Dle(r){var i,a,s="0x";if(/^(rgb|RGB)/.test(r)){var u=r.replace(/[^\d,.]/g,"").split(",");for(a=0;a<3;++a)1==(i=Number(u[a]).toString(16)).length&&(i="0"+i),s+=i;4==u.length?(1==(i=Math.round(255*Number(u[a])).toString(16)).length&&(i="0"+i),s+=i):s+="ff"}else if("transparent"==r)s+="00000000";else if(/^#[0-9a-fA-f]{6}$/.test(r))s+=r.replace(/#/,"")+"ff";else if(/^#[0-9a-fA-f]{3}$/.test(r)){for(a=0;a<3;++a)s+=r[a]+r[a];s+="ff"}else s="-1";return Number(s)}function Ele(r){if(r>4294967295||r<0)return null;var i;if(j.bHTML5Edition)i="rgba("+Math.floor(r/16777216)+","+Math.floor(r/65536)%256+","+Math.floor(r/256)%256+","+r%256/255+")";else if(r%256==0)i="transparent";else{for(i=Math.floor(r/256).toString(16);6!=i.length;)i="0"+i;i="#"+i}return i}function Ale(r){var i,a=(r=r||window.event).wheelDelta,s=r.detail;return a&&(i=a/120),s&&(i=-(s%3==0?s/3:s)),i}Vh(String.prototype)||(String.prototype.trim=function(){return this.replace(/^[\s\uFEFF\xA0]+|[\s\uFEFF\xA0]+$/g,"")}),oB={registedClass:[],registedObjs:[]};var Mc={LEFT:0,MIDDLE:1,RIGHT:2};function Ple(r){var i=r||window.event;return null==i.which?i.button<2?Mc.LEFT:4==i.button?Mc.MIDDLE:Mc.RIGHT:i.which<2?Mc.LEFT:2==i.which?Mc.MIDDLE:Mc.RIGHT}var fb,hb,Rle=/[\-#$\^*()+\[\]{}|\\,.?\s]/g,pb={"&amp;":"&","&gt;":">","&lt;":"<","&#x60;":"`","&#x2F;":"/","&quot;":'"',"&#x27;":"'"},gb={};function xle(r){return r.replace(/\\u([a-f\d]{4})/gi,function(i,a){return String.fromCharCode(ja(a,16))})}function Fle(r){return(r+"").replace(function(){if(fb)return fb;var i="";return v.each(pb,function(a){i+=a+"|"}),i=ks(i).call(i,0,-1),fb=new RegExp(i,"g")}(),function(i){return gb[i]})}function kle(r){return r.replace(Rle,"\\$&")}function Mle(r){return r.replace(function(){if(hb)return hb;var i="";return v.each(gb,function(a){i+=a+"|"}),i+="&#(\\d{1,5});",hb=new RegExp(i,"g")}(),function(i,a){return pb[i]||String.fromCharCode(+a)})}v.each(pb,function(r,i){gb[r]=i});var wd,Dd=void 0,Ed=function(r){return"function"==typeof r},sB=function(r){return D_?D_(r):r instanceof Array},aB=function(r){return!1===r||r===Dd||null===r},mb="undefined",Ole=(typeof TypeError>"u"?"undefined":jo(TypeError))===mb?Error:TypeError;if((typeof process>"u"?"undefined":jo(process))!==mb&&process.nextTick)wd=process.nextTick;else if((typeof MessageChannel>"u"?"undefined":jo(MessageChannel))!==mb){var uB=new MessageChannel,_b=[];uB.port1.onmessage=function(){_b.length&&_b.shift()()},wd=function(r){_b.push(r),uB.port2.postMessage(0)}}else wd=function(r){Dse(r,0)};function Nle(r){wd(function(){throw r})}function Lle(r){return this.then(r,Dd)}function cB(r){return this.then(Dd,r)}function lB(r,i){return this.then(function(a){return Ed(r)?r.apply(null,sB(a)?a:[a]):Fr.onlyFuncs?a:r},i||Dd)}function Wle(r){function i(){r()}return this.then(i,i),this}function Ble(r){return this.then(function(i){return Ed(r)?r.apply(null,sB(i)?Ai(i).call(i,0,0,void 0)&&i:[void 0,i]):Fr.onlyFuncs?i:r},function(i){return r(i)})}function Ule(r){return this.then(Dd,r?function(i){throw r(i),i}:Nle)}var Fr=function(){function r(i){Bn(this,r),this.alwaysAsyncFn=null,this.status=0,this.pendings=[],this.promise={then:function(a,s){var u=new r;return this.pendings.push([function(l){try{aB(a)?u.resolve(l):u.resolve(Ed(a)?a(l):r.onlyFuncs?l:a)}catch(d){u.reject(d)}},function(l){if((aB(s)||!Ed(s)&&r.onlyFuncs)&&u.reject(l),s)try{u.resolve(Ed(s)?s(l):s)}catch(d){u.reject(d)}}]),0!==this.status&&this.alwaysAsyncFn(this.execCallbacks),u.promise},success:Lle,error:cB,otherwise:cB,apply:lB,spread:lB,ensure:Wle,nodify:Ble,rethrow:Ule,isPending:function(){return 0===this.status},getStatus:function(){return this.status}},this.alwaysAsyncFn=(Dd!==i?i:r.alwaysAsync)?wd:function(a){a()},this.promise.toSource=this.promise.toString=this.promise.valueOf=function(){return void 0===this.value?this:this.value}}return jn(r,[{key:"resolve",value:function(i){var a,s=!1;function u(d){return function(f){return s?void 0:(s=!0,d(f))}}if(this.status)return this;try{var l=!(!(a=i)||!jo(a).match(/function|object/))&&i.then;if(Ed(l)){if(i===this.promise)throw new Ole("Promise can't resolve itself");return l.call(i,u(this.resolve),u(this.reject)),this}}catch(d){return u(this.reject)(d),this}return this.alwaysAsyncFn(function(){this.value=i,this.status=1,this.execCallbacks()}),this}},{key:"reject",value:function(i){return this.status||this.alwaysAsyncFn(function(){try{throw i}catch(a){this.value=a}this.status=-1,this.execCallbacks()}),this}},{key:"execCallbacks",value:function(){if(0!==this.status){var i,a=this.pendings,s=0,u=a.length,l=~this.status?0:1;for(this.pendings=[];s<u;s++)(i=a[s][l])&&i(this.value)}}}]),r}();Fr.deferred=Fr,Fr.defer=Fr,Fr.nextTick=wd,Fr.alwaysAsync=!0,Fr.onlyFuncs=!0,Fr.resolve=function(r){return new Fr(!0).resolve(r).promise},Fr.resolved=Fr.resolve,Fr.fulfilled=Fr.resolve,Fr.reject=function(r){return new Fr(!0).reject(r).promise},Fr.rejected=Fr.reject;var vb,W_,yb,B_=window;function Vle(r){return r.which=null==(r=r||window.event).which?r.button<2?1:4==r.button?2:3:r.which<2?1:2==r.which?2:3,r}function jle(r,i){return r.currentStyle?r.currentStyle[i]:window.getComputedStyle?document.defaultView.getComputedStyle(r,null)[i]:null}function dB(r){var i=jo(r);return null==r||"object"!==i&&"function"!==i}function Hle(r,i,a,s){i=i||"&",a=a||"=",v.isUndefined(s)&&(s=nt);var u=[];return v.each(r,function(l,d){var f=v.urlEncode(d);dB(l)?(u.push(f),v.isDef(l)&&u.push(a,v.urlEncode(l+"")),u.push(i)):v.isArray(l)&&l.length&&v.each(l,function(g){dB(g)&&(u.push(f,s?v.urlEncode("[]"):""),v.isDef(g)&&u.push(a,v.urlEncode(g+"")),u.push(i))})}),u.pop(),u.join("")}function Gle(r,i,a){if(!v.isString(r)||!(r=Vh(v).call(v,r)))return{};a=a||"=";for(var s,u,l,d={},f=v.urlDecode,g=r.split(i=i||"&"),_=0,T=g.length;_<T;++_){if(-1===(s=Ir(v).call(v,a,g[_])))u=f(g[_]),l=void 0;else{u=f(g[_].substring(0,s)),l=g[_].substring(s+1);try{l=f(l)}catch(S){v.error("decodeURIComponent error : "+l),v.error(S)}z2(v).call(v,u,"[]")&&(u=u.substring(0,u.length-2))}u in d?v.isArray(d[u])?d[u].push(l):d[u]=[d[u],l]:d[u]=l}return d}B_&&v.isFunction(B_.__zone_symbol__Promise)&&(W_=B_.__zone_symbol__Promise),vb=self&&kc||B_&&kc?kc:Fr,W_||(W_=vb),v.each({"&amp;":"&","&gt;":">","&lt;":"<","&#x60;":"`","&#x2F;":"/","&quot;":'"',"&#x27;":"'"},function(r,i){});var fB="ds-dwt-loaderBar",Sb="data:image/svg+xml;base64,PD94bWwgdmVyc2lvbj0iMS4wIiBlbmNvZGluZz0iVVRGLTgiIHN0YW5kYWxvbmU9Im5vIj8+PHN2ZyB4bWxuczpzdmc9Imh0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnIiB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHhtbG5zOnhsaW5rPSJodHRwOi8vd3d3LnczLm9yZy8xOTk5L3hsaW5rIiB2ZXJzaW9uPSIxLjAiIHdpZHRoPSIxMDBweCIgaGVpZ2h0PSIxMDBweCIgdmlld0JveD0iMCAwIDEyOCAxMjgiIHhtbDpzcGFjZT0icHJlc2VydmUiPjxnPjxjaXJjbGUgY3g9IjE2IiBjeT0iNjQiIHI9IjE2IiBmaWxsPSIjZmU4ZTE0Ii8+PGNpcmNsZSBjeD0iMTYiIGN5PSI2NCIgcj0iMTQuMzQ0IiBmaWxsPSIjZmU4ZTE0IiB0cmFuc2Zvcm09InJvdGF0ZSg0NSA2NCA2NCkiLz48Y2lyY2xlIGN4PSIxNiIgY3k9IjY0IiByPSIxMi41MzEiIGZpbGw9IiNmZThlMTQiIHRyYW5zZm9ybT0icm90YXRlKDkwIDY0IDY0KSIvPjxjaXJjbGUgY3g9IjE2IiBjeT0iNjQiIHI9IjEwLjc1IiBmaWxsPSIjZmU4ZTE0IiB0cmFuc2Zvcm09InJvdGF0ZSgxMzUgNjQgNjQpIi8+PGNpcmNsZSBjeD0iMTYiIGN5PSI2NCIgcj0iMTAuMDYzIiBmaWxsPSIjZmU4ZTE0IiB0cmFuc2Zvcm09InJvdGF0ZSgxODAgNjQgNjQpIi8+PGNpcmNsZSBjeD0iMTYiIGN5PSI2NCIgcj0iOC4wNjMiIGZpbGw9IiNmZThlMTQiIHRyYW5zZm9ybT0icm90YXRlKDIyNSA2NCA2NCkiLz48Y2lyY2xlIGN4PSIxNiIgY3k9IjY0IiByPSI2LjQzOCIgZmlsbD0iI2ZlOGUxNCIgdHJhbnNmb3JtPSJyb3RhdGUoMjcwIDY0IDY0KSIvPjxjaXJjbGUgY3g9IjE2IiBjeT0iNjQiIHI9IjUuMzc1IiBmaWxsPSIjZmU4ZTE0IiB0cmFuc2Zvcm09InJvdGF0ZSgzMTUgNjQgNjQpIi8+PGFuaW1hdGVUcmFuc2Zvcm0gYXR0cmlidXRlTmFtZT0idHJhbnNmb3JtIiB0eXBlPSJyb3RhdGUiIHZhbHVlcz0iNDUgNjQgNjQ7OTAgNjQgNjQ7MTM1IDY0IDY0OzE4MCA2NCA2NDsyMjUgNjQgNjQ7MjcwIDY0IDY0OzMxNSA2NCA2NDswIDY0IDY0IiBjYWxjTW9kZT0iZGlzY3JldGUiIGR1cj0iNzIwbXMiIHJlcGVhdENvdW50PSJpbmRlZmluaXRlIj48L2FuaW1hdGVUcmFuc2Zvcm0+PC9nPjwvc3ZnPg==";function hB(r){var i,a,s,u="",l="230px",d="240px",f="",g="";return r&&(r.background&&(u=";background:"+r.background),r.width&&(l=r.width),r.height&&(d=r.height),r.imageSource&&(i=r.imageSource)),i||(i=Sb),s=ja(l)/2,v.isNumber(s)&&s>0&&(g=";width:"+s+"px"),a=ja(d)/2,v.isNumber(a)&&a>0&&(f=";height:"+a+"px"),['<div align="center" ','class="',fB,'" ','style="margin:0 auto;max-width:',l,";max-height:",d,";line-height:",d,u,'"><img style="user-select:none',f,g,';max-width:230px;max-height:240px;vertical-align:middle" src="',i,'" draggable="false" /></div>'].join("")}var Co,Xh=window,lr=document;function zle(r,i){for(var a=0;a<r.length;++a)if(r[a]==i)return nt;return ut}function gB(r){var i=lr.createEvent("MouseEvents");return i?.initMouseEvent(r.type,r.bubbles,r.cancelable,Xh,r.detail,r.screenX,r.screenY,r.clientX,r.clientY,r.ctrlKey,r.altKey,r.shiftKey,r.metaKey,r.button,r.relatedTarget),i}function mB(r){var i;null===(i=lr.body)||void 0===i||i.dispatchEvent(gB(r))}function _B(r,i){if(Co){var a=Co.style;a.backgroundColor=["rgba(",i,",",i,",",i,",",r,")"].join(""),a.filter=["alpha(opacity=",100*r,")"].join(""),a.opacity=a.MozOpacity=r}}var Ib,Pi,Mu={pendingDialogStack:[],opacity:.1,grayHex:128,_updateStacking:function(r){var i,a;0!=(i=this.pendingDialogStack).length?(1!=r&&function $le(r,i){Co===yb?function(a,s){if(Co=lr.createElement("div")){var u=Co.style;u.position="fixed",u.display="block",u.left=u.top=u.margin=u.padding=0,_B(a,s),u.zIndex=5e5,u.width=u.height="100%",j.bIE&&j.IEVersion<10&&(Co.innerHTML='<iframe src="javascript:\'\'" style="background:none;margin:0px auto;border:0;width:100%;height:100%;position:relative;z-index:9999;"></iframe>'),lr.createEvent&&v.addEventListener(Co,"click",mB)}}(r,i):_B(r,i),lr.body&&!lr.body.contains(Co)&&lr.body.appendChild(Co)}(Mu.opacity,Mu.grayHex),a=5e5,v.each(i,function(s){a++,s._dlgInfo.mask&&(s._dlgInfo.mask.style.zIndex=a++),s.style.zIndex=a})):Co!==yb&&(v.removeEventListener(Co,"click",mB),lr&&lr.body&&lr.body.removeChild(Co),Co=yb)},pushDialog:function(r,i){var a,s=this;r.getBoundingClientRect(),s.pendingDialogStack.length>=1e3?v.error("Too many modal dialogs."):((a=lr.createElement("div")).className="dynamsoft-backdrop",1==i?(a.style.left=0,a.style.top=0,a.style.position="absolute"):(a.style.left=0,a.style.top=0,a.style.width="100%",a.style.height="100%",a.style.position="fixed"),lr.createEvent&&v.addEventListener(a,"click",function(u){if(r.dispatchEvent){var l=gB(u);r.dispatchEvent(l)}}),r.parentNode.insertBefore(a,r.nextSibling),r._dlgInfo.mask=a,s.pendingDialogStack.push(r),s._updateStacking(i))},removeDialog:function(r){var i,a,s,u=this;-1!=(a=v.isArray(u.pendingDialogStack)?Ir(v).call(v,r,u.pendingDialogStack):-1)&&(Ai(i=u.pendingDialogStack).call(i,a,1),(s=r._dlgInfo.mask).parentNode&&s.parentNode.removeChild(s),r._dlgInfo.mask=null,u._updateStacking())}};function U_(r,i){var a,I,b,D,R,L,x,s=this,u=!0,l=1==i?"absolute":"fixed",d="50%",f="50%",g="",_="",T=null;if(s._dlgInfo&&s._dlgInfo.styleConfig){var S=s._dlgInfo.styleConfig;v.isString(S.style)?(a=S.style,u=!1):(v.isString(S.position)&&(l=S.position,u=!1),(v.isString(S.left)||v.isNumber(S.left))&&(f=S.left,u=!1),(v.isString(S.top)||v.isNumber(S.top))&&(d=S.top,u=!1),(v.isString(S.width)||v.isNumber(S.width))&&(g=S.width,u=!1),(v.isString(S.height)||v.isNumber(S.height))&&(_=S.height,u=!1),v.isString(S.transform)&&(T=S.transform,u=!1))}s.open?v.error("showDialog called on open dialog."):(s.open=nt,s.removeAttribute("closed"),s.setAttribute("open","open"),a?s.setAttribute("style",a):(u?I=["display:block;position:",l,";left:50%;top:50%;transform:translate(-50%,-50%)"]:(I=["display:block;position:",l,";left:",f,";top:",d,";width:",g,";height:",_],T&&(I.push(";transform:"),I.push(T))),I.push("DIALOG"==s.tagName?";margin:0;border-radius:6px;box-shadow:2px 2px 0 0 rgba(0,0,0,.05);-webkit-box-sizing:border-box;box-sizing:border-box;":";border:0;margin:0;-webkit-box-sizing:border-box;box-sizing:border-box;"),s.setAttribute("style",I.join(""))),function Kle(r){var i;return Xh.getComputedStyle?i=Xh.getComputedStyle(r):r.currentStyle&&(i=r.currentStyle),i&&"absolute"!=i.position||"auto"!=r.style.top&&""!=r.style.top||"auto"!=r.style.bottom&&""!=r.style.bottom?ut:!function(a){for(var s=0;s<lr.styleSheets.length;++s){var u=lr.styleSheets[s],l=void 0,d=void 0,f=void 0,g=void 0;try{l=u.cssRules,d=lr.querySelectorAll}catch{}if(l&&d)for(var _=0;_<l.length;++_){f=l[_],g=ut;try{g=d(f.selectorText)}catch{}if(g&&zle(g,a)){var T=f.style.getPropertyValue("top"),S=f.style.getPropertyValue("bottom");if(T&&"auto"!=T||S&&"auto"!=S)return nt}}}return ut}(r)}(s)&&(x=((null===(D=lr.body)||void 0===D?void 0:D.scrollTop)||(null===(R=lr.documentElement)||void 0===R?void 0:R.scrollTop)||0)+((Xh.innerHeight?Xh.innerHeight:null===(L=lr.documentElement)||void 0===L?void 0:L.clientHeight)-(b=s).offsetHeight)/2,b.style.top=x+"px",b._dlgInfo.isTopOverridden=nt),r&&(s._dlgInfo.modal=nt,Mu.pushDialog(s,i)))}function vB(r){var i=this;return i.open||v.error("closeDialog called on closed dialog."),i.open=ut,i.removeAttribute("open"),i.setAttribute("closed","closed"),i.style.display="none",void 0!==r&&(i.returnValue=r),i._dlgInfo.isTopOverridden&&(i.style.top="auto"),i._dlgInfo.modal&&Mu.removeDialog(i),i.returnValue}function yB(r){Mu.opacity=v.isNumber(r.opacity)?r.opacity:.1,Mu.grayHex=v.isNumber(r.grayHex)?r.grayHex:128}function qle(r){var i,a,s,u,l;if(!Pi.dlgMask){var d,f,g,_,T=!1;if(r&&(_={},r.style?_.style=r.style:((v.isString(r.top)||v.isNumber(r.top))&&(_.top=r.top),(v.isString(r.left)||v.isNumber(r.left))&&(_.left=r.left),v.isString(r.position)&&(_.position=r.position)),r.confined&&(T=r.confined),(v.isString(r.width)||v.isNumber(r.width))&&(a=r.width),(v.isString(r.height)||v.isNumber(r.height))&&(s=r.height),v.isString(r.background)&&(u=r.background),v.isString(r.imageSource)&&(l=r.imageSource),yB(r),T&&r.wrapperEl&&v.isString(f=r.wrapperEl)&&(f=lr.getElementById(f))),!l){var S;if(window&&window.Dynamsoft){var I=window.Dynamsoft.DWT;I&&I.CustomizableDisplayInfo&&(S=I.CustomizableDisplayInfo)}S?(j.bIE&&v.isString(S.loaderBarSourceIE)&&""!=S.loaderBarSourceIE&&(l=S.loaderBarSourceIE),!l&&v.isString(S.loaderBarSource)&&""!=S.loaderBarSource&&(l=S.loaderBarSource)):l=Sb}f&&(g=f.getBoundingClientRect(),f.style.position="relative"),(d=lr.createElement("div"))&&(d.className="dynamsoft-dialog-wrap",d.innerHTML=hB({width:a,height:s,backgroundColor:u,imageSource:l}),f?(f.appendChild(d),d.style.position="absolute",d.style.top="50%",d.style.left="50%",d.style.transform="translate(-50%, -50%)"):null===(i=lr.body)||void 0===i||i.appendChild(d),T&&g&&(Pi.preOnresize=!!window.onresize&&window.onresize,Pi.preOnscroll=!!window.onscroll&&window.onscroll),Pi.dlgMask=d,Ib.setup(d,T),_&&(d._dlgInfo.styleConfig=_),f&&(d._dlgInfo.wrapperEl=f),d.showModal())}}function Qle(){var r,i=Pi.dlgMask;i&&(i.close(),i._dlgInfo&&i._dlgInfo.wrapperEl?(i._dlgInfo.wrapperEl.removeChild(i),i._dlgInfo.wrapperEl=null):null===(r=lr.body)||void 0===r||r.removeChild(i),Pi.dlgMask=!1),window.onresize=Pi.preOnresize?Pi.preOnresize:null,Pi.preOnresize=!1,window.onscroll=Pi.preOnscroll?Pi.preOnscroll:null,Pi.preOnscroll=!1}Ib={setup:function(r,i){r.show=cb(U_).call(U_,r,ut,i),r.showModal=cb(U_).call(U_,r,nt,i),r.close=cb(vB).call(vB,r),r._dlgInfo={}}},Pi={dlgMask:!1,preOnresize:!1,preOnscroll:!1};var Ad,V_,Yle=function(){function r(i){Bn(this,r);var a=i.createElement("div"),s=i.createElement("div");s.style&&(this.div=s,this.container=a,this.docElem=i.documentElement,s.innerHTML="  <link/><table></table><a href='/a'>a</a><input type='checkbox'/>",this.leadingWhitespace=3===s.firstChild.nodeType,this.tbody=!s.getElementsByTagName("tbody").length,this.htmlSerialize=!!s.getElementsByTagName("link").length,s.style.cssText="float:left;opacity:.5",this.opacity="0.5"===s.style.opacity,this.cssFloat=!!s.style.cssFloat,s.style.backgroundClip="content-box",s.cloneNode(!0).style.backgroundClip="",this.clearCloneStyle="content-box"===s.style.backgroundClip,(a=document.createElement("div")).style.cssText="border:0;width:8px;height:0;top:0;left:-9999px;padding:0;margin-top:1px;position:absolute",s.innerHTML="",a.appendChild(s),this.boxSizing=""===s.style.boxSizing||""===s.style.MozBoxSizing||""===s.style.WebkitBoxSizing)}return jn(r,[{key:"reliableHiddenOffsets",value:function(){return null==this.pixelPositionVal&&this.computeStyleTests(),this.reliableHiddenOffsetsVal}},{key:"boxSizingReliable",value:function(){return null==this.pixelPositionVal&&this.computeStyleTests(),this.boxSizingReliableVal}},{key:"pixelMarginRight",value:function(){return null==this.pixelPositionVal&&this.computeStyleTests(),this.pixelMarginRightVal}},{key:"pixelPosition",value:function(){return null==this.pixelPositionVal&&this.computeStyleTests(),this.pixelPositionVal}},{key:"reliableMarginRight",value:function(){return null==this.pixelPositionVal&&this.computeStyleTests(),this.reliableMarginRightVal}},{key:"reliableMarginLeft",value:function(){return null==this.pixelPositionVal&&this.computeStyleTests(),this.reliableMarginLeftVal}},{key:"computeStyleTests",value:function(){var i,a,s=this.div;this.docElem&&this.docElem.appendChild(this.container),s.style.cssText="-webkit-box-sizing:border-box;box-sizing:border-box;position:relative;display:block;margin:auto;border:1px;padding:1px;top:1%;width:50%",this.pixelPositionVal=this.boxSizingReliableVal=this.reliableMarginLeftVal=!1,this.pixelMarginRightVal=this.reliableMarginRightVal=!0,window.getComputedStyle&&(a=window.getComputedStyle(s),this.pixelPositionVal="1%"!==(a||{}).top,this.reliableMarginLeftVal="2px"===(a||{}).marginLeft,this.boxSizingReliableVal="4px"===(a||{width:"4px"}).width,s.style.marginRight="50%",this.pixelMarginRightVal="4px"===(a||{marginRight:"4px"}).marginRight,(i=s.appendChild(document.createElement("div"))).style.cssText=s.style.cssText="-webkit-box-sizing:content-box;-moz-box-sizing:content-box;box-sizing:content-box;display:block;margin:0;border:0;padding:0",i.style.marginRight=i.style.width="0",s.style.width="1px",this.reliableMarginRightVal=!lb((window.getComputedStyle(i)||{}).marginRight),s&&s.removeChild(i)),s.style.display="none",this.reliableHiddenOffsetsVal=0===s.getClientRects().length,this.reliableHiddenOffsetsVal&&(s.style.display="",s.innerHTML="<table><tr><td></td><td>t</td></tr></table>",s.childNodes[0].style.borderCollapse="separate",(i=s.getElementsByTagName("td"))[0].style.cssText="margin:0;border:0;padding:0;display:none",this.reliableHiddenOffsetsVal=0===i[0].offsetHeight,this.reliableHiddenOffsetsVal&&(i[0].style.display="",i[1].style.display="none",this.reliableHiddenOffsetsVal=0===i[0].offsetHeight)),this.docElem&&this.docElem.removeChild(this.container)}}]),r}(),Ho=new Yle(document),SB=Ho.docElem,IB=v.sizzle,Jle=/^margin/,Xle=/^(top|right|bottom|left)$/,Tb=/[+-]?(?:\d*\.|)\d+(?:[eE][+-]?\d+|)/.source,Cb=new RegExp("^("+Tb+")(?!px)[a-z%]+$","i"),Zle=new RegExp("^("+Tb+")(.*)$","i");window.getComputedStyle?(Ad=function(r){var i,a;return(a=(i=v.isFunction(r.getEL)?r.getEL():r).ownerDocument.defaultView)&&a.opener||(a=window),a.getComputedStyle(i)},V_=function(r,i,a){var s,u,l,d,f=r.style;return""!==(d=(a=a||Ad(r))?a.getPropertyValue(i)||a[i]:void 0)&&void 0!==d||IB.contains(r.ownerDocument,r)||(d=ep(r,i)),a&&!Ho.pixelMarginRight()&&Cb.test(d)&&Jle.test(i)&&(s=f.width,u=f.minWidth,l=f.maxWidth,f.minWidth=f.maxWidth=f.width=d,d=a.width,f.width=s,f.minWidth=u,f.maxWidth=l),void 0===d?d:d+""}):SB&&SB.currentStyle&&(Ad=function(r){return r.currentStyle},V_=function(r,i,a){var s,u,l,d,f=r.style;return null==(d=(a=a||Ad(r))?a[i]:void 0)&&f&&f[i]&&(d=f[i]),Cb.test(d)&&!Xle.test(i)&&(s=f.left,(l=(u=r.runtimeStyle)&&u.left)&&(u.left=r.currentStyle.left),f.left="fontSize"===i?"1em":d,d=f.pixelLeft+"px",f.left=s,l&&(u.left=l)),void 0===d?d:d+""||"auto"});var bb,ede=/<(?!area|br|col|embed|hr|img|input|link|meta|param)(([\w:-]+)[^>]*)\/>/gi,tde=/<([\w:-]+)/,TB=/^\s+/,nde=/<|&#?\w+;/,CB=/<tbody/i,rde=/^-ms-/,ide=/-([\da-z])/gi,ode=/^(none|table(?!-c[ea]).+)/,sde=/^<([\w-]+)\s*\/?>(?:<\/\1>|)$/,ade={position:"absolute",visibility:"hidden",display:"block"},bB={letterSpacing:"0",fontWeight:"400"},Zh=["Top","Right","Bottom","Left"],wB={option:[1,"<select multiple='multiple'>","</select>"],legend:[1,"<fieldset>","</fieldset>"],area:[1,"<map>","</map>"],param:[1,"<object>","</object>"],thead:[1,"<table>","</table>"],tr:[2,"<table><tbody>","</tbody></table>"],col:[2,"<table><tbody></tbody><colgroup>","</colgroup></table>"],td:[3,"<table><tbody><tr>","</tr></tbody></table>"],_default:Ho.htmlSerialize?[0,"",""]:[1,"X<div>","</div>"]},DB=["Webkit","O","Moz","ms"],EB=document.createElement("div");bb=EB.style,Ho.cssFloat=!!EB.style.cssFloat;var cde=function(r,i){return i.toUpperCase()},kr={cssHooks:{},htmlPrefilter:function(r){return r.replace(ede,"<$1></$2>")},nodeName:function(r,i){return r.nodeName&&r.nodeName.toLowerCase()===i.toLowerCase()},merge:function(r,i){for(var a=+i.length,s=0,u=r.length;s<a;)r[u++]=i[s++];if(a!=a)for(;void 0!==i[s];)r[u++]=i[s++];return r.length=u,r},camelCase:function(r){return r.replace(rde,"ms-").replace(ide,cde)},cssProps:{},cssNumber:{animationIterationCount:!0,columnCount:!0,fillOpacity:!0,flexGrow:!0,flexShrink:!0,fontWeight:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,widows:!0,zIndex:!0,zoom:!0}},lde=["flo","at"].join("");function AB(r){if(r in bb)return r;for(var i=r.charAt(0).toUpperCase()+ks(r).call(r,1),a=DB.length;a--;)if((r=DB[a]+i)in bb)return r}function PB(r,i,a,s,u){for(var l=a===(s?"border":"content")?4:"width"===i?1:0,d=0;l<4;l+=2)"margin"===a&&(d+=Ms(r,a+Zh[l],!0,u)),s?("content"===a&&(d-=Ms(r,"padding"+Zh[l],!0,u)),"margin"!==a&&(d-=Ms(r,"border"+Zh[l]+"Width",!0,u))):(d+=Ms(r,"padding"+Zh[l],!0,u),"padding"!==a&&(d+=Ms(r,"border"+Zh[l]+"Width",!0,u)));return d}function RB(r,i,a){var s=!0,u="width"===i?r.offsetWidth:r.offsetHeight,l=Ad(r),d=Ho.boxSizing&&"border-box"===Ms(r,"boxSizing",!1,l);if(u<=0||null==u){if(((u=V_(r,i,l))<0||null==u)&&(u=r.style[i]),Cb.test(u))return u;s=d&&(Ho.boxSizingReliable()||u===r.style[i]),u=lb(u)||0}return u+PB(r,i,a||(d?"border":"content"),s,l)}function xB(r){return new RegExp("^(?:([+-])=|)("+Tb+")([a-z%]*)$","i").exec(r)}function ep(r,i,a,s){if(r&&3!==r.nodeType&&8!==r.nodeType&&r.style){var u,l,d,f=kr.camelCase(i),g=r.style;if(i=kr.cssProps[f]||(kr.cssProps[f]=AB(f)||f),d=kr.cssHooks[i]||kr.cssHooks[f],void 0===a)return d&&"get"in d&&void 0!==(u=d.get(r,!1,s))?u:g[i]+"";"string"===(l=jo(a))&&(u=xB(a))&&u[1]&&(a=function(_,T,S,I){var b,D=1,R=20,L=function(){return Ms(_,T,"")},x=L(),U=S&&S[3]||(kr.cssNumber[T]?"":"px"),Y=(kr.cssNumber[T]||"px"!==U&&+x)&&xB(Ms(_,T));if(Y&&Y[3]!==U){U=U||Y[3],S=S||[],Y=+x||1;do{ep(_,T,(Y/=D=D||".5")+U)}while(D!==(D=L()/x)&&1!==D&&--R)}return S&&(Y=+Y||+x||0,b=S[1]?Y+(S[1]+1)*S[2]:+S[2]),b}(r,i,u),l="number"),null!=a&&a==a&&("number"===l&&(a+=u&&u[3]||(kr.cssNumber[f]?"":"px")),Ho.clearCloneStyle||""!==a||0!==Ir(i).call(i,"background")||(g[i]="inherit"),d&&"set"in d&&void 0===(a=d.set(r,a,s))||(g[i]=a))}}function Ms(r,i,a,s){var u,l,d,f=kr.camelCase(i);return i=kr.cssProps[f]||(kr.cssProps[f]=AB(f)||f),(d=kr.cssHooks[i]||kr.cssHooks[f])&&"get"in d&&(l=d.get(r,!0,a)),void 0===l&&(l=V_(r,i,s)),"normal"===l&&i in bB&&(l=bB[i]),""===a||a?(u=lb(l),!0===a||isFinite(u)?u||0:l):l}function j_(r,i){if(!r||"string"!=typeof r)return[];"boolean"==typeof i&&(i=!1),i=i||document;var a=sde.exec(r);return a?[i.createElement(a[1])]:(a=function dde(r,i){for(var a,s,u,l,d,f,g=r.length,_=function(b){var D="abbr|article|aside|audio|bdi|canvas|data|datalist|details|dialog|figcaption|figure|footer|header|hgroup|main|mark|meter|nav|output|picture|progress|section|summary|template|time|video".split("|"),R=b.createDocumentFragment();if(R.createElement)for(;D.length;)R.createElement(D.pop());return R}(i),T=[],S=0;S<g;S++)if((s=r[S])||0===s)if("object"===v.type(s))kr.merge(T,s.nodeType?[s]:s);else if(nde.test(s)){if(u=u||_.appendChild(i.createElement("div"))){for(l=(tde.exec(s)||["",""])[1].toLowerCase(),u.innerHTML=(f=wB[l]||wB._default)[1]+kr.htmlPrefilter(s)+f[2],a=f[0];a--;)u=u.lastChild;if(!Ho.leadingWhitespace&&TB.test(s)){var I=TB.exec(s);I&&I.length>0&&T.push(i.createTextNode(I[0]))}if(!Ho.tbody&&(a=(s="table"!==l||CB.test(s)?"<table>"!==f[1]||CB.test(s)?0:u:u.firstChild)&&s.childNodes.length,s))for(;a--;)kr.nodeName(d=s.childNodes[a],"tbody")&&!d.childNodes.length&&s.removeChild(d);for(kr.merge(T,u.childNodes),u.textContent="";u.firstChild;)u.removeChild(u.firstChild);u=_.lastChild}}else T.push(i.createTextNode(s));for(u&&_&&_.removeChild(u),S=0;s=T[S++];)"SCRIPT"!==s.tagName&&(IB.contains(s.ownerDocument,s),_.appendChild(s));return u=null,_}([r],i),kr.merge([],a.childNodes))}kr.cssProps[lde]=Ho.cssFloat?"cssFloat":"styleFloat",v.each(["height","width"],function(r,i){kr.cssHooks[r]={get:function(a,s,u){if(s)return ode.test(Ms(a,"display"))&&0===a.offsetWidth?(l=a,T={},v.each(d=ade,function(S,I){T[I]=l.style[I],l.style[I]=d[I]}),_=function(){return RB(a,r,u)}.apply(l,[]),v.each(d,function(S,I){l.style[I]=T[I]}),_):RB(a,r,u);var l,d,_,T},set:function(a,s,u){var f,g,_,l=u&&Ad(a);return f=s,g=u?PB(a,r,u,Ho.boxSizing&&"border-box"===Ms(a,"boxSizing",!1,l),l):0,(_=Zle.exec(f))?Math.max(0,ja(_[1])-(g||0))+(_[2]||"px"):f}}});var FB,kB=ks(Array.prototype),no=" ",hde=j.bIE&&j.IEMode<10,MB=/[\n\t\r\.]/g,wb=function(){function r(i,a,s){Bn(this,r),this.isNodeList=!0,this.length=0;var u=this;return!i||v.isString(i)?u:v.isArray(i)||i.isNodeList?(Array.prototype.push.apply(u,v.makeArray(i)),u):(u[0]=i,u.length=1,u)}return jn(r,[{key:"item",value:function(i){return v.isNumber(i)?i>=this.length?null:new r(this[i]):new r(i)}},{key:"slice",value:function(){return new r(kB.apply(this,arguments))}},{key:"getDOMNodes",value:function(){return kB.call(this)}},{key:"each",value:function(i,a){var s=this;return v.each(s,function(u,l){return u=new r(u),i.call(a||u,u,l,s)}),s}},{key:"getEL",value:function(){return this.length>0?this[0]:void 0}},{key:"all",value:function(i){return this.length>0?Pb(i,this):new r}},{key:"one",value:function(i){var a=this.all(i);return a.length?ks(a).call(a,0,1):a}},{key:"attr",value:function(i,a){var s=this.getEL();if(s){if(v.isUndefined(a))return"readonly"===i?s.readOnly?"readonly":"":("style"!==i&&hde?s=s[i]:(s=s.attributes[i])&&(s=s.value),s);"class"==i?s.className=a:s[i]=a}}},{key:"addClass",value:function(i){var a=this.getEL();a&&function(s,u){var l,d,f,g,_=s.className,T=u.length;if(_){for(l=Eb(_),d=_,f=0;f<T;f++)g=Ab(u[f]),Ir(l).call(l,no+g+no)<0&&(d+=no+g);d=Vh(v).call(v,d)}else d=u.join(" ");s.className=d}(a,i.split(no))}},{key:"removeClass",value:function(i){var a=this.getEL();a&&function(s,u){var l,d,f,g=s.className,_=u.length;if(g&&_){for(l=Eb(g),d=0;d<_;d++)for(f=no+Ab(u[d])+no;Ir(l).call(l,f)>=0;)l=l.replace(f,no);s.className=Vh(v).call(v,l)}}(a,i.split(no))}},{key:"hasClass",value:function(i){var a=this.getEL();if(a)return function(s,u){var l,d,f,g=s.className,_=u.length;if(g&&_){for(l=Eb(g),d=0;d<_;d++)if(f=no+Ab(u[d])+no,Ir(l).call(l,f)<0)return ut;return nt}return ut}(a,i.split(no))}},{key:"parent",value:function(){var i=this.getEL();return i&&(i=i.parentNode),new r(i)}},{key:"remove",value:function(){var i=this.getEL();i&&i.parentNode&&i.parentNode.removeChild(i)}},{key:"offset",value:function(){var i=this.getEL();return v.DOM.getElDimensions(i,nt)}},{key:"before",value:function(i){var a=this.getEL(),s=[i];a&&(Db(i)&&(s=j_(i)),v.each(s,function(u){a.insertBefore(u,a.childNodes[0])}))}},{key:"append",value:function(i){var a=this.getEL(),s=[i];a&&(Db(i)&&(s=j_(i)),v.each(s,function(u){a.appendChild(u)}))}},{key:"html",value:function(i){var u,a=this.getEL();if(a){if(v.isUndefined(i))return u=a.innerHTML,document.all?(u=u.replace(/(\s+\w+)\s*=\s*([^<>"\s]+)(?=[^<>]*\/>)/gi,'$1="$2"').replace(/"'([^'"]*)'"/gi,'"$1"')).replace(/<(\/?)(\w+)([^>]*)>/g,function(f,g,_,T){return g?"</"+_.toLowerCase()+">":("<"+_.toLowerCase()+T+">").replace(/=(("[^"]*?")|('[^']*?')|([\w\-\.]+))([\s>])/g,function(S,I,b,D,R,L,x,U){return R?'="'+R+'"'+L:S})}).replace(/<\/?([^>]+)>/g,function(f){return f}):u;a.innerHTML="",v.each(j_(i),function(s){a.appendChild(s)})}}},{key:"style",value:function(i,a){var s=this.getEL();if(s)return ep(s,i,a)}},{key:"css",value:function(i){v.each(this,function(a){v.each(i,function(s,u){ep(a,u,s)})})}}]),r}();function Db(r){return v.isString(r)&&(r=Vh(v).call(v,r))&&r.length>=3&&wle(v).call(v,r,"<")&&z2(v).call(v,r,">")}function Eb(r){return(no+r+no).replace(MB,no)}function Ab(r){return r.replace(MB,"")}function Pb(r,i){var a=i;return a&&a.isNodeList&&(a=a.getEL()),v.isString(r)?(Db(r)&&v.error("Err 4002."),new wb(v.sizzle(r,a))):r.isNodeList?r:new wb(r)}function pde(r,i){var a=Pb(r,i);return a.length?ks(a).call(a,0,1):a}function gde(r){return r instanceof wb}(FB=self||{}).Map||(FB.Map=function(){this.keys=[],this.data={},this.set=function(r,i){var a;null==this.data[r]&&-1==Ir(a=wC(this)).call(a,r)&&wC(this).push(r),this.data[r]=i},this.get=function(r){return this.data[r]}});var _e=new(jn(function r(){Bn(this,r),this.__ver=20230516,this.Events=oB,this.EnumMouseButton=Mc,this.detectButton=Ple,this.getWheelDelta=Ale,this.fromUnicode=xle,this.escapeHtml=Fle,this.escapeRegExp=kle,this.unEscapeHtml=Mle,this.param=Hle,this.unparam=Gle,this.colorStrToInt=Dle,this.IntToColorStr=Ele,this.currentStyle=jle,this.parseHTML=j_,this.css=Ms,this.style=ep,this.support=Ho,this.all=Pb,this.one=pde,this.isNodeList=gde,this.Promise=vb,this.nativePromise=W_,this.loaderBarClassName=fB,this.loaderBarSource=Sb,this.createShowMaskContent=hB,this.switchEvent=Vle,this.setBackOpacity=yB,this.showMask=qle,this.hideMask=Qle,this.dialog=Ib,this.mask=Pi})),Go={getHex:function(r){var i=Number(r).toString(16).toUpperCase();return 1==i.length&&(i=["0",i].join("")),i},getColor:function(r){var i,a;return a=(65280&r)>>8,i=255&r,["#",Go.getHex(r>>16),Go.getHex(a),Go.getHex(i)].join("")},RGB2BGR:function(r){return(255&r)<<16|65280&r|r>>16}};function at(r,i,a){return(i=t(i))in r?Object.defineProperty(r,i,{value:a,enumerable:!0,configurable:!0,writable:!0}):r[i]=a,r}Go.BGR2RGB=Go.RGB2BGR;var ve=!1,Ne=!0,OB=/[#\/\?@]/g,mde=/[#\?]/g,NB={scheme:1,userInfo:2,hostname:3,port:4,path:5},_de=new RegExp("^(?:([\\w\\d+.-]+):)?(?://(?:([^/?#@]*)@)?([\\w\\d\\-\\u0100-\\uffff.+%]*|\\[[^\\]]+\\])(?::([0-9]+))?)?(.+)?$");function Rb(r,i){return v.isString(r)&&v.isString(i)?r.toLowerCase()===i.toLowerCase():r===i}function xb(r,i){return encodeURI(r).replace(i,function(a){return"%"+(1===(s=a.charCodeAt(0).toString(16)).length?"0"+s:s);var s})}var Fb=function(){function r(i){if(n(this,r),at(this,"scheme",""),at(this,"userInfo",""),at(this,"hostname",""),at(this,"port",""),at(this,"path",""),i instanceof r)return v.clone(i);r.getComponents(i,this)}return c(r,[{key:"clone",value:function(){var i=new r,a=this;return v.each(NB,function(s,u){i[u]=a[u]}),i}},{key:"getScheme",value:function(){return this.scheme}},{key:"setScheme",value:function(i){return this.scheme=i,this}},{key:"getHostname",value:function(){return this.hostname}},{key:"setHostname",value:function(i){return this.hostname=i,this}},{key:"setUserInfo",value:function(i){return this.userInfo=i,this}},{key:"getUserInfo",value:function(){return this.userInfo}},{key:"setPort",value:function(i){return this.port=i,this}},{key:"getPort",value:function(){return this.port}},{key:"setPath",value:function(i){return this.path=i,this}},{key:"getPath",value:function(){return this.path}},{key:"isSameOriginAs",value:function(i){var a=this;return Rb(a.hostname,i.hostname)&&Rb(a.scheme,i.scheme)&&Rb(a.port,i.port)}},{key:"toString",value:function(i){var a,s,u,l,d,f=[],g=this;return(a=g.scheme)&&(f.push(xb(a,OB)),f.push(":")),(s=g.hostname)&&(f.push("//"),(d=g.userInfo)&&(f.push(xb(d,OB)),f.push("@")),f.push(encodeURIComponent(s)),(l=g.port)&&(f.push(":"),f.push(l))),(u=g.path)&&(s&&!v.startsWith(u,"/")&&(u="/"+u),f.push(xb(u,mde))),f.join("")}}],[{key:"getComponents",value:function(i,a){var s=(i=i||"").match(_de)||[],u=a||{};return v.each(NB,function(l,d){u[d]=s[l]}),u}}]),r}(),H_=v.each,aa=v.error,kb=v.isFunction,Mb=v.isString,Ob=j.bIE&&j.IEVersion<=9,vde=j.bIE&&j.IEVersion<=10,Ou=window,Nb=new Fb(location.href),WB=Nb&&/^(?:about|app|app\-storage|.+\-extension|file|widget)$/.test(Nb.getScheme()),Lb=function(){try{return new Ou.XMLHttpRequest}catch{}},BB=function(){try{var r=ve;return H_(["Msxml2.XMLHTTP.6.0","Msxml2.XMLHTTP","Microsoft.XMLHTTP","Msxml2.XMLHTTP.3.0","Msxml3.XMLHTTP"],function(i){try{if(!r)return r=new Ou.ActiveXObject(i),ve}catch(a){aa("new xhr error: "+a.message)}}),r}catch{}},Sde=!(WB||!Ou.XMLHttpRequest)&&"withCredentials"in(Lb()||[]),Ide=Ou.ActiveXObject?function(r){return Ob?BB():!WB&&Lb()||BB()}:Lb,Tde=/^(?:GET|HEAD)$/,Cde=/^(.*?):[ \t]*([^\r\n]*)\r?$/gm,Wb={xml:"application/xml, text/xml",html:"text/html",text:"text/plain",json:"application/json, text/javascript","*":"*/*"},Bb=void 0;vde&&(Bb=v.noop);var bde=function(){function r(){n(this,r),at(this,"url",!1),at(this,"onSuccess",!1),at(this,"onError",!1),at(this,"onComplete",!1),at(this,"method","GET"),at(this,"async",!0),at(this,"xhrFields",!1),at(this,"mimeType",!1),at(this,"username",!1),at(this,"password",!1),at(this,"data",!1),at(this,"dataType","text"),at(this,"headers",!1),at(this,"contentType","application/x-www-form-urlencoded; charset=UTF-8"),at(this,"beforeSend",!1),at(this,"afterSend",!1),at(this,"timeout",0),at(this,"cache",!0),at(this,"crossDomain",!1),at(this,"retry",0)}return c(r,[{key:"setRequestHeader",value:function(i,a){this.headers[i]=a}},{key:"getAllResponseHeaders",value:function(){return 2===this.state?this.responseHeadersString:null}},{key:"getNativeXhr",value:function(){return this.nativeXhr}},{key:"getResponseHeader",value:function(i){var a,s;if(i=i.toLowerCase(),2===this.state){if(!(s=this.responseHeaders))for(s=this.responseHeaders={};a=Cde.exec(this.responseHeadersString);)s[a[1].toLowerCase()]=a[2];a=s[i]}return void 0===a?null:a}},{key:"overrideMimeType",value:function(i){return this.state||(this.mimeType=i),this}},{key:"abort",value:function(i){return this.state=3,this.status=0,this.statusText=i??"abort",this.nativeXhr&&this.nativeXhr.abort(),this._callback(),this}},{key:"_ioReady",value:function(i,a){var s=!1,u=this;if(2!==this.state&&3!==this.state){1===this.state&&(this.state=2),this.readyState=4,i>=200&&i<300||304===i?304===i?(a="not modified",s=!0):(a="success",s=!0):i<0&&(i=0);try{i>=200&&this.handleResponseData()}catch(l){aa(l,"error"),a=l.message||"parser error"}if((i<200||!s)&&this.retry>0)return this.retry=this.retry-1,void setTimeout(function(){u.sendInternal()},200);this.status=i,this.statusText=a,this._callback(s)}}},{key:"_callback",value:function(i){var a=this,s=this.timeoutTimer;s&&(clearTimeout(s),this.timeoutTimer=0),H_([i?this.onSuccess:this.onError,this.onComplete],function(u){kb(u)&&u.apply(a.context,[a.responseData,a.statusText,a])}),this.responseData=null}},{key:"handleResponseData",value:function(){var i,a=this.dataType,s=this.nativeXhr;if("blob"===a||"arraybuffer"===a)if(Ob){var u,l,d;if("responseBody"in s)l=Ou.dsVbsBinGetLength(u=s.responseBody),i=new Ou.VBArray(Ou.dsVbsBinGetBytes(u,0,l)).toArray();else for(i=[],l=(u=s.responseText).length,d=0;d<l;++d)i.push(255&u.charCodeAt(d));u=null}else i=Ou.Blob?s.response:"responseBody"in s?s.responseBody:s.responseText;else if("json"==a)i=s.responseType&&"json"==s.responseType.toLowerCase()?s.response:v.parse(s.responseText?s.responseText:s.response);else if("user-defined"===a)i=void 0!==s.response?s.response:s.responseText;else{this.responseText=i=s.responseText||"";try{var f=s.responseXML;f&&f.documentElement&&(this.responseXML=f)}catch{}}this.responseData=i}},{key:"sendInternal",value:function(i){var a,s,u,l,d,f,g,_,T,S,I,b=this;if(s=(a=this._setup(i)).method,Mb(s)&&(s=s.toUpperCase()),d=a.contentType,l=a.dataType,_=a.mimeType,Mb(u=a.url)&&(this.nativeXhr=f=Ide(a.crossDomain),f)){try{if(this.state=1,a.username?f.open(s,u,a.async,a.username,a.password):f.open(s,u,a.async),(a.async||j.bIE)&&l&&"user-defined"!=l&&"responseType"in f)try{f.responseType=l}catch{}}catch(D){return void(this.state<2?(aa(D,"error"),this._ioReady(-1,"open error: "+(v.isNumber(D.number)?"("+D.number+")":"")+(D.message||""))):aa(D))}"withCredentials"in(g=a.xhrFields||{})&&(Sde||delete g.withCredentials),H_(g,function(D,R){try{f[R]=D}catch(L){aa(L)}}),_&&f.overrideMimeType&&f.overrideMimeType(_),!1===(T=a.headers||{})["X-Requested-With"]&&delete T["X-Requested-With"],"setRequestHeader"in f&&(d&&f.setRequestHeader("Content-Type",a.contentType),f.setRequestHeader("Accept",l&&Wb[l]?Wb[l]+("*"===l?"":", */*; q=0.01"):Wb["*"]),H_(T,function(D,R){f.setRequestHeader(R,D)})),a.cache||(f.setRequestHeader("If-Modified-Since","0"),f.setRequestHeader("Cache-Control","no-cache")),I=(S=!Tde.test(a.method))&&a.data||null,S&&Ob&&(I=a.data),a.async&&a.timeout>0&&(a.timeout<300&&(a.timeout=300),this.timeoutTimer=setTimeout(function(){b.abort("timeout")},a.timeout));try{if(this.state=1,kb(this.beforeSend)&&!1===this.beforeSend(f,b))return void this.abort("cancel");f.send(I),I=null,a.data=null,kb(this.afterSend)&&this.afterSend(b)}catch(D){this.state<2?(aa(D,"error"),this._ioReady(-1,"send error: "+(D.message||""))):aa(D)}a.async&&4!==f.readyState?f.onreadystatechange=function(){b._xhrCallback()}:b._xhrCallback()}}},{key:"_xhrCallback",value:function(i,a){var s=this.nativeXhr;try{if(4===s.readyState||a)if(s.onreadystatechange=Bb,a)4!==s.readyState&&s.abort();else{this.responseHeadersString=s.getAllResponseHeaders();var u,l=s.status;try{u=s.statusText}catch(d){aa("xhr statusText error: "),aa(d),u=""}this._ioReady(l,u)}}catch(d){aa(d,"error"),s.onreadystatechange=Bb,a||this._ioReady(-1,d.message||"process error")}}},{key:"_setup",value:function(i){var a,s,u,l,d;if(i){for(s in this.context=i.context,delete i.context,i instanceof r&&(i=i.config),this.config=i,v.startsWith(l=i.url,"//")&&(i.url=l="http:"+l),(v.startsWith(l,"http://")||v.startsWith(l,"https://"))&&(d=new Fb(l)),a=i.dataType?i.dataType.toLowerCase():"text",i.dataType=a,i.method=i.method?i.method.toUpperCase():"GET",d&&!("crossDomain"in i)&&(i.crossDomain=!d.isSameOriginAs(Nb)),u=i.headers)void 0===u[s]&&delete u[s];v.mix(this,i)}return this.state=1,this}},{key:"dispose",value:function(){this.responseHeaders=null,this.responseHeadersString=null,this.responseData=null,this.responseText=null,this.responseXML=null,this.context=null,this.config=null,this.onSuccess=null,this.onError=null,this.onComplete=null,this.xhrFields=null,this.data=null,this.headers=null,this.beforeSend=null,this.afterSend=null}}]),r}();function Os(r){if(r&&Mb(r.url)){var i=new bde;return i.sendInternal(r),i}v.log("the url is error.")}var ua,lt,bo="18",G_="3",Nu="0627",VB="3",Ub="".concat(bo,",").concat(G_,",").concat("0",",").concat(Nu),Dde="".concat(bo,",").concat(VB,",").concat("0",",").concat("0627"),Vb=parseInt(bo),jb=parseInt(G_),Hb=parseInt("0"),jB=[Vb,jb,Hb,Nu],HB=[Vb,jb,Hb,Nu],GB=[Vb,jb,Hb,Nu],zB=[1,8,3,Nu],KB=[1,8,3,Nu],$B=[1,8,3,Nu];function qB(){if(!j.bWin){if(j.bMac)return HB;if(j.bLinux)return GB}return jB}function Rd(){if(!j.bWin){if(j.bMac)return KB;if(j.bLinux)return $B}return zB}function tp(){return"dcp/dwasm2_"+np()}function np(){return qB().join("")}(function(r){r.enumUnknown=-1,r.enumChrome=1,r.enumFirefox=2,r.enumEdge=3,r.enumSafari=4,r.enumIE=5,r.enumOpera=6,r.enumHuaWeiBrowser=7})(ua||(ua={})),function(r){r.enumUnknown=-1,r.enumWindow=0,r.enumMac=1,r.enumLinux=2,r.enumEmbed=3,r.enumChromeOS=4,r.enumHarmonyOS=5,r.enumAndroid=6,r.enumiOS=7}(lt||(lt={}));var QB,ro={getDSPath:function(r){var i=F.DWT.ResourcesPath,a=r;return v.isString(i)&&i.length>0?"/"!=i[i.length-1]&&(i+="/"):i="Resources/",a||(a=j.bWin?".msi":j.bMac?".pkg":F.navInfo.bArm64?"-arm64.deb":F.navInfo.bMips64?"-mips64el.deb":F.navInfo.bAndroid?".apk":j.bLinux||j.bChromeOS||j.bHarmonyOS?".deb":".msi"),[i,"dist/DynamsoftServiceSetup",a].join("")},getLinuxHTML5DebPath:function(){return ro.getDSPath(".deb")},getLinuxHTML5RpmPath:function(){return ro.getDSPath(".rpm")},getEnumPlatform:function(){return j.bAndroid?lt.enumAndroid:j.bMac?lt.enumMac:j.bChromeOS?lt.enumChromeOS:j.bHarmonyOS?lt.enumHarmonyOS:F.navInfo.bEmbed?lt.enumEmbed:j.bLinux?lt.enumLinux:j.biPhone||j.biPad?lt.enumiOS:lt.enumWindow},getEnumBrowser:function(){return j.bEdge?ua.enumEdge:j.bChrome?ua.enumChrome:j.bFirefox?ua.enumFirefox:j.bIE?ua.enumIE:j.bSafari?ua.enumSafari:j.bHuaWeiBrowser?ua.enumHuaWeiBrowser:j.bOpera?ua.enumOpera:ua.enumUnknown}},YB=j.bAndroid?"local.dynamsoft.com":"127.0.0.1";QB="Dynamic Web TWAIN "+[bo,VB].join(".");var io={JSVersion:Dde,ServerVersionInfo:Ub,ServerLinuxVersionInfo:Ub,ServerMacVersionInfo:Ub,ActiveXVersion:"18,0,0,1025",ActiveXPdfVersion:"11.4.1.1025",PdfVersion:"11.4.1.1025",PdfLinuxVersion:"11.4.1.1025",PdfMacVersion:"11.4.1.1025"},Ede={ProductName:QB,Containers:void 0,ContainerMap:{},WebTwainIdMap:{},RemoteScanIdMap:{},Trial:!1,ResourcesPath:"Resources",Debug:!1,IfUpdateService:!1,AutoLoad:!0,ReConnectToService:!0,OnWebTwainReady:!1,OnWebTwainNotFound:!1,OnWebTwainOldPluginNotAllowed:!1,OnWebTwainNeedUpgrade:!1,OnWebTwainNeedUpgradeWebJavascript:!1,OnWebTwainInitMessage:!1,ViewerJSIntegerited:!0,ActiveXInstallWithCAB:!1,IfUseActiveXForIE10Plus:!1,IfUseEmbeddedDownloadNoticeForActiveX:!1,IfCheckDCP:!1,IfDisableDefaultSettings:!1,OnWebTwainWillInit:!1,IfAddMD5InUploadHeader:!1,IfAlwaysFocusOnPopupWindow:!0,IfConfineMaskWithinTheViewer:!1,fetchOptions:{mode:"cors",credentials:"same-origin"},HideTrialMessage:!1,CheckCertExpired:!0,ConnectWithSocket:!1,SSLPort:18623,Port:18622,showLoadingMsgDialog:!0,licenseServer:void 0,sessionPassword:void 0,organizationID:void 0,handshakeCode:void 0,UseDefaultViewer:!0,Host:YB};function Ri(){var r=F.DWT.Host;return v.isString(r)&&""!=r||(F.DWT.Host=r=YB),r}function Ade(){var r=300,i=F.DWT.RemoteScanConfig;return i&&v.isNumber(i.sessionTimeout)&&i.sessionTimeout>0&&(r=i.sessionTimeout),r}var Gb={URL:"",UpdateDaysBeforeExpired:30},Lu=j.bHTML5Edition,Kb=0,K_=!1;j.bIE&&(""===(Kb=j.IEVersion)||Kb>=10?F.DWT.IfUseActiveXForIE10Plus?(K_=!0,j.bHTML5Edition=Lu=!1):Lu=!0:(Lu=!1,Kb>=9&&(K_=!0))),K_||Lu||(Lu=!0);var dr,yn,$b,rp,vt={SSLPort:18626,Port:18625,bEnhancedMode:!1,oldDWASMVerStr:"dwasm_13000404",oldDWASMVer:[13,0,0,"0404"],wsProtocol:"dwt_command",managerVersion:jB,managerVersionMac:HB,managerVersionLinux:GB,serviceVersion:zB,serviceVersionMac:KB,serviceVersionLinux:$B,detect:{dcpStatus:0,ddmPort:0,dwtPort:0,bConnected:!1,connectedResult:"",MaxManagerModuleConnectCount:1,EnumDCP_DetectStatus:{Init:0,Connected:1,CheckingManagerVer:15,CheckingServiceVer:16,NotInstalled:17,CheckedService:5,VerifyingZip:6,VerifiedZip:7,UpdatingService:8,UpdateSucceed:9,UpdateFailed:10,UpdateSkipped:11}},strSID:"",b64bit:!0,currentUserPorts:{},objEnhancedPorts:{}},be={name:"Dynamic Web TWAIN",bHTML5Edition:Lu,bActiveXEdition:K_,_iImageCaptureDriverType:3,_iBrokerProcessType:1,getChromeEditionPath:ro.getDSPath,getPKGPath:function(){return F.DWT.ResourcesPath+"/dist/mac/DynamicWebTWAINMacEdition.pkg"},getMSIPath:function(){return F.DWT.ResourcesPath+"/dist/win/DynamicWebTWAINPlugIn.msi"},getActiveXCABx86Path:function(){return F.DWT.ResourcesPath+"/dist/win/ActiveX/DynamicWebTWAIN.cab"},getActiveXCABx64Path:function(){return F.DWT.ResourcesPath+"/dist/win/ActiveX/DynamicWebTWAINx64.cab"},onlineResources:"https://demo.dynamsoft.com/DWT/Resources/",strMIMEType:"Application/DynamicWebTwain-Plugin",strFullClassID:"E7DA7F8D-27AB-4EE9-8FC0-3FEC9ECFE758",scripts:{},dwtConfigLoaded:!1,dwtConfigLoading:!1,getServerVersionInfo:function(r){var i=io.ServerVersionInfo;return j.bWin||(j.bMac?i=io.ServerMacVersionInfo:(j.bLinux||j.bAndroid||j.bChromeOS||j.bHarmonyOS)&&(i=io.ServerLinuxVersionInfo)),r?i:v.replaceAll(i,",","")},getDWTPrefix:function(){return!0===F.DWT.CustomMode?"dwtc_":"dwt_"},loadResourcePath:!1,loadingResourcePath:!1,handshakeCode:void 0,organizationID:void 0,licenseServer:void 0,sessionPassword:"",bPublicLTS:!0,refProductKey:void 0,ltsDebug:!1,bDWTLoading:!1,bAndroidConnected:!1,unloadQueue:[],appendBrowserLicenseWhenServiceMode:function(){},bChromeEdition:Lu},kn={bFullEdition:!1,getVersionStrForCheck:function(){return"".concat(bo,"000000")},versionInfoFromServer:"",hostForCheckCert:"127.0.0.1",RemoteReconnectMaxTimes:200,RemoteReconnectTimeSpan:5e3,LocalReconnectMaxTimes:60,LocaleReconnectTimeSpan:3e3},Oc=j.bSSL?3e3:1e3;function li(){return v.isString(be.handshakeCode)||v.isString(be.organizationID)||be.bPublicLTS||v.isString(F.DWT.ProductKey)&&v.startsWith(F.DWT.ProductKey,"DLS2")}function oo(r){return void 0===r||r&&("127.0.0.1"===r||"localhost"===r||"local.dynamsoftwebtwain.com"===r||"local.dynamsoft.com"===r)}function Ee(r,i,a){r._errorCode=i,r._errorString=a}function Hn(r){var i=F.DWT.licenseException;i.code=r._errorCode,i.message=r._errorString,i.fromLTS=!1}function Dt(r){Ee(r,-1033,"Invalid index.")}function Tr(r){Ee(r,-1034,"Invalid value.")}function Gi(r){Ee(r,-1035,"There is no image.")}function JB(r){Ee(r,-1110,"Unrecognized file extension.")}function qb(r){Ee(r,-2007,"The system is busy, some operations are not completed. Please try later.")}function ip(r,i){var a=i?["[",i,"]"].join(""):"your computer";Ee(r,yn.MustUpgrade,"The Dynamsoft Service installed on "+a+" is outdated and no longer works with the JavaScript code on the website.")}function op(r){Ee(r,-2209,"The HTML5 edition does not support this method or property.")}function Qb(r){Ee(r,-2300,"Http upload error: the HTTP Server name/ip cannot be empty.")}function $_(r){Ee(r,-2301,"Network error.")}function Yb(r){Ee(r,-2302,"The result format is invalid.")}function Jb(r,i,a,s){if(i)this.UserCanceled(r);else if(r._errorCode=-2003,s&&s>0||a){var u=["HTTP process error: "];a&&(a.indexOf("HTTP process error: ")>=0&&(u=[""]),u.push(a)),s&&s>0&&u.push(" ("+s+")");var l=u.toString().lastIndexOf(".");r._errorString=l>=0&&l==u.toString().length-1?u.join(""):u.join("")+"."}else r._errorString="HTTP process error."}function XB(r){Ee(r,-2304,"Http download error: the url is invalid.")}function Xb(r,i,a,s){if(i)Ee(r,-2305,"User cancelled the operation.");else if(r._errorCode=-2003,s&&s>0||a){var u=["HTTP process error: "];a&&(a.indexOf("HTTP process error: ")>=0&&(u=[""]),u.push(a));var l=u.toString().lastIndexOf(".");r._errorString=l>=0&&l==u.toString().length-1?u.join(""):u.join("")+"."}else r._errorString="HTTP process error."}function er(r){Ee(r,-2306,"Upload Error: the upload file cannot be empty.")}function ZB(r){Ee(r,-2307,"The width or height you entered is invalid.")}function ca(r){Ee(r,-2313,"The size of the images you are about to upload has exceeded the limit.")}function xi(r){Ee(r,-2314,"The parameter cannot be empty.")}function Nc(r){Ee(r,-2320,"Invalid file.")}function zo(r){Ee(r,dr.LicenseInvalid,li()?"The license is invalid.":"The current product key is empty or invalid."),Hn(r)}function eU(r,i){r._errorCode=dr.LicenseExpired;var s,u,l,d,f,a="";i&&""!=i&&(-1==i.indexOf("on")&&(a=" on "+i),r.__licenseInfo&&(r.__licenseInfo.ExpireDate=i)),li()?(s=F.DWT.EnumInstance.dwt_desktop,u=r._bRemoteMode&&null!==(l=null===(d=r._dmService)||void 0===d||null===(f=d.attrs)||void 0===f?void 0:f.UUID)&&void 0!==l?l:"",r._errorString="The license has expired"+a+".",F.DWT.lcexp(s,u).then(function(){r._errorString=F.DWT.licenseException.message})):(r._errorString="The current product key has expired"+a+". Please contact the site administrator.",Hn(r))}function sp(r,i,a){li()?i?111==a?(r._errorCode=dr.LicenseExpiredForDLS,r._errorString="The license for v"+bo+" WebAssembly Core Module has expired."):(r._errorCode=dr.LicenseNoCoreForDLS,r._errorString="The license for v"+bo+" WebAssembly Core Module is not found."):111==a?(r._errorCode=dr.LicenseExpiredForDLS,r._errorString="The license for v"+bo+" Service Core Module has expired."):(r._errorCode=dr.LicenseNoCoreForDLS,r._errorString="The license for v"+bo+" Service Core Module is not found."):(r._errorCode=dr.LicenseNoCore,r._errorString=i?"The current product key is missing the WebAssembly Core license. Please contact the site administrator.":"The current product key is missing the Service Core license. Please contact the site administrator."),Hn(r)}function ap(r){r._errorCode=-2339,r._errorString=li()?"The license for the module pdf rasterizer is not found or has expired.":"The current product key does not support pdf rasterizer. Please contact the site administrator.",Hn(r)}function Zb(r){Ee(r,-2350,"The indices cannot be empty.")}function xd(r){Ee(r,-2351,"You cannot upload more than one image when the format is BMP, JPG or PNG")}function ew(r){Ee(r,-2352,"The indices are out of range.")}function Pde(r){Ee(r,-2353,"The header name being used is a protected keyword and is not allowed.")}function Ha(r){Ee(r,-2358,"The type of the parameter indices must be an Array.")}function We(r){Ee(r,-2359,"The index is out of range.")}function tw(r){Ee(r,-2360,"The index is null or undefined.")}function zi(r){Ee(r,-2362,"The image type is not supported.")}function tU(r){Ee(r,-2363,"The data format is not supported.")}function q_(r){Ee(r,-2365,"The url is invalid.")}function nw(r){Ee(r,-2376,"The generate url failed.")}function Q_(r){Ee(r,-2377,"Failed to set Image Capture Driver Type.")}function nU(r){Ee(r,-2391,"Invalid event name.")}function rU(r){Ee(r,-2393,"Failed to convert the data to blob.")}function qn(r){Ee(r,-2416,"Invalid parameter.")}function Rde(r){Ee(r,-2426,"You have used a full license with a trial license which is not permitted. Please check and update Dynamsoft.DWT.ProductKey.")}function iU(r){Ee(r,-2510,"The callback is not a function.")}function oU(r){Ee(r,-2513,"The WebTwain instance has been destroyed and can not be used anymore.")}function rw(r){Ee(r,-2530,"Document name cannot be empty.")}function up(r){Ee(r,-2531,"Document name is not a string.")}function Y_(r){Ee(r,-2548,"You cannot call this function when Dynamsoft.DWT.UseDefaultViewer is set to false.")}function iw(r){Ee(r,-2549,"You cannot call this function when there is no ui binding.")}function tr(r){Ee(r,0,"")}function sU(r){var i=r;return i||(i="[]"),{code:-2601,message:"Failed to connect to the Dynamsoft Service on "+i+". Please make sure Dynamsoft Service is running or the certificate is valid."}}function aU(r){var i,a;return r._bRemoteMode?sU(null===(i=r._dmService)||void 0===i||null===(a=i.attrs)||void 0===a?void 0:a.name).message:"The Dynamsoft Service has been stopped."}function uU(r){Ee(r,-2607,"The device selected was not found under the current service object.")}function ow(r){Ee(r,-2608,"IfShowFileDialog cannot be set to true when Object is created by CreateRemoteScanObjectAsync.")}function Lc(r,i){v.isString(i)&&""!=i?Ee(r,yn.RemoteDynamsoftServiceStopped,"The Dynamsoft Service on ["+i+"] has been stopped."):Ee(r,-2308,"The Dynamsoft Service has been stopped.")}function Ko(r){Ee(r,-2615,"User cancelled the operation.")}function xde(r){Ee(r,-2616,"Invalid image format type.")}function Fde(r){Ee(r,-2618,"Only single index selection is allowed when enumImageType is set to BMP, JPG or PNG.")}function so(r){Ee(r,-2620,"The RemoteScan object has been disposed.")}function cU(r){Ee(r,-2621,"Dynamsoft.DWT.Containers was not set.")}function lU(r){Ee(r,-2622,'Please do not set enumImageType to "IT_MULTIPAGE_PDF", "IT_MULTIPAGE_TIF" or "IT_ALL".')}function kde(r){Ee(r,-2800,"Please make sure the Dynamsoft Service has been installed.")}function $o(r){Ee(r,yn.ResponseDataTypeError,"Invalid response data was returned from the Dynamsoft Service.")}function Mde(r,i){Ee(r,-2811,i)}function Ode(r){Ee(r,-2812,"Error: Duplicate ID detected while creating a Dynamic Web TWAIN object.")}function Nde(r){Ee(r,-2814,"Error: The Dynamic Web TWAIN module is not installed.")}function Lde(r){Ee(r,-2815,"Error: Duplicate ContainerId detected while creating a Dynamic Web TWAIN object.")}function dU(r,i,a){Ee(r,-2816,["HTTP process error: ",a," (",i,")."].join(""))}function fU(){return{code:yn.HTSTError,message:"The Connection from the insecure (HTTP) web page failed for HTST."}}function Wde(r){return{code:-2826,message:"Failed to connect the Dynamsoft Service on ["+r+"]."}}function hU(r){return-1416==r}(function(r){r.LicenseInvalid=-2325,r.LicenseExpired=-2326,r.LicenseParseFailed=-2546,r.LicenseExpiredForDLS=-2808,r.LicenseNoCoreForDLS=-2809,r.LicenseNoCore=-2810,r.LicenseIsFuture=-2396,r.LicenseVersionNotCurrent=-2539})(dr||(dr={})),F.DWT.EnumDWT_LicenseErrorCode=dr,function(r){r.UserCancelled=-1032,r.CommonError=-2201,r.ModuleNotExists=-2371,r.MustUpgrade=-2207,r.RemoteDynamsoftServiceStopped=-2613,r.ResponseDataTypeError=-2801,r.HTSTError=-2817,r.CORSError=-2820,r.EnhancedPortNotReady=-2821,r.HTTPRedirected=-2823,r.BboError=-2827}(yn||(yn={}));var pU=j.bIE&&j.IEVersion<=9;$b=self&&self.fetch?self.fetch:window.fetch;var J_=0;function sw(r,i){var a,s=!1;return J_=i,$b?a=function(u,l){var d=!1,f="text",g=!1;if(l&&(l.dataType&&(f=l.dataType),l.fetchRaw&&(g=!0),l.timeout)){var _=l.timeout;_<300&&(_=300);var T=new AbortController;l.signal=T.signal,setTimeout(function(){d||T.abort()},_)}s=!1;var S=$b(u,l).then(function(I){if(I.ok){var b,D;if(d=!0,!r)return I;r.IfShowCancelDialogWhenImageTransfer?(Bc(!0),D=r.on("cancel",function(){s=!0})):Bc(!1);var R=I.headers.get("Content-Length"),L=0;r._onPercent&&J_==i&&r._onPercent({loaded:L,total:R});var x=null==I||null===(b=I.body)||void 0===b?void 0:b.getReader(),U=new ReadableStream({start:function(oe){x?setTimeout(function se(){return x.read().then(function(k){if(k.done||s)return s?x.cancel():D&&r.off("cancel",D),oe.close(),void(D=null);var E=k.value;L+=E.length,r._onPercent&&J_==i&&r._onPercent({loaded:L,total:R});try{return oe.enqueue(E),se()}catch(M){v.error(M)}})},0):oe.close()}}),Y=I.headers.get("Content-Type");return Y&&""!=Y||(Y="application/octet-stream"),new Response(U,{headers:{"Content-Type":Y}})}if("opaqueredirect"==I.type)throw{code:yn.HTTPRedirected,message:"The http url redirected."};var Z;throw dU(Z={},I.status,I.statusText),{code:Z._errorCode,message:Z._errorString,httpCode:I.status}});return g?S:(S=S.then("blob"==f?function(I){var b=I.headers.get("content-type");return"text/json"==b?I.json():j.bLinux?I.arrayBuffer().then(function(D){return new Blob([D],{type:b})}):I.blob()}:"json"==f?function(I){return I.json()}:"arraybuffer"==f?function(I){return"text/json"==I.headers.get("content-type")?I.json():I.arrayBuffer()}:function(I){return I.text()})).then(function(I){var b;if(s)throw Ko(b={}),{code:b._errorCode,message:b._errorString};return I})}:(pU&&v.addVBS(["Function dsVbsBinGetAt(strBinary,iOffset)\r\n"," dsVbsBinGetAt=AscB(MidB(strBinary,iOffset+1,1))\r\n","End Function\r\n","Function dsVbsBinGetBytes(strBinary,iOffset,iLength)\r\n"," Dim aBytes()\r\n"," ReDim aBytes(iLength-1)\r\n"," For i=0 To iLength-1\r\n","  aBytes(i)=dsVbsBinGetAt(strBinary,iOffset+i)\r\n"," Next\r\n"," dsVbsBinGetBytes=aBytes\r\n","End Function\r\n","Function dsVbsBinGetLength(strBinary)\r\n"," dsVbsBinGetLength=LenB(strBinary)\r\n","End Function"].join("")),a=function(u,l){return new(W.nativePromise||window.Promise)(function(d,f){var g,_=!1;g={url:u,async:!0,onSuccess:function(S,I,b){d(S)},onError:function(S,I,b){var D;dU(D={},b.status,I),f({code:D._errorCode,message:D._errorString,httpCode:b.status})},dataType:"text",method:rp,data:rp,headers:rp,contentType:rp,mimeType:rp},l&&(l.method&&(g.method=l.method),l.body&&(g.data=l.body),l.headers&&(g.headers||(g.headers={}),v.each(l.headers,function(S,I){"content-type"==I.toLowerCase()&&(_=!0),g.headers[I]=S})),l.dataType&&(g.dataType=l.dataType),l.contentType&&(g.contentType=l.contentType)),_&&(g.contentType=!1),"blob"==g.dataType&&pU&&(g.mimeType="text/plain; charset=x-user-defined"),r&&(r._onPercent&&(g.beforeSend=function(S,I,b){S.upload.addEventListener("progress",function(D){r._onPercent&&J_==i&&r._onPercent(D)},!1)}),Bc(!!r.IfShowCancelDialogWhenImageTransfer));var T=Os(g);r&&r.IfShowCancelDialogWhenImageTransfer&&r.on("cancel",function(){T.abort()})})}),a}var Wc=sw(null,0);function Bc(r){var i=v.sizzle(".dynamsoft-btnCancel");i.length>0&&(i[0].style.display=r?"":"none")}function gU(r,i,a,s,u,l,d){try{var f=r[l](d),g=f.value}catch(_){return void a(_)}f.done?i(g):Promise.resolve(g).then(s,u)}function Ae(r){return function(){var i=this,a=arguments;return new Promise(function(s,u){var l=r.apply(i,a);function d(g){gU(l,s,u,d,f,"next",g)}function f(g){gU(l,s,u,d,f,"throw",g)}d(void 0)})}}String.prototype.startsWith||(String.prototype.startsWith=function(r){return 0==this.indexOf(r)});var wo,Uc,mU=function(r){var i,a=r,s=a._license||"",u=JSON.parse(JSON.stringify(a._licenseServer)),l=a._sessionPassword,d=0;if(s.startsWith("t")||s.startsWith("f"))d=0;else if(0===s.length||s.startsWith("P")||s.startsWith("L")||s.startsWith("Y")||s.startsWith("A"))d=1;else{d=2;var f=s.indexOf(":");if(-1!=f&&(s=s.substring(f+1)),s.startsWith("DLS2")){var g;try{var _=s.substring(4);_=B.Lib.atob(_),g=JSON.parse(_)}catch{throw new Error("Format Error: The license string you specified is invalid, please check to make sure it is correct.")}if("number"==typeof(s=g.handshakeCode?g.handshakeCode:g.organizationID?g.organizationID:"")&&(s=JSON.stringify(s)),0===u.length){var T=[];g.mainServerURL&&(T[0]=g.mainServerURL),g.standbyServerURL&&(T[1]=g.standbyServerURL),u=function(S){if(null==S)S=[];else{S instanceof Array||(S=[S]);for(var I=0;I<S.length;++I){if(document&&document.createElement){var b=document.createElement("a");b.href=S[I],S[I]=b.href}S[I].lastIndexOf("/")!=S[I].length-1&&(S[I]+="/")}}return S}(T)}!l&&g.sessionPassword&&(l=g.sessionPassword),i=g.remark}("200001"===s||s.startsWith("200001-"))&&(u&&u.length||(s="")),s||(d=1)}return 1===d&&(s=""),{lt:d,l:s,ls:u,sp:l,rmk:i}},Fd=c(function r(i,a,s,u,l){n(this,r),this.server=i,this.port=a,this.ssl=s,this.useWS=u,this.protocol=l});function pt(r){if(void 0===r)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return r}function aw(r,i){return(aw=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(a,s){return a.__proto__=s,a})(r,i)}function di(r,i){if("function"!=typeof i&&null!==i)throw new TypeError("Super expression must either be null or a function");r.prototype=Object.create(i&&i.prototype,{constructor:{value:r,writable:!0,configurable:!0}}),Object.defineProperty(r,"prototype",{writable:!1}),i&&aw(r,i)}function fi(r,i){if(i&&("object"===e(i)||"function"==typeof i))return i;if(void 0!==i)throw new TypeError("Derived constructors may only return object or undefined");return pt(r)}function yt(r){return(yt=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(i){return i.__proto__||Object.getPrototypeOf(i)})(r)}(function(r){r.OK=0,r.Custom=-1,r.NWB=-4200,r.WS_DISCONN=-4201,r.CB=-5e3,r.JSON_REQUIRED=-5001,r.OBJECT_DISPOSED=-5002,r.INVALID_TASK=-5003,r.OBJECT_DISPOSING=-5004})(wo||(wo={})),function(r){r.WS_DISCONN="The Web Socket connection failed.",r.JSON_REQUIRED="The input is not a JSON object or JSON styled string.",r.OBJECT_DISPOSED="The object has been disposed.",r.INVALID_TASK="The task is invalid.",r.OBJECT_DISPOSING="The object need to be disposed."}(Uc||(Uc={}));var uw=function(){function r(){n(this,r)}return c(r,null,[{key:"message",value:function(i){return this._errorMessage[i]}},{key:"init",value:function(){this._errorMessage[wo.OK]="Successful.",this._errorMessage[wo.WS_DISCONN]=Uc.WS_DISCONN,this._errorMessage[wo.JSON_REQUIRED]=Uc.JSON_REQUIRED,this._errorMessage[wo.OBJECT_DISPOSED]=Uc.OBJECT_DISPOSED,this._errorMessage[wo.INVALID_TASK]=Uc.INVALID_TASK,this._errorMessage[wo.OBJECT_DISPOSING]=Uc.OBJECT_DISPOSING}}]),r}();at(uw,"_errorMessage",Object.create(null)),uw.init();var Do,qo=function(){function r(i,a){n(this,r),at(this,"_code",wo.OK),this.name="DSError",this.message=a??("string"==typeof i?i:uw.message(i)),this._code="string"==typeof i?wo.Custom:i}return c(r,[{key:"code",get:function(){return this._code}}]),r}();function $t(r){return{code:r._errorCode,message:r._errorString}}function Qo(r){return"exception"in r&&"description"in r&&0!=r.exception&&""!=r.description}!function(r){r.NONE=0,r.TRACE=1,r.DEBUG=2,r.INFO=4,r.WARN=8,r.ERROR=16}(Do||(Do={}));var Gn,cp=v.getLogger(),kd=function(){function r(){n(this,r)}return c(r,null,[{key:"LogLevel",get:function(){return this._logLevel},set:function(i){this._logLevel=i}},{key:"LogFunc",set:function(i){this._logFunc=i}},{key:"all",value:function(i,a){if((this._logLevel&i)==i)if(this._logFunc)this._logFunc(a,i);else switch(i){case Do.DEBUG:cp.debug(a);break;case Do.ERROR:cp.error(a);break;case Do.INFO:cp.info(a);break;case Do.WARN:cp.warn(a);break;case Do.TRACE:cp.trace(a)}}},{key:"trace",value:function(i){this.all(Do.TRACE,i)}},{key:"debug",value:function(i){this.all(Do.DEBUG,i)}},{key:"info",value:function(i){this.all(Do.INFO,i)}},{key:"warn",value:function(i){this.all(Do.WARN,i)}},{key:"error",value:function(i){this.all(Do.ERROR,i)}}]),r}();function mn(r){window.console&&(r instanceof Error||v.isString(r)?window.console.error(r):window.console.error(v.stringify(r)))}at(kd,"_logLevel",Do.ERROR),at(kd,"_logFunc",void 0),function(r){r.GET_TASKID=0,r.GET_EVENT_TASKID=1,r.ONMESSAGE_PROCESS_DATA=2,r.ONMESSAGE_GET_TASKID=3,r.ONMESSAGE_GET_EVENT_TASKID=4,r.HANDLE_RAW_MESSAGE=5,r.HANDLE_PROCESSED_MESSAGE=6}(Gn||(Gn={}));var _U=function(){function r(s){n(this,r),at(this,"_serverInfo",void 0),at(this,"_disposed",!1),this._serverInfo=s,this._ref=1}var i,a,s;return c(r,[{key:"serverInfo",get:function(){return this._serverInfo}},{key:"requestSync",value:function(s,u){kd.error("requestSync should be implemented in child class")}},{key:"request",value:(s=Ae(A.mark(function u(l,d,f,g){return A.wrap(function(_){for(;;)switch(_.prev=_.next){case 0:return kd.error("request should be implemented in child class"),_.abrupt("return",null);case 2:case"end":return _.stop()}},u)})),function(u,l,d,f){return s.apply(this,arguments)})},{key:"send",value:(a=Ae(A.mark(function s(u,l,d){return A.wrap(function(f){for(;;)switch(f.prev=f.next){case 0:kd.error("reqsenduestSync should be implemented in child class");case 1:case"end":return f.stop()}},s)})),function(s,u,l){return a.apply(this,arguments)})},{key:"testConnection",value:(i=Ae(A.mark(function s(u,l,d,f){return A.wrap(function(g){for(;;)switch(g.prev=g.next){case 0:return kd.error("testConnection should be implemented in child class"),g.abrupt("return");case 2:case"end":return g.stop()}},s)})),function(s,u,l,d){return i.apply(this,arguments)})},{key:"disposed",get:function(){return this._disposed}},{key:"dispose",value:function(){if(this._ref--,this._ref>0)return!1;this._disposed=!0,this._terminate()}},{key:"_terminate",value:function(){}},{key:"addRef",value:function(){this._ref++}}]),r}();function vU(r,i){(function(a,s){if(s.has(a))throw new TypeError("Cannot initialize the same private elements twice on an object")})(r,i),i.add(r)}function cw(r,i,a){return i.has(r),a}var yU=v.getLogger(),SU=new WeakSet,lw=new WeakSet,Ude=function(r){di(l,r);var i,a,s,u=function Bde(r){var i=function(){if(typeof Reflect>"u"||!Reflect.construct||Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch{return!1}}();return function(){var a,s=yt(r);if(i){var u=yt(this).constructor;a=Reflect.construct(s,arguments,u)}else a=s.apply(this,arguments);return fi(this,a)}}(l);function l(){var d;n(this,l);for(var f=arguments.length,g=new Array(f),_=0;_<f;_++)g[_]=arguments[_];return vU(pt(d=u.call.apply(u,[this].concat(g))),lw),vU(pt(d),SU),d}return c(l,[{key:"send",value:(s=Ae(A.mark(function d(f,g,_){return A.wrap(function(T){for(;;)switch(T.prev=T.next){case 0:yU.error("HTTP Client send not supported");case 1:case"end":return T.stop()}},d)})),function(d,f,g){return s.apply(this,arguments)})},{key:"requestSync",value:function(d,f,g){}},{key:"request",value:(a=Ae(A.mark(function d(f,g,_,T){return A.wrap(function(S){for(;;)switch(S.prev=S.next){case 0:return S.abrupt("return",cw(this,lw,IU).call(this,f,g,_,void 0,void 0,T));case 1:case"end":return S.stop()}},d,this)})),function(d,f,g,_){return a.apply(this,arguments)})},{key:"testConnection",value:(i=Ae(A.mark(function d(f,g,_,T){return A.wrap(function(S){for(;;)switch(S.prev=S.next){case 0:return S.abrupt("return",cw(this,lw,IU).call(this,void 0,void 0,f,g,_,T));case 1:case"end":return S.stop()}},d,this)})),function(d,f,g,_){return i.apply(this,arguments)})}]),l}(_U);function Vde(r){var i=this.serverInfo,a="";return a=i.ssl?"https://":"http://",a+=i.server,i.port&&(a+=":",a+=i.port),r&&(v.startsWith(r,"/")||v.endsWith(a,"/")||(a+="/"),v.endsWith(r,"/")?a+=r.slice(0,-1):a+=r),a}function IU(r,i,a,s,u,l){return dw.apply(this,arguments)}function dw(){return dw=Ae(A.mark(function r(i,a,s,u,l,d){var f,g;return A.wrap(function(_){for(;;)switch(_.prev=_.next){case 0:return _.prev=0,f=s??{},i&&(f.body=i),f.method||(f.method="POST"),d&&(f.timeout=d),g=cw(this,SU,Vde).call(this,a),yU.debug("HTTP URL: "+g),_.next=9,Wc(g,f);case 9:return _.abrupt("return",_.sent);case 12:if(_.prev=12,_.t0=_.catch(0),!(_.t0 instanceof qo||_.t0&&_.t0.code&&_.t0.message)){_.next=18;break}throw _.t0;case 18:if(!_.t0.message){_.next=20;break}throw new qo(_.t0.message);case 20:case"end":return _.stop()}},r,this,[[0,12]])})),dw.apply(this,arguments)}function jde(r){try{return"object"===e(r)?r:(r="string"!=typeof r?v.stringify(r):r,v.parse(r))}catch(i){throw i instanceof qo?i:new qo(wo.JSON_REQUIRED)}}function lp(r){return Math.random().toString(16).substring(2,2+r)}function Vc(r,i){(function(a,s){if(s.has(a))throw new TypeError("Cannot initialize the same private elements twice on an object")})(r,i),i.add(r)}function la(r,i,a){return i.has(r),a}var X_,hi=v.getLogger(),TU=new WeakSet,CU=new WeakSet,bU=new WeakSet,wU=new WeakSet,Z_=new WeakSet,fw=new WeakSet,DU=new WeakSet,ev=function(r){di(d,r);var i,a,s,u,l=function Hde(r){var i=function(){if(typeof Reflect>"u"||!Reflect.construct||Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch{return!1}}();return function(){var a,s=yt(r);if(i){var u=yt(this).constructor;a=Reflect.construct(s,arguments,u)}else a=s.apply(this,arguments);return fi(this,a)}}(d);function d(f){var g;return n(this,d),Vc(pt(g=l.call(this,f)),DU),Vc(pt(g),fw),Vc(pt(g),Z_),Vc(pt(g),wU),Vc(pt(g),bU),Vc(pt(g),CU),Vc(pt(g),TU),at(pt(g),"_defaultRetries",1),at(pt(g),"_ws",X_),at(pt(g),"_events",{}),at(pt(g),"_bHeartBeatStarted",!1),at(pt(g),"_heartBeatTicks",6e4),g._ws=X_,g.bUseParentWS=!1,g._tasks=Object.create(null),g.bReady=!1,g._blob_callbacks=[],g._processing_blob=!1,g}return c(d,[{key:"ws",get:function(){return this._ws}},{key:"requestSync",value:function(f,g,_){hi.error("WebSocket Client requestSync not supported")}},{key:"send",value:(u=Ae(A.mark(function f(g,_,T){var S,I,b,D,R;return A.wrap(function(L){for(;;)switch(L.prev=L.next){case 0:if(S=T.client,L.prev=1,void 0!==(I=T.taskId)){L.next=7;break}return L.next=6,_(g,Gn.GET_TASKID,S._requestTaskId,T);case 6:I=L.sent;case 7:if(b=S._tasks[I]){L.next=11;break}throw hi.error("invalid task id: "+I),new qo(wo.INVALID_TASK);case 11:return L.next=13,la(S,Z_,gw).call(S,!1);case 13:return L.next=15,la(S,fw,EU).call(S,g,_,T,b);case 15:hi.debug("begin to send data "+I),S.disposed||S._ws.send(g),g=null,hi.debug("end to send data "+I),L.next=27;break;case 21:L.prev=21,L.t0=L.catch(1),hi.debug("failed to send data."),hi.error(L.t0),delete S._tasks[I],null===(D=b)||void 0===D||null===(R=D.resolver)||void 0===R||R.reject(L.t0.message);case 27:case"end":return L.stop()}},f,null,[[1,21]])})),function(f,g,_){return u.apply(this,arguments)})},{key:"request",value:(s=Ae(A.mark(function f(g,_,T,S){var I,b,D;return A.wrap(function(R){for(;;)switch(R.prev=R.next){case 0:return I=this._defaultRetries,b=_??la(this,wU,$de),D=T??{client:this,userData:this},R.abrupt("return",la(this,DU,qde).call(this,g,b,D,I,!1,void 0,S));case 2:case"end":return R.stop()}},f,this)})),function(f,g,_,T){return s.apply(this,arguments)})},{key:"connected",get:function(){var f;return(null===(f=this._ws)||void 0===f?void 0:f.readyState)==WebSocket.OPEN}},{key:"testConnection",value:function(f,g,_,T){return la(this,Z_,gw).call(this,!0,g??0,_,T)}},{key:"_terminate",value:(a=Ae(A.mark(function f(){var g;return A.wrap(function(_){for(;;)switch(_.prev=_.next){case 0:for(g in hi.debug("terminate WSClient"),this.fireEvent("disposed"),this._tasks)void 0!==this._tasks[g]&&this._tasks[g].resolver&&this._tasks[g].resolver.reject(new qo(wo.OBJECT_DISPOSING));this._lic_callback=X_,this._blob_callbacks=[],this._processing_blob=!1,this._ws&&(this._ws.onopen=null,this._ws.onerror=null,this._ws.onmessage=null,this._ws.onclose=null,this._ws.close()),this._ws=X_,this._tasks=Object.create(null);case 9:case"end":return _.stop()}},f,this)})),function(){return a.apply(this,arguments)})},{key:"setRetry",value:function(f){this._defaultRetries=f??1}},{key:"addEvent",value:function(f,g,_){var T=this._events[f];T||(this._events[f]={},T=this._events[f]),v.isString(g)&&v.isFunction(_)&&(T[g]=_)}},{key:"removeEvent",value:function(f,g){var _=this._events[f];_&&v.isString(g)&&delete _[g]}},{key:"clearEvent",value:function(f){this._events[f]&&(this._events[f]={})}},{key:"fireEvent",value:function(f){var g,_=this._events[f];if(_){var T=Object.keys(_);for(g=0;g<T.length;g++)v.isFunction(_[T[g]])&&_[T[g]]()}}},{key:"getRequestTaskId",value:function(){return this._requestTaskId?this._requestTaskId:0}}],[{key:"_waitForPreBlob",value:(i=Ae(A.mark(function f(g){return A.wrap(function(_){for(;;)switch(_.prev=_.next){case 0:if(!g._processing_blob){_.next=3;break}return setTimeout(function(){d._waitForPreBlob(g)},500),_.abrupt("return");case 3:d._preBlobResolv&&d._preBlobResolv();case 4:case"end":return _.stop()}},f)})),function(f){return i.apply(this,arguments)})}]),d}(_U);function Gde(r){var i="";return i=r.ssl?"wss://":"ws://",i+=r.server,r.port&&(i+=":",i+=r.port),i}function zde(r,i,a,s){var u=this;return new W.Promise(function(l,d){try{var f,g,_=d,T=l;if(s&&(g=setTimeout(function(){var D=new qo("createWebSocket timed out.");hi.debug(D.message),_&&(_(D),_=null,T=null),g&&clearTimeout(g),f&&f.close()},s)),r.bUseParentWS){var S=window,I=parent,b=S.WebSocket;try{for(;S!=I&&I&&I.WebSocket;)b=I.WebSocket,S=I.window,I=I.parent}catch{b=window.WebSocket}f=a?new b(i,a):new b(i)}else f=a?new WebSocket(i,a):new WebSocket(i);f.onopen=function(){g&&clearTimeout(g),r._ws=f,T&&(T(f),_=null,T=null)},f.onerror=function(D){f.close(),r.bReady=!1,g&&clearTimeout(g),u.fireEvent("error"),_&&(_(new qo("websocket error")),_=null,T=null)},f.onmessage=function(D){la(r,bU,Kde).call(r,r,D.data)},f.onclose=function(D){r.bReady=!1,g&&clearTimeout(g),u.fireEvent("close"),_&&(_(D),_=null,T=null)}}catch(D){if(D instanceof qo||D&&D.code&&D.message)throw D;if(D.message)throw new qo(D.message)}})}function Kde(r,i){return hw.apply(this,arguments)}function hw(){return hw=Ae(A.mark(function r(i,a){var s,u,l,d,f,g,_,T,S,I;return A.wrap(function(b){for(;;)switch(b.prev=b.next){case 0:if(s=i,b.prev=1,d={client:s,userData:void 0},"object"!==e(a)){b.next=17;break}if(!(s._blob_callbacks.length>0)){b.next=17;break}if(!s._processing_blob){b.next=9;break}return b.next=8,new W.Promise(function(D){ev._preBlobResolv=D,ev._waitForPreBlob(s)});case 8:ev._preBlobResolv=null;case 9:return s._processing_blob=!0,f=s._blob_callbacks.shift(),b.next=13,f(a);case 13:return s._processing_blob=!1,b.abrupt("return");case 17:if(!(s.bReady&&v.isString(a)&&(a.indexOf("Function not found")>0||a.indexOf("Version not found")>0))){b.next=19;break}return b.abrupt("return");case 19:if(s._cbToGetTaskId){b.next=21;break}return b.abrupt("return");case 21:return b.next=23,s._cbToGetTaskId(a,Gn.ONMESSAGE_PROCESS_DATA,s._requestTaskId,d);case 23:return g=b.sent,_=!1,b.next=27,s._cbToGetTaskId(g,Gn.ONMESSAGE_GET_TASKID,s._requestTaskId,d);case 27:if(l=b.sent){b.next=36;break}if(!g.Detail||!g.Domain){b.next=32;break}return s._lic_callback&&s._lic_callback(g),b.abrupt("return");case 32:return b.next=34,s._cbToGetTaskId(g,Gn.ONMESSAGE_GET_EVENT_TASKID,s._requestTaskId,d);case 34:(l=b.sent)&&(_=!0);case 36:if(u=s._tasks[l]){b.next=46;break}if(!_){b.next=42;break}u={},b.next=44;break;case 42:return""!=l&&hi.log("invalid task id: "+l),b.abrupt("return");case 44:b.next=48;break;case 46:if(!u.timedout){b.next=48;break}return b.abrupt("return");case 48:return b.next=50,s._cbToGetTaskId(a,Gn.HANDLE_RAW_MESSAGE,s._requestTaskId,u.ctx);case 50:if(void 0!==(T=b.sent)){b.next=55;break}return b.next=54,s._cbToGetTaskId(g,Gn.HANDLE_PROCESSED_MESSAGE,s._requestTaskId,u.ctx);case 54:T=b.sent;case 55:T&&!_&&(u.tmid&&clearTimeout(u.tmid),delete s._tasks[l],u.resolver&&u.resolver.resolve(T)),b.next=64;break;case 58:b.prev=58,b.t0=b.catch(1),hi.debug("failed to handle message."),b.t0 instanceof Error?hi.error(b.t0):hi.error(v.stringify(b.t0)),delete s._tasks[l],null===(S=u)||void 0===S||null===(I=S.resolver)||void 0===I||I.reject(b.t0.message);case 64:case"end":return b.stop()}},r,null,[[1,58]])})),hw.apply(this,arguments)}function $de(r,i,a){return pw.apply(this,arguments)}function pw(){return pw=Ae(A.mark(function r(i,a,s){var u,l;return A.wrap(function(d){for(;;)switch(d.prev=d.next){case 0:d.t0=a,d.next=d.t0===Gn.GET_TASKID?3:d.t0===Gn.HANDLE_RAW_MESSAGE?7:9;break;case 3:return(l=jde(i)).cmdId=null!==(u=l.cmdId)&&void 0!==u?u:[lp(8),"-",lp(4),"-",lp(4),"-",lp(4),"-",lp(8)].join(""),W.Promise.resolve(["cmdId"]),d.abrupt("break",9);case 7:return W.Promise.resolve(i),d.abrupt("break",9);case 9:case"end":return d.stop()}},r)})),pw.apply(this,arguments)}function gw(r,i,a,s){return mw.apply(this,arguments)}function mw(){return mw=Ae(A.mark(function r(i,a,s,u){var l,d,f,g;return A.wrap(function(_){for(;;)switch(_.prev=_.next){case 0:if(!this.connected&&!this.disposed){_.next=2;break}return _.abrupt("return");case 2:if(!(f=this)._connectPromise){_.next=7;break}return _.next=6,f._connectPromise;case 6:return _.abrupt("return");case 7:return a=null!==(l=a)&&void 0!==l?l:this._defaultRetries,s=null!==(d=s)&&void 0!==d?d:100,g=la(f,TU,Gde).call(f,f.serverInfo),hi.debug("WebSocket URL: "+g+", try to create websocket "+a+"/"+s),f._connectPromise=new W.Promise(function(T,S){var I=function(D){la(f,CU,zde).call(f,f,g,f.serverInfo.protocol,u).then(function(R){T(R)}).catch(function(R){hi.debug("create websocket failed: "+R.message),D<a?function b(D,R,L){setTimeout(function(){I(++D)},s)}(D):S(R)})};I(0)}),_.prev=12,_.next=15,f._connectPromise;case 15:_.next=20;break;case 17:throw _.prev=17,_.t0=_.catch(12),_.t0;case 20:return _.prev=20,f._connectPromise=null,_.finish(20);case 23:case"end":return _.stop()}},r,this,[[12,17,20,23]])})),mw.apply(this,arguments)}function EU(r,i,a,s){return _w.apply(this,arguments)}function _w(){return _w=Ae(A.mark(function r(i,a,s,u){var l,d,f,g;return A.wrap(function(_){for(;;)switch(_.prev=_.next){case 0:if(l=this,f=s.lastEventTaskId,void 0!==(d=s.eventTaskId)){_.next=7;break}return _.next=6,a(i,Gn.GET_EVENT_TASKID,l._requestTaskId,s);case 6:d=_.sent;case 7:d&&(l._tasks[d]?s&&s.userData&&s.userData.command&&((g=l._tasks[d]).ctx=s,f&&((g=l._tasks[f]).ctx=s)):(l._tasks[d]=g={id:u.id,resolver:null,ctx:s,timedout:!1},f&&(l._tasks[f]=g)));case 8:case"end":return _.stop()}},r,this)})),_w.apply(this,arguments)}function qde(r,i,a,s,u,l,d){return vw.apply(this,arguments)}function vw(){return vw=Ae(A.mark(function r(i,a,s,u,l,d,f){var g,_,T,S;return A.wrap(function(I){for(;;)switch(I.prev=I.next){case 0:return g=this,I.prev=1,s.client=g,I.next=5,la(g,Z_,gw).call(g,l,u,d,f);case 5:if("0"!=(_=s.taskId)){I.next=12;break}return g.disposed||g._ws.send(i),i=null,I.abrupt("return");case 12:if(void 0!==_){I.next=16;break}return I.next=15,a(i,Gn.GET_TASKID,null,s);case 15:_=I.sent;case 16:return void 0===_&&hi.debug("websocket send: task id is invalid."),(T={}).promise=new W.Promise(function(b,D){T.resolve=b,T.reject=D}),g._tasks[_]=S={id:_,resolver:T,ctx:s,timedout:!1},g._requestTaskId=_,I.next=24,la(g,fw,EU).call(g,i,a,s,S);case 24:return g._cbToGetTaskId=a,f&&(S.tmid=setTimeout(function(){hi.debug("ws request time out."),S.timedout=!0,S.resolver.reject("request timed out.")},f)),g.disposed||g._ws.send(i),hi.debug("end to send task "+_),i=null,I.abrupt("return",T.promise);case 32:if(I.prev=32,I.t0=I.catch(1),_&&delete g._tasks[_],!(I.t0 instanceof qo||I.t0&&I.t0.code&&I.t0.message)){I.next=39;break}throw I.t0;case 39:if(!I.t0.message){I.next=41;break}throw new qo(I.t0.message);case 41:return I.prev=41,i=null,I.finish(41);case 44:case"end":return I.stop()}},r,this,[[1,32,41,44]])})),vw.apply(this,arguments)}function AU(r,i){(null==i||i>r.length)&&(i=r.length);for(var a=0,s=new Array(i);a<i;a++)s[a]=r[a];return s}function PU(r,i){(function(a,s){if(s.has(a))throw new TypeError("Cannot initialize the same private elements twice on an object")})(r,i),i.add(r)}function RU(r,i,a){return i.has(r),a}var xU=new WeakSet,FU=new WeakSet,Ga=function(){function r(){n(this,r),PU(this,FU),PU(this,xU),at(this,"_maxWebSocketCon",10),at(this,"_wsClients",[])}return c(r,[{key:"removeTerminatedWSClient",value:function(){this._wsClients=this._wsClients.filter(function(i){return!i.disposed})}},{key:"getClient",value:function(i,a){return i.useWS?RU(this,FU,Jde).call(this,i,a):new Ude(i)}},{key:"terminate",value:function(){var i=this._wsClients.slice();this._wsClients=[],i.forEach(function(a){a.dispose()})}}],[{key:"Instance",get:function(){return this._gClientPool||(this._gClientPool=new r),this._gClientPool}}]),r}();function Yde(r){this.removeTerminatedWSClient();var i,a,s,u=function Qde(r,i){var a=typeof Symbol<"u"&&r[Symbol.iterator]||r["@@iterator"];if(!a){if(Array.isArray(r)||(a=function(g,_){if(g){if("string"==typeof g)return AU(g,_);var T=Object.prototype.toString.call(g).slice(8,-1);if("Object"===T&&g.constructor&&(T=g.constructor.name),"Map"===T||"Set"===T)return Array.from(g);if("Arguments"===T||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(T))return AU(g,_)}}(r))||i&&r&&"number"==typeof r.length){a&&(r=a);var s=0,u=function(){};return{s:u,n:function(){return s>=r.length?{done:!0}:{done:!1,value:r[s++]}},e:function(g){throw g},f:u}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var l,d=!0,f=!1;return{s:function(){a=a.call(r)},n:function(){var g=a.next();return d=g.done,g},e:function(g){f=!0,l=g},f:function(){try{d||null==a.return||a.return()}finally{if(f)throw l}}}}(this._wsClients);try{for(u.s();!(i=u.n()).done;){var l=i.value;if((a=l.serverInfo)?.port==(s=r)?.port&&a?.protocol==s?.protocol&&a?.server==s?.server&&a?.ssl==s?.ssl&&a?.useWS==s?.useWS&&!l.disposed)return l.addRef(),l}}catch(d){u.e(d)}finally{u.f()}return null}function Jde(r,i){var a;return i||(a=RU(this,xU,Yde).call(this,r)),a||(this._wsClients.length<this._maxWebSocketCon?((a=new ev(r)).addEvent("disposed","1",function(){Ga.Instance.removeTerminatedWSClient()}),this._wsClients.push(a),a):null)}at(Ga,"_gClientPool",null);var da=function(){function r(){n(this,r)}return c(r,null,[{key:"getHttpClientForDcp",value:function(i,a){var s,u=F.dcp,l=W.detect.ssl;if(a||!j.bSSL?(s=u.Port,l=!1):(s=u.SSLPort,l=!0),v.isString(i)){var d=new Fd;return v.startsWith(i,"https://")?(d.ssl=!0,d.server=i.substring(8)):v.startsWith(i,"http://")?(d.ssl=!1,d.server=i.substring(7)):(d.ssl=W.detect.ssl,d.server=i),Ga.Instance.getClient(d)}return r.getHttpClient(null,s,l)}},{key:"getHttpClient",value:function(i,a,s){var u=s?"https":"http",l=new Fd(i||Ri(),a,s,!1,u);return Ga.Instance.getClient(l)}},{key:"getWsClient",value:function(i,a,s,u){var l=new Fd(i||Ri(),a,s,!0,vt.wsProtocol);return Ga.Instance.getClient(l,u)}}]),r}();W.ClientPool=Ga;var dp,Xde=parseInt(bo),Zde=parseInt(G_),efe=parseInt("0"),kU="ddm/",za="ddm_"+[Xde,Zde,efe,Nu].join("");function MU(){return kU+za}function tfe(r){return OU.apply(this,arguments)}function OU(){return(OU=Ae(A.mark(function r(i){var a,s,u,l;return A.wrap(function(d){for(;;)switch(d.prev=d.next){case 0:return a=Oc,s=[MU(),"/VersionInfo?","ts=",v.now()].join(""),u=['{"id":"',v.guid(),'","method":"VersionInfo"}'].join(""),l=da.getHttpClientForDcp(i),d.abrupt("return",l.request(u,s,{dataType:"json"},a));case 4:case"end":return d.stop()}},r)}))).apply(this,arguments)}function yw(){var r=window.Dynamsoft.Lib.Promise;if(dp)return r.resolve(dp);var a,s=navigator;if(s&&"userAgentData"in s){var u=navigator.userAgentData;if(u.platform&&""!=u.platform){var l=[];if("brands"in u&&v.isArray(u.brands)&&u.brands.length>0?l=u.brands:"uaList"in u&&v.isArray(u.uaList)&&u.uaList.length>0&&(l=u.uaList),l.length>0)return(a=function(d){var f=j,g=d.architecture.toLowerCase(),_="64"==d.bitness,T=g.indexOf("arm")>-1,S=g.indexOf("mips")>-1;return{bUseUserAgent:!1,bWin:f.bWin,bMac:f.bMac,bLinux:f.bLinux,bAndroid:f.bAndroid,bMobile:f.bMobile,bPad:f.bPad,bChromeOS:f.bChromeOS,bHarmonyOS:f.bHarmonyOS,bArm64:T,bMips64:S,bEmbed:T||S,bOSx64:_,bIE:!1,bEdge:f.bEdge,bChrome:f.bChrome,bFirefox:f.bFirefox,bSafari:f.bSafari,bOpera:f.bOpera,bGecko:!0,bHuaWeiBrowser:!1,bHTML5Edition:!0,strBrowserVersion:f.strBrowserVersion,IEMode:0}},navigator.userAgentData.getHighEntropyValues(["platform","platformVersion","architecture","bitness"]).then(a)).then(function(d){return dp=d,d})}}return r.resolve(dp=j)}W.install={_divDWTNonInstallContainerID:"dwt-NonInstallContainerID",_divDWTemessageContainer:"",_dlgInstall:!1},W.install._strNonInstallDIV=['<div style="text-align:center;" id="',W.install._divDWTNonInstallContainerID,'"></div>'].join("");var Sw=0,Iw=[],Tw=!(!document||!document.addEventListener),NU="DOMContentLoaded",LU="readystatechange",BU="complete",Cw=Tw?function(r,i,a){r.addEventListener(i,a,!1)}:function(r,i,a){r.attachEvent("on"+i,a)},bw=Tw?function(r,i,a){r.removeEventListener(i,a,!1)}:function(r,i,a){r.detachEvent("on"+i,a)};function Md(){Sw||(Sw=1,yw().then(function(){document&&bw(window,"load",Md),function(){for(var r=function(){try{Iw[i]()}catch(a){v.log(a,"error"),setTimeout(function(){throw a},0)}},i=0;i<Iw.length;i++)r()}()}))}function Od(r){if(Sw)try{r()}catch(i){v.log(i,"error"),setTimeout(function(){throw i},0)}else Iw.push(r);return this}function An(r){v.log(r)}Od(function(){var r=document.createElement("style"),i=["dialog[open]{display:block}dialog[closed]{display:none}.dynamsoft-backdrop{position:fixed;background:rgba(128,128,128,0.1);top:0;bottom:0;left:0;right:0;z-index:-99999999;}.dynamsoft-dwt-dialogProgress{width:330px;background:#FFF}.dynamsoft-finalMessage{margin:0;color:#3a3a3a;font:20px Arial,sans-serif}.dynamsoft-desc{margin:7px 0;color:#3a3a3a;font:14px Arial,sans-serif}.dynamsoft-status{color:#555;font:14px/22px Arial,sans-serif;margin-bottom:5px}.dynamsoft-progressBar{-webkit-appearance:none;width:280px;margin-bottom:20px;height:14px}.dynamsoft-progressBar,.dynamsoft-progressBar::-webkit-progress-bar{background-color:#e7e7e7;border-radius:7px}.dynamsoft-progressBar::-webkit-progress-value,.dynamsoft-progressBar::-moz-progress-bar{background-color:#50a8e1;border-radius:7px}.dynamsoft-loadingMsg{width:290px;height:290px;margin:auto;color:#CCC;border-width:1px;background:#FFF}.dynamsoft-loadingMsg-msg{margin:0 0 15px 25px;color:#3a3a3a;font:20px Arial,sans-serif}.dynamsoft-loadingMsg-desc{text-align:center;margin:0 0 15px 0;color:#3a3a3a;font:14px Arial,sans-serif}.ds-dwt-loaderBar-noserver-parent{height:100%;}.ds-dwt-loaderBar-noserver{margin: 0 auto;padding-top: 50px;text-align: center;}.ds-dwt-loaderBar-noserver img{height: 100px}"].join("");r.type="text/css";try{r.appendChild(document.createTextNode(i))}catch{r.styleSheet.cssText=i}document.body.appendChild(r)}),W._zdgb_xkz_dhk=function(){var r=W.install._dlgInstall;if(r){var i=v.sizzle(".dynamsoft-dialog-closeTimer",r);if(i.length>0){var a=i[0],s=parseInt(a.style.width);(s-=1)<=0?F.DWT.CloseDialog():(a.style.width=s+"%",setTimeout(W._zdgb_xkz_dhk,100))}}},W.ShowLicenseDialog=F.DWT.ShowMessage,W.createLoadingBarContent=function(){};var Cr,UU="All scripts and css loaded.",nfe="Checking Product Key format...",rfe="Initializing the service...",ife="Checking the service enhanced module...",ofe="Getting the WebTwain port...",sfe="Checking the WebTwain module...",VU="Checking the WebTwain version...",afe="Check the WebTwain version successfully.",jU="The WebTwain version not compatible.",ufe="Getting Machine ID.",cfe="Creating WebTwain from Dynamsoft.DWT.Containers...",HU="Decoding the license...",GU="Checking the license...";function Ka(r,i){(function(a,s){if(s.has(a))throw new TypeError("Cannot initialize the same private elements twice on an object")})(r,i),i.add(r)}function ao(r,i,a){return i.has(r),a}!function(r){r.CM_RENDERALL=1,r.CM_IMAGEONLY=2,r.CM_AUTO=3,r.CM_RENDERALLWITHANNOTATION=4}(Cr||(Cr={}));var zU=bo+".",lfe=parseInt(bo);function Nd(r){return v.isString(r)?v.trim(r):r}var ww=new WeakSet,KU=new WeakSet,Dw=new WeakSet,$U=new WeakSet,qU=new WeakSet,QU=new WeakSet,tv=new WeakSet,YU=new WeakSet,Ew=new WeakSet,dfe=function(){function r(){n(this,r),Ka(this,Ew),Ka(this,YU),Ka(this,tv),Ka(this,QU),Ka(this,qU),Ka(this,$U),Ka(this,Dw),Ka(this,KU),Ka(this,ww),at(this,"isLTS",li)}return c(r,[{key:"isLongKey",value:function(i){if(v.isString(i)&&i.length>0){var a=i.charAt(0);if("f"==a||"t"==a)return!0;if(v.startsWith(i,"DLS")||v.isNumber(i))return!1;var s=parseInt(i)+"-";return!v.startsWith(i,s)}return!1}},{key:"isLicenseMixed",value:function(i,a){var s,f,u=!1,l=i||F.DWT.ProductKey;if(F.DWT.lclex(),a&&(Nd(F.DWT.organizationID)||Nd(F.DWT.handshakeCode))&&l&&(u=!0,Ee(s={},-2444,"A license can only be specified once and has already been set using the ProductKey API.")),!u&&v.isString(l)&&(l=v.trim(l),!v.startsWith(l,"f")&&!v.startsWith(l,"t"))&&""!=l)if(v.startsWith(l,"DLS2"))try{ao(this,KU,ffe).call(this,l)}catch(f){u=!0,Ee(s={},-2440,""),s._errorString=f.message}else ao(this,ww,JU).call(this,l).LTS||(u=!0,Ee(f=s={},dr.LicenseParseFailed,"The license is invalid."));return u&&s&&(Hn(s),v.error(F.DWT.licenseException.message)),u}},{key:"reparseProductKey",value:function(i){i&&An("Parsing Product Key...");var a=Nd(F.DWT.organizationID),s=Nd(F.DWT.handshakeCode),u=a||s,l=v.trim(F.DWT.ProductKey);if(!u){var d=ao(this,ww,JU).call(this,l);d.LTS&&(s=Nd(d.handshakeCode),u=(a=Nd(d.organizationID))||s)}if(u)return this._innerResetLicense(),v.isNumber(l)&&(a=l),be.handshakeCode=s,be.organizationID=a,be.licenseServer=F.DWT.licenseServer,be.sessionPassword=F.DWT.sessionPassword,void(be.bPublicLTS=ao(this,Dw,XU).call(this,be.licenseServer,u));var f=!1;if(be.refProductKey!==l&&(this._innerResetLicense(),v.isString(l)&&l.length>0&&(be.refProductKey=l,f=!0)),f)if(this.isLongKey(be.refProductKey))be.bPublicLTS=!1;else{var g,_={_pLoad:{isEmpty:Ne},_license:be.refProductKey,_licenseServer:[]};try{g=mU(_)}catch(S){v.error(S),g=!1}if(g&&v.isString(g.l)){var T=v.trim(g.l);""==T?be.organizationID=T:-1!=T.indexOf("-")?be.handshakeCode=T:be.organizationID=T,v.isArray(g.ls)&&g.ls.length>0&&(be.licenseServer=g.ls),be.bPublicLTS=ao(this,Dw,XU).call(this,be.licenseServer,T),be.sessionPassword=g.sp}else be.bPublicLTS=!1}}},{key:"_innerResetLicense",value:function(){be.refProductKey="",be.handshakeCode=void 0,be.organizationID=void 0,be.licenseServer=void 0,be.sessionPassword="",be.bPublicLTS=!0}},{key:"checkOSForAllowCore",value:function(i,a,s){return be.bHTML5Edition?i?ao(this,Ew,ZU).call(this,a):this.isOSOK(a,s._bRemoteMode,s.__serverPlatform):Ne}},{key:"checkLocalPlatformForRemoteService",value:function(i){var a,s,f,u=i.__licenseInfo,l=ro.getEnumPlatform(),d=!1;for(a=0;a<u.Detail.length&&(s=u.Detail[a],!ao(this,tv,Aw).call(this,s.EnumLicenseType,s.LicenseType).Core||!v.isString(s.Version)||0!=s.Version.indexOf(zU)||!(d=ao(this,Ew,ZU).call(this,s.OS))&&!(d=this.isOSOK(s.OS,!0,l)));a++);return d||(l==lt.enumWindow?(Ee(f=i,-2344,"The current product key does not support Windows OS. Please contact the site administrator."),Hn(f)):l==lt.enumLinux?function(f){Ee(f,-2346,"The current product key does not support Linux OS. Please contact the site administrator."),Hn(f)}(i):l==lt.enumMac?function(f){Ee(f,-2345,"The current product key does not support MAC OS. Please contact the site administrator."),Hn(f)}(i):function(f){Ee(f,-2347,"The current product key does not support your OS. Please contact the site administrator."),Hn(f)}(i)),d}},{key:"checkProductKey",value:function(i,a,s){var u,l=F.DWT.licenseException;return!a.Camera&&(i.__licenseInfo||(i.__licenseInfo={}),(u=ao(this,qU,pfe).call(this,i,i.__licenseInfo,ve,a,s))||(l.code=i._errorCode,l.message=i._getErrorString(),l.fromLTS=!1),u)}},{key:"isBindDomainOK",value:function(i){if(v.isUndefined(i)||null==i||""==i||"*"==i||"*.*"==i)return Ne;var a=location.hostname,s=ve;if(""==a)return Ne;for(var u=a.toLowerCase().split("."),l=u.length,d=i.toLowerCase().split(";"),f=0;f<d.length;f++){var g=d[f];if("*.*"==g){s=Ne;break}var _=g.split("."),T=_.length;if(T>0&&T-1<=l){for(var S=Ne,I=T-1;I>0;I--){if(_[I].indexOf("*")>-1){s=Ne;break}if(I+l-T>=0){if(u[I+l-T]!=_[I]){S=ve;break}}else if("*"!=_[I]){S=ve;break}}if(S&&("*"==_[0]||l>=T&&u[l-T]==_[0])){s=Ne;break}}}return s}},{key:"isExpiredOrFuture",value:function(i,a){if(""==i)return ve;if(!a){var s=i.length;if(s>2&&"/"==i[s-2]&&"0"==i[s-1])return ve}var u=Ld(i),l=(new Date).getTime(),d=l+5184e6;return u.getTime()<l||a&&u.getTime()>d?Ne:ve}},{key:"willTrialExpire",value:function(i){if(""==i)return ve;var a=Ld(i),s=(new Date).getTime();return a.getTime()<s+432e6&&a.getTime()>s?Ne:ve}},{key:"isOSOK",value:function(i,a,s){var u=!1,l=!1,d=!1,f=!1,g=!1,_=!1,T=!1,S=!1;return""==i||"0"==i?Ne:(a?s==lt.enumWindow?d=!0:s==lt.enumLinux?l=!0:s==lt.enumMac?u=!0:s==lt.enumEmbed?g=!0:s==lt.enumChromeOS?_=!0:s==lt.enumAndroid?T=!0:s==lt.enumHarmonyOS?S=!0:s==lt.enumiOS&&(f=!0):(u=j.bMac,l=j.bLinux,d=j.bWin,f=j.biPhone||j.biPad,_=j.bChromeOS,g=F.navInfo.bEmbed,T=j.bAndroid,S=j.bHarmonyOS),(i=i.toLowerCase()).indexOf("windows")>-1&&d||i.indexOf("mac")>-1&&u||i.indexOf("linux")>-1&&(l||_||S)||i.indexOf("android")>-1&&T||i.indexOf("ios")>-1&&f||i.indexOf("embed")>-1&&g?Ne:ve)}},{key:"isBrowserOK",value:function(i){if(v.isString(i)){if(""==i||"0"==i)return Ne;var a=(i=i.toLowerCase()).split(";"),s=ve;return v.each(a,function(u){("chrome"==v.trim(u)&&(j.bChrome||j.bSafari||j.bOpera||j.bEdge)||"ie"==v.trim(u)&&j.bIE||"firefox"==v.trim(u)&&j.bFirefox)&&(s=Ne)}),s}return ve}},{key:"isAllowLicenseType",value:function(i,a){return a.Core?i.Core:a.PDFRasterizer?i.PDFRasterizer:a.Webcam||a.Camera?i.Webcam:a.barcode1D?i.barcode1D:a.QR?i.QR:a.PDF417?i.PDF417:a.DataMatrix?i.DataMatrix:a.OCR?i.OCR:a.OCRPro?i.OCRPro:i.Core}},{key:"setNoAllowedLicenseTypeError",value:function(i,a,s){var u;s.Core?sp(i,a):s.Webcam||s.Camera?a||s.Camera?((u=i)._errorCode=-2431,li()?u._errorString="The license for the Camera Addon is not found or has expired.":Ee(u,-2431,"The current product key does not support Camera Addon. Please contact the site administrator."),Hn(u)):function(u){u._errorCode=-2338,u._errorString=li()?"The license for the module direct show is not found or has expired.":"The current product key does not support Webcam. Please contact the site administrator.",Hn(u)}(i):s.PDFRasterizer?a?function(u){u._errorCode=-2370,u._errorString=li()?"The license for the module pdf rasterizer is not found or has expired.":"The current product key does not support Pdf Rasterizer Wasm. Please contact the site administrator.",Hn(u)}(i):ap(i):s.OCR?function(u){u._errorCode=-2340,u._errorString=li()?"The license for the module ocr is not found or has expired.":"The current product key does not support OCR. Please contact the site administrator.",Hn(u)}(i):s.OCRPro?function(u){u._errorCode=-2341,u._errorString=li()?"The license for the module ocr pro is not found or has expired.":"The current product key does not support OCR pro. Please contact the site administrator.",Hn(u)}(i):zo(i)}},{key:"getLicenseDateString",value:function(i){var a,s=i.getFullYear();return[(a=i.getMonth()+1)>=10?""+a:"0"+a,"/",i.getDate()>=10?""+i.getDate():"0"+i.getDate(),"/",s].join("")}},{key:"hasPDFRProductKey",value:function(i){return!!this.checkProductKey(i,{PDFRasterizer:!0},!0)||(i._resetErr(),!1)}},{key:"checkPDFProductKeyWhenNeeds",value:function(i,a){var s;return a!=F.DWT.EnumDWT_ImageType.IT_PDF&&a!=F.DWT.EnumDWT_ImageType.IT_MULTIPAGE_PDF||(be.bHTML5Edition?i.__addon&&i.__addon.PDF&&(s=i.__addon.PDF.GetConvertMode()):i.Addon&&i.Addon.PDF&&(s=i.Addon.PDF.GetConvertMode()),s!=Cr.CM_RENDERALL&&s!=Cr.CM_RENDERALLWITHANNOTATION)?Ne:this.checkProductKey(i,{PDFRasterizer:!0},!0)}},{key:"getPublicLicenseContent",value:function(i){var a=[],s=i;if(!v.isString(s)){if(v.isUndefined(s))return"";s=s instanceof Error||"message"in s?s.message:""+s}var u=s.indexOf("["),l=s.indexOf("]",u),d=s.indexOf("(",l),f=s.indexOf(")",d);if(-1==u||-1==l||-1==d||-1==f)return s;u>0&&a.push(s.substring(0,u));var g=s.substring(u+1,l),_=s.substring(d+1,f);return a.push(['<a href="',_,'" target="_blank" class="dynamsoft-major-color">',g,"</a>"].join("")),a.push(s.substring(f+1)),a.join("")}},{key:"getLTSLicense",value:function(){return be.bPublicLTS?"":be.handshakeCode||be.organizationID}}]),r}();function JU(r){var i,a,s=r,u=r.indexOf("-"),l=-1!=u;return a={},l&&(s=r.substring(0,u)),i=Number(s),isNaN(i)||String(Number(i))!==s||(l?a.handshakeCode=r:a.organizationID=r,a.LTS=Ne),a}function ffe(r){mU({_pLoad:{isEmpty:Ne},_license:r,_licenseServer:[]})}function XU(r,i){var a=!0;if(v.isArray(r)&&r.length>0){var s=r[0];v.isString(s)&&""!=s&&-1==s.indexOf("https://mlts.dynamsoft.com")&&(a=!1)}return a&&(!i||"200001"===i||v.startsWith(i,"200001-"))}function hfe(r,i,a){return this.checkOSForAllowCore(r,i,a)}function pfe(r,i,a,s,u){var l;if(i&&i.LTS){if(!i||!v.isArray(i.Detail)||0==i.Detail.length)return this.isLTS()?sp(r,a):zo(r),ve}else if(!i||!v.isArray(i.Detail)||0==i.Detail.length)return this.isLTS()?sp(r,a):zo(r),ve;var d,f,g,_,te,T=0,S=0,I=[],b=[],D=ve,R=ve,L=ve,x=ve,U=ve;if(!this.isBindDomainOK(i.Domain))return Ee(te=r,-2342,"The domain of your current site does not match the domain bound in the current product key. Please contact the site administrator."),Hn(te),ve;for(i.Detail.length>0&&(l="FALSE"!=(g=i.Detail[0]).Trial),f=1;f<i.Detail.length;f++)if("FALSE"==(g=i.Detail[f]).Trial&&l||"TRUE"==g.Trial&&!l)return Rde(r),ve;if(i.bTrial=l,s.Core||s.Webcam){var Y=[],Z=!1;for(f=0;f<i.Detail.length;f++)if(g=i.Detail[f],_=ao(this,tv,Aw).call(this,g.EnumLicenseType,g.LicenseType),s.Core&&_.Core&&this.checkOSForAllowCore(a,g.OS,r)||s.Core&&_.Core&&be.bActiveXEdition&&_.ActiveX||s.Webcam&&_.Webcam&&!a){if(!(i.LTS||v.isString(g.Version)&&0==g.Version.indexOf(zU))){Y.push(g);continue}if(be.bHTML5Edition){if(_.ActiveX&&!_.Html5)continue;b.push(g)}else{if(!_.ActiveX&&_.Html5)continue;b.push(g)}Z=!0}if(!Z&&Y.length>0)return Y.splice(0),function(te,X){Ee(te,dr.LicenseVersionNotCurrent,"The current product key is not for version ".concat(X,". Please contact the site administrator.")),Hn(te)}(r,[bo,G_].join(".")),!1;Y.splice(0)}else b=i.Detail;for(f=0;f<b.length;f++){var oe=Ne;if(g=b[f],_=ao(this,tv,Aw).call(this,g.EnumLicenseType,g.LicenseType),s.Core&&_.Core||this.isAllowLicenseType(_,s)){d=g.ExpireDate.replace(/-/g,"/");var se="FALSE"!=g.Trial;if(this.isExpiredOrFuture(d,se))I.push(d);else if(se&&_.Core&&this.willTrialExpire(d)&&(i.ExpireDate=d),i.LTS||_.Core&&be.bHTML5Edition&&parseInt(g.Version)>=lfe||_.Core&&be.bActiveXEdition||!_.Core){var k=!1;if(_.Core)(this.checkOSForAllowCore(a,g.OS,r)||be.bActiveXEdition&&_.ActiveX)&&(k=!0);else{var E=a;s.Camera&&(E=!0),ao(this,$U,hfe).call(this,E,g.OS,r)&&(k=!0)}k?this.isBrowserOK(g.Browser)||u?(T++,oe=ve):R=Ne:s.Core?D=Ne:s.PDFRasterizer?x=Ne:(s.Webcam||s.Camera)&&(U=Ne)}else L=Ne;oe&&S++}}if(T>0)return Ne;if(0==S)return this.setNoAllowedLicenseTypeError(r,a,s),ve;if(I.length>0){var M,G=0,V=1e20,J="",Q=(new Date).getTime();for(d="",f=0;f<I.length;f++)(M=Ld(I[f])).getTime()<Q&&M.getTime()>G?(G=M.getTime(),d=I[f]):M.getTime()>Q&&M.getTime()<V&&(V=M.getTime(),J=I[f]);return""!=d?(M=Ld(d),eU(r,d=this.getLicenseDateString(M))):""!=J?(M=Ld(J),J=this.getLicenseDateString(M),function(te,X){Ee(te,dr.LicenseIsFuture,"The current product key is invalid. Please contact the site administrator."),Hn(te)}(r)):eU(r,""),ve}return L?(function(te){Ee(te,-2348,"The current product key is invalid because it's generated with the licenses of a different major version."),Hn(te)}(r),ve):R?(j.bEdge?function(te){Ee(te,-2330,"The current product key does not support Edge. Please contact the site administrator."),Hn(te)}(r):j.bChrome?function(te){Ee(te,-2327,"The current product key does not support Chrome. Please contact the site administrator."),Hn(te)}(r):j.bFirefox?function(te){Ee(te,-2328,"The current product key does not support Firefox. Please contact the site administrator."),Hn(te)}(r):j.bIE?function(te){Ee(te,-2329,"The current product key does not support IE. Please contact the site administrator."),Hn(te)}(r):j.bSafari?function(te){Ee(te,-2392,"The current product key does not support Safari. Please contact the site administrator."),Hn(te)}(r):function(te){Ee(te,-2343,"The current product key does not support your browser. Please contact the site administrator."),Hn(te)}(r),ve):D?(this.setNoAllowedLicenseTypeError(r,a,{Core:!0}),ve):x?(this.setNoAllowedLicenseTypeError(r,a,{PDFRasterizer:!0}),ve):U?(this.setNoAllowedLicenseTypeError(r,a,{Webcam:!0}),ve):(zo(r),ve)}function gfe(r){var i=ve,a=ve,s=ve,u=ve,l=ve,d=ve,f=ve,g=ve,_=ve;return v.isString(r)&&""!=r&&v.each(r.split(";"),function(T){var S=1*T;2==S||3==S||0==S||1==S?i=Ne:4==S?a=Ne:50==S?s=Ne:51==S?u=Ne:52==S?l=Ne:7==S?d=Ne:8==S?f=Ne:9==S?g=Ne:10==S&&(_=Ne)}),{Core:i,PDFRasterizer:g,Webcam:f,barcode1D:a,QR:s,PDF417:u,DataMatrix:l,OCR:d,OCRPro:_}}function Aw(r,i){var a=ao(this,QU,gfe).call(this,r),s=ao(this,YU,mfe).call(this,i);return v.each(["Core","Html5","ActiveX","PDFRasterizer","Webcam","barcode1D","QR","PDF417","DataMatrix","OCR","OCRPro"],function(u){a[u]=a[u]||s[u]}),a}function mfe(r){var i=ve,a=ve,s=ve,u=ve,l=ve,d=ve,f=ve,g=ve,_=ve,T=ve,S=ve;return r&&""!=r&&("html5;activex;oldie"==(r=r.toLowerCase())?(u=Ne,i=Ne):"html5;activex"==r?(a=Ne,u=Ne,i=Ne):r.indexOf("html5")>-1||"win=(aph) or mac=(ph) or linux(h)"==r?(a=Ne,i=Ne):"1d barcode reader"==r?s=Ne:"2d barcode reader(qrcode)"==r?l=Ne:"2d barcode reader(pdf417)"==r?d=Ne:"2d barcode reader(data matrix)"==r?f=Ne:"ocr"==r?g=Ne:"webcam"==r?_=Ne:"pdf rasterizer"==r?T=Ne:"proocr"==r&&(S=Ne)),{Core:i,Html5:a,ActiveX:u,PDFRasterizer:T,Webcam:_,barcode1D:s,QR:l,PDF417:d,DataMatrix:f,OCR:g,OCRPro:S}}function ZU(r){var i=r.toLowerCase();return i.indexOf("wasm")>-1||i.indexOf("mobile")>-1}var Ye=new dfe;function eV(r,i){return tV.apply(this,arguments)}function tV(){return(tV=Ae(A.mark(function r(i,a){var s;return A.wrap(function(u){for(;;)switch(u.prev=u.next){case 0:if(li()){u.next=2;break}return u.abrupt("return");case 2:if(u.prev=2,F.DWT.li({instanceMode:F.DWT.EnumInstance.dwt_desktop},"")){u.next=17;break}return a&&An(ufe),u.prev=6,u.next=9,tfe();case 9:return s=u.sent,u.next=12,_fe(s);case 12:u.next=17;break;case 14:u.prev=14,u.t0=u.catch(6),v.log(u.t0);case 17:u.next=22;break;case 19:u.prev=19,u.t1=u.catch(2),v.log(u.t1);case 22:case"end":return u.stop()}},r,null,[[2,19],[6,14]])}))).apply(this,arguments)}function _fe(r){return nV.apply(this,arguments)}function nV(){return(nV=Ae(A.mark(function r(i){var a;return A.wrap(function(s){for(;;)switch(s.prev=s.next){case 0:if(!i){s.next=7;break}if(!(v.isArray(i.result)&&i.result.length>3)){s.next=5;break}a=i.result[3],s.next=7;break;case 5:if(!i.description){s.next=7;break}return s.abrupt("return",{code:i.exception,message:i.description});case 7:v.isString(a)&&""!=a&&(F.DWT.lsmid(a,""),F.DWT.lsmid2b(a));case 8:case"end":return s.stop()}},r)}))).apply(this,arguments)}function Ld(r){var i,a=r;return a=a.replace(/-/g,"/"),i=Date.parse(a),isNaN(i)&&(i=0),(i=new Date(i)).setHours(23,59,59,999),i}F.DWT.isPublicLicense=function(){return be.bPublicLTS};var rV=function(){function r(){n(this,r),at(this,"_exec",{})}return c(r,[{key:"fire",value:function(i,a){var s,u=this;i=i.toLowerCase(),s=Array.prototype.slice.call(arguments,1),v.each(u._exec[i]||[],function(l){var d=l.f,f=l.c||u;try{d.apply(f,s)}catch(g){v.error(g)}})}},{key:"on",value:function(i,a,s){i=i.toLowerCase(),this._exec[i]=this._exec[i]||[],this._exec[i].push({f:a,c:s})}},{key:"off",value:function(i,a,s){if(i&&a){i=i.toLowerCase();for(var u=this._exec[i]||[],l=u.length-1;l>=0;l--)u[l]===a&&u.splice(l,1)}else this._exec={}}}]),r}();function Wu(r,i){(function(a,s){if(s.has(a))throw new TypeError("Cannot initialize the same private elements twice on an object")})(r,i),i.add(r)}function fa(r,i,a){return i.has(r),a}var nv="[bio]: ",iV=window,rv=iV&&iV.FormData,oV=new WeakSet,sV=new WeakSet,Pw=new WeakSet,Rw=new WeakSet,xw=new WeakSet,yfe=new WeakSet,Sfe=new WeakSet,Fw=new WeakSet,fr=function(r){di(a,r);var i=function vfe(r){var i=function(){if(typeof Reflect>"u"||!Reflect.construct||Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch{return!1}}();return function(){var a,s=yt(r);if(i){var u=yt(this).constructor;a=Reflect.construct(s,arguments,u)}else a=s.apply(this,arguments);return fi(this,a)}}(a);function a(s){var u;return n(this,a),Wu(pt(u=i.call(this)),Fw),Wu(pt(u),Sfe),Wu(pt(u),yfe),Wu(pt(u),xw),Wu(pt(u),Rw),Wu(pt(u),Pw),Wu(pt(u),sV),Wu(pt(u),oV),at(pt(u),"_attrs",{}),v.mix(u._attrs,{action:"",data:{},bChunkedSendData:Ne,ajaxConfig:{value:{},type:"post",processData:ve,cache:ve,dataType:"text",async:Ne,contentType:ve,retry:0,headers:{"X-Requested-With":ve}},ajax:"",formData:"",CORS:ve,bOnlyResponseEmptyIsOK:Ne}),v.mix(u._attrs,s),fa(pt(u),oV,Ife).call(pt(u)),u}return c(a,[{key:"get",value:function(s){return s in this._attrs?this._attrs[s]:""}},{key:"set",value:function(s,u){s in this._attrs&&(this._attrs[s]=u)}},{key:"uploadFilesToServer",value:function(s){return fa(this,sV,Tfe).call(this,s)}},{key:"uploadToServer",value:function(s){var u=this,l=u.get("ajaxConfig");fa(u,Pw,aV).call(u),s&&s.size>0&&(fa(u,Rw,uV).call(u,s),u.name=v.isString(s.name)&&""!=s.name?s.name:s.fileName,s=null),v.mix(l,{data:u.get(a.PROP.formData),url:u.get(a.PROP.action),beforeSend:function(f,g,_){f.upload.addEventListener("progress",function(T){u.fire(a.event.PROGRESS,{loaded:T.loaded,total:T.total,name:u.name})},!1)}}),v.mix(l,{method:"POST",async:!0,onSuccess:function(f){iv(u.get(a.PROP.data)),iv(u.get(a.PROP.formData)),u.get(a.PROP.ajax).dispose(),u.set(a.PROP.data,null),u.set(a.PROP.formData,null),u.set(a.PROP.ajax,null);var g=fa(u,Fw,lV).call(u,f);u.fire(a.event.SUCCESS,g)},onError:function(f,g,_){var T,S;iv(u.get(a.PROP.data)),iv(u.get(a.PROP.formData)),u.get(a.PROP.ajax).dispose(),u.set(a.PROP.data,null),u.set(a.PROP.formData,null),u.set(a.PROP.ajax,null),f&&v.isArray(f)&&f.length>2?(T=f[1],S=f[2]):(T=g,S=_),fa(u,xw,cV).call(u,S,T)}});var d=Os(l);return u.set(a.PROP.ajax,d),!0}},{key:"abort",value:function(){var s=this,u=s.get("ajax");return v.isObject(u)?(u.abort(),s.set("ajax",!1),s):(v.log(nv+"abort(), the value of io invalid!"),s)}},{key:"setRequestHeader",value:function(s,u){var l=this.get("ajaxConfig");return l.headers[s]=u,this.set("ajaxConfig",l),l=null,u}}]),a}(rV);function Ife(){this.get("CORS");var r=this.get("ajaxConfig");return v.mix(r,{xhrFields:{withCredentials:!1}}),r}function Tfe(r){var i=this,a=i.get(fr.PROP.ajaxConfig),s=[];fa(i,Pw,aV).call(i),v.each(r,function(l){l&&l.size>0?(fa(i,Rw,uV).call(i,l),v.isString(l.name)&&""!=l.name?s.push(l.name):s.push(l.fileName)):s.push("")}),v.mix(a,{data:i.get(fr.PROP.formData),url:i.get(fr.PROP.action),beforeSend:function(l,d,f){l.upload.addEventListener("progress",function(g){i.fire(fr.event.PROGRESS,{loaded:g.loaded,total:g.total,name:""})},!1)}}),v.mix(a,{method:"POST",async:!0,onSuccess:function(l){var d="";s=[],l&&(l&&v.isArray(l)&&l.length>1?d=l[0]:v.isString(l)&&(d=l)),d=fa(i,Fw,lV).call(i,d),i.fire(fr.event.SUCCESS,d)},onError:function(l,d,f){var g,_;s=[],l&&v.isArray(l)&&l.length>2?(g=l[1],_=l[2]):(g=d,_=f),fa(i,xw,cV).call(i,_,g)}}),i.name="";var u=Os(a);return i.set(fr.PROP.formData,null),i.set(fr.PROP.ajax,u),!0}function aV(){var r,i=this,a=i.get("data");if(rv)if(a instanceof rv)i.set(fr.PROP.formData,a);else{r=new rv;try{v.each(a,function(s,u){r.append(u,s)}),i.set(fr.PROP.formData,r)}catch{v.log(nv+"something error when reset FormData.")}}else v.log(nv+"the browser does not support ajax.")}function uV(r){if(!v.isObject(r))return v.log(nv+"_addFileData(), file parameter invalid!"),!1;var i=this.get(fr.PROP.formData),s=r.remoteFilename;return s||(s="RemoteFile"),i.append(s,r,r.name),this.set(fr.PROP.formData,i),r=null,i}function cV(r,i){var a=fr.status.ERROR,s={status:a,msg:i,response:!1,name:this.name};r&&(s.httpStatus=r.status,s.response=r.responseText),this.fire(a,s)}function lV(r){var i,a,s,u=!1,l=this.name,d=fr.status.SUCCESS,f=fr.event.ERROR;if(v.log("Response from server: "+r),!this.get("bOnlyResponseEmptyIsOK"))return{status:d,msg:!1,json:!1,response:r,name:l};if(v.isUndefined(r)||""===r)i={status:d,msg:!1,json:!1,response:"",name:l};else if(v.isString(r)){try{for(a=0;a<r.length&&!(a>10);a++){if("{"==(s=r[a])){u=!0;break}if(" "!=s&&"\r"!=s&&"\n"!=s&&"\t"!=s)break}if(u){var g=v.parse(r);i=1==g.status?{status:d,msg:!1,json:g,response:r,name:l}:{status:f,msg:!1,json:g,response:r,name:l}}}catch(T){u=!1,v.log(T)}if(!u){var _=String(r);i=""==(_=_.replace(/( |\t|\r|\n)/g,""))?{status:d,msg:!1,json:!1,response:r,name:l}:{status:f,msg:!1,json:!1,response:r,name:l}}}else i={status:d,msg:!1,json:!1,response:"",name:l};return i}function iv(r){r&&r instanceof rv&&r.forEach&&r.forEach(function(i,a){a&&r.delete(a)})}function ov(r,i){(function(a,s){if(s.has(a))throw new TypeError("Cannot initialize the same private elements twice on an object")})(r,i),i.add(r)}function fp(r,i,a){return i.has(r),a}at(fr,"event",{SUCCESS:"success",ERROR:"error",PROGRESS:"progress"}),at(fr,"status",{SUCCESS:"success",ERROR:"error"}),at(fr,"PROP",{action:"action",data:"data",bChunkedSendData:"bChunkedSendData",ajaxConfig:"ajaxConfig",ajax:"ajax",formData:"formData",CORS:"CORS",bOnlyResponseEmptyIsOK:"bOnlyResponseEmptyIsOK"});var dV=new WeakSet,fV=new WeakSet,hV=new WeakSet,kw=new WeakSet,pi=function(r){di(a,r);var i=function Cfe(r){var i=function(){if(typeof Reflect>"u"||!Reflect.construct||Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch{return!1}}();return function(){var a,s=yt(r);if(i){var u=yt(this).constructor;a=Reflect.construct(s,arguments,u)}else a=s.apply(this,arguments);return fi(this,a)}}(a);function a(s){var u;return n(this,a),ov(pt(u=i.call(this)),kw),ov(pt(u),hV),ov(pt(u),fV),ov(pt(u),dV),u._attrs={action:"",retry:0,timeout:0,CORS:ve,async:Ne,dataType:"text",fileStatus:"",data:{},bOnlyResponseEmptyIsOK:Ne},v.mix(u._attrs,s),fp(pt(u),fV,wfe).call(pt(u)),u}return c(a,[{key:"get",value:function(s){return s in this._attrs?this._attrs[s]:""}},{key:"set",value:function(s,u){s in this._attrs&&(this._attrs[s]=u)}},{key:"upload",value:function(s){var u;if(s){if(v.isArray(s))return u=this._uploadType.uploadFilesToServer(s),s=null,u;if(v.isObject(s)){var l=s;return l.size?(l.id||(l.id=v.guid("file-")),l.size&&(l.textSize=fp(this,dV,bfe).call(this,l.size))):l.size=0,u=this._uploadType.uploadToServer(l),l=null,s=null,u}}return u=this._uploadType.uploadToServer(s),s=null,u}},{key:"abort",value:function(s){return this._uploadType&&this._uploadType.abort(),!0}},{key:"setRequestHeader",value:function(s,u){this._uploadType.setRequestHeader(s,u)}}]),a}(rV);function bfe(r){var i=-1;do{r/=1024,i++}while(r>99&&i<4);return Math.max(r,.1).toFixed(1)+["KB","MB","GB","TB"][i]}function wfe(){var r=this,i={action:r.get(pi.PROP.action),data:r.get(pi.PROP.data),CORS:r.get(pi.PROP.CORS),bOnlyResponseEmptyIsOK:r.get(pi.PROP.bOnlyResponseEmptyIsOK)};this._uploadType=new fr(i);var a=this._uploadType.get(fr.PROP.ajaxConfig);return a&&(a.dataType=r.get(pi.PROP.dataType),a.async=r.get(pi.PROP.async),a.retry=r.get(pi.PROP.retry)),this._uploadType.on(fr.event.SUCCESS,fp(r,kw,pV),r),this._uploadType.on(fr.event.ERROR,fp(r,kw,pV),r),this._uploadType.on(fr.event.PROGRESS,fp(r,hV,Dfe),r),this._uploadType}function Dfe(r){this.fire(pi.event.PROGRESS,r)}function pV(r){var i=this,a=r.status,s=r.msg,u=i.get("file");v.mix(r,{file:u}),"success"===a?i.fire(pi.event.SUCCESS,r):(!1===s||("abort"===s?v.mix(r,{canceled:!0}):"timeout"===s&&v.mix(r,{timeout:!0})),i.fire(pi.event.ERROR,r))}at(pi,"event",{SUCCESS:"success",ERROR:"error",PROGRESS:"progress"}),at(pi,"PROP",{action:"action",retry:"retry",timeout:"timeout",CORS:"CORS",async:"async",dataType:"dataType",fileStatus:"fileStatus",data:"data",bOnlyResponseEmptyIsOK:"bOnlyResponseEmptyIsOK"});var Tn={Loading:"Processing...",LoadingTiff:"Processing tiff...",LoadingPdf:"Processing pdf...",Encoding:"Processing...",ConvertingToBlob:"Converting to blob...",ConvertingToBase64:"Converting to base64...",SavingPdf:"Saving pdf...",SavingTiff:"Saving tiff...",Downloading:"Downloading...",Uploading:"Uploading...",Transfer:"Transferring...",CanvasLoading:"Loading ...",Err_ServiceModeNotSupportMobile:"Service Mode does not support your Operating System. Please contact the site administrator."};function Mw(r,i){W.detect.bMaskShow=!0,F.DWT.ScanDirectly||v.isFunction(F.DWT.OnWebTwainPreExecute)&&F.DWT.OnWebTwainPreExecute(r,i)}function Ow(){W.detect.bMaskShow=!1,F.DWT.ScanDirectly||v.isFunction(F.DWT.OnWebTwainPostExecute)&&F.DWT.OnWebTwainPostExecute()}var gV=j.bWin,Efe=j.bMac,Afe=j.bLinux,Pfe=j.bSafari,Rfe=j.bFirefox,xfe=j.bChrome,Ffe=location.hostname,Ns=location.pathname,Nw=0,sv=j.bMobile,mV=parseFloat(j.strBrowserVersion);if(j.bWin||j.bMac||j.bLinux||j.bChromeOS){if(F.navInfo){var av=F.navInfo;sv=sv||av.bAndroid||av.bPad||av.biPhone||av.biPad}}else sv=!0;""===Ffe?gV&&Ns.lastIndexOf("\\")>1?Ns=Ns.substring(1,Ns.lastIndexOf("\\")).replace(/%20/g," "):(Nw=1,Ns=Ns.substring(1,Ns.lastIndexOf("/")).replace(/%20/g," ")):(Nw=1,Ns=Ns.substring(0,Ns.lastIndexOf("/")));var Mn={bChrome:xfe,bFirefox:Rfe,bSafari:Pfe,bIE:j.bIE,bEdge:j.bEdge,bWin:gV,bMac:Efe,bLinux:Afe,iPluginLength:0,bFileSystem:j.bFileSystem,bMobile:sv,strIEVersion:j.IEVersion,strChromeVersion:j.bChrome?mV:"",strFirefoxVersion:j.bFirefox?mV:"",basePath:Ns,pathType:Nw,isDesktopViewer:function(){return j.bWin||j.bLinux||j.bChromeOS||j.bMac},isPadViewer:function(){return j.bPad||j.biPad},isMobileViewer:function(){return j.bMobile||j.biPhone||j.bAndroid||j.bHarmonyOS},WSVersion:"12.0.0",WSSession:(new Date).getTime(),bDiscardBlankImage:ve},tn={getImageUrl:function(r,i,a,s,u){var l,d=[r];if(v.isNumber(i)&&i<0)return"";if(null!=i&&(d.push("&index="),d.push(i)),d.push("&width="),d.push(a),d.push("&height="),d.push(s),Mn.bMobile&&d.push("&type=1&quality=85"),d.push("&ticks="),d.push(u||Date.now()),l=d.join(""),j.bFileSystem&&l.indexOf("dwt://")<0){var f=new Image;f.crossOrigin="anonymous",f.src=l,f=null}return l},getUrlByAct:function(r,i,a){var s=[r];return null!=i&&(s.push("&index="),s.push(i)),a&&(s.push("&act="),s.push(a)),s.push("&ticks="),s.push(Date.now()),s.join("")},output:function(r,i){v.debug&&v.log(i)},print:function(r){var a=850,s=1120,u=0,l=0,d=0,f="";for(be.bHTML5Edition&&(j.bIE&&(s=1160),j.bFirefox&&(s=1150)),u=0;u<r.length;u++){var g=s,_=r[u],T=_.Width,S=_.Height,I=_.Url;T<=0&&(T=a),S<=0&&(S=g);var b=a/T,D=g/S;b<D?g=Math.floor(S*b):b>D&&(a=Math.floor(T*D)),l+=T,d+=S,f=f+'<div style="width:'+a+"px;height:"+g+'px"><img id="D_img'+u+'" src="'+I+'" style="position:relative;left:0px;top:0px;width: '+a+"px;height: "+g+'px" referrerpolicy="strict-origin-when-cross-origin" /></div>'}var R,L=["alwaysRaised=yes,z-look=yes,top=0,left=0,toolbar=no,menubar=no,location=no,status=no,width=",l,",height=",d].join(""),x=window.open("about:blank","_blank",L);x&&(x.document.write('<html><body id="D_img">'+f+"</body></html>"),x.document.close(),x.focus(),(R=x.document.getElementById("D_img"))?R.onload=function(){x&&x.print(),v.log("print image...ok")}:v.log("cannot find image"))}};W.html5.Funs2=tn;var ze,kfe=v.isString,Mfe=v.isArray,Ofe=v.each;function jc(r,i){if(kfe(i))r.push('"'),r.push(i),r.push('"');else if(Mfe(i)){var a=Ne;r.push("["),Ofe(i,function(s){a?a=ve:r.push(","),jc(r,s)}),r.push("]")}else r.push(void 0===i?'""':i)}function we(){for(var r=[],i=arguments.length,a=new Array(i),s=0;s<i;s++)a[s]=arguments[s];if(a.length>0)if(1===a.length){var u=a[0];r.push("["),jc(r,u),r.push("]")}else if(2===a.length){var l=a[0],d=a[1];r.push("["),jc(r,l),r.push(","),jc(r,d),r.push("]")}else jc(r,Array.prototype.slice.call(a));return r.join("")}function $a(r){return r instanceof ArrayBuffer||r instanceof Uint8Array||r instanceof Uint16Array||r instanceof Uint32Array||r instanceof Int8Array||r instanceof Int16Array||r instanceof Int32Array||window.Uint8ClampedArray&&r instanceof window.Uint8ClampedArray||r instanceof Float32Array||r instanceof Float64Array}!function(r){r.TWAINSCANNER=16,r.WIASCANNER=32,r.TWAINX64SCANNER=64,r.ICASCANNER=128,r.SANESCANNER=256,r.ESCLSCANNER=512,r.WIFIDIRECTSCANNER=1024,r.WIATWAINSCANNER=2048}(ze||(ze={}));var Nfe=ze.TWAINSCANNER|ze.WIASCANNER|ze.TWAINX64SCANNER|ze.ICASCANNER|ze.SANESCANNER|ze.ESCLSCANNER|ze.WIFIDIRECTSCANNER|ze.WIATWAINSCANNER,hp=ze.TWAINSCANNER|ze.WIASCANNER|ze.TWAINX64SCANNER|ze.ICASCANNER|ze.SANESCANNER,Lfe=ze.TWAINSCANNER|ze.WIATWAINSCANNER|ze.TWAINX64SCANNER|ze.ICASCANNER|ze.SANESCANNER,Lw=ze.ESCLSCANNER|ze.WIFIDIRECTSCANNER,Wd=ze.TWAINSCANNER|ze.WIATWAINSCANNER,Wfe=1;function pp(){return(++Wfe).toString()}function _V(){return["dwt_",v.getRandom()].join("")}var ha=0;function nr(r,i,a){if(v.log("showMask:"+r+"--"+ha),0==ha)if(i){Mw(i);var s=W.mask.dlgMask;if(s){s.style.zIndex="10000";var u=v.sizzle(".dynamsoft-backdrop",s.parentNode);u&&u.length>0&&(u[0].style.zIndex="10000")}}else Mw(a||{});ha++}function Cn(r){v.log("hideMask:"+r+"--"+ha),ha>1?ha--:ha<=1&&(Ow(),ha=0)}var vV=function(){function r(i,a){n(this,r),at(this,"m_server",""),at(this,"m_iUsingTime",0),at(this,"m_countMap",{}),at(this,"m_newConsum",!1),at(this,"m_mapSavedToDb",!1),this.clearData(),this.m_enumInstance=i,i==F.DWT.EnumInstance.dwt_desktop?(this.m_deploymentType="desktop",this.m_server=a):i==F.DWT.EnumInstance.dbr&&(this.m_deploymentType="browser",this.m_server="")}return c(r,[{key:"clearData",value:function(){this.m_iUsingTime=0,this.m_jvUsingTime=v.nil,this.m_countMap={},this.m_newConsum=!1,this.m_mapSavedToDb=!1,this.m_minExpiredTime=v.nil,this.m_maxExpiredTime=v.nil,this.m_cu=v.nil,this.m_ar=v.nil,this.m_ltsInstance=v.nil}},{key:"set_cu",value:function(i){this.m_cu=i}},{key:"get_cu",value:function(){return this.m_cu}},{key:"set_ar",value:function(i){this.m_ar=i}},{key:"get_ar",value:function(){return this.m_ar}},{key:"get_ltsInstance",value:function(i){return this.m_ltsInstance||(this.m_ltsInstance=i(this.m_enumInstance)),this.m_ltsInstance}},{key:"inited_ltsInstance",value:function(){return!!this.m_ltsInstance}},{key:"set_maxExpiredTime",value:function(i){this.m_maxExpiredTime=i}},{key:"get_maxExpiredTime",value:function(){return this.m_maxExpiredTime}},{key:"set_minExpiredTime",value:function(i){this.m_minExpiredTime=i}},{key:"get_minExpiredTime",value:function(){return this.m_minExpiredTime}},{key:"get_deploymentType",value:function(){return this.m_deploymentType}},{key:"get_enumDeploymentType",value:function(){return this.m_enumInstance}}]),r}(),Le=F.DWT;Le.LTS=Le.LTS||{},Le.licenseException={code:0,message:"",fromLTS:!1},Le.bLTSOnline=!0,Le.axInstance=void 0,Le.lOnUpdateDWObj=[],Le.EnumInstance={dwt_desktop:0,dwt_browser:1,dbr:2};var qa,Ww,Bw,Fi=0,Ls={},gp=!1,Bd=!1,mp=!1,Uw=!1,_p=!1;function yV(){var r=be.handshakeCode;return v.isString(r)||(r=""),r}function SV(){var r=be.organizationID;return v.isNumber(r)?r=""+r:v.isString(r)||(r=""),r}function Vw(){return v.replaceAll(io.JSVersion,",",".")}function Qn(r,i){var a=r;return a===v.nil&&(a=Le.EnumInstance.dwt_desktop),a==Le.EnumInstance.dbr?(Bw||(Bw=new vV(a,"")),Bw):(Ww||(Ww=new vV(a,"")),Ww)}Le.lupverfy=function(){Qn(Le.EnumInstance.dwt_desktop).get_ltsInstance(pa),Qn(Le.EnumInstance.dbr).get_ltsInstance(pa)},Le.lsmid=function(r,i){Qn(Le.EnumInstance.dwt_desktop).set_cu(r)},Le.lsar=function(r,i){Qn(Le.EnumInstance.dwt_desktop).set_ar(r)},Le.lsmid2b=function(r){Qn(Le.EnumInstance.dwt_desktop).set_cu(r)},Le.lgar=function(r,i){Qn(r).get_ar()},Le.laddDWTObj=function(r){var i=!1;v.each(Le.lOnUpdateDWObj,function(a){if(a==r)return i=!0,!1}),i||Le.lOnUpdateDWObj.push(r)},Le.lremoveDWTObj=function(r){v.each(Le.lOnUpdateDWObj,function(i,a){if(i==r)return Le.lOnUpdateDWObj.splice(a,1),!1})},Le.lsendUpdateEvt=function(r,i){var a=[];if(v.each(Le.lOnUpdateDWObj,function(l){r==Le.EnumInstance.dwt_desktop&&a.push(l)}),0==a.length)return W.Promise.resolve();var s,u=a[0];return u._bAx?(v.each(a,function(l){l.SetLTSInfo(Qn(r).get_ar(),Qn(r).get_cu())}),u.GetLicenseInfo().then(function(l){l&&v.isArray(l.Detail)&&l.Detail.length>0&&Le.lsexp(r,l.Detail[0].ExpireDate,i)})):(s=u.SetLTSLicenseAsync(Qn(r).get_ar()).then(function(l){l&&v.isArray(l.Detail)&&l.Detail.length>0&&Le.lsexp(r,l.Detail[0].ExpireDate,i)}),v.each(a,function(l,d){0!=d&&l.SetLTSLicenseAsync(Qn(r).get_ar())}),s)},Le.lgcb=function(){var r=[];return j.bChrome?r.push("Chrome"):j.bFirefox?r.push("Firefox"):j.bEdge?r.push("Edge"):j.bIE?r.push("IE"):j.bSafari?r.push("Safari"):j.bOpera?r.push("Opera"):j.b360SE?r.push("360SE"):j.bTencentTraveler?r.push("TencentTraveler"):j.bMaxthon?r.push("Maxthon"):j.bMetaSr?r.push("MetaSr"):j.bTheWorld?r.push("TheWorld"):j.bUC?r.push("UC"):j.bHuaWeiBrowser&&r.push("HuaWeiBrowser"),r.push(j.strBrowserVersion),j.bWin?r.push("Windows"):j.bMac?r.push("Mac"):j.bLinux?r.push("Linux"):j.bAndroid?r.push("Android"):j.bChromeOS?r.push("ChromeOS"):j.bHarmonyOS?r.push("HarmonyOS"):Mn.bMobile?r.push("Mobile OS"):F.navInfo.bEmbed&&r.push("Embed OS"),r.join(" ")};function pa(r){var i,a,s=be.licenseServer;if(s&&s.length>0)for(i=0;i<s.length;i++)v.endsWith(a=s[i],"/")||(s[i]=a+"/");var u={dm:location.origin?v.startsWith(location.origin,"http")?location.origin:"https://localhost":v.startsWith(location.href,"http")?location.href:"https://localhost",lf:W.localforage,btoa:v.btoa,atob:v.atob,sutlcb:function(){v.isFunction(Le.lonsend)&&Le.lonsend()},fol:Le.OnFirstOffline,dwt:!0};if(u.feab=r==Le.EnumInstance.dwt_browser||r==Le.EnumInstance.dbr?Le.lfeab_wasm:Le.lfeab_ax,!j.bIE&&be.ltsDebug&&(u.debugLog=console.log),F.LTS&&F.LTS._)return F.LTS._.createLtsInstance(u);var l={},d=function(){return W.Promise.reject({code:-2446,message:"The dynamsoft.lts.js load failed."})};return l.i=d,l.s=d,l.u=d,l.caret=d,l}function uv(r,i){var a=i??"",s=Qn(r),u=s.get_enumDeploymentType();if(Le.lclex(),s.get_ar()&&s.get_cu())return W.Promise.resolve({ar:s.get_ar(),cu:s.get_cu()});var l={pd:Le.lgpd(r),v:Vw(),os:Le.lgcb(),fn:Le.DeviceFriendlyName||"",ls:be.licenseServer,sp:be.sessionPassword,l:Ye.getLTSLicense(),mnet:function(){return s.get_maxExpiredTime()},mxet:function(){return s.get_minExpiredTime()},fol:Le.OnFirstOffline};return l.dt=s.get_deploymentType(),u==Le.EnumInstance.dwt_desktop?l.lsu=s.get_cu():u==Le.EnumInstance.dbr||(l.dwt=!0,""!=s.get_cu()&&(l.lsu=s.get_cu()),l.updateLicense=function(d){s.set_ar(d.ar),s.get_cu()||s.set_cu(d.cu),Le.lsendUpdateEvt(u,a)}),s.get_ltsInstance(pa).i(l).then(function(d){return s.get_ar()||s.set_ar(d.ar),s.get_cu()||s.set_cu(d.cu),d})}function Bu(){return Date.now()}function Gc(r){var i=r?new Date(r):new Date,a="yyyy-MM-ddTHH:mm:ss.SSSZ",s={"M+":i.getUTCMonth()+1,"d+":i.getUTCDate(),"H+":i.getUTCHours(),"h+":i.getUTCHours()%12||12,"m+":i.getUTCMinutes(),"s+":i.getUTCSeconds(),"q+":Math.floor((i.getUTCMonth()+3)/3),"S+":i.getUTCMilliseconds()};for(var u in/(y+)/.test(a)&&(a=a.replace(RegExp.$1,(i.getUTCFullYear()+"").substr(4-RegExp.$1.length))),s)new RegExp("("+u+")").test(a)&&(a=a.replace(RegExp.$1,1==RegExp.$1.length?s[u]:("000"+s[u]).substr(("000"+s[u]).length-RegExp.$1.length)));return a}function jw(r,i){var a;r.__licenseInfo=i,(a=r).__calic||(a.__calic=a.__licenseInfo)}function Hw(r){var i=F.DWT.licenseException;i.code=r.code,i.message=r.message,r&&(IV(r),r instanceof Error?v.error(r):v.error(v.stringify(r)))}function IV(r){v.isFunction(F.DWT.OnWebTwainError)?F.DWT.OnWebTwainError(r):v.isFunction(window.Dynamsoft_OnError)&&window.Dynamsoft_OnError(r)}function Gw(r){return r==dr.LicenseExpiredForDLS||r==dr.LicenseNoCoreForDLS||r==dr.LicenseNoCore||r==dr.LicenseInvalid||r==dr.LicenseExpired||r==dr.LicenseParseFailed||r==dr.LicenseIsFuture||r==dr.LicenseVersionNotCurrent}function TV(r){return r==dr.LicenseExpired}function zw(r){var s,u,i=0,a=r.message;v.isNumber(r.code)?i=r.code:v.isString(a)&&(i=-1),0!=i&&(s=i,u=a,v.isFunction(F.OnLicenseError)&&F.OnLicenseError(u,s))}function CV(r){zw($t(r))}Le.lgpd=function(r){return j.bWin&&r==Le.EnumInstance.dwt_desktop?"dwt|dbr":"dwt"},Le.lglic=uv,Le.lgbuuid=function(){return""},Le.lshow=function(){return{t:qa,t2:Fi,m:v.stringify(Ls)}},Le.lgct=function(r){switch(r){case 0:return"3011";case 1:return"3012";case 2:return"3014";case 3:return"3013";case 4:return"3015";case 14:return"3016";case 3001:return"3001";case 3002:return"3002";case 3003:return"3003";case 3004:return"3004";case 3005:return"3005";case 3006:return"3006";case 3007:return"3007";case 3008:return"3008";case 3009:return"3009";case 5001:return"5001";case 4001:return"4001";case 4002:return"4002";case 4003:return"4003"}return""},Le.lcvrf=function(r){r&&setTimeout(function(){Le.lcvrf_(r)},1)},Le.lcvrf_=function(r){var i;i=Le.EnumInstance.dwt_desktop;var a,s=Le.DeviceFriendlyName||"",u=Le.lgcb(),l=Qn(i),d={hs:yV(),og:SV(),cu:l.get_cu(),fn:s,cw:"",os:u,v:Vw(),dt:l.get_deploymentType(),ed:"js"},f=function(S,I){var b,D,R=0;if(v.isString(S)&&""!=S&&"{}"!=S&&I&&v.isArray(I)&&!(I.length<1)){if(D=Qn(I[0]),b=v.parse(S),Le.lclex(),0==Fi){var L=Bu(),x="";Fi=L,qa=Gc(L),Ls={},R=0,v.each(b,function(U,Y){(Y<R||0==R)&&(R=Y,x=U)}),R>0&&D.get_ltsInstance(pa).s(be.licenseServer,x,R,!0).then(function(){},function(U){})}v.each(b,function(U,Y){var Z=!1,oe=parseInt(Y);oe>0&&oe!=R&&(oe+18e4<Bu()&&(Z=!0),D.get_ltsInstance(pa).s(be.licenseServer,U,Y,Z).then(function(){},function(se){}))})}};if(d.pd=Le.lgpd(i),a=v.stringify(d),!r._bAx){var g="GetBuffer",_=we(v.replaceAll(a,'"','\\"')),T={cmd:g,cmdId:pp(),sFun:f,fFun:function(){},params:[i]};return r._innerSendByWS(g,_,T,null,!0)}f(r.GetBuffer(a),[i,""])},Le.lavrf=function(r,i,a,s){var u=1;if(""!=r){i>1&&(u=i);var l=Bu();if(Fi>0&&Fi+18e4<l){Bd?(Ls={},Le.lavrf__unload()):Le.lavrf__(!0,a,s);var d=Bu()+1;Fi=d,qa=Gc(d),Ls={}}gp=!0,Bd=!1,Ls[r]?Ls[r]+=u:Ls[r]=u,0==Fi&&Le.lavrf__(!0,a,s)}},Le.lavrf_=function(r,i,a){if(gp){var s=1;r&&(s=r),setTimeout(function(){Le.lavrf__(!1,i,a)},s)}},Le.lavrf__=function(r,i,a){var s,l,d=Bu(),f=!1,g=!!r,_=0,T=i;v.isUndefined(T)&&(T=Le.EnumInstance.dwt_desktop),l=Qn(T),gp=!1,0==Fi&&(f=!0,Fi=d,qa=Gc(d)),s=Fi;var S={};S.ut=qa;var I={};if(v.each(Ls,function(U,Y){I[Y]=U,U>0&&_++}),S.cts=I,g||s+18e4<d){g=!0;var b=Bu()+1;if(Fi=b,qa=Gc(b),Ls={},Bd=!1,0==_)return}else{if(0==_)return;Bd=!0}S.dur=f?1:180;var D,R=Le.DeviceFriendlyName||"",L=Le.lgcb(),x={hs:yV(),og:SV(),cu:l.get_cu(),fn:R,cw:"",os:L,v:Vw(),dt:l.get_deploymentType(),ed:"js",rcs:[S]};x.product=Le.lgpd(i),D=v.stringify(x),be.ltsDebug&&Gc(),Le.lclex(),l.get_ltsInstance(pa).s(be.licenseServer,D,""+s,g).then(function(){},function(U){})},Le.lavrf__unload=function(){var r,i=Bu(),a=Qn(Le.EnumInstance.dwt_desktop),s=Qn(Le.EnumInstance.dbr);gp=!1,0==Fi&&(Fi=i,qa=Gc(i)),r=Fi;var u=Bu()+1;Fi=u,qa=Gc(u),Ls={},Bd=!1,r+=1,Le.lclex(),a.inited_ltsInstance()&&a.get_ltsInstance(pa).s(be.licenseServer,!1,""+r,!0).then(function(){},function(l){}),s.inited_ltsInstance()&&s.get_ltsInstance(pa).s(be.licenseServer,!1,""+r,!0).then(function(){},function(l){})},Le.lclex=function(){var r=Le.licenseException;r.code=0,r.message="",r.httpResponse="",r.fromLTS=!1},Le.li=function(r,i){var a;return r.axInstance&&(Le.axInstance=r.axInstance,Le.axInstance)?(a=Le.axInstance.GetUUID(),be.ltsDebug&&v.log("ActiveX cu: "+a),Qn(r.instanceMode).set_cu(a),a):Qn(r.instanceMode).get_cu()},Le.lfeab_ax=function(r){return new W.Promise(function(i,a){var s="";if(Le.axInstance)try{s=Le.axInstance.Encrypt(r,0)}catch{}i(s)})},Le.lfeab_wasm=function(r){return W.Promise.resolve("")},Le.lwsproc=function(r,i){try{r=v.parse(r)}catch(a){return void(i.fFun&&i.fFun(a))}"GetBuffer"==r.method?i.sFun(i.sFun&&r.result.length>0?r.result[0]:"",i.params):i.sFun&&i.sFun(r)},Le.lsexp=function(r,i,a){var s,u=i;if(3==(s=(u=v.replaceAll(u,"/","-")).split("-")).length){var l=s[0],d=s[1],f=s[2];d.length<2&&(d=(d="00"+d).substr(d.length-2)),f.length<2&&(f=(f="00"+f).substr(f.length-2)),u=[l,d,f].join("-")}var g=[u,"T23:59:59.999Z"].join("");Qn(r).set_minExpiredTime(g),Qn(r).set_maxExpiredTime(g)},Le.lunload=function(){Le.lavrf__unload();var r=Qn(Le.EnumInstance.dwt_desktop),i=Qn(Le.EnumInstance.dbr);r.clearData(),i.clearData(),Fi=0,qa=v.nil,Ls={},Bd=!1,gp=!1,mp=!1,Uw=!1,_p=!1,Le.lclex(),Le.bLTSOnline=!0,Le.axInstance=v.nil,Le.lOnUpdateDWObj=[]},Le.lcexp=function(r,i){return Qn(r).get_ltsInstance(pa).caret().then(function(){return!1},function(a){var s=Le.licenseException,u="";return a instanceof Error||"message"in a?u=a.message:v.isString(a)&&(u=a),Le.lsetException(-2445,u,!1),Uw||(Uw=!0,v.error(u),F.OnLTSLicenseError&&F.OnLTSLicenseError(Ye.getPublicLicenseContent(s.message),s.code)),!0})},Le.OnLicenseException=function(){var r=Le.licenseException,i=r.message;if(v.isString(i)&&(i.indexOf("Error Code")>-1?i=v.replaceAll(i,"Error Code","error code"):i.indexOf("Error code")>-1&&(i=v.replaceAll(i,"Error code","error code"))),i.indexOf("(https://www.dynamsoft.com/purchase-center/)")>-1&&(i=i.replace("(https://www.dynamsoft.com/purchase-center/)","(https://www.dynamsoft.com/store/dynamic-web-twain/)"),r.message=i),i.indexOf("error code:")>-1){var a=i.substr(0,i.indexOf("message")),s=i.substr(i.indexOf("message"));a.indexOf("{")>-1&&(a=a.substr(a.indexOf("{")+1)),s.indexOf("}")>-1&&(s=s.substr(0,s.indexOf("}"))),a=v.replaceAll(a,"error code:",""),s=v.replaceAll(s,"message: ",""),Le.lsetException(parseInt(a),s,!0),v.error(s),F.OnLTSLicenseError&&F.OnLTSLicenseError(Ye.getPublicLicenseContent(i),r.code)}else{if(!r.code){var u=-2440;i.indexOf("timed out")>-1||i.indexOf("timeout")>-1?u=-2441:(i.indexOf("access-control-allow-origin")>-1||i.indexOf("cors")>-1)&&(u=-2443),Le.lsetException(u,i,!0)}if(v.error(r.message),-2446==r.code)return;F.OnLTSLicenseError&&F.OnLTSLicenseError(Ye.getPublicLicenseContent(r.message),r.code)}},Le.lol=function(){return Le.bLTSOnline},Le.OnFirstOffline=function(r){Le.bLTSOnline=!1},Le.lpubdlg=function(r,i){if(v.isString(r)&&""!=r){if(r=v.atob(r),1==i)return mp||(mp=!0,F.OnLTSPublicLicenseWarning&&F.OnLTSPublicLicenseWarning(Ye.getPublicLicenseContent(r))),!0;2==i&&(mp||(mp=!0))}return!1},Le.lcheckLic=function(r,i,a){var s=!1;if(i){if(v.isArray(i.Detail)&&i.Detail.length>0)return Le.lsexp(r,i.Detail[0].ExpireDate,a),Le.lcexp(r,a).then(function(l){var d=!1;l?d=!0:1!=i.Trial&&2!=i.Trial||(d=Le.lpubdlg(i.Message,i.Trial)),d||Le.bLTSOnline||_p||(_p=!0,F.OnLTSConnectionWarning&&F.OnLTSConnectionWarning())});1!=i.Trial&&2!=i.Trial||(s=Le.lpubdlg(i.Message,i.Trial))}return s||Le.bLTSOnline||_p||(_p=!0,F.OnLTSConnectionWarning&&F.OnLTSConnectionWarning()),W.Promise.resolve()},Le.lisValidID=function(r){if(v.isString(r)&&""!=r)return!0;var a=Le.licenseException;return Le.lsetException(-2447,"Failed to generate an ID for your device to license it: not enough permission.",!0),v.error(a.message),F.OnLTSLicenseError&&F.OnLTSLicenseError(a.message,a.code),!1},Le.lsetException=function(r,i,a){var s=Le.licenseException;s.code=r,s.message=i,v.isUndefined(a)||(s.fromLTS=a)},Le.lgcuid=function(r){var i=F.DWT.li({instanceMode:r},"");return i?W.Promise.resolve(i):Qn(r).get_ltsInstance(pa).u().then(function(a){return F.DWT.lsmid(a,""),F.DWT.lsmid2b(a),a})};var Jo,Kw=c(function r(){n(this,r)});function $w(r){var i=new Kw;return i.server=r.server,i.normal=!0,r.attrs&&(i.attrs=v.clone(r.attrs)),i}function qw(r,i,a){if(v.isString(r)&&(r.indexOf("Function not found")>0||r.indexOf("Version not found")>0))i&&i(r);else{var s=r.data;if("object"===e(s))return s=null,r=null,void(a&&a());var u=s.replace(/\0/g,"");try{i&&i(u)}catch{v.log(s),a&&a()}s=null,r=null}}function Qw(r,i){r&&r.readyState!=Jo.CLOSING&&r.readyState!=Jo.CLOSED?r.readyState==Jo.CONNECTING?(r.onerror=function(a){a&&v.log("websocket error: "+a),r._reject&&(r._reject(),r._reject=null),r.close()},r.onclose=function(a){r.onclose=null,r.onerror=null,r.onmessage=null,r.onopen=null,r._reject=null},r.onopen=function(){r.readyState==Jo.OPEN?(r.onopen=null,r.send(i)):r.readyState==Jo.CONNECTING&&(r.onopen?setTimeout(r.onopen,100):r._reject&&(r._reject(),r._reject=null))}):r.readyState==Jo.OPEN&&(r.onopen=null,r.send(i)):r._reject&&(r._reject(),r._reject=null)}function bV(r,i,a){var s=a;return s||(s=j.bSSL?"https://":"http://"),[s,r,":",i,"/"].join("")}!function(r){r.CONNECTING=0,r.OPEN=1,r.CLOSING=2,r.CLOSED=3}(Jo||(Jo={}));var gi,Qa=function(){function r(){n(this,r)}return c(r,null,[{key:"postStringDataByWS",value:function(i,a){return new W.Promise(function(s,u){i.onmessage=function(l){qw(l,function(d){s(d),i.close(),i=null},function(){u(),i.close(),i=null})},i._reject=u,Qw(i,a)})}},{key:"postStringDataByWSUrl",value:function(i,a){var s=new W.Promise(function(u,l){var d=r.newWebsocket(i,!1);d.onmessage=function(f){qw(f,function(g){u(g),d.close(),d=null},function(){l(),d.close(),d=null})},d._reject=l,Qw(d,a)});return j.bEdge&&s.catch(function(){return new W.Promise(function(u,l){var d=r.newWebsocket(i,!0);d.onmessage=function(f){qw(f,function(g){u(g),d.close(),d=null},function(){l(),d.close(),d=null})},d._reject=l,Qw(d,a)})}),s}},{key:"newWebsocket",value:function(i,a){var s,u=vt.wsProtocol,l=window.MozWebSocket;if(void 0!==l)s=u?new l(i,u):new l(i);else{var d=window.WebSocket;if(a){var f=window,g=parent;try{for(;f!=g&&g.WebSocket;)d=g.WebSocket,f=g.window,g=g.parent}catch{d=window.WebSocket}}s=u?new d(i,u):new d(i)}return s}},{key:"getWsUrl",value:function(i,a,s){var u=s;return void 0===u&&(u=j.bSSL),bV(i,a,u?"wss://":"ws://")}},{key:"getDDMUrl",value:function(i,a,s){var u,l,d="/";return v.startsWith(i,"https://")?u=!0:v.startsWith(i,"http://")?u=!1:i=(u=W.detect.ssl)?"https://"+i:"http://"+i,l=u?"18626/":"18625/",v.endsWith(i,"/")&&(d=""),a?[i,d,"ddm/",l,s].join(""):[i,d,s].join("")}},{key:"getModuleUrl",value:function(i){var a;return a=bV(Ri(),j.bSSL?vt.SSLPort:vt.Port),i?a+i:a}}]),r}();F.DWT.NetManager=Qa,function(r){r.ST_UNKNOWN=0,r.ST_TWAIN_DIRECT=1,r.ST_DYNAMSOFT_SERVICE=2,r.ST_ESCL=3,r.ST_WIFI_DIRECT=4}(gi||(gi={}));var zc,Xt,Bfe=function(){function r(i){n(this,r);var se,k,a=this;if(a._id=i.id,a._clientId=v.getRandom(),a._uuidForActiveUI=null,a._bReady=ve,a._destroy=ve,a._bMustUpgradeService=ve,a._wsClient=null,a._wsRetry=0,a._wsFailedTimes=0,a._bConnecting=ve,a._bNoMask=ve,a._bNotShowMessage=ve,a.__serverPlatform=lt.enumWindow,a.__productKey="",a.__licenseInfo=null,a._reconnectTimeSpan=kn.RemoteReconnectTimeSpan,a._reconnectShortSpan=300,a._reconnectShortSpanTimes=5,a._bIfShowProgressBar=Ne,a.__IfShowCancelDialogWhenImageTransfer=Ne,this._bLicenseErrorDispose=!0,i.dmService){var s,u,l,d,f,g,_=$w(i.dmService),T="/",S="";u=_.server;var I=new Fb(i.dmService.server),b=I.scheme;b&&(b=b.toLowerCase()),"https"==b?(s=!0,l=u.substring(8)):"http"==b?(s=!1,l=u.substring(7)):(l=u,u=(s=W.detect.ssl)?"https://"+u:"http://"+u),a._bRemoteMode=oo(I.hostname||I.scheme)?ve:Ne,v.endsWith(u,"/")&&(T="");var D=_.attrs;if(D){var R,L;d=(null===(R=D)||void 0===R?void 0:R.UUID)||"";var U,x=(null===(L=D.modules)||void 0===L?void 0:L.length)||0;""!=d&&x>0&&(s?x>1&&x>1+(U=D.modules[1])+2&&(f=D.modules[1+U+2]):x>2&&(f=D.modules[2]),v.endsWith(f,"/")&&(T=""),S=[d,"/",f,"/"].join(""))}else D={UUID:"",service_type:gi.ST_DYNAMSOFT_SERVICE};g=[u,T,S].join(""),D.url=g,a._serverInfo=new Fd([l,T,S].join(""),null,s,!0,vt.wsProtocol),a._httpUrl=g,a._dmService=_}else{var Y,Z=i.port,oe=W.detect.ssl;a._bRemoteMode=!oo(Y=i.host?i.host:Ri()),Z||(Z=oe?vt.SSLPort:vt.Port),a._serverInfo=new Fd(Y,Z,oe,!0,vt.wsProtocol),a._httpUrl=((k=(se=a._serverInfo).server)||(k=Ri()),se.ssl?["https://",k,":",se.port,"/"].join(""):["http://",k,":",se.port,"/"].join("")),a._dmService={server:a._httpUrl,attrs:{url:a._httpUrl,UUID:"",service_type:gi.ST_DYNAMSOFT_SERVICE},normal:!0}}}return c(r,[{key:"_resetErr",value:function(){this._errorCode=0,this._errorString="";var i=F.DWT.licenseException;i.code=0,i.message=""}},{key:"dispose",value:function(){this._bReady=ve,this._destroy=Ne}},{key:"isDestroy",get:function(){return this._destroy}}]),r}(),Xo=c(function r(){n(this,r)});function wV(r,i){var a,s=[],u=i;if(v.isString(u)&&(u=v.parse(u)),v.isArray(u))for(a=0;a<u.length;a++){var l=jfe(u[a]);s.push(l)}for(a=0;a<s.length;a++){var d=s[a],f=d.deviceType;d.strDevice=v.stringify(d),d.name&&(d.name=v.base64.decode(d.name)),f&Nfe&&d.deviceInfo&&Vfe(d.deviceInfo),d.serviceInfo=r?._dmService,Ufe(d,r?._dmService)}return s}function Ufe(r,i){var a,s=r.name,u="",l=r.deviceType;l==ze.TWAINSCANNER?a="":l==ze.TWAINX64SCANNER?a="Twain64-":l==ze.WIASCANNER?a="WIA-":l==ze.WIATWAINSCANNER?(s=v.replaceAll(s,"WIA-",""),a="WIATWAIN-"):a=l==ze.ICASCANNER?"ICA-":l==ze.SANESCANNER?"Sane-":l==ze.ESCLSCANNER?"eSCL-":"",i&&i.attrs&&i.attrs.ty&&(u=" on ["+i.attrs.ty+"]"),r.displayName=[a,s,u].join("")}function Vfe(r){r.ProductName&&(r.ProductName=v.base64.decode(r.ProductName)),r.ProductFamily&&(r.ProductFamily=v.base64.decode(r.ProductFamily)),r.Manufacturer&&(r.Manufacturer=v.base64.decode(r.Manufacturer)),r.Version&&r.Version.Info&&(r.Version.Info=v.base64.decode(r.Version.Info))}function jfe(r){var i=new Xo;return r.deviceInfo&&(i.deviceInfo=v.clone(r.deviceInfo)),r.deviceType&&(i.deviceType=v.clone(r.deviceType)),r.displayName&&(i.displayName=v.clone(r.displayName)),r.name&&(i.name=v.clone(r.name)),r.serviceInfo&&(i.serviceInfo=$w(r.serviceInfo)),i}function Hfe(r){var i=r||{};i.basePath&&(Mn.basePath=i.basePath),i.pathType&&(Mn.pathType=i.pathType),v.isUndefined(i.bDiscardBlankImage)||(Mn.bDiscardBlankImage=i.bDiscardBlankImage),i.detectType&&(W.detect.detectType=i.detectType),i.tryTimes&&(W.detect.tryTimes=i.tryTimes);var a=F.DWT.RemoteScanConfig;a||(F.DWT.RemoteScanConfig=a={sessionTimeout:300,keepAwake:!0}),void 0===a.keepAwake&&(a.keepAwake=!0)}function DV(){return!!v.getWakeLock()}function cv(r){return EV.apply(this,arguments)}function EV(){return(EV=Ae(A.mark(function r(i){var a;return A.wrap(function(s){for(;;)switch(s.prev=s.next){case 0:if(a=v.getWakeLock(),!i){s.next=7;break}if(null!=a){s.next=5;break}return s.next=5,v.toggleWakeLock();case 5:s.next=10;break;case 7:if(!a){s.next=10;break}return s.next=10,v.toggleWakeLock();case 10:case"end":return s.stop()}},r)}))).apply(this,arguments)}function AV(r){return PV.apply(this,arguments)}function PV(){return(PV=Ae(A.mark(function r(i){var a;return A.wrap(function(s){for(;;)switch(s.prev=s.next){case 0:i&&((a=document.createElement("style")).innerHTML=['@import url("',F.DWT.ResourcesPath,"/src/dynamsoft.webtwain.viewer.css",W.timestamp,'")'].join(""),i.appendChild(a));case 1:case"end":return s.stop()}},r)}))).apply(this,arguments)}function RV(r){var i="application/octet-stream";switch(r){case Xt.IT_BMP:i="image/bmp";break;case Xt.IT_JPG:i="image/jpeg";break;case Xt.IT_TIF:i="image/tiff";break;case Xt.IT_PNG:i="image/png";break;case Xt.IT_PDF:i="application/pdf";break;case Xt.IT_J2K:i="image/jp2"}return i}(function(r){r.SMF_NAME=1,r.SMF_TWAINVERSION=2,r.SMF_TWAINPROTOCOL=4,r.SMF_ICAUUID=8,r.SMF_ICAMODULEVERSION=16,r.SMF_ICALOCATIONTYPE=32})(zc||(zc={})),function(r){r.IT_BMP=0,r.IT_JPG=1,r.IT_TIF=2,r.IT_PNG=3,r.IT_PDF=4,r.IT_ALL=5,r.IT_MULTIPAGE_PDF=7,r.IT_MULTIPAGE_TIF=8,r.IT_J2K=14}(Xt||(Xt={}));var Zo={isSupportLS:function(){var r=!1;if(!j.bEdge||!j.bFileSystem)try{r=!!window.localStorage}catch{}return r},item:function(r,i,a){var s=null;return this.isSupportLS()?(i?(localStorage.setItem(r,i),s=i):s=localStorage.getItem(r),null===s?a:s):a},removeItem:function(r){return!!this.isSupportLS()&&(localStorage.removeItem(r),!0)}};function xV(r,i){(function(a,s){if(s.has(a))throw new TypeError("Cannot initialize the same private elements twice on an object")})(r,i),i.add(r)}function Yw(r,i,a){return i.has(r),a}var FV=new WeakSet,Jw=new WeakSet,uo=function(r){di(se,r);var i,a,s,u,l,d,f,g,_,T,S,I,b,D,R,L,x,U,Y,Z,oe=function Gfe(r){var i=function(){if(typeof Reflect>"u"||!Reflect.construct||Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch{return!1}}();return function(){var a,s=yt(r);if(i){var u=yt(this).constructor;a=Reflect.construct(s,arguments,u)}else a=s.apply(this,arguments);return fi(this,a)}}(se);function se(k){var E;return n(this,se),xV(pt(E=oe.call(this,k)),Jw),xV(pt(E),FV),E._acquireDivEL=null,E.__serverId="",E.__bAcquireImageNow=ve,E._blts=li(),E._b64bit=vt.b64bit,E._logLevel=0,E._bServerAlwaysFocusOnPopupWindow=Ne,E._bPageFocus=Ne,E.__bOpenFileNow=ve,E}return c(se,[{key:"_isValid",value:function(){return!this._destroy||(oU(this),!1)}},{key:"_connnect",value:(Z=Ae(A.mark(function k(){var E;return A.wrap(function(M){for(;;)switch(M.prev=M.next){case 0:return E=this,M.abrupt("return",new W.Promise(function(G,V){F.DWT.CheckConnectToTheService(E._serverInfo.server,E._serverInfo.port,G,V)}));case 2:case"end":return M.stop()}},k,this)})),function(){return Z.apply(this,arguments)})},{key:"_waitForConnect",value:function(){var k=this;return k._wsRetry=0,k._bReady?W.Promise.resolve():new W.Promise(function(E,M){k._wsCheckResolve=E,k._wsCheckReject=M,OV(k)})}},{key:"_getWSCallback",value:function(){return Kfe}},{key:"_getWSContextData",value:function(){return""}},{key:"_additionalWSCallback",value:function(k,E,M,G){"GetLicenseInfo"==k?E._lic_callback=function(V){return M(V,Gn.HANDLE_PROCESSED_MESSAGE,"0",G)}:"ConvertToBlob"==k&&E._blob_callbacks.push(function(V){return M(V,Gn.HANDLE_RAW_MESSAGE,"0",G)})}},{key:"_innerSendByWS",value:function(k,E,M,G,V){var J,Q,te,X,ae=this,he=this._getWSCallback();M&&M.cmdId?(te=Xw(ae._clientId,J=M.cmdId),X=Xw(ae._clientId,"")):(J=0,te=0,X=0);var ye=Kc(ae._clientId,k,E,J),Ce=ae._wsClient;Q={client:Ce,userData:{stwain:ae,command:M},taskId:J,eventTaskId:te,lastEventTaskId:X};var Ke,Ze,dt,ft,ke,Te,Oe,Me,et=0;if(!V){try{Ce.request(ye,he,Q)}catch(ln){v.log(ln)}return ve}for(dt=new ArrayBuffer(12),G&&(et=G instanceof Blob?G.size:G instanceof ArrayBuffer||G instanceof Uint8Array?G.byteLength:G instanceof Array?G.length:G.size||G.byteLength||G.length),Ze=(Ke=(Oe=new Blob([ye])).size)+et,ft=new DataView(dt),Te=0;Te<8&&Ze;Te++)ft.setUint8(Te,Ze%256),Ze=Math.floor(Ze/256);for(Te=0;Te<4&&Ke;Te++)ft.setUint8(8+Te,Ke%256),Ke=Math.floor(Ke/256);return ke=new Blob([dt,Oe]),Me=Ce.request(ke,he,Q),this._additionalWSCallback(k,Ce,he,Q),et>0&&(Me=Ce.request(G,he,Q)),dt=null,Oe=null,ke=null,ft=null,G=null,Me}},{key:"_sendDataConnectWithSocket",value:function(k,E,M,G){var V=this;return new W.Promise(function(J,Q){V._sendData(k,E,!0,function(te){var X=!1;try{X=v.isString(te)?v.parse(te):te}catch{}if(V._resetErr(),X){if(X instanceof Blob||$a(X))return void J(X);Qo(X)&&(V._errorCode=X.exception,V._errorString=X.description)}J(G?X:X.result)},function(te){Q({code:V._errorCode,message:V._getErrorString()})})})}},{key:"_sendDataByHttpAsync",value:function(k,E,M,G,V){var J,Q=this;if(Q._resetErr(),!Q._isValid())return W.Promise.reject({code:Q._errorCode,message:Q._getErrorString()});if(se.isServerInvalid(Q))return V?W.Promise.reject({code:Q._errorCode,message:Q._getErrorString()}):Q._waitForConnect().then(function(){return Q._sendDataByHttpAsync(k,E,M)});if(F.DWT.ConnectWithSocket)return Q._sendDataConnectWithSocket(k,E,M,G);J={method:"post",async:!0,body:Kc(Q._clientId,k,E,0),dataType:M??"text"};var te=null,X=v.guid();return Q._bIfShowProgressBar&&(te=W.progressContext),sw(te,X)([Q._httpUrl,"fa/",k].join(""),J).then(function(ae){var he=!1;try{he=v.isString(ae)?v.parse(ae):ae}catch{}if(he){if(he instanceof Blob||$a(he))return he;if(!Qo(he))return Q._resetErr(),G?he:he.result;Q._errorCode=he.exception,Q._errorString=he.description}else Yb(Q);throw{code:Q._errorCode,message:Q._getErrorString()}},function(ae){if(Q._errorCode=ae.code,Q._errorString=ae.message,!W.page.bUnload)throw ae})}},{key:"_sendData",value:function(k,E,M,G,V){var J=this,Q=null,te=null,X=!1,ae=!0;if(!J._destroy){if("ActiveUI"==k?ae=!1:X=se.isServerInvalid(J),X)return J._waitForConnect().then(function(){J._sendData(k,E,M,G,V)}).catch(function(Ke){v.isFunction(V)&&V(Ke.code,Ke.message)});var he;v.isFunction(G)&&(te=G),v.isFunction(V)&&(Q=V),he="GetLicenseInfo"==k||"ConvertToBlob"==k||"Heartbeat"==k?0:pp();var ye=this._getWSContextData();return J._innerSendByWS(k,E,{cmd:k,cmdId:he,sFun:te,fFun:Q,contextData:ye,rawData:null!=M&&M},null,ae)}}},{key:"_innerFunV2",value:(Y=Ae(A.mark(function k(E,M,G){var V,J;return A.wrap(function(Q){for(;;)switch(Q.prev=Q.next){case 0:if(V=this,!G){Q.next=7;break}return Q.next=4,V._sendDataConnectWithSocket(E,M,"json",!0);case 4:J=Q.sent,Q.next=10;break;case 7:return Q.next=9,V._sendDataByHttpAsync(E,M,"json",!0);case 9:J=Q.sent;case 10:if(!(J&&v.isArray(J.result)&&J.result.length>0)){Q.next=12;break}return Q.abrupt("return",J.result[0]);case 12:return Q.abrupt("return",J);case 13:case"end":return Q.stop()}},k,this)})),function(k,E,M){return Y.apply(this,arguments)})},{key:"_OnReady",value:(U=Ae(A.mark(function k(){var E,M;return A.wrap(function(G){for(;;)switch(G.prev=G.next){case 0:if((E=this)._wsRetry=0,E._wsFailedTimes=0,W.detect.starting=!1,E._bRemoteMode||(W.detect.bOK=!0),E._bReady=!0,null!==(M=E._wsClient.ws)){G.next=9;break}return G.abrupt("return");case 9:M.onopen=null,E._wsClient.addEvent("close",E._clientId,function(V){V&&v.log("websocket close: "+V),E.__bAcquireImageNow=!1,E._OnWSClose(V)}),E._wsClient.addEvent("error",E._clientId,function(V){V&&v.log("websocket error: "+V),E.__bAcquireImageNow=!1,E._OnWSError(V)}),E._wsClient.addEvent("timeout",E._clientId,function(V){V&&v.log("websocket timeout: "+V),E._OnWSTimeout(V)});case 13:case"end":return G.stop()}},k,this)})),function(){return U.apply(this,arguments)})},{key:"getServiceInfo",value:function(){return this._dmService}},{key:"_OnWSClose",value:function(k){var E,M,G,V,J=this;if(J._bReady=!1,J._wsRetry=0,J._bRemoteMode&&(E=null!==(M=null===(G=J.getServiceInfo())||void 0===G||null===(V=G.attrs)||void 0===V?void 0:V.name)&&void 0!==M?M:""),Lc(J,E),J.__closeRemoteScanUI(!0),J._heartBeatTimer&&(clearTimeout(J._heartBeatTimer),J._heartBeatTimer=null),J._bNoMask||(v.log("hideMask:websocket close--"+ha),Ow(),ha=0),J.__OnWSClose&&J.__OnWSClose(),J._wsFailedTimes<(J._bRemoteMode?kn.RemoteReconnectMaxTimes:kn.LocalReconnectMaxTimes)){var te=J._reconnectTimeSpan;J._wsFailedTimes<J._reconnectShortSpanTimes&&(te=J._reconnectShortSpan),J._heartBeatTimer=setTimeout(function(){se.startDWTReconnect(J)},te)}}},{key:"_OnWSError",value:function(k){var E=this;E._bReady=!1,E.__OnWSError&&E.__OnWSError()}},{key:"_OnWSTimeout",value:function(k){var E,M,G,V,J=this;if(J._bReady=!1,J._wsRetry=0,J._bRemoteMode&&(E=null!==(M=null===(G=J.getServiceInfo())||void 0===G||null===(V=G.attrs)||void 0===V?void 0:V.name)&&void 0!==M?M:""),Lc(J,E),J.__closeRemoteScanUI(!0),J._heartBeatTimer&&(clearTimeout(J._heartBeatTimer),J._heartBeatTimer=null),J._wsFailedTimes<(J._bRemoteMode?kn.RemoteReconnectMaxTimes:kn.LocalReconnectMaxTimes)){var te=J._reconnectTimeSpan;J._wsFailedTimes<J._reconnectShortSpanTimes&&(te=J._reconnectShortSpan),J._heartBeatTimer=setTimeout(function(){se.startDWTReconnect(J)},te)}}},{key:"__OnRecieveMsg",value:function(k,E){var M=this;if(k.event)return M._handleEvent(k,E.contextData);if(F.DWT.ConnectWithSocket){var G=k,V=E?.cmd;return"ActiveUI"==V||"VersionInfo"==V||"ConvertToBase64"==V||"ConvertToBlob"==V?E.sFun&&v.isArray(k.result)&&k.result.length>0?(E.sFun(k.result),!0):(E.fFun&&E.fFun(k.result),!1):(G=E.rawData?k:v.isArray(k.result)&&k.result.length>0?k.result[0]:k.result,E.sFun?E.sFun(G):E.fFun&&E.fFun(G),k=null,!0)}if(Qo(k)?(M._errorCode=k.exception,M._errorString=k.description):(M._errorCode=0,M._errorString=""),0==M._errorCode)return E.sFun&&v.isArray(k.result)&&k.result.length>0?(E.sFun(k.result),!0):(E.fFun(k.result),!0);var J=!1;E.fFun&&(J=E.fFun(M._errorString)),!J&&k.exception&&k.exception<0&&-2115!=k.exception&&v.isFunction(M.__OnPrintMsg)&&M.__OnPrintMsg(M._errorString)}},{key:"_handleOnBitmapChangedEvent",value:function(k,E){try{this._OnBitmapChanged(k.result,k,E)}catch(M){mn(M)}return Ne}},{key:"_handleEvent",value:function(k,E){var M=this,G=k.result[0],V=ve;return"OnBitmapChanged"==k.event?M._handleOnBitmapChangedEvent(k,E):(v.each($fe,function(J,Q){if(k.event===J){var te=["_",J].join("");return V=Ne,v.isFunction(M[te])&&M[te](k.result,k),ve}}),V?(v.log("handled event:"+k.event),v.each(qfe,function(J,Q){if(k.event===J)return v.log("sendback event:"+k.event),M._innerSendByWS(k.event,we(G),null,null,Ne),ve})):(v.each(W.Addon_Events,function(J,Q){if(k.event===J){var te=["_",J].join("");return V=Ne,v.isFunction(M[te])&&M[te](k.result),ve}}),V&&(v.log("handled addon event:"+k.event),v.each(W.Addon_Sendback_Events,function(J,Q){if(k.event===J)return v.log("sendback addon event:"+k.event),M._innerSendByWS(k.event,we(G),null,null,Ne),ve}))),V)}},{key:"_setProductKeyAsync",value:function(k){var E=this,M=k;return E._resetErr(),E._isValid()?v.isString(M)?Ye.isLicenseMixed(M,!1)?W.Promise.reject(F.DWT.licenseException):Ye.isLongKey(M)?Yw(E,FV,zfe).call(E,M).then(function(G){var V=G;if(!V||V.message)throw zo(E),V&&V.message&&(E._errorString=V.message),{code:E._errorCode,message:E._getErrorString()};return jw(E,V),V}):(zo(E),W.Promise.reject({code:E._errorCode,message:E._getErrorString()})):(zo(E),W.Promise.reject({code:E._errorCode,message:E._getErrorString()})):W.Promise.reject({code:E._errorCode,message:E._getErrorString()})}},{key:"_setLTSLic",value:function(k){var E=this,M=k;return E._resetErr(),!!E._isValid()&&(v.isString(M)?E._sendDataByHttpAsync("LTSLicense",we(M),null,!0).then(function(G){if(G){if(Qo(G))throw E._errorCode=G.exception,E._errorString=G.description,{code:E._errorCode,message:E._getErrorString()};var V="GetLicenseInfo";return F.DWT.ConnectWithSocket?E._sendDataConnectWithSocket(V,null,"json",!0):E._sendDataByHttpAsync(V,null,"json",!0)}throw zo(E),{code:E._errorCode,message:E._getErrorString()}}):(zo(E),W.Promise.reject({code:E._errorCode,message:E._getErrorString()})))}},{key:"_setLTSLicenseAsync",value:function(k){var E=this;return E._resetErr(),E._isValid()?v.isString(k)?E._setLTSLic(k).then(function(M){var G=M;if(!G||G.message)throw zo(E),G&&G.message&&(E._errorString=G.message),{code:E._errorCode,message:E._getErrorString()};return jw(E,G),E.__licenseInfo&&(E.__licenseInfo.LTS=!0),G}):(zo(E),W.Promise.reject({code:E._errorCode,message:E._getErrorString()})):W.Promise.reject({code:E._errorCode,message:E._getErrorString()})}},{key:"_innerActiveUI",value:(x=Ae(A.mark(function k(E){var M,G,V,J;return A.wrap(function(te){for(;;)switch(te.prev=te.next){case 0:return M=this,G=W.detect.ssl,V=Ade(),M._bRemoteMode||(V=5),J=E??"",te.next=5,new W.Promise(function(X,ae){M._sendData("ActiveUI",we(Mn.WSVersion,Mn.WSSession,1,J,G,1,V),!1,X,ae)});case 5:return M=null,te.abrupt("return",te.sent);case 8:case"end":return te.stop()}},k,this)})),function(k){return x.apply(this,arguments)})},{key:"_reconnected",value:(L=Ae(A.mark(function k(E){var M,G,V,J,Q,te,X,ae,he;return A.wrap(function(ye){for(;;)switch(ye.prev=ye.next){case 0:return(M=this)._wsFailedTimes=0,ye.next=4,M._innerActiveUI(M._uuidForActiveUI);case 4:if(V=!1,(G=ye.sent)&&(G.length>12?(M.__serverId=G[1],V=G[12]):G.length>8?(M.__serverId=G[1],V=G[8]):G.length>=2&&(M.__serverId=G[1])),M._bReady=!0,M._bRemoteMode||(W.detect.bOK=!0),W.detect.starting=!1,!V){ye.next=20;break}return ye.prev=11,ye.next=14,M._removeAllImagesAsync("ActiveUI",!1);case 14:ye.next=19;break;case 16:ye.prev=16,ye.t0=ye.catch(11),M._resetErr();case 19:Ee(M,-2614,"The Dynamsoft Service has been restarted.");case 20:if(ye.prev=20,!M._blts){ye.next=30;break}return J=M._bRemoteMode&&null!==(Q=null===(te=M._dmService)||void 0===te||null===(X=te.attrs)||void 0===X?void 0:X.UUID)&&void 0!==Q?Q:"",ye.next=25,uv(F.DWT.EnumInstance.dwt_desktop,J);case 25:return ae=ye.sent,ye.next=28,M._setLTSLicenseAsync(ae.ar);case 28:ye.next=33;break;case 30:return he=be.refProductKey,ye.next=33,M._setProductKeyAsync(he);case 33:ye.next=39;break;case 35:throw ye.prev=35,ye.t1=ye.catch(20),M._bRemoteMode&&sp(M,!1),{code:M._errorCode,message:M._getErrorString()};case 39:return ye.prev=39,M._bRemoteMode&&se.startHeartBeat(M),ye.finish(39);case 42:case"end":return ye.stop()}},k,this,[[11,16],[20,35,39,42]])})),function(k){return L.apply(this,arguments)})},{key:"_initRemoteDiv",value:function(){if(!this._acquireDivEL){var k=document.createElement("div");k.style.position="fixed",k.style.zIndex="510000",k.style.left="0",k.style.top="0";var E=document.createElement("img");E.className="ds-img-screen",k.appendChild(E),document.body.appendChild(k),this._acquireDivEL=k}}},{key:"getHeartBeatData",value:function(k){var E,M=Kc(this._clientId,k.cmd,null,k.cmdId),G=M.length,V=G,J=new ArrayBuffer(12+V),Q=new DataView(J);for(E=0;E<8&&V;E++)Q.setUint8(E,V%256),V=Math.floor(V/256);for(E=0;E<4&&G;E++)Q.setUint8(8+E,G%256),G=Math.floor(G/256);for(E=0;E<M.length;E++)Q.setUint8(12+E,M.charCodeAt(E));return J}},{key:"__closeRemoteScanUI",value:function(k){var E=this;if(E._acquireDivEL){var M=v.sizzle(".ds-img-screen");E._acquireDivEL.evtFun?(M&&M.length>0&&v.removeEventListener(M[0],"mouseup",E._acquireDivEL.evtFun),E._acquireDivEL.evtFun=null):M&&M.length>0&&v.removeEventListener(M[0],"mouseup"),M&&M.length>0&&(M[0].src=""),k&&(document.body.removeChild(E._acquireDivEL),E._acquireDivEL=null)}}},{key:"_removeImageByIdAsync",value:(R=Ae(A.mark(function k(E){var M;return A.wrap(function(G){for(;;)switch(G.prev=G.next){case 0:if((M=this)._resetErr(),M._isValid()){G.next=4;break}throw{code:M._errorCode,message:M._errorString};case 4:return G.next=6,M._innerFunV2("RemoveAllImages",we(E));case 6:return G.abrupt("return",G.sent);case 7:case"end":return G.stop()}},k,this)})),function(k){return R.apply(this,arguments)})},{key:"_removeAllImagesAsync",value:(D=Ae(A.mark(function k(E,M){var G;return A.wrap(function(V){for(;;)switch(V.prev=V.next){case 0:if((G=this)._resetErr(),G._isValid()){V.next=4;break}throw{code:G._errorCode,message:G._getErrorString()};case 4:return V.next=6,G._innerFunV2("RemoveAllImages");case 6:return V.abrupt("return",V.sent);case 7:case"end":return V.stop()}},k,this)})),function(k,E){return D.apply(this,arguments)})},{key:"_LicensePromptExpired",value:function(){}},{key:"_OnActiveUI",value:(b=Ae(A.mark(function k(E){var M,G,V,J,Q,te,X,ae,he,ye,Ce,Ke,Ze,dt,ft,ke,Te,Oe;return A.wrap(function(Me){for(;;)switch(Me.prev=Me.next){case 0:if(M=this,V=!1,E&&E.length>=6?(G=E[5],J=!1,Q=!1,te=0,E.length>12?(M._b64bit="64"==E[7],J=E[9],Q=E[10],te=E[11]):E.length>8&&(J=E[6],Q=E[7],te=E[8]),J?Q&&te&&(M._bRemoteMode=!0):M._bRemoteMode=!0,v.isString(G)&&("win"==G?M.__serverPlatform=lt.enumWindow:"linux"==G?M.__serverPlatform=lt.enumLinux:"mac"==G?M.__serverPlatform=lt.enumMac:"embed"==G?M.__serverPlatform=lt.enumEmbed:"chromeos"==G&&(M.__serverPlatform=lt.enumChromeOS))):V=!0,M._bMustUpgradeService=V,V){Me.next=65;break}if(An("Activating the WebTwain instance..."),X=!1,!M._blts){Me.next=43;break}return he=M._bRemoteMode&&null!==(ye=null===(Ce=M._dmService)||void 0===Ce||null===(Ke=Ce.attrs)||void 0===Ke?void 0:Ke.UUID)&&void 0!==ye?ye:"",Me.prev=10,Me.next=13,uv(F.DWT.EnumInstance.dwt_desktop,he);case 13:ae=Me.sent,Me.next=26;break;case 16:if(Me.prev=16,Me.t0=Me.catch(10),NV(M,Me.t0),!M._bLicenseErrorDispose){Me.next=24;break}throw M._bRemoteMode||(TV(M._errorCode)?this._LicensePromptExpired():CV(M)),{code:M._errorCode,message:M._getErrorString()};case 24:v.warn(M._getErrorString()),ae=null;case 26:if(An(HU),!ae){Me.next=40;break}return Me.next=30,M._setLTSLicenseAsync(ae.ar);case 30:return Ze=Me.sent,F.DWT.laddDWTObj(M),he="",M._bRemoteMode&&(he=null!==(dt=null===(ft=M._dmService)||void 0===ft||null===(ke=ft.attrs)||void 0===ke?void 0:ke.UUID)&&void 0!==dt?dt:""),An(GU),Me.next=37,F.DWT.lcheckLic(F.DWT.EnumInstance.dwt_desktop,Ze,he);case 37:X=0==F.DWT.licenseException.code,Me.next=41;break;case 40:X=!1;case 41:Me.next=60;break;case 43:return An(HU),Te=be.refProductKey,Me.prev=45,Me.next=48,M._setProductKeyAsync(Te);case 48:Me.sent&&(X=!0),Me.next=60;break;case 52:if(Me.prev=52,Me.t1=Me.catch(45),!M._bLicenseErrorDispose){Me.next=58;break}throw Me.t1;case 58:v.warn(Me.t1.message);case 59:X=!1;case 60:if(X&&(An(GU),Ye.checkProductKey(M,{Core:!0})||(Oe={code:M._errorCode,message:M._getErrorString()},M._resetErr(),F.DWT.lclex(),j.bWin&&Ye.checkProductKey(M,{Webcam:!0},!0)||(M._errorCode=Oe.code,M._errorString=Oe.message))),0==M._errorCode){Me.next=65;break}if(M._bRemoteMode||(TV(M._errorCode)?this._LicensePromptExpired():CV(M)),!M._bLicenseErrorDispose){Me.next=65;break}throw{code:M._errorCode,message:M._getErrorString()};case 65:M._bRemoteMode&&se.startHeartBeat(M);case 66:case"end":return Me.stop()}},k,this,[[10,16],[45,52]])})),function(k){return b.apply(this,arguments)})},{key:"_innerConvertToArrayBufferAsync",value:(I=Ae(A.mark(function k(E,M,G,V){var J,Q,te,X,ae;return A.wrap(function(he){for(;;)switch(he.prev=he.next){case 0:return J=this,te=V??"arraybuffer",X=",",v.isString(Q=G)&&""!=Q||(Q="",X=""),ae=["[",E,',"',M.join(","),'"',X,Q,"]"].join(""),he.next=6,J._sendDataByHttpAsync("ConvertToBlob",ae,te,!0);case 6:return he.abrupt("return",he.sent);case 7:case"end":return he.stop()}},k,this)})),function(k,E,M,G){return I.apply(this,arguments)})},{key:"_getImageByServerId",value:(S=Ae(A.mark(function k(E){var M,G,V;return A.wrap(function(J){for(;;)switch(J.prev=J.next){case 0:return M=Xt.IT_PNG,J.next=3,this._innerConvertToArrayBufferAsync(M,[E],void 0,void 0);case 3:return G=J.sent,V=RV(M),J.abrupt("return",new Blob([G],{type:V}));case 6:case"end":return J.stop()}},k,this)})),function(k){return S.apply(this,arguments)})},{key:"_getSourcesAsync",value:(T=Ae(A.mark(function k(E,M,G){var V;return A.wrap(function(Q){for(;;)switch(Q.prev=Q.next){case 0:return V=this,Q.next=3,V._innerFunV2("GetSources",we(E,null!=M&&M,null!=G&&G));case 3:return Q.abrupt("return",wV(this,Q.sent));case 5:case"end":return Q.stop()}},k,this)})),function(k,E,M){return T.apply(this,arguments)})},{key:"_getDevices",value:(_=Ae(A.mark(function k(E,M,G){var V,J,Q,te,X,ae;return A.wrap(function(he){for(;;)switch(he.prev=he.next){case 0:if(J=[],Q="getDevices",te=(V=this)._bRemoteMode?hp:j.bAndroid?Lw:hp,X=E??te,V._resetErr(),V._isValid()){he.next=5;break}return he.abrupt("return",W.Promise.reject({code:V._errorCode,message:V._getErrorString()}));case 5:return V._bNoMask||nr(Q,V),he.prev=6,he.next=9,V._getSourcesAsync(X,M,G);case 9:v.isArray(ae=he.sent)&&ae.length>0&&(J=J.concat(ae)),he.next=16;break;case 13:throw he.prev=13,he.t0=he.catch(6),he.t0;case 16:return he.prev=16,V._bNoMask||Cn(Q),he.finish(16);case 19:return he.abrupt("return",J);case 20:case"end":return he.stop()}},k,this,[[6,13,16,19]])})),function(k,E,M){return _.apply(this,arguments)})},{key:"_innerAcquireImageFromService",value:function(k,E,M){var G,V=this;if(!Ye.checkProductKey(V,{Core:!0}))return v.isFunction(M)&&M(V._errorCode,V._getErrorString()),!1;var Q,J=V._bRemoteMode?Ne:ve;k.RemoteScan=J?1:0,Q=v.isUndefined(k.ShowRemoteScanUI)?J:J&&k.ShowRemoteScanUI?Ne:ve,k.ShowRemoteScanUI=Q?1:0,V._bRemoteMode&&(v.isFunction(V.__OnRemoteScanStatusAsync)||(V.__OnRemoteScanStatusAsync=function(){}),v.isFunction(V.__OnSourceUIClose)||(V.__OnSourceUIClose=function(){}));for(var te=0,X=0;X<lv.length;X++){var ae=["__",lv[X]].join("");v.isFunction(V[ae])&&(te|=1<<X)}return k.EnableEvents=te,J&&(V._isBindViewer()||Q)&&V._initRemoteDiv(),V._bRemoteMode||(V._bPageFocus&&F.DWT.IfAlwaysFocusOnPopupWindow?V._bServerAlwaysFocusOnPopupWindow||V._OnPageFocus(!0):V._bServerAlwaysFocusOnPopupWindow&&V._OnPageBlur(!0)),G=["[",v.stringify(k),"]"].join(""),V._sendData("AcquireImage",G,!0,function(he){E(he)},function(he){M(V._errorCode,V._getErrorString())}),!0}},{key:"_acquireImageFromServiceAsync",value:function(k){var E=this;return new W.Promise(function(M,G){return E._innerAcquireImageFromService(k,function(){E._blts&&F.DWT.lcvrf(E),M(!0)},function(V,J){G({code:V,message:J})})})}},{key:"_acquireImage",value:(g=Ae(A.mark(function k(E,M){var G,V,J,Q,te;return A.wrap(function(X){for(;;)switch(X.prev=X.next){case 0:if(G=this,V=M?v.clone(M):{},J="acuqireImage",G._resetErr(),G._isValid()){X.next=4;break}throw{code:G._errorCode,message:G._getErrorString()};case 4:if(Ye.checkProductKey(G,{Core:!0})&&G._isValid()){X.next=6;break}throw{code:G._errorCode,message:G._getErrorString()};case 6:if(!G.__bAcquireImageNow){X.next=9;break}throw qb(G),{code:G._errorCode,message:G._getErrorString()};case 9:return G.__bAcquireImageNow=!0,G._bNoMask||nr(J,G),Q=F.DWT.RemoteScanConfig,te=DV(),X.prev=12,LV(V),Q&&cv(Q.keepAwake),null!=E&&(V.Device=E.strDevice,V.DeviceMatchField=zc.SMF_NAME),X.next=18,G._acquireImageFromServiceAsync(V);case 18:X.next=23;break;case 20:throw X.prev=20,X.t0=X.catch(12),X.t0;case 23:return X.prev=23,G.__bAcquireImageNow=!1,G._bNoMask||Cn(J),cv(te),X.finish(23);case 28:return X.abrupt("return",!0);case 29:case"end":return X.stop()}},k,this,[[12,20,23,28]])})),function(k,E){return g.apply(this,arguments)})},{key:"_getCapabilities",value:(f=Ae(A.mark(function k(E,M){var G,V,J,Q;return A.wrap(function(te){for(;;)switch(te.prev=te.next){case 0:return Yw(G=this,Jw,kV).call(G,E),G._initRemoteDiv(),te.next=5,G._innerSelectDeviceAsync(E);case 5:return te.next=7,G._sendDataByHttpAsync("GetCapabilities",null);case 7:if(V=te.sent,te.prev=8,V.length>0&&(Q=V[0]),!v.isString(Q)){te.next=21;break}if(Q=W.removeNonPrintableChar(Q),Q=v.replaceAll(Q,"\\\\","\\\\"),0!=(J=JSON.parse(Q)).errorCode){te.next=16;break}return te.abrupt("return",J.response);case 16:throw G._errorCode=J.errorCode,G._errorString=J.errorString,{code:G._errorCode,message:G._getErrorString()};case 21:throw $o(G),{code:G._errorCode,message:G._getErrorString()};case 23:te.next=30;break;case 25:throw te.prev=25,te.t0=te.catch(8),G._errorCode=-2302,G._errorString=te.t0,{code:G._errorCode,message:G._getErrorString()};case 30:case"end":return te.stop()}},k,this,[[8,25]])})),function(k,E){return f.apply(this,arguments)})},{key:"_setCapabilities",value:(d=Ae(A.mark(function k(E,M,G){var V,J;return A.wrap(function(Q){for(;;)switch(Q.prev=Q.next){case 0:if(Yw(V=this,Jw,kV).call(V,E),v.isObject(M)&&!v.isArray(M)){Q.next=5;break}throw qn(V),{code:V._errorCode,message:V._getErrorString()};case 5:return V._initRemoteDiv(),Q.next=8,V._innerSelectDeviceAsync(E);case 8:return J=["[",v.stringify(M),"]"].join(""),Q.next=11,V._sendDataByHttpAsync("SetCapabilities",J);case 11:return Q.abrupt("return",Q.sent);case 12:case"end":return Q.stop()}},k,this)})),function(k,E,M){return d.apply(this,arguments)})},{key:"_closeSource",value:(l=Ae(A.mark(function k(){var E;return A.wrap(function(M){for(;;)switch(M.prev=M.next){case 0:return E=this,M.next=3,E._innerFunV2("CloseSource");case 3:case"end":return M.stop()}},k,this)})),function(){return l.apply(this,arguments)})},{key:"_innerSelectDeviceAsync",value:(u=Ae(A.mark(function k(E,M){var G,V,J,Q,te,X,he,ye;return A.wrap(function(Ce){for(;;)switch(Ce.prev=Ce.next){case 0:if(V=this,E&&E instanceof Xo){Ce.next=4;break}throw qn(V),{code:V._errorCode,message:V._errorString};case 4:if(!(J=null===(G=this._dmService.attrs)||void 0===G?void 0:G.UUID)){Ce.next=15;break}if((null===(Q=E.serviceInfo.attrs)||void 0===Q?void 0:Q.UUID)!=J){Ce.next=9;break}Ce.next=15;break;case 9:if(!((X=(null===(te=E.serviceInfo.attrs)||void 0===te?void 0:te.url)||E.serviceInfo.server)&&X.indexOf(J)>-1)){Ce.next=13;break}Ce.next=15;break;case 13:throw uU(V),{code:V._errorCode,message:V._errorString};case 15:return he=["[",E.strDevice,",",M??zc.SMF_NAME,"]"].join(""),Ce.next=18,V._sendDataByHttpAsync("SelectSourceEx",he,null,!0);case 18:if(!((ye=Ce.sent)&&v.isArray(ye.result)&&ye.result.length>0)){Ce.next=21;break}return Ce.abrupt("return",ye.result[0]);case 21:return Ce.abrupt("return",ye);case 22:case"end":return Ce.stop()}},k,this)})),function(k,E){return u.apply(this,arguments)})},{key:"registerEvent",value:function(k,E){return!!this._registerEvent(k,E)}},{key:"unregisterEvent",value:function(k,E){return this._unregisterEvent(k,E)}},{key:"_registerEvent",value:function(k,E){var M=this;return M._resetErr(),!!M._isValid()&&(M[["__",k].join("")]=E,!0)}},{key:"_unregisterEvent",value:function(k,E){var M=this;return M._resetErr(),!!M._isValid()&&(M[["__",k].join("")]=null,Ne)}},{key:"_OnPageFocus",value:function(k){var E=this;if(E._bPageFocus=!0,E._bReady&&j.bWin&&F.DWT.IfAlwaysFocusOnPopupWindow){var M=v.stringify({sequence:0,wnds:0,wnd:"0",type:3,x:0,y:0});if(E.__bAcquireImageNow||k||E.__bOpenFileNow){E._bServerAlwaysFocusOnPopupWindow=!0;try{E._isValid()&&E._sendDataByHttpAsync("SendEventToScannerUI",["[",M,"]"].join(""))}catch{}}}}},{key:"_OnPageBlur",value:function(k){var E=this;if(j.bWin&&E._bReady){var M=v.stringify({sequence:0,wnds:0,wnd:"0",type:4,x:0,y:0});if((0!=E._bPageFocus||k)&&(E._bPageFocus=!1,E.__bAcquireImageNow||k||E.__bOpenFileNow)){E._bServerAlwaysFocusOnPopupWindow=!1;try{E._isValid()&&E._sendDataByHttpAsync("SendEventToScannerUI",["[",M,"]"].join(""))}catch{}}}}},{key:"_OnRemoteScanStatusAsync",value:function(k){var E,G,V,J,Q,te,X=this;if(k&&k.length>=2){try{var ae=new String(k[1]);E=v.parse(ae)}catch(ye){v.error(ye.message),v.log("parse json failed: "+k[1])}E||(E={sequence:0,screen:[]})}if(E&&E.sequence)if(E.sequence>0&&E.screen&&E.screen.length>0){if(V=E.sequence,Q=E.wnds,te=(G=E.screen[0]).img,v.isString(te)&&""!=te&&(J=G.wnd),V&&J){var he=v.sizzle(".ds-img-screen");he&&he.length>0&&X._acquireDivEL&&(X._acquireDivEL.evtFun&&(v.removeEventListener(he[0],"mouseup",X._acquireDivEL.evtFun),X._acquireDivEL.evtFun=null),he[0].src=te,X._acquireDivEL.evtFun=function(ye){Q||(Q="0");var Ce=v.stringify({sequence:V,wnds:Q,wnd:J+"",type:2,x:ye.offsetX,y:ye.offsetY});X._sendDataByHttpAsync("SendEventToScannerUI",["[",Ce,"]"].join(""))},v.addEventListener(he[0],"mouseup",X._acquireDivEL.evtFun))}}else X.__closeRemoteScanUI(!1);return v.isFunction(X.__OnRemoteScanStatusAsync)&&X.__OnRemoteScanStatusAsync(E),!0}},{key:"_OnBitmapChanged",value:function(k,E,M){var G=this,V="10"==k[0],J="c2"==k[0];k[1].split(",");var Q=k[2],te=-1,X=[];if(!V)if(J)k.length>5&&(X=k[5]),v.isArray(X)||(X=[]);else{var ae={};if(k.length>5&&(ae.width=k[5]),k.length>6&&(ae.height=k[6]),k.length>7&&(ae.bitDepth=k[7]),k.length>8&&(ae.resolutionX=k[8]),k.length>9&&(ae.resolutionY=k[9]),k.length>10&&(te=k[10]),X.push(ae),te>-1&&G._blts&&(Q==mi.enumBCAppend||Q==mi.enumBCInsert)){var he=F.DWT.lgct(te);v.isFunction(G.__OnLtsverify)&&G.__OnLtsverify(he,1)}}}},{key:"_OnPostTransferAsync",value:function(k,E,M){var G,V=this;if(k&&k.length>=2)try{var J=String(k[1]).replace(/\\/g,"\\\\");G=v.parse(J)}catch(te){v.error(te)}G||(G={imageId:-1});var Q=!1;if(v.isFunction(V.__OnPostTransferAsync))try{Q=V.__OnPostTransferAsync(G)}catch(te){mn(te)}if(v.isFunction(V.__OnPostTransferAsync2))try{V.__OnPostTransferAsync2(G)}catch(te){mn(te)}return Q}},{key:"_getErrorCode",value:function(){return this._errorCode}},{key:"_getErrorString",value:function(){return 0!=this._errorCode?this._errorString:"Successful."}},{key:"_isBindViewer",value:function(){return!1}},{key:"_isNoViewer",value:function(){return!0}},{key:"_isMobileMode",value:function(){return!1}}],[{key:"isServerInvalid",value:function(k){var E,M,G,V,J,Q;return M=k._bMustUpgradeService,(E=!k._bReady||null===k._wsClient)?(k._bRemoteMode&&(G=null!==(V=null===(J=k._dmService)||void 0===J||null===(Q=J.attrs)||void 0===Q?void 0:Q.name)&&void 0!==V?V:""),Lc(k,G)):M?ip(k):k.isDestroy&&oU(k),E||M||-2208==k._errorCode||k.isDestroy}},{key:"STwainConnectToServer",value:(s=Ae(A.mark(function k(E){var G;return A.wrap(function(V){for(;;)switch(V.prev=V.next){case 0:if(!F.DWT.WebTwainIdMap[E._id]){V.next=5;break}return V.next=4,E._OnReady();case 4:return V.abrupt("return");case 5:if(!E._bReady&&!E._destroy){V.next=7;break}return V.abrupt("return");case 7:return E._bConnecting=!0,(G=Ga.Instance.getClient(E._serverInfo)).setRetry(0),E._bNoMask||nr("",E),V.prev=11,V.next=14,eV(E._bRemoteMode);case 14:return V.next=17,G.testConnection(void 0,0,void 0,1e4);case 17:if(E._wsClient=G,E._wsClient.bReady=!0,W.detect.bFirst&&(Qfe(),W.detect.bFirst=!1),E._bReady){V.next=24;break}return E._bReady=!0,V.next=24,E._OnReady();case 24:V.next=30;break;case 26:throw V.prev=26,V.t0=V.catch(11),E._bReady=!1,{code:E._errorCode,message:E._getErrorString()};case 30:return V.prev=30,E._bConnecting=!1,E._bNoMask||Cn(""),V.finish(30);case 34:case"end":return V.stop()}},k,null,[[11,26,30,34]])})),function(k){return s.apply(this,arguments)})},{key:"_innerSendHeartBeat",value:(a=Ae(A.mark(function k(E,M){var G,V,Q;return A.wrap(function(te){for(;;)switch(te.prev=te.next){case 0:if(te.prev=0,!E.__bAcquireImageNow){te.next=4;break}te.next=14;break;case 4:if(G={client:null,userData:null,taskId:"0",eventTaskId:"0",lastEventTaskId:"0"},V=pp(),Q=E.getHeartBeatData({cmd:"Heartbeat",cmdId:V,sFun:null,fFun:null,contextData:null,rawData:!0}),!E._wsClient){te.next=12;break}return E._wsClient.setRetry(0),te.next=12,E._wsClient.request(Q,null,G);case 12:Q=null;case 14:te.next=18;break;case 16:te.prev=16,te.t0=te.catch(0);case 18:E._wsClient&&E._wsClient.connected&&M&&setTimeout(function(){se._innerSendHeartBeat(E,M)},E._wsClient._heartBeatTicks);case 19:case"end":return te.stop()}},k,null,[[0,16]])})),function(k,E){return a.apply(this,arguments)})},{key:"startDWTReconnect",value:(i=Ae(A.mark(function k(E){var M;return A.wrap(function(G){for(;;)switch(G.prev=G.next){case 0:if(G.prev=0,!E._destroy){G.next=3;break}return G.abrupt("return");case 3:return E._bConnecting=!0,(M=Ga.Instance.getClient(E._serverInfo)).setRetry(0),G.next=9,M.testConnection(void 0,0,void 0,3e4);case 9:return E._wsClient=M,E._wsClient.bReady=!0,E._wsRetry=0,G.next=14,E._reconnected(M);case 14:G.next=19;break;case 16:G.prev=16,G.t0=G.catch(0),E._wsFailedTimes++;case 19:return G.prev=19,E._bConnecting=!1,G.finish(19);case 22:case"end":return G.stop()}},k,null,[[0,16,19,22]])})),function(k){return i.apply(this,arguments)})},{key:"startHeartBeat",value:function(k){var E=k._wsClient;E&&E.connected&&!E._bHeartBeatStarted&&(E._bHeartBeatStarted=!0,setTimeout(function(){se._innerSendHeartBeat(k,!0)},E._heartBeatTicks))}},{key:"getServerImageUrlPrefix",value:function(k){return[k._httpUrl,"dwt/",be.getDWTPrefix(),be.getServerVersionInfo(),"/img?id=",k._clientId].join("")}}]),se}(Bfe);function zfe(r){var i,a=this,s=r;return a._resetErr(),a._isValid()?(s=v.isString(s)?v.trim(s):"",i=a._sendDataByHttpAsync("ProductKey",we(s)),a.__productKey=s,i=i.then(function(u){if(v.isArray(u)&&u.length>0){if(0!=a._errorCode)throw a.__productKey="",{code:a._errorCode,message:a._getErrorString()};F.DWT.ProductKey=a.__productKey,Ye.reparseProductKey();var l="GetLicenseInfo";return F.DWT.ConnectWithSocket?a._sendDataConnectWithSocket(l,null,"json",!0):a._sendDataByHttpAsync(l,null,"json",!0)}throw zo(a),i.context=null,{code:a._errorCode,message:a._getErrorString()}})):W.Promise.reject({code:a._errorCode,message:a._getErrorString()})}function kV(r){return MV.apply(this,arguments)}function MV(){return(MV=Ae(A.mark(function r(i){var a;return A.wrap(function(s){for(;;)switch(s.prev=s.next){case 0:if((a=this)._resetErr(),a._isValid()){s.next=4;break}return s.abrupt("return",W.Promise.reject({code:a._errorCode,message:a._errorString}));case 4:if(i&&i instanceof Xo){s.next=7;break}throw qn(a),{code:a._errorCode,message:a._errorString};case 7:case"end":return s.stop()}},r,this)}))).apply(this,arguments)}function Kc(r,i,a,s){var u=[];u.push("{"),u.push('"id":"'),u.push(r),u.push('"'),s&&(u.push(',"cmdId":"'),u.push(s),u.push('"')),u.push(',"method":"'),u.push(i),u.push('"'),u.push(',"module":"dwt","version":"');var l=[be.getDWTPrefix(),be.getServerVersionInfo()].join("");return u.push(l),u.push('"'),null!=a&&(u.push(',"parameter":'),u.push(a)),u.push("}"),u.join("")}function Xw(r,i){return["evt",r,i].join("_")}function OV(r){if(r._bReady)r._wsCheckResolve();else{if(F.DWT.bConnectCanceled)return v.asyncQueue.stop(),Ko(r),void r._wsCheckReject({code:r._errorCode,message:r._getErrorString()});if(r._wsRetry>10)return aU(r),void r._wsCheckReject({code:r._errorCode,message:r._getErrorString()});r._wsRetry++,setTimeout(function(){OV(r)},1100)}}function Kfe(r,i,a,s){return Zw.apply(this,arguments)}function Zw(){return Zw=Ae(A.mark(function r(i,a,s,u){var l,d,f,g,_,T,S;return A.wrap(function(I){for(;;)switch(I.prev=I.next){case 0:if(a!=Gn.GET_TASKID){I.next=4;break}return I.abrupt("return",u.taskId);case 4:if(a!=Gn.GET_EVENT_TASKID){I.next=8;break}return I.abrupt("return",u.eventTaskId);case 8:if(a!=Gn.ONMESSAGE_PROCESS_DATA){I.next=17;break}if("object"!==e(i)){I.next=11;break}return I.abrupt("return",i);case 11:if(!((g=i).indexOf("Version not found")>=0||g.indexOf("Function not found")>=0)){I.next=14;break}return I.abrupt("return",{cmdId:s??0});case 14:return I.abrupt("return",v.parse(i));case 17:if(a!=Gn.ONMESSAGE_GET_TASKID){I.next=25;break}if(!i){I.next=22;break}if(!i.event){I.next=21;break}return I.abrupt("return",0);case 21:return I.abrupt("return",i.cmdId);case 22:return I.abrupt("return",i);case 25:if(a!=Gn.ONMESSAGE_GET_EVENT_TASKID){I.next=31;break}if(!i||!i.event){I.next=28;break}return I.abrupt("return",Xw(i.id,i.cmdId));case 28:return I.abrupt("return",0);case 31:if(a!=Gn.HANDLE_RAW_MESSAGE){I.next=59;break}if(l=u?.userData){I.next=35;break}return I.abrupt("return",!1);case 35:if(d=l.stwain,f=l.command){I.next=39;break}return I.abrupt("return",!1);case 39:if(d&&v.isFunction(d.__OnWSMessage)&&d.__OnWSMessage(i),"object"!==e(i)){I.next=44;break}if(!F.DWT.ConnectWithSocket){I.next=44;break}return"ConvertToBlob"!=f.cmd&&"GetImageByIndex"!=f.cmd||f.sFun(i),I.abrupt("return",!0);case 44:if(!((_=i.replace(/\0/g,"")).indexOf('"method" : "Heartbeat"')>=0)){I.next=47;break}return I.abrupt("return",!0);case 47:if(!(_.indexOf('"method" : "EnableBuffer"')>=0||_.indexOf('"method" : "GetBuffer"')>=0)){I.next=50;break}return F.DWT.lwsproc(_,f),I.abrupt("return",!0);case 50:if(!(_.indexOf("Exception:")>=0||0==_.indexOf("Error"))){I.next=57;break}return S=!1,v.log((T=i)+"@"+f.cmd),f.fFun&&(S=f.fFun(T)),!S&&d&&v.isFunction(d.__OnPrintMsg)&&d.__OnPrintMsg(T),I.abrupt("return",!0);case 57:I.next=70;break;case 59:if(a!=Gn.HANDLE_PROCESSED_MESSAGE){I.next=70;break}if(l=u?.userData){I.next=63;break}return I.abrupt("return",!1);case 63:if(d=l.stwain){I.next=66;break}return I.abrupt("return",!1);case 66:if(f=l.command){I.next=69;break}return I.abrupt("return",!1);case 69:return I.abrupt("return",d.__OnRecieveMsg(i,f));case 70:case"end":return I.stop()}},r)})),Zw.apply(this,arguments)}function NV(r,i){if(i){var a=i.code||i.ltsErrorCode,s=i.message;111==a||106==a||108==a?(sp(r,!1,a),111!=a||F.DWT.isPublicLicense()||(r._errorString=s)):(r._errorCode=a,r._errorString=s),F.DWT.lsetException(r._errorCode,r._getErrorString(),!0)}}function LV(r){void 0!==r.Resolution&&(r.Resolution=parseInt(r.Resolution)),void 0!==r.PixelType&&(r.PixelType=parseInt(r.PixelType)),void 0!==r.SelectSourceByIndex&&(r.SelectSourceByIndex=parseInt(r.SelectSourceByIndex))}var mi,lv=["OnPreAllTransfers","OnPreTransfer","OnPostTransfer","OnPostTransferAsync"];!function(r){r.enumBCAppend=1,r.enumBCInsert=2,r.enumBCRemove=3,r.enumBCEdit=4,r.enumBCIndexChange=5}(mi||(mi={}));var vp,Bt,$fe=["OnPostAllTransfers","OnPostTransfer","OnPostLoad","OnPreTransfer","OnPreAllTransfers","OnResult","OnTransferCancelled","OnTransferError","OnSourceUIClose","OnGetFilePath","OnPercentDone","OnPostTransferAsync","OnPreAllTransfersAsync","OnRemoteScanStatusAsync","OnConsumed"],qfe=["OnPreAllTransfers","OnPreTransfer","OnPostTransfer","OnGetFilePath","OnPostLoad"],eD=v.each;function Qfe(){var r,i=Zo.item("DWT_port"),a=Zo.item("DWT_ssl");if(vt.bEnhancedMode)return!0;W.detect.urls.splice(0),W.detect.cUrlIndex=0,i!==vp&&a!==vp&&(r={port:i,ssl:"true"==a});var s=function(u){return!r||!(!u||u.port==r.port&&u.ssl==r.ssl)};1===W.detect.detectType?(r!==vp&&r.ssl&&W.detect.urls.push(r),eD(W.detect.ports,function(u){u.ssl&&s(u)&&W.detect.urls.push(u)})):0===W.detect.detectType?(r===vp||r.ssl||W.detect.urls.push(r),eD(W.detect.ports,function(u){!1===u.ssl&&s(u)&&W.detect.urls.push(u)})):(r!==vp&&W.detect.urls.push(r),eD(W.detect.ports,function(u){s(u)&&W.detect.urls.push(u)}))}!function(r){r.TWAIN=0,r.ICA=3,r.SANE=3,r.TWAIN_AND_ICA=4,r.TWAIN_AND_TWAIN64=4,r.TWAIN64=5}(Bt||(Bt={}));var mt={notSupportProperty:function(r){},notSupportMethod:function(r){},refreshImageAfterInvokeFun:function(r,i,a){return 1==a},loadHttpBlob:function(r,i,a,s,u,l,d,f){var g,_,T=ve;if(_={method:i,dataType:"blob"},f&&(_.headers=f),""!=r.HTTPUserName&&(_.username=r.HTTPUserName,_.password=r.HTTPPassword),r.__HTTPPostResponseString="",s){if("get"==i){var S=v.guid();return W.progressContext&&(W.progressContext._onPercent=d),sw(W.progressContext,S)(a,_).then(function(R){var L=R.type;if("text/plain"==L||"text/html"==L||"text/json"==L){var x=new FileReader;x.readAsText(R),x.onload=function(){r.__HTTPPostResponseString=x.result,u(R)},x.onerror=function(){u(R)}}else u(R)},function(R){R&&R.code?(r._errorCode=R.code,r._errorString=R.message):R&&R.httpCode?Xb(r,!1,R.message,R.httpCode):XB(r),v.isFunction(l)&&l({code:r._errorCode,message:r._errorString})}),!0}_.onSuccess=function(R,L,x){if((x?x.getResponseHeader("content-type"):"").indexOf("text/")>=0){var U=new FileReader;U.readAsText(R),U.onload=function(){r.__HTTPPostResponseString=U.result,u(R)},U.onerror=function(){u(R)}}else u(R)},v.isFunction(d)&&(_.beforeSend=function(R){R.addEventListener("progress",function(L){!j.bSafari&&L&&(delete L.totalSize,delete L.position),d(L)},ve)}),T=Ne}else j.bIE?(_.dataType="arraybuffer",_.onSuccess=function(R,L,x){var U,Y;(U=R||x.responseData)&&(Y=new Uint8Array(U)),r.__HTTPPostResponseString=x.responseText,r._errorCode=0,r._errorString="",u(Y),Y=null,T=Ne}):(_.dataType="text",_.contentType="text/plain; charset=x-user-defined",_.mimeType="text/plain; charset=x-user-defined",_.onSuccess=function(R,L,x){var U,Y,Z;r.__HTTPPostResponseString=U=x.responseText,Y=U.length,Z=new Uint8Array(Y);for(var oe=0;oe<Y;oe++)Z[oe]=U.charCodeAt(oe);r._errorCode=0,r._errorString="",u(Z),Z=null,T=Ne}),_.headers?v.mix(_.headers,{"X-Requested-With":ve}):_.headers={"X-Requested-With":ve};if("post"==i){var I,b=r.httpFormFields;if(b)try{I=new FormData,v.each(b,function(R,L){R instanceof Blob?I.append(L,R,R.name):I.append(L,R)}),v.mix(_,{data:I,processData:ve,contentType:ve})}catch{}}g=function(R,L,x){var U,Y;R&&v.isArray(R)&&R.length>2?(U=R[1],Y=R[2]):(U=L,Y=x),2!=Y.state&&3!=Y.state||0!=Y.status?Xb(r,ve,U,Y.status):"abort"===Y.statusText?Xb(r,Ne):XB(r),v.isFunction(l)&&l()},_.url=a,_.async=s,_.onError=g,_.onComplete=function(){r._cancelableObj=null};var D=Os(_);return s&&W.progressContext&&(W.progressContext._onPercent=d,r.IfShowCancelDialogWhenImageTransfer&&W.progressContext.on("cancel",function(){D.abort()})),T},combineUrl:function(r,i,a){var s=[],u=i;return void 0===u||void 0===a?void 0:(v.isString(u)||(u=String(i)),0==u.indexOf("http://")?(u=u.replace("http://",""),s.push("http://")):0==u.indexOf("https://")?(u=u.replace("https://",""),s.push("https://")):(0==u.indexOf("//")&&(u=u.replace("//","")),s.push(r.IfSSL?"https://":"http://")),s.push(u),u.indexOf(":")<0&&(r.HTTPPort||(r.HTTPPort=W.detect.ssl?443:80),(!W.detect.ssl&&80!=r.HTTPPort||W.detect.ssl&&443!=r.HTTPPort)&&(s.push(":"),s.push(r.HTTPPort))),0!==a.indexOf("/")&&s.push("/"),s.push(a),s.join(""))},httpPutImage:function(r,i,a,s,u,l,d){var f=Ne,g={method:"PUT",url:i,hasContent:Ne,processData:ve,async:s,data:a,onSuccess:u,onError:function(){f=ve,v.isFunction(l)&&l()},onComplete:function(){r._cancelableObj=null},beforeSend:function(T){v.isFunction(d)&&T.upload.addEventListener("progress",function(S){!j.bSafari&&S&&(delete S.totalSize,delete S.position),d(S)},ve)}};""!=r.HTTPUserName&&(g.username=r.HTTPUserName,g.password=r.HTTPPassword),s||v.mix(g,{headers:{"X-Requested-With":ve}});var _=Os(g);return W.progressContext&&(W.progressContext._onPercent=d,W.progressContext._onCancel=function(){_.abort()}),f},GetImageInfo:function(r,i){var a=r._ImgManager.convertClientIndexToServerId(i);return-1==a?(We(r),!1):r._innerFun("GetImageInfo",we(a))},getBlobTypeByImageType:RV,callbacks:[],pushCallback:function(r,i,a){mt.callbacks.push({method:r,callback:i,ticks:a})},refreshUIRef:0,isServerInvalid:function(r){uo.isServerInvalid(r)},replaceLocalFilename:function(r){var i;return void 0===r?"":(i=(r=String(r)).replace(/\\/g,"\\\\"),j.bFileSystem&&(i=decodeURI(i)),i)},getImageType:function(r){if(void 0===r||r.length<4)return-1;var i=r.lastIndexOf(".");if(-1===i)return-1;var a=r.slice(i).toLowerCase();return".bmp"===a||".dib"===a?F.DWT.EnumDWT_ImageType.IT_BMP:".jpg"===a||".jpe"===a||".jpeg"===a||".jfif"===a?F.DWT.EnumDWT_ImageType.IT_JPG:".tif"===a||".tiff"===a?F.DWT.EnumDWT_ImageType.IT_TIF:".png"===a?F.DWT.EnumDWT_ImageType.IT_PNG:".pdf"===a?F.DWT.EnumDWT_ImageType.IT_PDF:".jp2"===a||".j2k"===a||".j2c"===a?F.DWT.EnumDWT_ImageType.IT_J2K:-1},makeParams:we,showMask:nr,hideMask:Cn};function dv(r,i,a,s,u){var l=0;return r==Bt.TWAIN&&(l=Wd),r==Bt.TWAIN64?l=ze.TWAINX64SCANNER:r==Bt.ICA?a?l=ze.SANESCANNER:s?l=ze.ICASCANNER:(i||u)&&(l=Wd):r==Bt.TWAIN_AND_TWAIN64&&(a?l=Wd|ze.SANESCANNER:s?l=Wd|ze.ICASCANNER:i?l=Wd|ze.TWAINX64SCANNER:u&&(l=Wd)),l}function fv(r,i){for(var a=r._ImgManager.GetServerIdList(),s=0;s<a.length;s++)i.push(a[s])}function tD(r,i){return 0!=r._ImgManager.count()||(Gi(r),v.isFunction(i)&&i(r._errorCode,r._getErrorString()),!1)}function Uu(r,i,a){return!(!tD(r,a)||(isNaN(i)||!v.isNumber(i)||i<0||i>=r._ImgManager.count())&&(We(r),v.isFunction(a)&&a(r._errorCode,r._getErrorString()),1))}function Ud(r){var i,a,s,u=[];return r._ImgManager.count()<=0||((a=r._ImgManager.getCurrentImageIndex())>=0&&(i=r._ImgManager.convertClientIndexToServerId(a)),s=r._ImgManager.getSelectedClientIndexArray(),v.isArray(s)&&v.each(s,function(l){var d=r._ImgManager.convertClientIndexToServerId(l);-1!=d&&u.push(d)}),-1!=i&&0==u.length&&u.push(i)),u}function WV(r){var i,a=[];return r._ImgManager.count()<=0||(i=r._ImgManager.getCurrentImageIndex(),a=r._ImgManager.getSelectedClientIndexArray(),-1!=i&&0==a.length&&a.push(i)),a}function Mr(r,i,a){return r._resetErr(),!!r._isValid()&&(isNaN(i)?(Dt(r),v.isFunction(a)&&a(r._errorCode,r.ErrorString),ve):i<0||i>=r._ImgManager.count()?(We(r),v.isFunction(a)&&a(r._errorCode,r.ErrorString),ve):Ne)}function hr(r,i,a,s,u){try{r(i,a,s,u)}catch{}i=a=s=u=null}function $r(r,i,a){try{r(i._errorCode,i._getErrorString(),a)}catch{}i=a=null}function Ki(r,i,a,s,u,l){try{r(i._errorCode,i._getErrorString(),a,s,u,l)}catch{}i=a=s=u=l=null}function br(){return br=typeof Reflect<"u"&&Reflect.get?Reflect.get.bind():function(r,i,a){var s=function(l,d){for(;!Object.prototype.hasOwnProperty.call(l,d)&&null!==(l=yt(l)););return l}(r,i);if(s){var u=Object.getOwnPropertyDescriptor(s,i);return u.get?u.get.call(arguments.length<3?r:a):u.value}},br.apply(this,arguments)}function BV(r,i){(null==i||i>r.length)&&(i=r.length);for(var a=0,s=new Array(i);a<i;a++)s[a]=r[a];return s}function UV(r,i){return function(a){if(Array.isArray(a))return a}(r)||function(a,s){var u=null==a?null:typeof Symbol<"u"&&a[Symbol.iterator]||a["@@iterator"];if(null!=u){var l,d,f,g,_=[],T=!0,S=!1;try{if(f=(u=u.call(a)).next,0===s){if(Object(u)!==u)return;T=!1}else for(;!(T=(l=f.call(u)).done)&&(_.push(l.value),_.length!==s);T=!0);}catch(I){S=!0,d=I}finally{try{if(!T&&null!=u.return&&(g=u.return(),Object(g)!==g))return}finally{if(S)throw d}}return _}}(r,i)||function(a,s){if(a){if("string"==typeof a)return BV(a,s);var u=Object.prototype.toString.call(a).slice(8,-1);return"Object"===u&&a.constructor&&(u=a.constructor.name),"Map"===u||"Set"===u?Array.from(a):"Arguments"===u||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(u)?BV(a,s):void 0}}(r,i)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}W.html5.Funs=mt;var hv=function(){function r(){n(this,r),at(this,"bIsDirty",!1),at(this,"imageWidth",0),at(this,"imageHeight",0),at(this,"iImageControlWidth",0),at(this,"iImageControlHeight",0),at(this,"imageUrl",""),at(this,"minImageUrl",""),at(this,"uuid",-1),at(this,"imageId",-1),at(this,"aryOverlayRectangleData",[]),at(this,"ticks",Date.now())}return c(r,[{key:"Clear",value:function(){this.imageUrl="",this.minImageUrl="",this.imageId=-1,this.aryOverlayRectangleData=[]}}]),r}(),Yfe=gt,nD=wh,Jfe=Q2,VV=$W,Xfe=Hi,jV=ci,Zfe=Ec,HV=gn,rD=Di("Reflect","construct"),ehe=Object.prototype,the=[].push,GV=HV(function(){function r(){}return!(rD(function(){},[],r)instanceof r)}),zV=!HV(function(){rD(function(){})}),KV=GV||zV;Yfe({target:"Reflect",stat:!0,forced:KV,sham:KV},{construct:function(r,i){VV(r),Xfe(i);var a=arguments.length<3?r:VV(arguments[2]);if(zV&&!GV)return rD(r,i,a);if(r==a){switch(i.length){case 0:return new r;case 1:return new r(i[0]);case 2:return new r(i[0],i[1]);case 3:return new r(i[0],i[1],i[2]);case 4:return new r(i[0],i[1],i[2],i[3])}var s=[null];return nD(the,s,i),new(nD(Jfe,r,s))}var u=a.prototype,l=Zfe(jV(u)?u:ehe),d=nD(r,l,i);return jV(d)?d:l}});var pv=p(Vn.Reflect.construct),$V=p(Vn.Object.getOwnPropertySymbols),qV={exports:{}},ihe=Ps,QV=ia.f,YV=Kr;gt({target:"Object",stat:!0,forced:!YV||gn(function(){QV(1)}),sham:!YV},{getOwnPropertyDescriptor:function(r,i){return QV(ihe(r),i)}});var JV=Vn.Object,ohe=qV.exports=function(r,i){return JV.getOwnPropertyDescriptor(r,i)};JV.getOwnPropertyDescriptor.sham&&(ohe.sham=!0);var XV=qV.exports,ZV=p(XV),she=FW,ahe=Ps,uhe=ia,che=ld;gt({target:"Object",stat:!0,sham:!Kr},{getOwnPropertyDescriptors:function(r){for(var i,a,s=ahe(r),u=uhe.f,l=she(s),d={},f=0;l.length>f;)void 0!==(a=u(s,i=l[f++]))&&che(d,i,a);return d}});var ej=p(Vn.Object.getOwnPropertyDescriptors),tj={exports:{}},nj=o_.f;gt({target:"Object",stat:!0,forced:Object.defineProperties!==nj,sham:!Kr},{defineProperties:nj});var rj=Vn.Object,fhe=tj.exports=function(r,i){return rj.defineProperties(r,i)};rj.defineProperties.sham&&(fhe.sham=!0);var hhe=p(tj.exports),phe=B2,ghe=sa;gt({target:"Promise",stat:!0,forced:!0},{withResolvers:function(){var r=ghe.f(this);return{promise:r.promise,resolve:r.resolve,reject:r.reject}}});var mhe=sa,_he=Td;gt({target:"Promise",stat:!0,forced:!0},{try:function(r){var i=mhe.f(this),a=_he(r);return(a.error?i.reject:i.resolve)(a.value),i.promise}});var ij=phe,oj=p(ij);function sj(r,i,a,s,u,l,d){try{var f=r[l](d),g=f.value}catch(_){return void a(_)}f.done?i(g):oj.resolve(g).then(s,u)}function aj(r){return function(){var i=this,a=arguments;return new oj(function(s,u){var l=r.apply(i,a);function d(g){sj(l,s,u,d,f,"next",g)}function f(g){sj(l,s,u,d,f,"throw",g)}d(void 0)})}}function Yn(r){if(void 0===r)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return r}var uj=xr,vhe=Rr,yhe=ci,She=Hi,Ihe=function(r){return void 0!==r&&(uj(r,"value")||uj(r,"writable"))},The=ia,Che=_d;gt({target:"Reflect",stat:!0},{get:function r(i,a){var s,u,l=arguments.length<3?i:arguments[2];return She(i)===l?i[a]:(s=The.f(i,a))?Ihe(s)?s.value:void 0===s.get?void 0:vhe(s.get,l):yhe(u=Che(i))?r(u,a,l):void 0}});var cj=p(Vn.Reflect.get),iD=p(J2),bhe=p(XV);gt({target:"Object",stat:!0},{setPrototypeOf:xL});var lj=Vn.Object.setPrototypeOf,oD=p(lj),whe=xs,dj=_d,Dhe=wL;gt({target:"Object",stat:!0,forced:gn(function(){dj(1)}),sham:!Dhe},{getPrototypeOf:function(r){return dj(whe(r))}});var fj=Vn.Object.getPrototypeOf,hj=p(fj);function Vd(r){var i;return(Vd=oD?iD(i=hj).call(i):function(a){return a.__proto__||hj(a)})(r)}function gv(){var r;return gv=typeof Reflect<"u"&&cj?iD(r=cj).call(r):function(i,a,s){var u=function(d,f){for(;!Object.prototype.hasOwnProperty.call(d,f)&&null!==(d=Vd(d)););return d}(i,a);if(u){var l=bhe(u,a);return l.get?l.get.call(arguments.length<3?i:s):l.value}},gv.apply(this,arguments)}gt({target:"Object",stat:!0,sham:!Kr},{create:Ec});var Ehe=Vn.Object,pj=function(r,i){return Ehe.create(r,i)},Ahe=p(pj);function sD(r,i){var a;return(sD=oD?iD(a=oD).call(a):function(s,u){return s.__proto__=u,s})(r,i)}function mv(r,i){if("function"!=typeof i&&null!==i)throw new TypeError("Super expression must either be null or a function");r.prototype=Ahe(i&&i.prototype,{constructor:{value:r,writable:!0,configurable:!0}}),t_(r,"prototype",{writable:!1}),i&&sD(r,i)}var gj=p(CW),mj=p(Gh),Phe=xs,Rhe=Ua,xhe=RW,Fhe=OT;gt({target:"Array",proto:!0,arity:1,forced:gn(function(){return 4294967297!==[].push.call({length:4294967296},1)})||!function(){try{Object.defineProperty([],"length",{writable:!1}).push()}catch(r){return r instanceof TypeError}}()},{push:function(r){var i=Phe(this),a=Rhe(i),s=arguments.length;Fhe(a+s);for(var u=0;u<s;u++)i[a]=arguments[u],a++;return xhe(i,a),a}});var khe=Ei("Array").push,Mhe=Sr,Ohe=khe,aD=Array.prototype,_j=function(r){var i=r.push;return r===aD||Mhe(aD,r)&&i===aD.push?Ohe:i},Nhe=p(_j),vj=mW,Lhe=p(vj),Whe=Hi,Bhe=UW,Uhe=Du,Vhe=Rr,jhe=xs,Hhe=function(r,i,a,s){try{return s?i(Whe(a)[0],a[1]):i(a)}catch(u){Bhe(r,"throw",u)}},Ghe=LW,zhe=i_,Khe=Ua,yj=ld,$he=RC,qhe=Gh,Sj=Array,Ij=function(r){var i=jhe(r),a=zhe(this),s=arguments.length,u=s>1?arguments[1]:void 0,l=void 0!==u;l&&(u=Uhe(u,s>2?arguments[2]:void 0));var d,f,g,_,T,S,I=qhe(i),b=0;if(!I||this===Sj&&Ghe(I))for(d=Khe(i),f=a?new this(d):Sj(d);d>b;b++)S=l?u(i[b],b):i[b],yj(f,b,S);else for(T=(_=$he(i,I)).next,f=a?new this:[];!(g=Vhe(T,_)).done;b++)S=l?Hhe(_,u,[g.value,b],!0):g.value,yj(f,b,S);return f.length=b,f},Qhe=Ij;gt({target:"Array",stat:!0,forced:!O2(function(r){Array.from(r)})},{from:Qhe});var Tj=Vn.Array.from,Cj=p(Tj);function uD(r,i){(null==i||i>r.length)&&(i=r.length);for(var a=0,s=new Array(i);a<i;a++)s[a]=r[a];return s}function bj(r,i){var a;if(r){if("string"==typeof r)return uD(r,i);var s=Lhe(a=Object.prototype.toString.call(r)).call(a,8,-1);return"Object"===s&&r.constructor&&(s=r.constructor.name),"Map"===s||"Set"===s?Cj(r):"Arguments"===s||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(s)?uD(r,i):void 0}}function jd(r,i){return function(a){if(gj(a))return a}(r)||function(a,s){var u=null==a?null:void 0!==vd&&mj(a)||a["@@iterator"];if(null!=u){var l,d,f,g,_=[],T=!0,S=!1;try{if(f=(u=u.call(a)).next,0===s){if(Object(u)!==u)return;T=!1}else for(;!(T=(l=f.call(u)).done)&&(Nhe(_).call(_,l.value),_.length!==s);T=!0);}catch(I){S=!0,d=I}finally{try{if(!T&&null!=u.return&&(g=u.return(),Object(g)!==g))return}finally{if(S)throw d}}return _}}(r,i)||bj(r,i)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function _v(r){return function(i){if(gj(i))return uD(i)}(r)||function(i){if(void 0!==vd&&null!=mj(i)||null!=i["@@iterator"])return Cj(i)}(r)||bj(r)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function $e(r,i,a){return(i=uW(i))in r?t_(r,i,{value:a,enumerable:!0,configurable:!0,writable:!0}):r[i]=a,r}var wj={exports:{}},Dj={exports:{}};!function(r){var i=mC,a=aW;function s(u){return r.exports=s="function"==typeof i&&"symbol"==typeof a?function(l){return typeof l}:function(l){return l&&"function"==typeof i&&l.constructor===i&&l!==i.prototype?"symbol":typeof l},r.exports.__esModule=!0,r.exports.default=r.exports,s(u)}r.exports=s,r.exports.__esModule=!0,r.exports.default=r.exports}(Dj);var Yhe=Dj.exports,Jhe=hd.forEach,Ej=fW("forEach")?[].forEach:function(r){return Jhe(this,r,arguments.length>1?arguments[1]:void 0)};gt({target:"Array",proto:!0,forced:[].forEach!=Ej},{forEach:Ej});var Xhe=Ei("Array").forEach,Zhe=Au,epe=xr,tpe=Sr,npe=Xhe,cD=Array.prototype,rpe={DOMTokenList:!0,NodeList:!0},Aj=function(r){var i=r.forEach;return r===cD||tpe(cD,r)&&i===cD.forEach||epe(rpe,Zhe(r))?npe:i},ipe=Aj,ope=gt,spe=Dc,ape=vn([].reverse),Pj=[1,2];ope({target:"Array",proto:!0,forced:String(Pj)===String(Pj.reverse())},{reverse:function(){return spe(this)&&(this.length=this.length),ape(this)}});var upe=Ei("Array").reverse,cpe=Sr,lpe=upe,lD=Array.prototype,dpe=function(r){var i=r.reverse;return r===lD||cpe(lD,r)&&i===lD.reverse?lpe:i};!function(r){var i=Yhe.default,a=aN,s=mC,u=pj,l=fj,d=ipe,f=_j,g=lj,_=ij,T=dpe,S=vj;function I(){r.exports=I=function(){return b},r.exports.__esModule=!0,r.exports.default=r.exports;var b={},D=Object.prototype,R=D.hasOwnProperty,L=a||function(ke,Te,Oe){ke[Te]=Oe.value},x="function"==typeof s?s:{},U=x.iterator||"@@iterator",Y=x.asyncIterator||"@@asyncIterator",Z=x.toStringTag||"@@toStringTag";function oe(ke,Te,Oe){return a(ke,Te,{value:Oe,enumerable:!0,configurable:!0,writable:!0}),ke[Te]}try{oe({},"")}catch{oe=function(Te,Oe,Me){return Te[Oe]=Me}}function se(ke,Te,Oe,Me){var qe=u((Te&&Te.prototype instanceof M?Te:M).prototype),ln=new Ze(Me||[]);return L(qe,"_invoke",{value:he(ke,Oe,ln)}),qe}function k(ke,Te,Oe){try{return{type:"normal",arg:ke.call(Te,Oe)}}catch(Me){return{type:"throw",arg:Me}}}b.wrap=se;var E={};function M(){}function G(){}function V(){}var J={};oe(J,U,function(){return this});var Q=l&&l(l(dt([])));Q&&Q!==D&&R.call(Q,U)&&(J=Q);var te=V.prototype=M.prototype=u(J);function X(ke){var Te;d(Te=["next","throw","return"]).call(Te,function(Oe){oe(ke,Oe,function(Me){return this._invoke(Oe,Me)})})}function ae(ke,Te){function Oe(et,qe,ln,St){var tt=k(ke[et],ke,qe);if("throw"!==tt.type){var it=tt.arg,Or=it.value;return Or&&"object"==i(Or)&&R.call(Or,"__await")?Te.resolve(Or.__await).then(function(_i){Oe("next",_i,ln,St)},function(_i){Oe("throw",_i,ln,St)}):Te.resolve(Or).then(function(_i){it.value=_i,ln(it)},function(_i){return Oe("throw",_i,ln,St)})}St(tt.arg)}var Me;L(this,"_invoke",{value:function(et,qe){function ln(){return new Te(function(St,tt){Oe(et,qe,St,tt)})}return Me=Me?Me.then(ln,ln):ln()}})}function he(ke,Te,Oe){var Me="suspendedStart";return function(et,qe){if("executing"===Me)throw new Error("Generator is already running");if("completed"===Me){if("throw"===et)throw qe;return{value:void 0,done:!0}}for(Oe.method=et,Oe.arg=qe;;){var ln=Oe.delegate;if(ln){var St=ye(ln,Oe);if(St){if(St===E)continue;return St}}if("next"===Oe.method)Oe.sent=Oe._sent=Oe.arg;else if("throw"===Oe.method){if("suspendedStart"===Me)throw Me="completed",Oe.arg;Oe.dispatchException(Oe.arg)}else"return"===Oe.method&&Oe.abrupt("return",Oe.arg);Me="executing";var tt=k(ke,Te,Oe);if("normal"===tt.type){if(Me=Oe.done?"completed":"suspendedYield",tt.arg===E)continue;return{value:tt.arg,done:Oe.done}}"throw"===tt.type&&(Me="completed",Oe.method="throw",Oe.arg=tt.arg)}}}function ye(ke,Te){var Oe=Te.method,Me=ke.iterator[Oe];if(void 0===Me)return Te.delegate=null,"throw"===Oe&&ke.iterator.return&&(Te.method="return",Te.arg=void 0,ye(ke,Te),"throw"===Te.method)||"return"!==Oe&&(Te.method="throw",Te.arg=new TypeError("The iterator does not provide a '"+Oe+"' method")),E;var et=k(Me,ke.iterator,Te.arg);if("throw"===et.type)return Te.method="throw",Te.arg=et.arg,Te.delegate=null,E;var qe=et.arg;return qe?qe.done?(Te[ke.resultName]=qe.value,Te.next=ke.nextLoc,"return"!==Te.method&&(Te.method="next",Te.arg=void 0),Te.delegate=null,E):qe:(Te.method="throw",Te.arg=new TypeError("iterator result is not an object"),Te.delegate=null,E)}function Ce(ke){var Te,Oe={tryLoc:ke[0]};1 in ke&&(Oe.catchLoc=ke[1]),2 in ke&&(Oe.finallyLoc=ke[2],Oe.afterLoc=ke[3]),f(Te=this.tryEntries).call(Te,Oe)}function Ke(ke){var Te=ke.completion||{};Te.type="normal",delete Te.arg,ke.completion=Te}function Ze(ke){this.tryEntries=[{tryLoc:"root"}],d(ke).call(ke,Ce,this),this.reset(!0)}function dt(ke){if(ke){var Te=ke[U];if(Te)return Te.call(ke);if("function"==typeof ke.next)return ke;if(!isNaN(ke.length)){var Oe=-1,Me=function et(){for(;++Oe<ke.length;)if(R.call(ke,Oe))return et.value=ke[Oe],et.done=!1,et;return et.value=void 0,et.done=!0,et};return Me.next=Me}}return{next:ft}}function ft(){return{value:void 0,done:!0}}return G.prototype=V,L(te,"constructor",{value:V,configurable:!0}),L(V,"constructor",{value:G,configurable:!0}),G.displayName=oe(V,Z,"GeneratorFunction"),b.isGeneratorFunction=function(ke){var Te="function"==typeof ke&&ke.constructor;return!!Te&&(Te===G||"GeneratorFunction"===(Te.displayName||Te.name))},b.mark=function(ke){return g?g(ke,V):(ke.__proto__=V,oe(ke,Z,"GeneratorFunction")),ke.prototype=u(te),ke},b.awrap=function(ke){return{__await:ke}},X(ae.prototype),oe(ae.prototype,Y,function(){return this}),b.AsyncIterator=ae,b.async=function(ke,Te,Oe,Me,et){void 0===et&&(et=_);var qe=new ae(se(ke,Te,Oe,Me),et);return b.isGeneratorFunction(Te)?qe:qe.next().then(function(ln){return ln.done?ln.value:qe.next()})},X(te),oe(te,Z,"Generator"),oe(te,U,function(){return this}),oe(te,"toString",function(){return"[object Generator]"}),b.keys=function(ke){var Te=Object(ke),Oe=[];for(var Me in Te)f(Oe).call(Oe,Me);return T(Oe).call(Oe),function et(){for(;Oe.length;){var qe=Oe.pop();if(qe in Te)return et.value=qe,et.done=!1,et}return et.done=!0,et}},b.values=dt,Ze.prototype={constructor:Ze,reset:function(ke){var Te;if(this.prev=0,this.next=0,this.sent=this._sent=void 0,this.done=!1,this.delegate=null,this.method="next",this.arg=void 0,d(Te=this.tryEntries).call(Te,Ke),!ke)for(var Oe in this)"t"===Oe.charAt(0)&&R.call(this,Oe)&&!isNaN(+S(Oe).call(Oe,1))&&(this[Oe]=void 0)},stop:function(){this.done=!0;var ke=this.tryEntries[0].completion;if("throw"===ke.type)throw ke.arg;return this.rval},dispatchException:function(ke){if(this.done)throw ke;var Te=this;function Oe(tt,it){return qe.type="throw",qe.arg=ke,Te.next=tt,it&&(Te.method="next",Te.arg=void 0),!!it}for(var Me=this.tryEntries.length-1;Me>=0;--Me){var et=this.tryEntries[Me],qe=et.completion;if("root"===et.tryLoc)return Oe("end");if(et.tryLoc<=this.prev){var ln=R.call(et,"catchLoc"),St=R.call(et,"finallyLoc");if(ln&&St){if(this.prev<et.catchLoc)return Oe(et.catchLoc,!0);if(this.prev<et.finallyLoc)return Oe(et.finallyLoc)}else if(ln){if(this.prev<et.catchLoc)return Oe(et.catchLoc,!0)}else{if(!St)throw new Error("try statement without catch or finally");if(this.prev<et.finallyLoc)return Oe(et.finallyLoc)}}}},abrupt:function(ke,Te){for(var Oe=this.tryEntries.length-1;Oe>=0;--Oe){var Me=this.tryEntries[Oe];if(Me.tryLoc<=this.prev&&R.call(Me,"finallyLoc")&&this.prev<Me.finallyLoc){var et=Me;break}}et&&("break"===ke||"continue"===ke)&&et.tryLoc<=Te&&Te<=et.finallyLoc&&(et=null);var qe=et?et.completion:{};return qe.type=ke,qe.arg=Te,et?(this.method="next",this.next=et.finallyLoc,E):this.complete(qe)},complete:function(ke,Te){if("throw"===ke.type)throw ke.arg;return"break"===ke.type||"continue"===ke.type?this.next=ke.arg:"return"===ke.type?(this.rval=this.arg=ke.arg,this.method="return",this.next="end"):"normal"===ke.type&&Te&&(this.next=Te),E},finish:function(ke){for(var Te=this.tryEntries.length-1;Te>=0;--Te){var Oe=this.tryEntries[Te];if(Oe.finallyLoc===ke)return this.complete(Oe.completion,Oe.afterLoc),Ke(Oe),E}},catch:function(ke){for(var Te=this.tryEntries.length-1;Te>=0;--Te){var Oe=this.tryEntries[Te];if(Oe.tryLoc===ke){var Me=Oe.completion;if("throw"===Me.type){var et=Me.arg;Ke(Oe)}return et}}throw new Error("illegal catch attempt")},delegateYield:function(ke,Te,Oe){return this.delegate={iterator:dt(ke),resultName:Te,nextLoc:Oe},"next"===this.method&&(this.arg=void 0),E}},b}r.exports=I,r.exports.__esModule=!0,r.exports.default=r.exports}(wj);var vv=(0,wj.exports)(),fpe=vv;try{regeneratorRuntime=vv}catch{"object"==typeof Uo?Uo.regeneratorRuntime=vv:Function("r","regeneratorRuntime = r")(vv)}var yv=p(fpe),Ut=p(Aj),hpe=xs,Rj=Fh;gt({target:"Object",stat:!0,forced:gn(function(){Rj(1)})},{keys:function(r){return Rj(hpe(r))}});var xj=p(Vn.Object.keys);gt({target:"Number",stat:!0},{isNaN:function(r){return r!=r}});var Hd=p(Vn.Number.isNaN),ppe=Ei("Array").concat,gpe=Sr,mpe=ppe,dD=Array.prototype,Vu=p(function(r){var i=r.concat;return r===dD||gpe(dD,r)&&i===dD.concat?mpe:i}),_pe=gn,vpe=En("iterator"),fD=!_pe(function(){var r=new URL("b?a=1&b=2&c=3","http://a"),i=r.searchParams,a=new URLSearchParams("a=1&a=2"),s="";return r.pathname="c%20d",i.forEach(function(u,l){i.delete("b"),s+=l+u}),a.delete("a",2),!r.toJSON||!a.has("a",1)||a.has("a",2)||!i.size&&!0||!i.sort||"http://a/c%20d?a=1&c=3"!==r.href||"3"!==i.get("c")||"a=1"!==String(new URLSearchParams("?a=1"))||!i[vpe]||"a"!==new URL("https://a@b").username||"b"!==new URLSearchParams(new URLSearchParams("a=b")).get("a")||"xn--e1aybc"!==new URL("http://\u0442\u0435\u0441\u0442").host||"#%D0%B1"!==new URL("http://a#\u0431").hash||"a1c3"!==s||"x"!==new URL("http://x",void 0).host}),ype=Pu,Fj=zT,Spe=Math.floor,hD=function(r,i){var a=r.length,s=Spe(a/2);return a<8?Ipe(r,i):Tpe(r,hD(Fj(r,0,s),i),hD(Fj(r,s),i),i)},Ipe=function(r,i){for(var a,s,u=r.length,l=1;l<u;){for(s=l,a=r[l];s&&i(r[s-1],a)>0;)r[s]=r[--s];s!==l++&&(r[s]=a)}return r},Tpe=function(r,i,a,s){for(var u=i.length,l=a.length,d=0,f=0;d<u||f<l;)r[d+f]=d<u&&f<l?s(i[d],a[f])<=0?i[d++]:a[f++]:d<u?i[d++]:a[f++];return r},pD=gt,Gd=Un,Sv=Rr,ga=vn,zd=Kr,kj=fD,Mj=Pu,Cpe=f_,wpe=Ru,Dpe=RL,gD=fd,Oj=OC,mD=ur,Epe=xr,Ape=Du,Ppe=Au,Rpe=Hi,Nj=ci,$i=eo,xpe=Ec,Lj=wu,_D=RC,Fpe=Gh,Kd=Hh,kpe=hD,Mpe=En("iterator"),yp="URLSearchParams",Wj=yp+"Iterator",Bj=gD.set,es=gD.getterFor(yp),Ope=gD.getterFor(Wj),Npe=Object.getOwnPropertyDescriptor,vD=function(r){if(!zd)return Gd[r];var i=Npe(Gd,r);return i&&i.value},Uj=vD("fetch"),Iv=vD("Request"),Sp=vD("Headers"),yD=Iv&&Iv.prototype,Vj=Sp&&Sp.prototype,Lpe=Gd.RegExp,Wpe=Gd.TypeError,jj=Gd.decodeURIComponent,Bpe=Gd.encodeURIComponent,Upe=ga("".charAt),Hj=ga([].join),$c=ga([].push),SD=ga("".replace),Vpe=ga([].shift),Gj=ga([].splice),zj=ga("".split),jpe=ga("".slice),Hpe=/\+/g,Kj=Array(4),Gpe=function(r){return Kj[r-1]||(Kj[r-1]=Lpe("((?:%[\\da-f]{2}){"+r+"})","gi"))},zpe=function(r){try{return jj(r)}catch{return r}},$j=function(r){var i=SD(r,Hpe," "),a=4;try{return jj(i)}catch{for(;a;)i=SD(i,Gpe(a--),zpe);return i}},Kpe=/[!'()~]|%20/g,$pe={"!":"%21","'":"%27","(":"%28",")":"%29","~":"%7E","%20":"+"},qpe=function(r){return $pe[r]},qj=function(r){return SD(Bpe(r),Kpe,qpe)},ID=Dpe(function(r,i){Bj(this,{type:Wj,iterator:_D(es(r).entries),kind:i})},"Iterator",function(){var r=Ope(this),i=r.kind,a=r.iterator.next(),s=a.value;return a.done||(a.value="keys"===i?s.key:"values"===i?s.value:[s.key,s.value]),a},!0),Qj=function(r){this.entries=[],this.url=null,void 0!==r&&(Nj(r)?this.parseObject(r):this.parseQuery("string"==typeof r?"?"===Upe(r,0)?jpe(r,1):r:$i(r)))};Qj.prototype={type:yp,bindURL:function(r){this.url=r,this.update()},parseObject:function(r){var i,a,s,u,l,d,f,g=Fpe(r);if(g)for(a=(i=_D(r,g)).next;!(s=Sv(a,i)).done;){if(l=(u=_D(Rpe(s.value))).next,(d=Sv(l,u)).done||(f=Sv(l,u)).done||!Sv(l,u).done)throw Wpe("Expected sequence with length 2");$c(this.entries,{key:$i(d.value),value:$i(f.value)})}else for(var _ in r)Epe(r,_)&&$c(this.entries,{key:_,value:$i(r[_])})},parseQuery:function(r){if(r)for(var i,a,s=zj(r,"&"),u=0;u<s.length;)(i=s[u++]).length&&(a=zj(i,"="),$c(this.entries,{key:$j(Vpe(a)),value:$j(Hj(a,"="))}))},serialize:function(){for(var r,i=this.entries,a=[],s=0;s<i.length;)r=i[s++],$c(a,qj(r.key)+"="+qj(r.value));return Hj(a,"&")},update:function(){this.entries.length=0,this.parseQuery(this.url.query)},updateURL:function(){this.url&&this.url.update()}};var Tv=function(){Oj(this,$d);var r=arguments.length>0?arguments[0]:void 0,i=Bj(this,new Qj(r));zd||(this.size=i.entries.length)},$d=Tv.prototype;if(function(r,i,a){for(var s in i)a&&a.unsafe&&r[s]?r[s]=i[s]:ype(r,s,i[s],a)}($d,{append:function(r,i){var a=es(this);Kd(arguments.length,2),$c(a.entries,{key:$i(r),value:$i(i)}),zd||this.length++,a.updateURL()},delete:function(r){for(var i=es(this),a=Kd(arguments.length,1),s=i.entries,u=$i(r),l=a<2?void 0:arguments[1],d=void 0===l?l:$i(l),f=0;f<s.length;){var g=s[f];if(g.key!==u||void 0!==d&&g.value!==d)f++;else if(Gj(s,f,1),void 0!==d)break}zd||(this.size=s.length),i.updateURL()},get:function(r){var i=es(this).entries;Kd(arguments.length,1);for(var a=$i(r),s=0;s<i.length;s++)if(i[s].key===a)return i[s].value;return null},getAll:function(r){var i=es(this).entries;Kd(arguments.length,1);for(var a=$i(r),s=[],u=0;u<i.length;u++)i[u].key===a&&$c(s,i[u].value);return s},has:function(r){for(var i=es(this).entries,a=Kd(arguments.length,1),s=$i(r),u=a<2?void 0:arguments[1],l=void 0===u?u:$i(u),d=0;d<i.length;){var f=i[d++];if(f.key===s&&(void 0===l||f.value===l))return!0}return!1},set:function(r,i){var a=es(this);Kd(arguments.length,1);for(var s,u=a.entries,l=!1,d=$i(r),f=$i(i),g=0;g<u.length;g++)(s=u[g]).key===d&&(l?Gj(u,g--,1):(l=!0,s.value=f));l||$c(u,{key:d,value:f}),zd||(this.size=u.length),a.updateURL()},sort:function(){var r=es(this);kpe(r.entries,function(i,a){return i.key>a.key?1:-1}),r.updateURL()},forEach:function(r){for(var i,a=es(this).entries,s=Ape(r,arguments.length>1?arguments[1]:void 0),u=0;u<a.length;)s((i=a[u++]).value,i.key,this)},keys:function(){return new ID(this,"keys")},values:function(){return new ID(this,"values")},entries:function(){return new ID(this,"entries")}},{enumerable:!0}),Mj($d,Mpe,$d.entries,{name:"entries"}),Mj($d,"toString",function(){return es(this).serialize()},{enumerable:!0}),zd&&Cpe($d,"size",{get:function(){return es(this).entries.length},configurable:!0,enumerable:!0}),wpe(Tv,yp),pD({global:!0,constructor:!0,forced:!kj},{URLSearchParams:Tv}),!kj&&mD(Sp)){var Qpe=ga(Vj.has),Ype=ga(Vj.set),Yj=function(r){if(Nj(r)){var i,a=r.body;if(Ppe(a)===yp)return i=r.headers?new Sp(r.headers):new Sp,Qpe(i,"content-type")||Ype(i,"content-type","application/x-www-form-urlencoded;charset=UTF-8"),xpe(r,{body:Lj(0,$i(a)),headers:Lj(0,i)})}return r};if(mD(Uj)&&pD({global:!0,enumerable:!0,dontCallGetSet:!0,forced:!0},{fetch:function(r){return Uj(r,arguments.length>1?Yj(arguments[1]):{})}}),mD(Iv)){var TD=function(r){return Oj(this,yD),new Iv(r,arguments.length>1?Yj(arguments[1]):{})};yD.constructor=TD,TD.prototype=yD,pD({global:!0,constructor:!0,dontCallGetSet:!0,forced:!0},{Request:TD})}}var ts,Jpe={URLSearchParams:Tv,getState:es},Jj=Kr,Zpe=Rr,ege=gn,CD=Fh,tge=kh,nge=Dh,rge=xs,ige=_T,qd=Object.assign,Xj=Object.defineProperty,oge=vn([].concat),sge=!qd||ege(function(){if(Jj&&1!==qd({b:1},qd(Xj({},"a",{enumerable:!0,get:function(){Xj(this,"b",{value:3,enumerable:!1})}}),{b:2})).b)return!0;var r={},i={},a=Symbol(),s="abcdefghijklmnopqrst";return r[a]=7,s.split("").forEach(function(u){i[u]=u}),7!=qd({},r)[a]||CD(qd({},i)).join("")!=s})?function(r,i){for(var a=rge(r),s=arguments.length,u=1,l=tge.f,d=nge.f;s>u;)for(var f,g=ige(arguments[u++]),_=l?oge(CD(g),l(g)):CD(g),T=_.length,S=0;T>S;)f=_[S++],Jj&&!Zpe(d,g,f)||(a[f]=g[f]);return a}:qd,qc=vn,bD=2147483647,age=/[^\0-\u007E]/,Zj=/[.\u3002\uFF0E\uFF61]/g,e4="Overflow: input needs wider integers to process",t4=RangeError,uge=qc(Zj.exec),Qd=Math.floor,wD=String.fromCharCode,n4=qc("".charCodeAt),r4=qc([].join),ju=qc([].push),cge=qc("".replace),lge=qc("".split),dge=qc("".toLowerCase),i4=function(r){return r+22+75*(r<26)},fge=function(r,i,a){var s=0;for(r=a?Qd(r/700):r>>1,r+=Qd(r/i);r>455;)r=Qd(r/35),s+=36;return Qd(s+36*r/(r+38))},hge=function(r){var a,s,i=[],u=(r=function(x){for(var U=[],Y=0,Z=x.length;Y<Z;){var oe=n4(x,Y++);if(oe>=55296&&oe<=56319&&Y<Z){var se=n4(x,Y++);56320==(64512&se)?ju(U,((1023&oe)<<10)+(1023&se)+65536):(ju(U,oe),Y--)}else ju(U,oe)}return U}(r)).length,l=128,d=0,f=72;for(a=0;a<r.length;a++)(s=r[a])<128&&ju(i,wD(s));var g=i.length,_=g;for(g&&ju(i,"-");_<u;){var T=bD;for(a=0;a<r.length;a++)(s=r[a])>=l&&s<T&&(T=s);var S=_+1;if(T-l>Qd((bD-d)/S))throw t4(e4);for(d+=(T-l)*S,l=T,a=0;a<r.length;a++){if((s=r[a])<l&&++d>bD)throw t4(e4);if(s==l){for(var I=d,b=36;;){var D=b<=f?1:b>=f+26?26:b-f;if(I<D)break;var R=I-D,L=36-D;ju(i,wD(i4(D+R%L))),I=Qd(R/L),b+=36}ju(i,wD(i4(I))),f=fge(d,S,_==g),d=0,_++}}d++,l++}return r4(i,"")},pge=gt,DD=Kr,gge=fD,ED=Un,o4=Du,ns=vn,Cv=Pu,rs=f_,mge=OC,AD=xr,PD=sge,Yd=Ij,Ws=zT,_ge=rW.codeAt,Ya=eo,yge=Ru,Sge=Hh,s4=Jpe,Ige=fd.set,bv=fd.getterFor("URL"),Tge=s4.URLSearchParams,Cge=s4.getState,Ip=ED.URL,RD=ED.TypeError,wv=ED.parseInt,bge=Math.floor,u4=Math.pow,is=ns("".charAt),Bs=ns(/./.exec),Tp=ns([].join),wge=ns(1..toString),Dge=ns([].pop),Jd=ns([].push),xD=ns("".replace),Ege=ns([].shift),Age=ns("".split),Cp=ns("".slice),Dv=ns("".toLowerCase),Pge=ns([].unshift),FD="Invalid scheme",Qc="Invalid host",c4="Invalid port",l4=/[a-z]/i,Rge=/[\d+-.a-z]/i,kD=/\d/,xge=/^0x/i,Fge=/^[0-7]+$/,kge=/^\d+$/,d4=/^[\da-f]+$/i,Mge=/[\0\t\n\r #%/:<>?@[\\\]^|]/,Oge=/[\0\t\n\r #/:<>?@[\\\]^|]/,Nge=/^[\u0000-\u0020]+/,Lge=/(^|[^\u0000-\u0020])[\u0000-\u0020]+$/,Wge=/[\t\n\r]/g,bp=function(r){var i,a,s,u;if("number"==typeof r){for(i=[],a=0;a<4;a++)Pge(i,r%256),r=bge(r/256);return Tp(i,".")}if("object"==typeof r){for(i="",s=function(l){for(var d=null,f=1,g=null,_=0,T=0;T<8;T++)0!==l[T]?(_>f&&(d=g,f=_),g=null,_=0):(null===g&&(g=T),++_);return _>f&&(d=g,f=_),d}(r),a=0;a<8;a++)u&&0===r[a]||(u&&(u=!1),s===a?(i+=a?":":"::",u=!0):(i+=wge(r[a],16),a<7&&(i+=":")));return"["+i+"]"}return r},Ev={},f4=PD({},Ev,{" ":1,'"':1,"<":1,">":1,"`":1}),h4=PD({},f4,{"#":1,"?":1,"{":1,"}":1}),MD=PD({},h4,{"/":1,":":1,";":1,"=":1,"@":1,"[":1,"\\":1,"]":1,"^":1,"|":1}),Hu=function(r,i){var a=_ge(r,0);return a>32&&a<127&&!AD(i,r)?r:encodeURIComponent(r)},Av={ftp:21,file:null,http:80,https:443,ws:80,wss:443},wp=function(r,i){var a;return 2==r.length&&Bs(l4,is(r,0))&&(":"==(a=is(r,1))||!i&&"|"==a)},p4=function(r){var i;return r.length>1&&wp(Cp(r,0,2))&&(2==r.length||"/"===(i=is(r,2))||"\\"===i||"?"===i||"#"===i)},Bge=function(r){return"."===r||"%2e"===Dv(r)},OD={},g4={},ND={},m4={},_4={},LD={},v4={},y4={},Pv={},Rv={},WD={},BD={},UD={},VD={},S4={},jD={},Xd={},ma={},I4={},Yc={},Ja={},HD=function(r,i,a){var s,u,l,d=Ya(r);if(i){if(u=this.parse(d))throw RD(u);this.searchParams=null}else{if(void 0!==a&&(s=new HD(a,!0)),u=this.parse(d,null,s))throw RD(u);(l=Cge(new Tge)).bindURL(this),this.searchParams=l}};HD.prototype={type:"URL",parse:function(r,i,a){var s,u,l,d,f,g=this,_=i||OD,T=0,S="",I=!1,b=!1,D=!1;for(r=Ya(r),i||(g.scheme="",g.username="",g.password="",g.host=null,g.port=null,g.path=[],g.query=null,g.fragment=null,g.cannotBeABaseURL=!1,r=xD(r,Nge,""),r=xD(r,Lge,"$1")),r=xD(r,Wge,""),s=Yd(r);T<=s.length;){switch(u=s[T],_){case OD:if(!u||!Bs(l4,u)){if(i)return FD;_=ND;continue}S+=Dv(u),_=g4;break;case g4:if(u&&(Bs(Rge,u)||"+"==u||"-"==u||"."==u))S+=Dv(u);else{if(":"!=u){if(i)return FD;S="",_=ND,T=0;continue}if(i&&(g.isSpecial()!=AD(Av,S)||"file"==S&&(g.includesCredentials()||null!==g.port)||"file"==g.scheme&&!g.host))return;if(g.scheme=S,i)return void(g.isSpecial()&&Av[g.scheme]==g.port&&(g.port=null));S="","file"==g.scheme?_=VD:g.isSpecial()&&a&&a.scheme==g.scheme?_=m4:g.isSpecial()?_=y4:"/"==s[T+1]?(_=_4,T++):(g.cannotBeABaseURL=!0,Jd(g.path,""),_=I4)}break;case ND:if(!a||a.cannotBeABaseURL&&"#"!=u)return FD;if(a.cannotBeABaseURL&&"#"==u){g.scheme=a.scheme,g.path=Ws(a.path),g.query=a.query,g.fragment="",g.cannotBeABaseURL=!0,_=Ja;break}_="file"==a.scheme?VD:LD;continue;case m4:if("/"!=u||"/"!=s[T+1]){_=LD;continue}_=Pv,T++;break;case _4:if("/"==u){_=Rv;break}_=ma;continue;case LD:if(g.scheme=a.scheme,u==ts)g.username=a.username,g.password=a.password,g.host=a.host,g.port=a.port,g.path=Ws(a.path),g.query=a.query;else if("/"==u||"\\"==u&&g.isSpecial())_=v4;else if("?"==u)g.username=a.username,g.password=a.password,g.host=a.host,g.port=a.port,g.path=Ws(a.path),g.query="",_=Yc;else{if("#"!=u){g.username=a.username,g.password=a.password,g.host=a.host,g.port=a.port,g.path=Ws(a.path),g.path.length--,_=ma;continue}g.username=a.username,g.password=a.password,g.host=a.host,g.port=a.port,g.path=Ws(a.path),g.query=a.query,g.fragment="",_=Ja}break;case v4:if(!g.isSpecial()||"/"!=u&&"\\"!=u){if("/"!=u){g.username=a.username,g.password=a.password,g.host=a.host,g.port=a.port,_=ma;continue}_=Rv}else _=Pv;break;case y4:if(_=Pv,"/"!=u||"/"!=is(S,T+1))continue;T++;break;case Pv:if("/"!=u&&"\\"!=u){_=Rv;continue}break;case Rv:if("@"==u){I&&(S="%40"+S),I=!0,l=Yd(S);for(var R=0;R<l.length;R++){var L=l[R];if(":"!=L||D){var x=Hu(L,MD);D?g.password+=x:g.username+=x}else D=!0}S=""}else if(u==ts||"/"==u||"?"==u||"#"==u||"\\"==u&&g.isSpecial()){if(I&&""==S)return"Invalid authority";T-=Yd(S).length+1,S="",_=WD}else S+=u;break;case WD:case BD:if(i&&"file"==g.scheme){_=jD;continue}if(":"!=u||b){if(u==ts||"/"==u||"?"==u||"#"==u||"\\"==u&&g.isSpecial()){if(g.isSpecial()&&""==S)return Qc;if(i&&""==S&&(g.includesCredentials()||null!==g.port))return;if(d=g.parseHost(S))return d;if(S="",_=Xd,i)return;continue}"["==u?b=!0:"]"==u&&(b=!1),S+=u}else{if(""==S)return Qc;if(d=g.parseHost(S))return d;if(S="",_=UD,i==BD)return}break;case UD:if(!Bs(kD,u)){if(u==ts||"/"==u||"?"==u||"#"==u||"\\"==u&&g.isSpecial()||i){if(""!=S){var U=wv(S,10);if(U>65535)return c4;g.port=g.isSpecial()&&U===Av[g.scheme]?null:U,S=""}if(i)return;_=Xd;continue}return c4}S+=u;break;case VD:if(g.scheme="file","/"==u||"\\"==u)_=S4;else{if(!a||"file"!=a.scheme){_=ma;continue}if(u==ts)g.host=a.host,g.path=Ws(a.path),g.query=a.query;else if("?"==u)g.host=a.host,g.path=Ws(a.path),g.query="",_=Yc;else{if("#"!=u){p4(Tp(Ws(s,T),""))||(g.host=a.host,g.path=Ws(a.path),g.shortenPath()),_=ma;continue}g.host=a.host,g.path=Ws(a.path),g.query=a.query,g.fragment="",_=Ja}}break;case S4:if("/"==u||"\\"==u){_=jD;break}a&&"file"==a.scheme&&!p4(Tp(Ws(s,T),""))&&(wp(a.path[0],!0)?Jd(g.path,a.path[0]):g.host=a.host),_=ma;continue;case jD:if(u==ts||"/"==u||"\\"==u||"?"==u||"#"==u){if(!i&&wp(S))_=ma;else if(""==S){if(g.host="",i)return;_=Xd}else{if(d=g.parseHost(S))return d;if("localhost"==g.host&&(g.host=""),i)return;S="",_=Xd}continue}S+=u;break;case Xd:if(g.isSpecial()){if(_=ma,"/"!=u&&"\\"!=u)continue}else if(i||"?"!=u)if(i||"#"!=u){if(u!=ts&&(_=ma,"/"!=u))continue}else g.fragment="",_=Ja;else g.query="",_=Yc;break;case ma:if(u==ts||"/"==u||"\\"==u&&g.isSpecial()||!i&&("?"==u||"#"==u)){if(".."===(f=Dv(f=S))||"%2e."===f||".%2e"===f||"%2e%2e"===f?(g.shortenPath(),"/"==u||"\\"==u&&g.isSpecial()||Jd(g.path,"")):Bge(S)?"/"==u||"\\"==u&&g.isSpecial()||Jd(g.path,""):("file"==g.scheme&&!g.path.length&&wp(S)&&(g.host&&(g.host=""),S=is(S,0)+":"),Jd(g.path,S)),S="","file"==g.scheme&&(u==ts||"?"==u||"#"==u))for(;g.path.length>1&&""===g.path[0];)Ege(g.path);"?"==u?(g.query="",_=Yc):"#"==u&&(g.fragment="",_=Ja)}else S+=Hu(u,h4);break;case I4:"?"==u?(g.query="",_=Yc):"#"==u?(g.fragment="",_=Ja):u!=ts&&(g.path[0]+=Hu(u,Ev));break;case Yc:i||"#"!=u?u!=ts&&("'"==u&&g.isSpecial()?g.query+="%27":g.query+="#"==u?"%23":Hu(u,Ev)):(g.fragment="",_=Ja);break;case Ja:u!=ts&&(g.fragment+=Hu(u,f4))}T++}},parseHost:function(r){var i,a,s;if("["==is(r,0)){if("]"!=is(r,r.length-1)||!(i=function(u){var l,d,f,g,_,T,S,I=[0,0,0,0,0,0,0,0],b=0,D=null,R=0,L=function(){return is(u,R)};if(":"==L()){if(":"!=is(u,1))return;R+=2,D=++b}for(;L();){if(8==b)return;if(":"!=L()){for(l=d=0;d<4&&Bs(d4,L());)l=16*l+wv(L(),16),R++,d++;if("."==L()){if(0==d||(R-=d,b>6))return;for(f=0;L();){if(g=null,f>0){if(!("."==L()&&f<4))return;R++}if(!Bs(kD,L()))return;for(;Bs(kD,L());){if(_=wv(L(),10),null===g)g=_;else{if(0==g)return;g=10*g+_}if(g>255)return;R++}I[b]=256*I[b]+g,2!=++f&&4!=f||b++}if(4!=f)return;break}if(":"==L()){if(R++,!L())return}else if(L())return;I[b++]=l}else{if(null!==D)return;R++,D=++b}}if(null!==D)for(T=b-D,b=7;0!=b&&T>0;)S=I[b],I[b--]=I[D+T-1],I[D+--T]=S;else if(8!=b)return;return I}(Cp(r,1,-1))))return Qc;this.host=i}else if(this.isSpecial()){if(r=function(r){var i,a,s=[],u=lge(cge(dge(r),Zj,"."),".");for(i=0;i<u.length;i++)ju(s,uge(age,a=u[i])?"xn--"+hge(a):a);return r4(s,".")}(r),Bs(Mge,r)||null===(i=function(u){var l,d,f,g,_,T,S,I=Age(u,".");if(I.length&&""==I[I.length-1]&&I.length--,(l=I.length)>4)return u;for(d=[],f=0;f<l;f++){if(""==(g=I[f]))return u;if(_=10,g.length>1&&"0"==is(g,0)&&(_=Bs(xge,g)?16:8,g=Cp(g,8==_?1:2)),""===g)T=0;else{if(!Bs(10==_?kge:8==_?Fge:d4,g))return u;T=wv(g,_)}Jd(d,T)}for(f=0;f<l;f++)if(T=d[f],f==l-1){if(T>=u4(256,5-l))return null}else if(T>255)return null;for(S=Dge(d),f=0;f<d.length;f++)S+=d[f]*u4(256,3-f);return S}(r)))return Qc;this.host=i}else{if(Bs(Oge,r))return Qc;for(i="",a=Yd(r),s=0;s<a.length;s++)i+=Hu(a[s],Ev);this.host=i}},cannotHaveUsernamePasswordPort:function(){return!this.host||this.cannotBeABaseURL||"file"==this.scheme},includesCredentials:function(){return""!=this.username||""!=this.password},isSpecial:function(){return AD(Av,this.scheme)},shortenPath:function(){var r=this.path,i=r.length;!i||"file"==this.scheme&&1==i&&wp(r[0],!0)||r.length--},serialize:function(){var r=this,i=r.scheme,a=r.username,s=r.password,u=r.host,l=r.port,d=r.path,f=r.query,g=r.fragment,_=i+":";return null!==u?(_+="//",r.includesCredentials()&&(_+=a+(s?":"+s:"")+"@"),_+=bp(u),null!==l&&(_+=":"+l)):"file"==i&&(_+="//"),_+=r.cannotBeABaseURL?d[0]:d.length?"/"+Tp(d,"/"):"",null!==f&&(_+="?"+f),null!==g&&(_+="#"+g),_},setHref:function(r){var i=this.parse(r);if(i)throw RD(i);this.searchParams.update()},getOrigin:function(){var r=this.scheme,i=this.port;if("blob"==r)try{return new Zd(r.path[0]).origin}catch{return"null"}return"file"!=r&&this.isSpecial()?r+"://"+bp(this.host)+(null!==i?":"+i:""):"null"},getProtocol:function(){return this.scheme+":"},setProtocol:function(r){this.parse(Ya(r)+":",OD)},getUsername:function(){return this.username},setUsername:function(r){var i=Yd(Ya(r));if(!this.cannotHaveUsernamePasswordPort()){this.username="";for(var a=0;a<i.length;a++)this.username+=Hu(i[a],MD)}},getPassword:function(){return this.password},setPassword:function(r){var i=Yd(Ya(r));if(!this.cannotHaveUsernamePasswordPort()){this.password="";for(var a=0;a<i.length;a++)this.password+=Hu(i[a],MD)}},getHost:function(){var r=this.host,i=this.port;return null===r?"":null===i?bp(r):bp(r)+":"+i},setHost:function(r){this.cannotBeABaseURL||this.parse(r,WD)},getHostname:function(){var r=this.host;return null===r?"":bp(r)},setHostname:function(r){this.cannotBeABaseURL||this.parse(r,BD)},getPort:function(){var r=this.port;return null===r?"":Ya(r)},setPort:function(r){this.cannotHaveUsernamePasswordPort()||(""==(r=Ya(r))?this.port=null:this.parse(r,UD))},getPathname:function(){var r=this.path;return this.cannotBeABaseURL?r[0]:r.length?"/"+Tp(r,"/"):""},setPathname:function(r){this.cannotBeABaseURL||(this.path=[],this.parse(r,Xd))},getSearch:function(){var r=this.query;return r?"?"+r:""},setSearch:function(r){""==(r=Ya(r))?this.query=null:("?"==is(r,0)&&(r=Cp(r,1)),this.query="",this.parse(r,Yc)),this.searchParams.update()},getSearchParams:function(){return this.searchParams.facade},getHash:function(){var r=this.fragment;return r?"#"+r:""},setHash:function(r){""!=(r=Ya(r))?("#"==is(r,0)&&(r=Cp(r,1)),this.fragment="",this.parse(r,Ja)):this.fragment=null},update:function(){this.query=this.searchParams.serialize()||null}};var Zd=function(r){var i=mge(this,qi),a=Sge(arguments.length,1)>1?arguments[1]:void 0,s=Ige(i,new HD(r,!1,a));DD||(i.href=s.serialize(),i.origin=s.getOrigin(),i.protocol=s.getProtocol(),i.username=s.getUsername(),i.password=s.getPassword(),i.host=s.getHost(),i.hostname=s.getHostname(),i.port=s.getPort(),i.pathname=s.getPathname(),i.search=s.getSearch(),i.searchParams=s.getSearchParams(),i.hash=s.getHash())},qi=Zd.prototype,os=function(r,i){return{get:function(){return bv(this)[r]()},set:i&&function(a){return bv(this)[i](a)},configurable:!0,enumerable:!0}};if(DD&&(rs(qi,"href",os("serialize","setHref")),rs(qi,"origin",os("getOrigin")),rs(qi,"protocol",os("getProtocol","setProtocol")),rs(qi,"username",os("getUsername","setUsername")),rs(qi,"password",os("getPassword","setPassword")),rs(qi,"host",os("getHost","setHost")),rs(qi,"hostname",os("getHostname","setHostname")),rs(qi,"port",os("getPort","setPort")),rs(qi,"pathname",os("getPathname","setPathname")),rs(qi,"search",os("getSearch","setSearch")),rs(qi,"searchParams",os("getSearchParams")),rs(qi,"hash",os("getHash","setHash"))),Cv(qi,"toJSON",function(){return bv(this).serialize()},{enumerable:!0}),Cv(qi,"toString",function(){return bv(this).serialize()},{enumerable:!0}),Ip){var T4=Ip.createObjectURL,C4=Ip.revokeObjectURL;T4&&Cv(Zd,"createObjectURL",o4(T4,Ip)),C4&&Cv(Zd,"revokeObjectURL",o4(C4,Ip))}yge(Zd,"URL"),pge({global:!0,constructor:!0,forced:!gge,sham:!DD},{URL:Zd});var Uge=gt,Vge=gn,jge=Hh,b4=eo,Hge=fD,w4=Di("URL");Uge({target:"URL",stat:!0,forced:!(Hge&&Vge(function(){w4.canParse()}))},{canParse:function(r){var i=jge(arguments.length,1),a=b4(r),s=i<2||void 0===arguments[1]?void 0:b4(arguments[1]);try{return!!new w4(a,s)}catch{return!1}}});var Gge=p(Vn.URL),zge=gt,Kge=hd.findIndex,D4="findIndex",E4=!0;D4 in[]&&Array(1)[D4](function(){E4=!1}),zge({target:"Array",proto:!0,forced:E4},{findIndex:function(r){return Kge(this,r,arguments.length>1?arguments[1]:void 0)}});var $ge=Ei("Array").findIndex,qge=Sr,Qge=$ge,GD=Array.prototype,A4=p(function(r){var i=r.findIndex;return r===GD||qge(GD,r)&&i===GD.findIndex?Qge:i}),P4=Kr,Yge=gn,R4=vn,Jge=_d,Xge=Fh,Zge=Ps,x4=R4(Dh.f),eme=R4([].push),tme=P4&&Yge(function(){var r=Object.create(null);return r[2]=2,!x4(r,2)}),F4=function(r){return function(i){for(var a,s=Zge(i),u=Xge(s),l=tme&&null===Jge(s),d=u.length,f=0,g=[];d>f;)a=u[f++],P4&&!(l?a in s:x4(s,a))||eme(g,r?[a,s[a]]:s[a]);return g}},nme=[F4(!0),F4(!1)][0];gt({target:"Object",stat:!0},{entries:function(r){return nme(r)}});var xv=p(Vn.Object.entries),rme=gt,ime=hd.find,M4=!0;"find"in[]&&Array(1).find(function(){M4=!1}),rme({target:"Array",proto:!0,forced:M4},{find:function(r){return ime(this,r,arguments.length>1?arguments[1]:void 0)}});var ome=Ei("Array").find,sme=Sr,ame=ome,zD=Array.prototype,Dp=p(function(r){var i=r.find;return r===zD||sme(zD,r)&&i===zD.find?ame:i}),ume=hd.filter;gt({target:"Array",proto:!0,forced:!xh("filter")},{filter:function(r){return ume(this,r,arguments.length>1?arguments[1]:void 0)}});var cme=Ei("Array").filter,lme=Sr,dme=cme,KD=Array.prototype,O4=p(function(r){var i=r.filter;return r===KD||lme(KD,r)&&i===KD.filter?dme:i}),fme=hd.map;gt({target:"Array",proto:!0,forced:!xh("map")},{map:function(r){return fme(this,r,arguments.length>1?arguments[1]:void 0)}});var hme=Ei("Array").map,pme=Sr,gme=hme,$D=Array.prototype,Fv=p(function(r){var i=r.map;return r===$D||pme($D,r)&&i===$D.map?gme:i}),mme=p(Tj),N4=p(sN);function L4(r,i){var a=xj(r);if($V){var s=$V(r);i&&(s=O4(s).call(s,function(u){return ZV(r,u).enumerable})),a.push.apply(a,s)}return a}function ef(r){for(var i=1;i<arguments.length;i++){var a,s,u=null!=arguments[i]?arguments[i]:{};i%2?Ut(a=L4(Object(u),!0)).call(a,function(l){$e(r,l,u[l])}):ej?hhe(r,ej(u)):Ut(s=L4(Object(u))).call(s,function(l){N4(r,l,ZV(u,l))})}return r}function kv(r){var i=function(){if(typeof Reflect>"u"||!pv||pv.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(pv(Boolean,[],function(){})),!0}catch{return!1}}();return function(){var a,s=Vd(r);if(i){var u=Vd(this).constructor;a=pv(s,arguments,u)}else a=s.apply(this,arguments);return function(l,d){if(d&&("object"===jo(d)||"function"==typeof d))return d;if(void 0!==d)throw new TypeError("Derived constructors may only return object or undefined");return Yn(l)}(this,a)}}var Jc=function(r){return D_?D_(r):"[object Array]"===Object.prototype.toString.call(r)},ni=function(r){return void 0===r},W4=function(r,i){var a,s;r=null!==(a=r)&&void 0!==a?a:"yyyy-MM-dd hh:mm:ss";var u=ni(i)?new Date:new Date(i),l={"M+":(u.getMonth()+1).toString(),"d+":u.getDate().toString(),"h+":u.getHours().toString(),"m+":u.getMinutes().toString(),"s+":u.getSeconds().toString(),"q+":Math.floor((u.getMonth()+3)/3).toString(),S:u.getMilliseconds().toString()};return/(y+)/.test(r)&&(r=r.replace(RegExp.$1,"".concat(u.getFullYear()).substring(4-RegExp.$1.length))),Ut(s=xj(l)).call(s,function(d){new RegExp("(".concat(d,")")).test(r)&&(r=r.replace(RegExp.$1,1===RegExp.$1.length?l[d]:"00".concat(l[d]).substring("".concat(l[d]).length)))}),r},rr=function(r){return"string"==typeof r},Xc=function(r){return"number"==typeof r&&!Hd(r)},Ep=function(r){return"function"==typeof r},B4=0,Gu=function(){var r;return B4+=1,Vu(r="".concat((new Date).getTime().toString(36))).call(r,B4.toString(36))},Mv=function(r){var i=Gge||window.webkitURL;/^blob:/.test(r)&&i.revokeObjectURL(r)},U4=function(){function r(){var i=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"",a=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"";Bn(this,r),$e(this,"prefix",void 0),$e(this,"postfix",void 0),$e(this,"isDestroyed",!1),$e(this,"uid",Gu()),$e(this,"cacheEvents",void 0),$e(this,"events",void 0),$e(this,"isCached",void 0),this.cacheEvents=[],this.events={},this.isCached=!1,this.prefix=i,this.postfix=a}return jn(r,[{key:"save",value:function(){this.isCached=!0}},{key:"restore",value:function(){var i,a=this;this.isCached=!1,Ut(i=this.cacheEvents).call(i,function(s){var u,d=s.param;a.emit.apply(a,Vu(u=[s.eventName]).call(u,_v(d)))}),this.cacheEvents.length=0}},{key:"destroy",value:function(){var i=this;if(!this.isDestroyed){for(var a in this.events)if(Object.prototype.hasOwnProperty.call(this.events,a)){var s,u=this.events[a];u&&Ut(s=ks(u).call(u)).call(s,function(l){i.off(l.name,l.fn,l.context,l.once)})}this.events={},this.isDestroyed=!0}}},{key:"on",value:function(i,a,s){var u,l=arguments.length>3&&void 0!==arguments[3]&&arguments[3],d=this.events,f={name:i=this.format(i),uid:Gu(),context:s,once:l,fn:a};return d[i]||(d[i]=[]),Ir(u=d[i]).call(u,f)<0&&d[i].push(f),f}},{key:"once",value:function(i,a,s){return this.on(i,a,s,!0)}},{key:"emit",value:function(i){for(var a,s,u=this,l=arguments.length,d=new Array(l>1?l-1:0),f=1;f<l;f++)d[f-1]=arguments[f];if(this.isCached)return this.cacheEvents.push({eventName:i,param:d}),!0;var g=this.events[i=this.format(i)];return!(!g||!g.length||(Ut(a=ks(g).call(g)).call(a,function(_){var T,S=_.fn;S.call.apply(S,Vu(T=[_.context||null]).call(T,d))}),Ut(s=ks(g).call(g)).call(s,function(_){var I=_.once;I&&u.off(i,_.fn,_.context,I)}),0))}},{key:"off",value:function(i,a,s,u){var l=this.events[i=this.format(i)];if(!l)return!1;if(!arguments.length)return l.length=0,!0;for(var d=l.length-1;d>=0;d--){var f=l[d];a&&f.fn!==a||s&&f.context!==s||u&&f.once!==u||Ai(l).call(l,d,1)}return!0}},{key:"removeAllEventListeners",value:function(i){if(i){var a,s;i=this.format(i);var u=A4(a=this.cacheEvents).call(a,function(l){return l.eventName===i});u>-1&&Ai(s=this.cacheEvents).call(s,u,1),this.events[i]&&delete this.events[i]}else this.cacheEvents=[],this.events={}}},{key:"getAllEvents",value:function(){return this.events}},{key:"format",value:function(i){var a,s;return Vu(a=Vu(s="".concat(this.prefix||"")).call(s,i)).call(a,this.postfix||"")}}],[{key:"create",value:function(i,a){return new r(i,a)}}]),r}(),qD="default",rn=function(){function r(){Bn(this,r),$e(this,"emitter",new U4)}return jn(r,[{key:"on",value:function(i){this.emitter.on(qD,i)}},{key:"emit",value:function(){for(var i,a,s=arguments.length,u=new Array(s),l=0;l<s;l++)u[l]=arguments[l];(i=this.emitter).emit.apply(i,Vu(a=[qD]).call(a,u))}},{key:"off",value:function(i){this.emitter.off(qD,i)}}],[{key:"create",value:function(){return new r}}]),r}(),Ap=function(){function r(i){Bn(this,r),$e(this,"uid",void 0),$e(this,"children",void 0),this.uid=i.uid,this.children=i.children||[]}return jn(r,[{key:"append",value:function(i){var a=this.children;return Ir(a).call(a,i)<0&&(a.push(i),!0)}},{key:"insert",value:function(i,a){var s=this.children;return!(a<0||a>s.length||(Ai(s).call(s,a,0,i),0))}},{key:"remove",value:function(i){var a=this.children,s=Ir(a).call(a,i);return!(s<0||(Ai(a).call(a,s,1),0))}},{key:"clear",value:function(){return this.children=[],!0}},{key:"move",value:function(i,a){if(i===a)return!0;var s=this.children,u=jd(Ai(s).call(s,i,1),1)[0];return Ai(s).call(s,a,0,u),!0}},{key:"switch",value:function(i,a){if(i===a)return!0;var s=this.children,u=s[i];return s[i]=s[a],s[a]=u,!0}},{key:"reorder",value:function(i){var a=this.children,s=i.length,u=[],l=0;if(a.length!==s||0===s)return!1;for(var d=0;d<s;d++)i[d]===d&&(l+=1);if(l===s)return!0;for(var f=0;f<s;f++)u[f]=a[i[f]];for(var g=0;g<s;g++)a[g]=u[g];return!0}}]),r}(),V4=function(){function r(i,a){Bn(this,r),$e(this,"isDestroyed",!1),$e(this,"data",void 0),$e(this,"table",["database","table","item"]),$e(this,"dbName",void 0),$e(this,"tableName",void 0),this.data={},this.dbName=i,this.tableName=a,this.createDatabase(i,a)}return jn(r,[{key:"destroy",value:function(){if(!this.isDestroyed){for(var i=0,a=xv(this.data);i<a.length;i++){var s=jd(a[i],2);this.data[s[0]]=null}this.data=null,this.isDestroyed=!0}}},{key:"createDatabase",value:function(i,a){this.data[i]={},this.data[i][a]={}}},{key:"set",value:function(i,a){var s=this,u=this.dbName,l=this.tableName;return new kc(function(d,f){s.checkId(i)?f(new Error("The ".concat(i," already exists."))):(s.data[u][l][i]=a,d("Save ".concat(i," to database successful.")))})}},{key:"get",value:function(i){var a=this,s=this.dbName,u=this.tableName;return new kc(function(l,d){a.checkId(i)?l(a.data[s][u][i]):d(a.erMsg(2,i))})}},{key:"remove",value:function(i){var a=this,s=this.dbName,u=this.tableName;return new kc(function(l,d){delete a.data[s][u][i],l("Remove ".concat(i," successful."))})}},{key:"update",value:function(i,a){var s=this,u=this.dbName,l=this.tableName;return new kc(function(d,f){s.checkId(i)?(s.data[u][l][i]=a,d("Update ".concat(i," successful."))):f(s.erMsg(2,i))})}},{key:"checkId",value:function(i){return void 0!==this.data[this.dbName][this.tableName][i]}},{key:"erMsg",value:function(i,a){var s;return Vu(s="The ".concat(this.table[i]," ")).call(s,a," does not exist.")}}]),r}(),Ov=function(){function r(){Bn(this,r),$e(this,"isDestroyed",!1),$e(this,"data",void 0),this.data={}}return jn(r,[{key:"destroy",value:function(){if(!this.isDestroyed){for(var i=0,a=xv(this.data);i<a.length;i++){var s,l=jd(a[i],2)[0];null!==(s=this.data[l])&&void 0!==s&&s.destroy(),this.data[l]=null}this.data=null,this.isDestroyed=!0}}},{key:"set",value:function(i,a){return!this.check(i)&&(this.data[i]=a,!0)}},{key:"get",value:function(i){return this.data[i]}},{key:"remove",value:function(i){return!!this.check(i)&&(delete this.data[i],!0)}},{key:"update",value:function(i,a){return!!this.check(i)&&(this.data[i]=a,!0)}},{key:"check",value:function(i){return void 0!==this.data[i]}}]),r}(),j4=function(r){mv(a,r);var i=kv(a);function a(s){var u;return Bn(this,a),$e(Yn(u=i.call(this,s)),"name",void 0),$e(Yn(u),"type",void 0),$e(Yn(u),"fileType",void 0),$e(Yn(u),"createdDate",void 0),$e(Yn(u),"modifiedDate",void 0),$e(Yn(u),"parent",void 0),$e(Yn(u),"isRoot",!1),u.name=s.name,u.type=s.type,u.fileType=s.fileType,u.parent=s.parent||null,u.isRoot=s.isRoot||!1,u.createdDate=W4(),u.modifiedDate=u.createdDate,u}return jn(a,[{key:"updateDate",value:function(){this.modifiedDate=W4()}},{key:"setName",value:function(s){this.name=s}},{key:"reorder",value:function(s){var u=this.type;return("file"===u||"default"===u)&&gv(Vd(a.prototype),"reorder",this).call(this,s)}}]),a}(Ap),_me=function(){function r(){Bn(this,r),$e(this,"root",void 0),$e(this,"currentNode",void 0),$e(this,"selectedUid",void 0),$e(this,"defaultNode",void 0),$e(this,"hooks",{fileChanged:rn.create(),beforeRemoveFile:rn.create(),removeFile:rn.create(),afterRemoveFile:rn.create(),afterRenameFile:rn.create(),destroy:rn.create()}),this.root=new j4({uid:Gu(),children:[],name:"root",type:"file",fileType:"folder",parent:void 0,isRoot:!0}),this.defaultNode=this.root,this.currentNode=this.root}return jn(r,[{key:"appendChildrenToFile",value:function(i,a,s){var u=s,l=H4(this.defaultNode,i);return l||(l=this.createFile(i),this.hooks.fileChanged.emit(this.defaultNode)),Ut(a).call(a,function(d){ni(u)?l.append(d):(l.insert(d,u),u+=1)}),l}},{key:"removeChildFromFile",value:function(i,a){rr(a)&&(a=[a]);var s=this.getFileByUid(i);s&&Ut(a).call(a,function(u){s.remove(u)})}},{key:"findChild",value:function(i,a){var s;return Dp(s=i.children).call(s,function(u){return u.name===a})}},{key:"createFile",value:function(i){var a=this.defaultNode;a||(a=this.root);var s=H4(a,i);return s&&"file"===s.type||(s=new j4({uid:Gu(),children:[],name:i,type:"file",fileType:"file",parent:a,isRoot:!1}),this.currentNode.append(s),this.hooks.fileChanged.emit(this.currentNode.children)),s}},{key:"removeFile",value:function(i){for(var a=this.defaultNode.children,s=0;s<a.length;s++){var u=a[s];if(u.name===i)return this.hooks.beforeRemoveFile.emit(u),Ai(a).call(a,s,1),this.hooks.afterRemoveFile.emit(u),this.hooks.fileChanged.emit(u),!0}return!1}},{key:"renameFile",value:function(i,a){var s=this.findChild(this.defaultNode,i),u=this.findChild(this.defaultNode,a);return!!s&&!u&&(s.name=a,this.hooks.afterRenameFile.emit(s),this.hooks.fileChanged.emit(this.currentNode.children),!0)}},{key:"getFile",value:function(i){return this.findChild(this.defaultNode,i)}},{key:"getFileByUid",value:function(i){return Dp(this).call(this,i,this.root)}},{key:"getCurrentFileList",value:function(){return this.currentNode.children}},{key:"isFileExist",value:function(i){return!!this.findChild(this.defaultNode,i)}},{key:"createFolder",value:function(){}},{key:"find",value:function(i,a){for(var s=a.children,u=s.length,l=0;l<u;l++){if(s[l].uid===i)return s[l];if(s[l].children){var d=Dp(this).call(this,i,s[l]);if(d)return d}}return null}}]),r}();function H4(r,i){var a,s=O4(a=r.children).call(a,function(u){return u.name===i});return 0===s.length?null:s[0]}var G4,Nv,z4=function(r){mv(a,r);var i=kv(a);function a(s){var u;return Bn(this,a),$e(Yn(u=i.call(this,s)),"name",void 0),$e(Yn(u),"type","tag"),u.name=s.name,u.uid=s.uid||Gu(),u.type="tag",u}return jn(a)}(Ap),vme=function(){function r(){Bn(this,r),$e(this,"tags",void 0),$e(this,"defaultName",void 0),$e(this,"defaultUid",void 0),$e(this,"selectedUid",void 0),$e(this,"emptyItem",void 0),$e(this,"hooks",{beforeRemoveTag:rn.create(),afterRenameTag:rn.create(),destroy:rn.create(),load:rn.create()}),this.tags=[],this.defaultName=null,this.defaultUid=null,this.selectedUid=null,this.emptyItem=new z4({name:"defaultTag",children:[]})}return jn(r,[{key:"appendChildToTag",value:function(i,a){var s=this.createTag(i);rr(a)&&(a=[a]);var u=!1;return Ut(a).call(a,function(l){s.append(l)&&(u=!0)}),u}},{key:"removeChildFromTag",value:function(i,a){var s=this.getTag(i);return!!s&&(rr(a)&&(a=[a]),Ut(a).call(a,function(u){s.remove(u)}),!0)}},{key:"createTag",value:function(i){var a=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[],s=this.getTag(i);return s||(s=new z4({name:i,children:a}),this.tags.push(s)),s}},{key:"removeTag",value:function(i){var a,s,u=this.getTag(i);if(!u)return!1;this.hooks.beforeRemoveTag.emit(u);var l=A4(a=this.tags).call(a,function(d){return d.name===i});return i===this.defaultName&&(this.defaultName=null,this.selectedUid=null),Ai(s=this.tags).call(s,l,1),!0}},{key:"renameTag",value:function(i,a){if(!rr(i)||!rr(a))return!1;var s=this.isTagExisted(a),u=this.getTag(i);return!(!u||s||(u.name=a,this.hooks.afterRenameTag.emit(u),0))}},{key:"getTag",value:function(i){var a;return Dp(a=this.tags).call(a,function(s){return s.name===i})}},{key:"getTagByUid",value:function(i){var a;return Dp(a=this.tags).call(a,function(s){return s.uid===i})}},{key:"getTagList",value:function(){var i;return ks(i=this.tags).call(i)}},{key:"setDefaultTag",value:function(i){if(!i)return this.defaultName=null,this.defaultUid=null,!0;var a=this.getTag(i);return!!a&&(this.defaultName=i,this.defaultUid=a.uid,!0)}},{key:"getDefaultTag",value:function(){return this.defaultName}},{key:"isTagExisted",value:function(i){return!!this.getTag(i)}}]),r}(),yme=function(){function r(){Bn(this,r)}return jn(r,[{key:"apply",value:function(i){var a=i.hooks,s={beforeStatus:null,afterStatus:null,operation:null,docUid:null},u=function(d){s.beforeStatus={uids:[],selectedUids:[],currentUid:"",modifiedUid:d.modifiedUid,removedUids:d.removedUids}},l=function(d){s.afterStatus={uids:[],selectedUids:[],currentUid:"",modifiedUid:d.modifiedUid,removedUids:d.removedUids},s.docUid="",s.operation=d.operation,i.emit("bufferChanged",ef({},s)),s={beforeStatus:null,afterStatus:null,operation:null,docUid:null}};a.beforeBufferChanged.on(u),a.afterBufferChanged.on(l),a.destroy.on(function(){a.beforeBufferChanged.off(u),a.afterBufferChanged.off(l)})}}]),r}(),Sme=function(){function r(){Bn(this,r)}return jn(r,[{key:"apply",value:function(i){var a=i.hooks;i.customStore=new Ov;var s=function(d){var f=d.data;Ut(f).call(f,function(g){var _=g.customData;_||(_={}),i.customStore.set(g.uid,_)})},u=function(d){var f=d.removedUids;Ut(f).call(f,function(g){i.customStore.remove(g)})},l=function(d){var f=d.data.customData;f&&i.customStore.update(d.modifiedUid,f)};a.loadSource.on(s),a.removeSource.on(u),a.updateSource.on(l),a.destroy.on(function(){a.loadSource.off(s),a.removeSource.off(u),a.updateSource.off(l)})}}]),r}(),Ime=function(r){mv(a,r);var i=kv(a);function a(){var s;return Bn(this,a),$e(Yn(s=i.call(this,{uid:Gu(),children:[]})),"name","dvs-default"),$e(Yn(s),"isDestroyed",!1),$e(Yn(s),"type",void 0),s}return jn(a,[{key:"destroy",value:function(){this.isDestroyed||(this.isDestroyed=!0)}}]),a}(Ap),Tme=function(){function r(){Bn(this,r)}return jn(r,[{key:"apply",value:function(i){i.defaultFile=new Ime;var a=i.hooks,s=function(l){var d,f,g,T=l.index,S=l.data;if(ni(l.filename)){var I=Fv(S).call(S,function(D){return D.uid});void 0===T?(d=i.defaultFile.children).push.apply(d,_v(I)):Ai(f=i.defaultFile.children).apply(f,Vu(g=[T,0]).call(g,_v(I))),i.hooks.loadToDoc.emit({docUid:i.defaultFile.uid,sourceUids:I,type:"default",index:T})}},u=function(l){var d=l.removedUids,f=[];Ut(d).call(d,function(g){var _=i.statusStore.get(g);_&&_.ownerDefaultFile&&(i.defaultFile.remove(g),f.push(g))}),f.length&&i.hooks.removeFromDoc.emit({docUid:i.defaultFile.uid,sourceUids:d,type:"default"})};a.loadSource.on(s),a.removeSource.on(u),a.destroy.on(function(){a.loadSource.off(s),a.removeSource.off(u)})}}]),r}(),Cme=function(){function r(){Bn(this,r)}return jn(r,[{key:"apply",value:function(i){i.dir=new _me,this.listenDirectoryHooks(i),this.listenSpaceHooks(i)}},{key:"listenDirectoryHooks",value:function(i){var a=i.dir.hooks,s=function(l){var d;Ut(d=l.children).call(d,function(f){var g=i.statusStore.get(f);g&&g.ownerFiles.remove(l.uid)}),i.hooks.removeDoc.emit(l)},u=function(l){i.hooks.renameDoc.emit(l)};a.beforeRemoveFile.on(s),a.afterRenameFile.on(u),a.destroy.on(function(){a.beforeRemoveFile.off(s),a.afterRenameFile.off(u)})}},{key:"listenSpaceHooks",value:function(i){var a=i.hooks,s=function(l){var d=l.data,f=l.filename,g=l.index;if(!ni(f)){var _=Fv(d).call(d,function(S){return S.uid}),T={docUid:i.dir.appendChildrenToFile(f,_,g).uid,sourceUids:_,type:"file",index:g};i.hooks.loadToDoc.emit(T)}},u=function(l){var d=l.removedUids,f={};Ut(d).call(d,function(b){var D,R,L=i.statusStore.get(b);L&&Ut(D=ks(R=L.ownerFiles.children).call(R)).call(D,function(x){f[x]||(f[x]=[]),f[x].push(b)})});for(var g=0,_=xv(f);g<_.length;g++){var T=jd(_[g],2),S=T[0],I=T[1];i.dir.removeChildFromFile(S,I),i.hooks.removeFromDoc.emit({docUid:S,sourceUids:I})}};a.loadSource.on(s),a.removeSource.on(u),a.destroy.on(function(){a.loadSource.off(s),a.removeSource.off(u)})}}]),r}(),bme=function(){function r(){Bn(this,r)}return jn(r,[{key:"apply",value:function(i){var a=i.hooks;i.metadataStore=new Ov;var s=function(d){var f=d.data;Ut(f).call(f,function(g){var _=g.metadata;_||(_={width:void 0,height:void 0}),i.metadataStore.set(g.uid,_)})},u=function(d){var f=d.removedUids;Ut(f).call(f,function(g){i.metadataStore.remove(g)})},l=function(d){var f=d.data.metadata;f&&i.metadataStore.update(d.modifiedUid,f)};a.loadSource.on(s),a.removeSource.on(u),a.updateSource.on(l),a.destroy.on(function(){a.loadSource.off(s),a.removeSource.off(u),a.updateSource.off(l)})}}]),r}(),wme=function(){function r(i){Bn(this,r),$e(this,"uid",null),$e(this,"minData",null),$e(this,"oriData",null),$e(this,"customData",{}),$e(this,"activeOri",!1),$e(this,"activeMin",!1),$e(this,"minTask",null),$e(this,"oriTask",null),$e(this,"load",!1),$e(this,"preload",[]),$e(this,"visible",[]),$e(this,"overlays",[]),$e(this,"img",null),$e(this,"minImg",null),$e(this,"imageScale",1),$e(this,"owners",[]),$e(this,"oriType",null),$e(this,"minType",null),$e(this,"metadata",null),$e(this,"realTimeWidth",0),$e(this,"realTimeHeight",0),$e(this,"isFromFile",!1),$e(this,"isCached",!1),$e(this,"isDestroyed",!1),$e(this,"isLoading",!1),$e(this,"isMinLoading",!1),$e(this,"isSaving",!1),$e(this,"annotations",void 0),$e(this,"ownerFiles",new Ap({children:[]})),$e(this,"ownerTags",new Ap({children:[]})),$e(this,"ownerDefaultFile",void 0),$e(this,"operations",[]),$e(this,"useFillColor",!1),this.uid=i.uid,this.metadata=ef({},i.metadata),this.setRealTimeSize(this.metadata.width,this.metadata.height)}return jn(r,[{key:"setRealTimeSize",value:function(i,a){this.realTimeWidth=i,this.realTimeHeight=a}},{key:"destroy",value:function(){this.isDestroyed||(this.customData=null,this.img=null,this.owners=null,this.metadata=null,this.isDestroyed=!0)}},{key:"addOwner",value:function(i){var a=this.owners;Ir(a).call(a,i)<0&&a.push(i)}},{key:"removeOwner",value:function(i){var a=this.owners,s=Ir(a).call(a,i);s>-1&&Ai(a).call(a,s,1)}},{key:"removeViewer",value:function(i){var a=this.owners,s=Ir(a).call(a,i);s>-1&&Ai(a).call(a,s,1)}},{key:"setVisible",value:function(i){var a;Ir(a=this.visible).call(a,i)<0&&this.visible.push(i)}},{key:"cancelVisible",value:function(i){var a,s,u=Ir(a=this.visible).call(a,i);u>-1&&Ai(s=this.visible).call(s,u,1)}},{key:"setPreload",value:function(i){var a;Ir(a=this.preload).call(a,i)<0&&this.preload.push(i)}},{key:"cancelPreload",value:function(i){var a,s,u=Ir(a=this.preload).call(a,i);u>-1&&Ai(s=this.preload).call(s,u,1)}},{key:"reset",value:function(){this.minData=null,this.oriData=null,this.img=null,this.activeOri=!1,this.activeMin=!1,this.minTask=null,this.oriTask=null,this.operations=[]}}]),r}(),Dme=function(){function r(){Bn(this,r)}return jn(r,[{key:"apply",value:function(i){var a=i.hooks;i.statusStore=new Ov;var s=function(_){var T=_.data;Ut(T).call(T,function(S){var I=new wme(S);i.statusStore.set(S.uid,I)})},u=function(_){var T=_.removedUids;Ut(T).call(T,function(S){var I,b,D=i.statusStore.get(S);D&&(Mv(D.minData),Mv(D.oriData),D.ownerFiles.clear(),D.ownerTags.clear(),D.ownerDefaultFile=!1,null!==(I=D.img)&&void 0!==I&&I.src&&(D.img.src=""),null!==(b=D.minImg)&&void 0!==b&&b.src&&(D.minImg.src=""),D.img=null,D.minImg=null),i.statusStore.remove(S)})},l=function(_){var T=_.modifiedUid,S=_.data,I=_.revoke,b=i.statusStore.get(T);if(b){b.img=null,b.minImg=null;var D=S.metadata;D&&(b.metadata=ef({},D),b.setRealTimeSize(D.width,D.height)),I&&(Mv(b.oriData),Mv(b.minData)),b.reset(),i.statusStore.update(T,b)}},d=function(_){var T;Ut(T=_.children).call(T,function(S){var I=i.statusStore.get(S);I&&("file"===_.type?I.ownerFiles.remove(_.uid):"tag"===_.type&&I.ownerTags.remove(_.uid))})},f=function(_){var T=_.docUid,S=_.sourceUids,I=_.type;Ut(S).call(S,function(b){var D=i.statusStore.get(b);D&&("file"===I?D.ownerFiles.append(T):"tag"===I?D.ownerTags.append(T):"default"===I&&(D.ownerDefaultFile=!0))})},g=function(_){var T=_.docUid,S=_.sourceUids,I=_.type;Ut(S).call(S,function(b){var D=i.statusStore.get(b);D&&("file"===I?D.ownerFiles.remove(T):"tag"===I?D.ownerTags.remove(T):"default"===I&&(D.ownerDefaultFile=!0))})};a.loadSource.on(s),a.afterRemoveSource.on(u),a.updateSource.on(l),a.removeDoc.on(d),a.loadToDoc.on(f),a.removeFromDoc.on(g),a.destroy.on(function(){a.loadSource.off(s),a.afterRemoveSource.off(u),a.updateSource.off(l),a.removeDoc.off(d),a.loadToDoc.off(f),a.removeFromDoc.off(g)})}}]),r}(),Eme=function(){function r(){Bn(this,r)}return jn(r,[{key:"apply",value:function(i){var a=i.hooks;i.store=new V4("space_db","space_doc");var s=function(d){var f=d.data;f&&Ut(f).call(f,function(g){i.store.set(g.uid,g)})},u=function(d){var f;Ut(f=d.removedUids).call(f,function(g){i.store.remove(g)})},l=function(d){i.store.update(d.modifiedUid,d.data)};a.loadSource.on(s),a.removeSource.on(u),a.updateSource.on(l),a.destroy.on(function(){a.loadSource.off(s),a.removeSource.off(u),a.updateSource.off(l)})}}]),r}(),Ame=function(){function r(){Bn(this,r)}return jn(r,[{key:"apply",value:function(i){i.tag=new vme,this.listenSpaceHooks(i),this.listenTagHooks(i)}},{key:"listenTagHooks",value:function(i){var a=i.tag.hooks,s=function(l){var d;Ut(d=l.children).call(d,function(f){var g=i.statusStore.get(f);g&&g.ownerFiles.remove(l.uid)}),i.hooks.removeDoc.emit(l)},u=function(l){i.hooks.renameDoc.emit(l)};a.beforeRemoveTag.on(s),a.afterRenameTag.on(u),a.destroy.on(function(){a.beforeRemoveTag.off(s),a.afterRenameTag.off(u)})}},{key:"listenSpaceHooks",value:function(i){var a=i.hooks,s=function(_){var T=_.data,S=i.tag.defaultName;Ut(T).call(T,function(I){var b;I.tags||(I.tags=[]),S&&Ir(b=I.tags).call(b,S)<0&&I.tags.push(S)})},u=function(_){var T=_.data;Ut(T).call(T,function(S){var I;null===(I=S.tags)||void 0===I||Ut(I).call(I,function(b){i.tag.appendChildToTag(b,S.uid);var D={docUid:i.tag.getTag(b).uid,sourceUids:[S.uid],type:"tag"};i.hooks.loadToDoc.emit(D)})})},l=function(_){var T=_.removedUids,S={};Ut(T).call(T,function(U){var Y,Z,oe=i.statusStore.get(U);oe&&Ut(Y=ks(Z=oe.ownerTags.children).call(Z)).call(Y,function(se){S[se]||(S[se]=[]),S[se].push(U)})});for(var I=0,b=xv(S);I<b.length;I++){var D=jd(b[I],2),R=D[0],L=D[1],x=i.tag.getTagByUid(R);x&&i.tag.removeChildFromTag(x.name,L),i.hooks.removeFromDoc.emit({docUid:R,sourceUids:L,type:"tag"})}},d=function(_){"tag"!==_.type&&l({removedUids:_.children})},f=function(_){var b,S=_.sourceUids;if("tag"===_.type){var I=i.tag.getTagByUid(_.docUid);I&&Ut(S).call(S,(b=aj(yv.mark(function D(R){var L,x;return yv.wrap(function(U){for(;;)switch(U.prev=U.next){case 0:return U.prev=0,U.next=3,i.store.get(R);case 3:if(U.t0=(x=U.sent)&&Ir(L=x.tags).call(L,I.name)<0,!U.t0){U.next=9;break}return x.tags.push(I.name),U.next=9,i.store.update(R,x);case 9:U.next=14;break;case 11:U.prev=11,U.t1=U.catch(0);case 14:case"end":return U.stop()}},D,null,[[0,11]])})),function(D){return b.apply(this,arguments)}))}},g=function(_){var b,S=_.sourceUids;if("tag"===_.type){var I=i.tag.getTagByUid(_.docUid);I&&Ut(S).call(S,(b=aj(yv.mark(function D(R){var L,x,U,Y;return yv.wrap(function(Z){for(;;)switch(Z.prev=Z.next){case 0:return Z.prev=0,Z.next=3,i.store.get(R);case 3:if(!(L=Z.sent)){Z.next=9;break}return(Y=Ir(x=L.tags).call(x,I.name))>-1&&Ai(U=L.tags).call(U,Y,1),Z.next=9,i.store.update(R,L);case 9:Z.next=14;break;case 11:Z.prev=11,Z.t0=Z.catch(0);case 14:case"end":return Z.stop()}},D,null,[[0,11]])})),function(D){return b.apply(this,arguments)}))}};a.beforeLoadSource.on(s),a.loadSource.on(u),a.removeSource.on(l),a.removeDoc.on(d),a.loadToDoc.on(f),a.removeFromDoc.on(g),a.destroy.on(function(){a.beforeLoadSource.off(s),a.loadSource.off(u),a.removeSource.off(l),a.removeDoc.off(d),a.loadToDoc.off(f),a.removeFromDoc.off(g)})}}]),r}(),Pme=function(r){mv(a,r);var i=kv(a);function a(){var s;return Bn(this,a),$e(Yn(s=i.call(this)),"uid",Gu()),$e(Yn(s),"hooks",{init:rn.create(),destroy:rn.create(),beforeLoadSource:rn.create(),loadSource:rn.create(),afterLoadSource:rn.create(),beforeRemoveSource:rn.create(),removeSource:rn.create(),afterRemoveSource:rn.create(),beforeUpdateSource:rn.create(),updateSource:rn.create(),afterUpdateSource:rn.create(),beforeBufferChanged:rn.create(),afterBufferChanged:rn.create(),directoryChanged:rn.create(),tagChanged:rn.create(),openDoc:rn.create(),loadToDoc:rn.create(),removeFromDoc:rn.create(),removeDoc:rn.create(),renameDoc:rn.create(),move:rn.create(),afterMove:rn.create(),switch:rn.create(),afterSwitch:rn.create(),reorder:rn.create(),afterReorder:rn.create()}),$e(Yn(s),"dir",void 0),$e(Yn(s),"tag",void 0),$e(Yn(s),"store",void 0),$e(Yn(s),"customStore",void 0),$e(Yn(s),"metadataStore",void 0),$e(Yn(s),"statusStore",void 0),$e(Yn(s),"defaultFile",void 0),$e(Yn(s),"plugins",[]),$e(Yn(s),"imageLoader",void 0),s.initPlugins(),s.hooks.init.emit(),s}return jn(a,[{key:"destroy",value:function(){this.hooks.destroy.emit()}},{key:"initPlugins",value:function(){(new Eme).apply(this),(new Dme).apply(this),(new Sme).apply(this),(new bme).apply(this),(new yme).apply(this),(new Tme).apply(this),(new Cme).apply(this),(new Ame).apply(this)}},{key:"setImageLoader",value:function(s){this.imageLoader=s}},{key:"getCustomData",value:function(s){return this.customStore.get(s)}},{key:"setCustomData",value:function(s,u){return this.customStore.set(s,u)}},{key:"getMetadata",value:function(s){return this.metadataStore.get(s)}},{key:"setMetadata",value:function(s,u){return this.metadataStore.set(s,u)}},{key:"createStore",value:function(s){var u=s.type,d=s.tableName,f=s.dbName;return"sync"===(void 0===u?"sync":u)?new Ov:f&&d?new V4(f,d):null}},{key:"loadSource",value:function(s){if(ni(s))return[];var u=s.data;if(!Jc(u))return[];var l=[];return Ut(u).call(u,function(d){d.uid=Gu(),l.push(d.uid)}),this.hooks.beforeBufferChanged.emit(s),this.hooks.beforeLoadSource.emit(s),this.hooks.loadSource.emit(s),this.hooks.afterLoadSource.emit(s),this.hooks.afterBufferChanged.emit(s),l}},{key:"removeSource",value:function(s){var u=!(arguments.length>1&&void 0!==arguments[1])||arguments[1];rr(s)&&(s=[s]);var l={removedUids:s,docUid:"",trigger:this.uid,operation:"remove"};return this.hooks.beforeRemoveSource.emit(l),this.hooks.beforeBufferChanged.emit(l),this.hooks.removeSource.emit(l),u&&this.hooks.afterRemoveSource.emit(l),this.hooks.afterBufferChanged.emit(l),!0}},{key:"updateSource",value:function(s,u){var l={modifiedUid:s,data:u,revoke:!(arguments.length>2&&void 0!==arguments[2])||arguments[2],operation:"modify"};return this.hooks.beforeUpdateSource.emit(l),this.hooks.beforeBufferChanged.emit(l),this.hooks.updateSource.emit(l),this.hooks.afterUpdateSource.emit(l),this.hooks.afterBufferChanged.emit(l),!0}},{key:"getSource",value:function(s){return this.store.get(s)}},{key:"openDefault",value:function(s){this.hooks.openDoc.emit({node:this.defaultFile,type:"default",config:s})}},{key:"createFile",value:function(s){return this.dir.createFile(s)}},{key:"removeFile",value:function(s){return this.dir.removeFile(s)}},{key:"renameFile",value:function(s,u){return this.dir.renameFile(s,u)}},{key:"openFile",value:function(s,u){var l=this.getFile(s);return!!l&&(this.hooks.openDoc.emit({node:l,type:"file",config:u}),!0)}},{key:"getFile",value:function(s){return this.dir.getFile(s)}},{key:"getFileList",value:function(){return this.dir.getCurrentFileList()}},{key:"isFileExisted",value:function(s){return this.dir.isFileExist(s)}},{key:"createTag",value:function(s){return this.tag.createTag(s)}},{key:"removeTag",value:function(s){return this.tag.removeTag(s)}},{key:"renameTag",value:function(s,u){return this.tag.renameTag(s,u)}},{key:"openTag",value:function(s,u){var l=this.getTag(s);return!!l&&(this.hooks.openDoc.emit({node:l,type:"tag",config:u}),!0)}},{key:"getTag",value:function(s){return this.tag.getTag(s)}},{key:"getTagList",value:function(){return this.tag.getTagList()}},{key:"setDefaultTag",value:function(s){return this.tag.setDefaultTag(s)}},{key:"getDefaultTag",value:function(){return this.tag.getDefaultTag()}},{key:"isTagExisted",value:function(s){return this.tag.isTagExisted(s)}},{key:"addTagToSource",value:function(s,u){if(this.statusStore.get(s)){rr(u)&&(u=[u]);for(var l=0;l<u.length;l++)if(!this.addSourceToTag(u[l],s))return!1;return!0}return!1}},{key:"removeTagFromSource",value:function(s,u){if(this.statusStore.get(s)){var l;ni(u)?u=Fv(l=this.tag.tags).call(l,function(f){return f.name}):rr(u)&&(u=[u]);for(var d=0;d<u.length;d++)if(!this.removeSourceFromTag(u[d],s))return!1;return!0}return!1}},{key:"addSourceToTag",value:function(s,u){var l=this.tag.getTag(s);return!(!l||!this.tag.appendChildToTag(s,u)||(rr(u)&&(u=[u]),this.hooks.loadToDoc.emit({sourceUids:u,docUid:l.uid,type:"tag"}),0))}},{key:"removeSourceFromTag",value:function(s,u){var l=this.tag.getTag(s);return!!l&&(this.tag.removeChildFromTag(s,u),rr(u)&&(u=[u]),this.hooks.removeFromDoc.emit({docUid:l.uid,sourceUids:u,type:"tag"}),!0)}},{key:"getSourceTags",value:function(s){var u,l=this,d=this.statusStore.get(s);return d?Fv(u=d.ownerTags.children).call(u,function(f){return l.tag.getTagByUid(f).name}):[]}},{key:"switch",value:function(s){var u=s.one,l=s.other,f=s.docUid,g=s.emit,_=this.getDocNode(f,s.type);return!!_&&(_.switch(u,l),(g||ni(g))&&this.hooks.switch.emit({one:u,other:l,docUid:f,type:_.type,trigger:this.uid,operation:"shift"}),!0)}},{key:"move",value:function(s){var u=s.from,l=s.to,f=s.docUid,g=s.emit,_=this.getDocNode(f,s.type);return!!_&&(_.move(u,l),(g||ni(g))&&this.hooks.move.emit({from:u,to:l,docUid:f,type:_.type,trigger:this.uid,operation:"shift"}),!0)}},{key:"reorder",value:function(s){var u=s.indexes,d=s.docUid,f=s.emit,g=this.getDocNode(d,s.type);g&&(g.reorder(u),f||ni(f))&&this.hooks.move.emit({indexes:u,docUid:d,type:g.type,trigger:this.uid,operation:"shift"})}},{key:"getDocNode",value:function(s,u){switch(u){case"default":return this.defaultFile;case"file":return this.dir.getFileByUid(s);case"tag":return this.tag.getTagByUid(s);default:return s===this.defaultFile.uid?this.defaultFile:this.tag.getTagByUid(s)||this.dir.getFileByUid(s)||null}}}]),a}(U4),Rme={Successful:{errorCode:0,errorString:"Successful."},InvalidIndex:{errorCode:-1033,errorString:"Invalid index."},InvalidValue:{errorCode:-1034,errorString:"Invalid value."},NoImage:{errorCode:-1035,errorString:"There is no image."},UnBindViewer:{errorCode:-2210,errorString:"You cannot call this method on this WebTwain instance because it does not use the default viewer."},AlReadyBindViewer:{errorCode:-2211,errorString:"The element is already bound to the viewer."},ParameterCannotEmpty:{errorCode:-2314,errorString:"The parameter cannot be empty."},IndicesNotArray:{errorCode:-2358,errorString:"The type of the parameter indices must be an Array."},IndexOutOfRange:{errorCode:-2359,errorString:"The index is out of range."},InvalidTagName:{errorCode:-2394,errorString:"Invalid tag name."},InvalidLeftOrTopOrRightOrBottom:{errorCode:-2417,errorString:"The left or top or right or bottom you entered is invalid."},InvalidWidth:{errorCode:-2418,errorString:"The width you entered is invalid."},InvalidHeight:{errorCode:-2419,errorString:"The height you entered is invalid."},WidthOrHeightOutOfImageSize:{errorCode:-2420,errorString:"The width or height is out of image size."},MobileServer_InvalidIndex:{errorCode:-2423,errorString:"The index is invalid."},ImageEditorExist:{errorCode:-2500,errorString:"An ImageEditor already exists."},ThumbnailViewerExist:{errorCode:-2501,errorString:"A ThumbnailViewer already exists."},CustomElementExist:{errorCode:-2502,errorString:"A CustomElement already exists."},ImageEditorDispose:{errorCode:-2504,errorString:"The ImageEditor object has been disposed."},ThumbnailViewerNotExist:{errorCode:-2505,errorString:"This ThumbnailViewer doesn't exist."},ThumbnailViewerDispose:{errorCode:-2506,errorString:"The ThumbnailViewer object has been disposed."},CallbackNotAFunction:{errorCode:-2510,errorString:"The callback is not a function."},ElementRequired:{errorCode:-2511,errorString:"Parameter 'element' is required."},ElementNotExist:{errorCode:-2512,errorString:"Parameter 'element' doesn't instanceof HTMLDivElement."},InvalidPropertyValue:{errorCode:-2514,errorString:"Invalid property value."},CursorInvalidMode:{errorCode:-2519,errorString:"The current mode does not support setting the cursor to zoom."},OldTagNameRequired:{errorCode:-2517,errorString:"Old tag name is required."},NewTagNameRequired:{errorCode:-2518,errorString:"New tag name is required."},FileNameCannotEmpty:{errorCode:-2530,errorString:"Document name cannot be empty."},FileNameNotString:{errorCode:-2531,errorString:"Document name is not a string."},FileNotExist:{errorCode:-2540,errorString:"The document does not exist."},FileExist:{errorCode:-2541,errorString:"The document already exists."},CustomElementDispose:{errorCode:-2508,errorString:"The CustomElement object has been disposed."},CustomElementNotExist:{errorCode:-2507,errorString:"This CustomElement doesn't exist."},ParameterOutRange:{errorCode:80002,errorString:"The parameter is out of range."},TagNotExist:{errorCode:80009,errorString:"Tag does not exist."},TagExist:{errorCode:80010,errorString:"The tag already exists."},OperationError:{errorCode:80022,errorString:"The operation mode is wrong."}};(Nv=G4||(G4={}))[Nv.Normal=0]="Normal",Nv[Nv.Balance=1]="Balance";var xme=function(){function r(i){Bn(this,r),$e(this,"space",void 0),$e(this,"webViewer",void 0),$e(this,"isActiveFile",!1),$e(this,"isActiveTag",!1),$e(this,"currentFileName",""),$e(this,"currentTagName",""),$e(this,"bufferConfig",null),$e(this,"currentSelected",[]),this.space=new Pme,i&&(this.bufferConfig=i)}return jn(r,[{key:"e",value:function(){this.setError("Successful")}},{key:"convertServerIdToGuid",value:function(i){return 1*i+239514e3}},{key:"IsFileNameExist",value:function(i){var a=this.space.getFileList();if("dynamsoft-default-document"===i)return!0;if(a)for(var s=0;s<a.length;s++)if(a[s].name===i)return!0;return!1}},{key:"getCurrentDataSet",value:function(){if(this.webViewer){var i=this.webViewer.myViewer.getCurrentTab();if(void 0===i)return!1;var a=i.type;this.isActiveFile="file"===a,this.isActiveTag="tag"===a}if(this.isActiveFile){var s=this.getCurrentFileName(),u=this.space.getFile(s);if(u)return u}if(this.isActiveTag){var l=this.space.getTag(this.currentTagName);if(l)return l}return!1}},{key:"setError",value:function(i){var a;if("Default"!==i){if(this.webViewer)this.webViewer.setError(i);else if(this.bufferConfig&&this.bufferConfig.viewerError){var s=Rme[i];this.bufferConfig.viewerError.setError(s.errorCode,s.errorString)}}else null==this||null===(a=this.webViewer)||void 0===a||a.setDefaultError()}},{key:"emitViewerEvent",value:function(){var i,a,s,u;this.webViewer&&0===this.getHowManyImagesInBuffer()&&(null!==(i=this.webViewer)&&void 0!==i&&null!==(a=i.myViewer)&&void 0!==a&&a.emit("topPageChanged",-1),null===(s=this.webViewer)||void 0===s||null===(u=s.myViewer)||void 0===u||u.emit("pageRendered",-1))}},{key:"bindViewer",value:function(i){this.webViewer=i}},{key:"getCurrentTag",value:function(){return this.currentTagName}},{key:"getCurrentDocument",value:function(){return this.currentFileName}},{key:"getCurrentFileName",value:function(){var i=this,a=this.space.getFileList(),s="";return a&&Ut(a).call(a,function(u){u.name===i.currentFileName&&(s=i.currentFileName)}),s}},{key:"getCurrentIndex",value:function(){if(this.webViewer)return this.webViewer.getCurrentIndex();var i=this.getSelectedImagesIndices().length;if(i<=0){var a=this.getCurrentDataSet();return!!a&&a.children.length-1}return this.getSelectedImagesIndices()[i-1]}},{key:"getHowManyImagesInBuffer",value:function(){if(this.webViewer)return this.webViewer.getHowManyImagesInBuffer();var i=this.getCurrentDataSet();return i?i.children.length:0}},{key:"getSelectedImagesIndices",value:function(){return this.webViewer?this.webViewer.getSelectedImagesIndices():this.currentSelected}},{key:"getIndexByUid",value:function(i){if(!rr(i)||!i)return this.setError("InvalidValue"),!1;if(this.webViewer)return this.webViewer.myViewer.getIndexByUid(i);var a=this.getCurrentDataSet(),s=a.children;return!!(a&&s&&Jc(s))&&Ir(s).call(s,i)}},{key:"getUidByIndex",value:function(i){if(i<0||i>=this.getHowManyImagesInBuffer())return this.setError("IndexOutOfRange"),!1;if(this.webViewer)return this.webViewer.myViewer.getUidByIndex(i);var a=this.getCurrentDataSet().children;return!(a&&a.length<i)&&a[i]}},{key:"getDataByUid",value:function(i){return this.space.getSource(i)}},{key:"updateDataByUid",value:function(i,a){return this.space.store.set(i,a)}},{key:"setCustomDataByUid",value:function(i,a){return rr(i)&&""!==i?this.space.setCustomData(i,a):(this.setError("InvalidValue"),!1)}},{key:"getCustomDataByUid",value:function(i){return this.space.getCustomData(i)}},{key:"setMetadataByUid",value:function(i,a){return rr(i)&&""!==i?this.space.setMetadata(i,a):(this.setError("InvalidValue"),!1)}},{key:"getMetadataByUid",value:function(i){return this.space.getMetadata(i)}},{key:"addImage",value:function(i,a,s){var u,l,d={},f=this.currentFileName,g="";!ni(s)&&rr(s)?(this.IsFileNameExist(s)||this.createDocument(s),g=s):ni(f)||""===f?(this.space.isFileExisted("dynamsoft-default-document")||this.createDocument("dynamsoft-default-document"),this.webViewer&&(this.webViewer.bEmitBufferChanged=!1),this.openDocument("dynamsoft-default-document"),this.webViewer&&(this.webViewer.bEmitBufferChanged=!0),g="dynamsoft-default-document"):g=f,a&&(delete(l=ef({},a)).oriBlobData,a.oriBlobData&&(u=a.oriBlobData));var _=i.imageUrl,T=i.minImageUrl,S=i.imageId,I=i.index;if(u&&(d=ef({},u)),S&&(d.imageId=S),!ni(I)&&Xc(I)){var b=this.getDocumentContents(g).length;I>=b&&(I=b)}var D=this.space.loadSource({data:[{oriData:_,minData:T,metadata:l,customData:d}],filename:g,index:I}),R=jd(D,1)[0];return i.uuid=R,this.currentSelected=!ni(I)&&Xc(I)?[I]:[],D}},{key:"insertImage",value:function(i,a,s){var u;return s&&s>=0?(u=this.space.loadSource({data:[i],filename:a,index:s}))[0]&&(this.currentSelected=[s]):(u=this.space.loadSource({data:[i],filename:a}),this.currentSelected=[]),u[0]}},{key:"updateImage",value:function(i,a){var s=i.imageUrl,u=i.minImageUrl,l=i.imageId,d=i.uuid,f=ef({},a);return d&&""!==d&&-1!==d?(this.space.updateSource(d,{oriData:s,minData:u,metadata:f,customData:{imageId:l}}),d):(this.setError("IndexOutOfRange"),!1)}},{key:"removeImageByUid",value:function(i){if(this.e(),this.webViewer){var a=this.webViewer.removePageByUid(i);return this.webViewer.resized(),this.emitViewerEvent(),a}return this.space.removeSource(i)}},{key:"removeImageByIndex",value:function(i){if(this.e(),i<0||i>=this.getHowManyImagesInBuffer())return this.setError("IndexOutOfRange"),!1;var a=this.getCurrentIndex(),s=!1;if(this.webViewer)s=this.webViewer.removePageByIndexes(i),this.webViewer.resized(),this.emitViewerEvent();else{var u=this.getCurrentDataSet();if(!u)return!1;s=this.space.removeSource(u.children[i])}return s||this.setError("Default"),this.currentSelected=i===a&&0===i?this.getHowManyImagesInBuffer()>0?[0]:[]:i<=a?[a-1]:[a],s}},{key:"removeSelectedImages",value:function(i){this.e();var a=this.getSelectedImagesIndices();Jc(i)&&i.length>0&&(a=i);var s=!1;if(this.webViewer)s=this.webViewer.removePageByIndexes(a),this.webViewer.resized(),this.emitViewerEvent();else{var u=[],l=this.getCurrentDataSet();if(!l)return!1;Ut(a).call(a,function(d){l.children[d]&&l.children[d]&&u.push(l.children[d])}),s=this.space.removeSource(u)}return s||this.setError("Default"),s}},{key:"removeImageByIndexArr",value:function(i){if(this.e(),!Jc(i))return!1;var a=this.getCurrentDataSet();if(!a)return!1;var s,u=[];return Ut(i).call(i,function(l){var d=a.children[l];d&&u.push(d)}),(s=this.space.removeSource(u))||this.setError("Default"),this.webViewer&&(this.webViewer.resized(),this.emitViewerEvent()),this.currentSelected=[],s}},{key:"removeAllImages",value:function(){this.e();var i=!1;if(this.webViewer)i=this.webViewer.removeAllPages(),this.webViewer.resized(),this.emitViewerEvent();else{var a=this.getCurrentDataSet();a&&(i=this.space.removeSource(_v(a.children)))}return i||this.setError("Default"),this.currentSelected=[],i}},{key:"tagImages",value:function(i,a){this.e();var s=this.getHowManyImagesInBuffer();if(!Jc(i))return this.setError("IndicesNotArray"),!1;if(!rr(a)||""===a)return this.setError("InvalidTagName"),!1;for(var u=0;u<s;u++){var l=i[u];if(Hd(l)||l<0||l>=s)return this.setError("IndexOutOfRange"),!1}this.space.createTag(a);for(var d=0;d<i.length;d++){var f=i[d];if(f>=0){var g=this.getUidByIndex(f);g&&""!==g&&-1!==ja(g,10)&&this.space.addTagToSource(g,a)}}return!0}},{key:"removeImageTag",value:function(i,a){if(this.e(),!Xc(i))return this.setError("InvalidValue"),!1;if(i<0||i>this.getHowManyImagesInBuffer())return this.setError("IndexOutOfRange"),!1;var s=this.getUidByIndex(i),u=!1;return s&&""!==s&&-1!==s&&(u=this.space.removeTagFromSource(s,a)),u||this.setError("Default"),u}},{key:"getDefaultTag",value:function(){return this.space.getDefaultTag()}},{key:"setDefaultTag",value:function(i){var a;return this.e(),this.currentTagName=i,this.space.createTag(i),(a=this.space.setDefaultTag(i))||this.setError("Default"),a}},{key:"removeTag",value:function(i,a){var s=this;if(this.e(),!rr(i))return this.setError("InvalidValue"),!1;if(!ni(a)&&!Jc(a))return this.setError("IndicesNotArray"),!1;if(!this.space.isTagExisted(i))return this.setError("TagNotExist"),!1;var u=this.currentTagName,l=!1,d=!1;if(u&&(l=u===i),ni(a))d=this.space.removeTag(i),l&&this.clearFilter();else{var f=[];Ut(a).call(a,function(_){var T=s.getUidByIndex(_);-1!==T&&f.push(T)});for(var g=0;g<f?.length;g++)if(!(d=this.space.removeTagFromSource(f[g],i)))return!1}return d||this.webViewer.setDefaultError(),d}},{key:"renameTag",value:function(i,a){return this.e(),ni(i)||""===i?(this.setError("OldTagNameRequired"),!1):ni(a)||""===a?(this.setError("NewTagNameRequired"),!1):this.space.isTagExisted(i)?this.space.isTagExisted(a)?(this.setError("TagExist"),!1):(this.currentTagName=a,(s=this.space.renameTag(i,a))?this.space.setDefaultTag(a):this.setError("Default"),s):(this.setError("TagNotExist"),!1);var s}},{key:"getTagContents",value:function(i){return this.e(),i&&rr(i)&&""!==i?this.space.getTag(i).children:[]}},{key:"getTagList",value:function(){var i=this;this.e();var a=this.space.getTagList(),s=[];return a?Ut(a).call(a,function(u){var l,d=[];Ut(l=u.children).call(l,function(f){var g=i.getCustomDataByUid(f);if(g){var _=i.convertServerIdToGuid(g.imageId);d.push(_)}}),s.push({name:u.name,imageIds:d})}):s=[],s}},{key:"getTagListByIndex",value:function(i){if(!Xc(i))return!1;var a=this.getUidByIndex(i);return this.space.getSourceTags(a)}},{key:"clearFilter",value:function(){this.e(),this.currentTagName="";var i,a=this.getCurrentFileName();return""===a&&(a="dynamsoft-default-document"),(i=this.openDocument(a))||this.setError("Default"),i}},{key:"filterImagesByTag",value:function(i,a,s){this.e();var u=!1;if(ni(i)||null===i||""===i){this.currentTagName="";var l=this.getCurrentFileName();""===l&&(l="dynamsoft-default-document"),(u=this.openDocument(l))?Ep(a)&&a():(this.setError("Default"),Ep(s)&&s())}else{var d,f;if(!this.space.isTagExisted(i))return this.setError("TagNotExist"),Ep(s)&&s(),!1;this.currentTagName=i,(u=this.space.openTag(i,null==this||null===(d=this.webViewer)||void 0===d||null===(f=d.myViewer)||void 0===f?void 0:f.uid))?(this.isActiveTag=!0,this.isActiveFile=!1,this.setDefaultTag(i),Ep(a)&&a()):(this.setError("Default"),Ep(s)&&s())}return this.webViewer&&this.webViewer.render(),u}},{key:"createDocument",value:function(i){if(this.e(),!i||""===i){var a=Xc(i)?"FileNameNotString":"FileNameCannotEmpty";return this.setError(a),!1}return rr(i)?this.space.isFileExisted(i)?(this.setError("FileExist"),!1):!!this.space.createFile(i)||(this.setError("Default"),!1):(this.setError("FileNameNotString"),!1)}},{key:"openDocument",value:function(i,a){var s,u;if(this.e(),!i||""===i){var l=Xc(i)?"FileNameNotString":"FileNameCannotEmpty";return this.setError(l),!1}if(!rr(i))return this.setError("FileNameNotString"),!1;if(!this.space.isFileExisted(i))return this.setError("FileNotExist"),!1;var d=a&&""!==a?a:null==this||null===(s=this.webViewer)||void 0===s||null===(u=s.myViewer)||void 0===u?void 0:u.uid;return this.space.openFile(i,{viewerUid:d})?(this.currentFileName=i,this.isActiveFile=!0,this.isActiveTag=!1,!0):(this.setError("Default"),!1)}},{key:"getDocumentContents",value:function(i){return this.e(),i&&rr(i)&&""!==i?this.space.getFile(i).children:[]}},{key:"renameDocument",value:function(i,a){return this.e(),rr(i)&&rr(a)?(i&&""!==i&&a&&""!==a||this.setError("FileNameCannotEmpty"),this.space.isFileExisted(i)?this.space.isFileExisted(a)?(this.setError("FileExist"),!1):this.space.renameFile(i,a)?(this.currentFileName=a,!0):(this.setError("Default"),!1):(this.setError("FileNotExist"),!1)):(this.setError("FileNameNotString"),!1)}},{key:"removeDocument",value:function(i){if(this.e(),!i||!rr(i))return this.setError("FileNameNotString"),!1;if(!this.space.isFileExisted(i))return this.setError("FileNotExist"),!1;var a=this.space.removeFile(i);return a?(a&&this.webViewer&&this.webViewer.resized(),this.currentFileName===i&&(this.currentFileName=""),!0):(this.setError("Default"),!1)}},{key:"getDocumentInfoList",value:function(){var i=this;this.e();var a=this.space.getFileList(),s=[];return a?(Ut(a).call(a,function(u){if(u.children){for(var l=[],d=0;d<u.children.length;d++){var g=i.getCustomDataByUid(u.children[d]);g&&l.push(i.convertServerIdToGuid(g.imageId))}s.push({imageIds:l,name:u.name})}}),s):[]}},{key:"getDocumentInfo",value:function(i){this.e();var a=this.space.getFile(i);if(!a)return{imageIds:[],length:0};for(var s=[],u=0;u<a.children.length;u++){var d=this.getCustomDataByUid(a.children[u]);d&&s.push(this.convertServerIdToGuid(d.imageId))}return{imageIds:s,length:s.length}}},{key:"selectImages",value:function(i){this.e();var a=!0;if(!i||!Jc(i))return!1;if(this.webViewer){var s=this.webViewer.getIfAutoScroll();!1===s&&this.webViewer.setIfAutoScroll(!0),a=this.webViewer.selectPages(i),!1===s&&this.webViewer.setIfAutoScroll(!1)}else{for(var u=this.getHowManyImagesInBuffer(),l=0;l<i.length;l++)if(!Xc(i[l])||i[l]<0||i[l]>=u)return this.setError("ParameterOutRange"),!1;a=!0}return a?this.currentSelected=i:this.setError("Default"),a}},{key:"selectAllImages",value:function(){this.e();var i=!0;if(this.webViewer)i=this.webViewer.myViewer.selectAll(),this.currentSelected=this.webViewer.getSelectedImagesIndices();else{var a,s=this.getCurrentDataSet();this.currentSelected=mme(wC(a=new Array(s.children.length)).call(a))}return i||this.setError("Default"),i}},{key:"moveImage",value:function(i,a){this.e();var s=ja(i,10),u=ja(a,10);if(Hd(i)||Hd(a))return this.setError("InvalidIndex"),!1;var l=this.getHowManyImagesInBuffer();if(s<0||s>=l||u<0||u>l)return this.setError("IndexOutOfRange"),!1;var d=!1;if(this.webViewer)d=this.webViewer.myViewer.movePage(i,a);else{var f=this.getCurrentDataSet();if(!f)return!1;d=this.space.move({docUid:f.uid,type:f.type,from:i,to:a})}return d||this.setError("Default"),this.currentSelected=[a],d}},{key:"switchImage",value:function(i,a){this.e();var s=ja(i,10),u=ja(a,10);if(Hd(i)||Hd(a))return this.setError("InvalidIndex"),!1;var l=this.getHowManyImagesInBuffer(),d=this.getCurrentIndex();if(s<0||s>=l||u<0||u>l)return this.setError("IndexOutOfRange"),!1;var f=!1;if(this.webViewer)f=this.webViewer.myViewer.switchPage(i,a);else{var g=this.getCurrentDataSet();if(!g)return!1;f=this.space.switch({docUid:g.uid,type:g.type,one:i,other:a})}f||this.setError("Default");var _=d;return s===d?_=u:u===d&&(_=s),this.currentSelected=[_],f}}]),r}();HTMLCanvasElement.prototype.toBlob||N4(HTMLCanvasElement.prototype,"toBlob",{value:function(r,i,a){for(var s=atob(this.toDataURL(i,a).split(",")[1]),u=s.length,l=new Uint8Array(u),d=0;d<u;d++)l[d]=s.charCodeAt(d);r(new Blob([l],{type:i||"image/png"}))}});var Eo,on,Pp=function(){function r(i){if(n(this,r),i)this._baseUrl=i._baseUrl,this._buffer=i._buffer,this._imageIdMap=i._imageIdMap;else{var a={viewerError:{setError:function(s,u){v.log(s,u),this._error={code:s,message:u}}}};this._baseUrl="",this._buffer=new xme(a),this._imageIdMap={}}}return c(r,[{key:"getError",value:function(){return this._error}},{key:"BaseUrl",get:function(){return this._baseUrl}},{key:"getImageUrl",value:function(i){var a=this.convertClientIndexToServerId(i),s=Date.now();return tn.getImageUrl(this._baseUrl,a,-1,-1,s)}},{key:"getMinImageUrl",value:function(i,a,s){var u=this.convertClientIndexToServerId(i),l=Date.now();return u&&a&&s?tn.getImageUrl(this._baseUrl,u,parseInt(a),parseInt(s),l):""}},{key:"append",value:function(i,a,s){var u,l,d,f=Date.now(),g=a;if(u={imageUrl:l=tn.getImageUrl(this._baseUrl,a,-1,-1,f),minImageUrl:s&&s.controlWidth&&s.controlWidth>0&&s.controlHeight&&s.controlHeight>0?F.navInfoSync.bMobile?tn.getImageUrl(this._baseUrl,a,Math.round(s.controlWidth*devicePixelRatio),Math.round(s.controlHeight*devicePixelRatio),f):tn.getImageUrl(this._baseUrl,a,parseInt(s.controlWidth),parseInt(s.controlHeight),f):l,imageId:g},d=s.currentFileName.length>0?this._buffer.addImage(u,s,s.currentFileName):this._buffer.addImage(u,s)){var _=UV(d,1)[0];return this._innerInsertModel(u.imageId,_,u.imageUrl,u.minImageUrl),_}return!1}},{key:"insertBefore",value:function(i,a,s,u){var l,d,f=Date.now(),g=s;l={imageUrl:d=tn.getImageUrl(this._baseUrl,s,-1,-1,f),minImageUrl:u&&u.controlWidth&&u.controlWidth>0&&u.controlHeight&&u.controlHeight>0?F.navInfoSync.bMobile?tn.getImageUrl(this._baseUrl,s,Math.round(u.controlWidth*devicePixelRatio),Math.round(u.controlHeight*devicePixelRatio),f):tn.getImageUrl(this._baseUrl,s,parseInt(u.controlWidth),parseInt(u.controlHeight),f):d,imageId:g,index:i};var _=this._buffer.addImage(l);if(_){var T=UV(_,1)[0];return this._innerInsertModel(l.imageId,T,l.imageUrl,l.minImageUrl),this._buffer.openDocument(this.getCurrentFileName()),T}return!1}},{key:"_innerInsertModel",value:function(i,a,s,u){var l=new hv;l.imageId=i,l.uuid=a,l.imageUrl=s,l.minImageUrl=u,this._imageIdMap[i]=l}},{key:"refresh",value:function(i,a,s,u){var l,d=this,f=1*i;if(s){var g=d.count();if(f<0||f>g)return!1;l=d.convertClientIndexToServerId(f),d.__setDataImageControl(f,l,u)}return!0}},{key:"__setDataImageControl",value:function(i,a,s){var u,l,d,f=this,g=f._baseUrl;return-1!=a&&((u=f.getImageIdMap(a))||((u=new hv).imageId=a,f._imageIdMap[a]=u),g&&(null!=u&&(u.ticks=Date.now()),l=tn.getImageUrl(g,a,-1,-1,u.ticks),d=s&&s.controlWidth&&s.controlWidth>0&&s.controlHeight&&s.controlHeight>0?F.navInfoSync.bMobile?tn.getImageUrl(g,a,Math.round(s.controlWidth*devicePixelRatio),Math.round(s.controlHeight*devicePixelRatio),u.ticks):tn.getImageUrl(g,a,parseInt(s.controlWidth),parseInt(s.controlHeight),u.ticks):l,u.imageUrl=l,u.minImageUrl=d,f._buffer.updateImage(u,s)),!0)}},{key:"convertIndicesToServerIds",value:function(i){var a,s=i.length,u=[];for(a=0;a<s;a++){var l=this._buffer.getUidByIndex(i[a]);if(l&&-1!=l){var d=this._buffer.getCustomDataByUid(l);u.push(d.imageId)}}return u}},{key:"removeImagesByServerId",value:function(i,a){var s=this,u=a??this._buffer.getCurrentDocument(),l=[];return v.each(i,function(d,f){var _,g=parseInt(d);return s._removeMapModelImageControlByServerId(g),_=s._buffer.isActiveFile?s._convertServerIdToIndexInFile(u,g):s._convertServerIdToIndex(g),!isNaN(_)&&!(_<0||_>=s.count())&&void l.push(_)}),l.length>0&&s._buffer.removeImageByIndexArr(l)}},{key:"removeByServerId",value:function(i,a,s){var d,u=this,l=s??this._buffer.getCurrentDocument();return u._removeMapModelImageControlByServerId(i),d=this._buffer.isActiveFile?this._convertServerIdToIndexInFile(l,i):a,!isNaN(d)&&!(d<0||d>=u.count())&&u._buffer.removeImageByIndex(d)}},{key:"exists",value:function(i){if(this._imageIdMap[i])return!0;var a=-1;if(this._buffer.isActiveFile){var s=this.getCurrentFileName();a=this._convertServerIdToIndexInFile(s,i)}else a=this._convertServerIdToIndex(i);return a>-1}},{key:"removeImages",value:function(i){var a,s,u;for(u=i.length,a=0;a<u;a++)s=this.convertClientIndexToServerId(i[a]),this._removeMapModelImageControlByServerId(s);return this._buffer.removeSelectedImages(i)}},{key:"clear",value:function(){var i,a,s,u=this;for(s=u.count(),i=0;i<s;i++)a=u.convertClientIndexToServerId(i),this._removeMapModelImageControlByServerId(a);return s==Object.keys(u._imageIdMap).length&&(u._imageIdMap={}),u._buffer.removeAllImages()}},{key:"convertServerIdToClientIndex",value:function(i){var a,s,u,l=this;if((u=l._imageIdMap[i])&&(s=u.uuid),s)a=l._buffer.getIndexByUid(s);else if(l._buffer.isActiveFile){var d=this.getCurrentFileName();a=this._convertServerIdToIndexInFile(d,i)}else a=this._convertServerIdToIndex(i);return v.isNumber(a)||(a=-1),a}},{key:"getIndexByUid",value:function(i){var a;return!1===(a=this._buffer.getIndexByUid(i))?-1:a}},{key:"getUidByIndex",value:function(i){return this._buffer.getUidByIndex(i)}},{key:"convertClientIndexToServerId",value:function(i){var a=this.getCustomDataByIndex(i);return a?a.imageId:-1}},{key:"getCurrentImageIndex",value:function(){return this._buffer.getCurrentIndex()}},{key:"setCurrentImageIndex",value:function(i){return this._buffer.selectImages([i])}},{key:"getCurrentFileName",value:function(){return this._buffer.getCurrentFileName()}},{key:"setDefaultTag",value:function(i){return this._buffer.setDefaultTag(i)}},{key:"getDefaultTag",value:function(){return this._buffer.getDefaultTag()}},{key:"count",value:function(){return this._buffer.getHowManyImagesInBuffer()}},{key:"getCountByDocumentName",value:function(i){return this._buffer.getDocumentInfo(i).length}},{key:"dispose",value:function(){this.clear()}},{key:"getImageData",value:function(i){var a=this._buffer.getUidByIndex(i);return a?this._buffer.getDataByUid(a):W.Promise.resolve(null)}},{key:"getCustomDataByIndex",value:function(i){return this._buffer.getCustomDataByUid(this._buffer.getUidByIndex(i))}},{key:"getMetadataByIndex",value:function(i){return this._buffer.getMetadataByUid(this._buffer.getUidByIndex(i))}},{key:"setCustomData",value:function(i,a){var s=this._buffer.getUidByIndex(i);return!(!s||!a)&&this._buffer.setCustomDataByUid(s,a)}},{key:"openDocument",value:function(i){return this._buffer.openDocument(i)}},{key:"createDocument",value:function(i){return this._buffer.createDocument(i)}},{key:"getImageIdMap",value:function(i){return this._imageIdMap[i]}},{key:"_removeMapModelImageControlByServerId",value:function(i){var a=this;-1!=i&&a._imageIdMap[i]&&(a._imageIdMap[i].Clear(),delete a._imageIdMap[i])}},{key:"_convertServerIdToIndexInFile",value:function(i,a){var s,u,l=-1;for(s=this._buffer.getDocumentContents(i),u=0;u<s.length;u++){var d=s[u];if(d){var f=this._buffer.getCustomDataByUid(d);if(f&&f.imageId==a){l=u;break}}}return l}},{key:"_convertServerIdToIndex",value:function(i){var a,s=-1;for(a=0;a<this.count();a++){var u=this._buffer.getUidByIndex(a);if(u){var l=this._buffer.getCustomDataByUid(u);if(l&&l.imageId==i){s=a;break}}}return s}},{key:"convertServerIdToUUID",value:function(i){var a=this._imageIdMap[i];return a?a.uuid:-1}},{key:"convertUUIDToServerId",value:function(i){var a=this._buffer.getCustomDataByUid(i);return a&&a.imageId?a.imageId:-1}},{key:"UpdateImage",value:function(i,a){return this._buffer.updateImage(i,a),!0}}],[{key:"_setBaseUrl",value:function(i,a){i._baseUrl=a}},{key:"_getBuffer",value:function(i){return i._buffer}}]),r}(),kme=function(r){di(u,r);var i,a,s=function Fme(r){var i=function(){if(typeof Reflect>"u"||!Reflect.construct||Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch{return!1}}();return function(){var a,s=yt(r);if(i){var u=yt(this).constructor;a=Reflect.construct(s,arguments,u)}else a=s.apply(this,arguments);return fi(this,a)}}(u);function u(l){var d;n(this,u),(d=s.call(this,l)).__IfAppendImage=Ne,d.__maxImagesInBuffer=32767,d.__insertingIndex=-1,d._aryBitmapCache=[],d._imageBufferWrapper=new Pp;var f=uo.getServerImageUrlPrefix(pt(d));return Pp._setBaseUrl(d._imageBufferWrapper,f),d}return c(u,[{key:"_registerMultiEvent",value:function(l,d){var f=this;if(f._resetErr(),!f._isValid())return!1;var g=["_$",l].join("");f[g]||(f[g]={});var _=f[g],T=v.guid();return _[T]=d,T}},{key:"_unregisterMultiEvent",value:function(l,d){var f=this;if(f._resetErr(),!f._isValid())return!1;var g=["_$",l].join(""),_=f[g];if(d){var T;if(v.isString(d))return delete _[d],Ne;if(v.isFunction(d))for(T=0;T<_.length;T++)if(d==_[T])return _.splice(T,1),Ne}return f[g]=null,Ne}},{key:"_getMetadata",value:function(l){return this._imageBufferWrapper.getMetadataByIndex(l)}},{key:"_innerSendBlobByWS",value:function(l,d,f,g,_){var T={cmd:l,cmdId:pp(),sFun:function(S){v.isFunction(g)&&g(S)},fFun:_,contextData:{document:f.currentFileName,tag:f.currentTagName},rawData:!0};return this._innerSendByWS(l,d,T,f,!0)}},{key:"_updateImage",value:function(l,d,f){var g=this,_={imageId:l,bufferLen:d.byteLength,imageType:15,width:parseInt(f.width),height:parseInt(f.height),bit:f.bitDepth,xres:parseInt(f.resolutionX),yres:parseInt(f.resolutionY)},T=v.stringify([v.stringify(_)]);return new W.Promise(function(S,I){g._innerSendBlobByWS("UpdateImage",T,d,function(b){v.log("UpdateImage success."),S(b)},function(b){v.log("UpdateImage failed."),v.error(b),I(b)})})}},{key:"_removeImages",value:function(l){return this._imageBufferWrapper.removeImages(l)}},{key:"_getCurrentDocumentName",value:function(){var l="";return this._imageBufferWrapper&&(l=this._imageBufferWrapper.getCurrentFileName()),l}},{key:"_getCurrentDefaultTagName",value:function(){var l="";return this._imageBufferWrapper&&(l=this._imageBufferWrapper.getDefaultTag()),l}},{key:"_innerRefreshUI",value:function(l,d,f,g,_){var T=this;return f&&T._imageBufferWrapper.refresh(l,T._imageBufferWrapper.count(),!0,g),v.isFunction(T.__OnRefreshUI)&&T.__OnRefreshUI(T._imageBufferWrapper.getCurrentImageIndex(),T._imageBufferWrapper.count()),!0}},{key:"_getHowManyImagesInBuffer",value:function(){return this._isValid()?this._imageBufferWrapper.count():0}},{key:"_OnBitmapChanged",value:function(l,d,f){var g,_,T=this,S="10"==l[0],b="c2"==l[0],D="0"==l[0]||b||S,R=l[1].split(","),L=l[2],x=l[3],U=T.__maxImagesInBuffer,Y=-1,Z=[];if(f&&(g=f.document,_=f.tag),v.log("_OnBitmapChanged.currentFileName="+g+", tag="+_),g||(g=T._getCurrentDocumentName()),_&&T._imageBufferWrapper&&(T._imageBufferWrapper.setDefaultTag(_),v.log("metaDataObj.currentTag="+_)),!S)if(b)l.length>5&&(Z=l[5]),v.isArray(Z)||(Z=[]);else{var oe={};if(l.length>5&&(oe.width=l[5]),l.length>6&&(oe.height=l[6]),l.length>7&&(oe.bitDepth=l[7]),l.length>8&&(oe.resolutionX=l[8]),l.length>9&&(oe.resolutionY=l[9]),l.length>10&&(Y=l[10]),Z.push(oe),Y>-1&&T._blts&&(L==mi.enumBCAppend||L==mi.enumBCInsert)){var se=F.DWT.lgct(Y);v.isFunction(T.__OnLtsverify)&&T.__OnLtsverify(se,1)}}if(v.log("OnBitmapChanged:"+l),L==mi.enumBCInsert||L==mi.enumBCAppend&&!T.__IfAppendImage)v.each(R,function(Q,te){var X,ae=parseInt(Q),he=T._imageBufferWrapper.getCurrentImageIndex();if((X=te<Z.length&&Z[te]?Z[te]:{}).currentFileName=g,isNaN(ae)||ae<0)return!0;if(D)T._aryBitmapCache.push(ae);else for(var ye=0;ye<T._aryBitmapCache.length;ye++)if(T._aryBitmapCache[ye]==ae)return T._aryBitmapCache.splice(ye,1),!0;if(T._imageBufferWrapper.exists(ae))return!0;T.__insertingIndex>-1&&(he=T.__insertingIndex),X.controlWidth=400,X.controlHeight=400,T._controlWidth&&T._controlWidth>400&&(X.controlWidth=T._controlWidth),T._controlHeight&&T._controlHeight>400&&(X.controlHeight=T._controlHeight),-1==he&&(he=0),T._imageBufferWrapper.insertBefore(he,U,ae,X),T.__insertingIndex>-1&&(T.__insertingIndex=T.__insertingIndex+1)}),v.isFunction(T.__OnRefreshUI)&&T.__OnRefreshUI(T._imageBufferWrapper.getCurrentImageIndex(),T._imageBufferWrapper.count());else if(L==mi.enumBCAppend&&T.__IfAppendImage)v.each(R,function(Q,te){var X,ae=parseInt(Q);if(isNaN(ae)||ae<0)return!0;if((X=te<Z.length&&Z[te]?Z[te]:{}).currentFileName=g,v.log("metaDataObj.currentFileName="+g),D)T._aryBitmapCache.push(ae);else for(var he=0;he<T._aryBitmapCache.length;he++)if(T._aryBitmapCache[he]==ae)return T._aryBitmapCache.splice(he,1),!0;if(T._imageBufferWrapper.exists(ae))return!0;X.controlWidth=400,X.controlHeight=400,T._controlWidth&&T._controlWidth>400&&(X.controlWidth=T._controlWidth),T._controlHeight&&T._controlHeight>400&&(X.controlHeight=T._controlHeight),T._imageBufferWrapper.append(U,ae,X)}),v.isFunction(T.__OnRefreshUI)&&T.__OnRefreshUI(T._imageBufferWrapper.getCurrentImageIndex(),T._imageBufferWrapper.count());else if(L==mi.enumBCRemove&&D){var k=!1;if(1==R.length&&-1==R[0]&&(k=!0),k)T._imageBufferWrapper.clear();else{var E=[];v.each(R,function(Q,te){var X=parseInt(Q);if(isNaN(X)||X<0)return!0;E.push(X)}),T._imageBufferWrapper.removeImagesByServerId(E,g)}v.isFunction(T.__OnRefreshUI)&&T.__OnRefreshUI(T._imageBufferWrapper.getCurrentImageIndex(),T._imageBufferWrapper.count())}else if(L==mi.enumBCEdit)v.each(R,function(Q,te){var X,ae=parseInt(Q);if(isNaN(ae)||ae<0)return!0;if((X=te<Z.length&&Z[te]?Z[te]:{}).currentFileName=g,ae>=0&&!T.__bLoadingImage){var he=T._imageBufferWrapper.convertServerIdToClientIndex(ae);he>-1&&T._innerRefreshUI(he,T._imageBufferWrapper.count(),!0,X,L)}});else if(L==mi.enumBCIndexChange){var M;x>=0&&!T.__bLoadingImage&&((M=0<Z.length&&Z[0]?Z[0]:{}).currentFileName=g,0==T.__IfAppendImage&&T._innerRefreshUI(x,T._imageBufferWrapper.count(),!0,M,L),T._imageBufferWrapper.refresh(x,T._imageBufferWrapper.count(),!1,M))}if(v.isFunction(T.__OnBitmapChanged)){if(!S)if(D){if(L!=mi.enumBCRemove&&!j.bFirefox&&D)return!0}else if(L==mi.enumBCRemove||j.bFirefox&&!D)return!0;var G=[];v.each(R,function(Q){var te,X=parseInt(Q);if(isNaN(X)||X<0)return!0;(te=T._imageBufferWrapper.convertServerIdToClientIndex(X))>-1&&G.push(te)});var V=T._imageBufferWrapper.getCurrentImageIndex(),J=L;L==mi.enumBCAppend&&(J=T.__IfAppendImage?mi.enumBCAppend:mi.enumBCInsert),T.__OnBitmapChanged(G,J,V,T._imageBufferWrapper.count())}}},{key:"_removeImageAsync",value:(a=Ae(A.mark(function l(d,f){var g,_,T;return A.wrap(function(S){for(;;)switch(S.prev=S.next){case 0:if(g=this,_=parseInt(f),Mr(g,_)){S.next=4;break}return S.abrupt("return",!1);case 4:return T=g._imageBufferWrapper.convertClientIndexToServerId(_),S.next=7,g._removeImageByIdAsync(T);case 7:return S.abrupt("return",S.sent);case 8:case"end":return S.stop()}},l,this)})),function(l,d){return a.apply(this,arguments)})},{key:"_removeImageByIdAsync",value:(i=Ae(A.mark(function l(d){var f,g;return A.wrap(function(_){for(;;)switch(_.prev=_.next){case 0:if(f=this,-1!=d){_.next=4;break}return We(f),_.abrupt("return",!1);case 4:return _.next=6,f._innerFunV2("RemoveImage",we(d));case 6:return((g=_.sent)||-1033==f._errorCode)&&f._OnBitmapChanged(["0",""+d,3,f._imageBufferWrapper.getCurrentImageIndex(),f._imageBufferWrapper.count()]),_.abrupt("return",g);case 9:case"end":return _.stop()}},l,this)})),function(l){return i.apply(this,arguments)})}]),u}(uo);(function(r){r.text=0,r.blob=1,r.arraybuffer=2,r.xml=3,r.json=4,r.userDefined=5})(Eo||(Eo={})),function(r){r.Other=0,r.HTTPUpload=1,r.HTTPDownload=2,r.FTPUpload=3,r.FTPDownload=4,r.Scan=5}(on||(on={}));var Ao={not_string:/[^s]/,not_bool:/[^t]/,not_type:/[^T]/,not_primitive:/[^v]/,number:/[diefg]/,numeric_arg:/[bcdiefguxX]/,json:/[j]/,not_json:/[^j]/,text:/^[^\x25]+/,modulo:/^\x25{2}/,placeholder:/^\x25(?:([1-9]\d*)\$|\(([^)]+)\))?(\+)?(0|'[^$])?(-)?(\d+)?(?:\.(\d+))?([b-gijostTuvxX])/,key:/^([a-z_][a-z_\d]*)/i,key_access:/^\.([a-z_][a-z_\d]*)/i,index_access:/^\[(\d+)\]/,sign:/^[+-]/};function Mme(r,i){if(v.isFunction("_".repeat))return r.repeat(i);for(var a=0,s=[];a<i;a++)s.push(r);return s.join("")}var K4,QD=Object.create?Object.create(null):{};function YD(r,i,a,s){return function(u,l){var d,f,g,_,T,S,I,b,D,R=1,L=u.length,x="";for(f=0;f<L;f++)if("string"==typeof u[f])x+=u[f];else if("object"===e(u[f])){if((_=u[f]).keys)for(d=l[R],g=0;g<_.keys.length;g++){if(null==d)throw new Error(YD('[sprintf] Cannot access property "%s" of undefined value "%s"',_.keys[g],_.keys[g-1]));d=d[_.keys[g]]}else d=_.param_no?l[_.param_no]:l[R++];if(Ao.not_type.test(_.type)&&Ao.not_primitive.test(_.type)&&d instanceof Function&&(d=d()),Ao.numeric_arg.test(_.type)&&"number"!=typeof d&&isNaN(d))throw new TypeError(YD("[sprintf] expecting number but found %T",d));switch(Ao.number.test(_.type)&&(b=d>=0),_.type){case"b":d=parseInt(d,10).toString(2);break;case"c":d=String.fromCharCode(parseInt(d,10));break;case"d":case"i":d=parseInt(d,10);break;case"j":d=v.stringify(d,null,_.width?parseInt(_.width):0);break;case"e":d=_.precision?parseFloat(d).toExponential(_.precision):parseFloat(d).toExponential();break;case"f":d=_.precision?parseFloat(d).toFixed(_.precision):parseFloat(d);break;case"g":d=_.precision?String(Number(d.toPrecision(_.precision))):parseFloat(d);break;case"o":d=(parseInt(d,10)>>>0).toString(8);break;case"s":d=String(d),d=_.precision?d.substring(0,_.precision):d;break;case"t":d=String(!!d),d=_.precision?d.substring(0,_.precision):d;break;case"T":d=Object.prototype.toString.call(d).slice(8,-1).toLowerCase(),d=_.precision?d.substring(0,_.precision):d;break;case"u":d=parseInt(d,10)>>>0;break;case"v":d=d.valueOf(),d=_.precision?d.substring(0,_.precision):d;break;case"x":d=(parseInt(d,10)>>>0).toString(16);break;case"X":d=(parseInt(d,10)>>>0).toString(16).toUpperCase()}Ao.json.test(_.type)?x+=d:(!Ao.number.test(_.type)||b&&!_.sign?D="":(D=b?"+":"-",d=d.toString().replace(Ao.sign,"")),S=_.pad_char?"0"===_.pad_char?"0":_.pad_char.charAt(1):" ",I=_.width-(D+d).length,T=_.width&&I>0?Mme(S,I):"",x+=_.align?D+d+T:"0"===S?D+T+d:T+D+d)}return x}(function(u){if(QD[u])return QD[u];for(var l,d=u,f=[],g=0;d;){if(null!==(l=Ao.text.exec(d)))f.push(l[0]);else if(null!==(l=Ao.modulo.exec(d)))f.push("%");else{if(null===(l=Ao.placeholder.exec(d)))throw new SyntaxError("[sprintf] unexpected placeholder");if(l[2]){g|=1;var _=[],T=l[2],S=[];if(null===(S=Ao.key.exec(T)))throw new SyntaxError("[sprintf] failed to parse named argument key");for(_.push(S[1]);""!==(T=T.substring(S[0].length));)if(null!==(S=Ao.key_access.exec(T)))_.push(S[1]);else{if(null===(S=Ao.index_access.exec(T)))throw new SyntaxError("[sprintf] failed to parse named argument key");_.push(S[1])}l[2]=_}else g|=2;if(3===g)throw new Error("[sprintf] mixing positional and named placeholders is not (yet) supported");f.push({placeholder:l[0],param_no:l[1],keys:l[2],sign:l[3],pad_char:l[4],align:l[5],width:l[6],precision:l[7],type:l[8]})}d=d.substring(l[0].length)}return QD[u]=f,f}(r),arguments)}function co(r,i){if(v.isString(r)){var a,s,u,l,d,f=r.indexOf("<%");if(-1==f||(s=r.substring(0,f),!(f+2<(a=r.indexOf(">",s)))))return r;u=r.substring(f+1,a),l=r.substring(a+1);try{d=YD(u,i)}catch{d=""}return[s,d,l].join("")}return""}function Lv(r,i){var a,s=r.substring(r.lastIndexOf(".")).toLowerCase();if(i==F.DWT.EnumDWT_ImageType.IT_BMP){if(".bmp"==s||".dib"==s)return r;a=[r,".bmp"].join("")}else if(i==F.DWT.EnumDWT_ImageType.IT_JPG){if(".jpg"==s||".jpe"==s||".jpeg"==s||".jfif"==s)return r;a=[r,".jpg"].join("")}else if(i==F.DWT.EnumDWT_ImageType.IT_PNG){if(".png"==s)return r;a=[r,".png"].join("")}else if(i==F.DWT.EnumDWT_ImageType.IT_TIF){if(".tif"==s||".tiff"==s)return r;a=[r,".tif"].join("")}else if(i==F.DWT.EnumDWT_ImageType.IT_PDF){if(".pdf"==s)return r;a=[r,".pdf"].join("")}else if(i==F.DWT.EnumDWT_ImageType.IT_J2K){if(".jp2"==s)return r;a=[r,".jp2"].join("")}return a}function $4(r,i,a,s){var u,l,d,f,g=i.url,_=i.headers,T=i.retry,S=i.httpFormData,I=i.bOnlyResponseEmptyIsOK,b=i.bAsync,D=(l=i.responseType)==Eo.text?"text":l==Eo.json?"json":l==Eo.blob?"blob":l==Eo.arraybuffer?"arraybuffer":l==Eo.xml?"xml":l==Eo.userDefined?"user-defined":"text",R=r.IfShowProgressBar,L=r.IfShowCancelDialogWhenImageTransfer,x=r.objUploadStatus;(u=i.content)&&(u.remoteFilename||(u.remoteFilename=i.remoteFilename),u.fileName||(u.fileName=i.fileName||u.name),u.name||(u.name=i.fileName||u.fileName));var U,Y=new pi({action:g,data:S,async:b,retry:T,bOnlyResponseEmptyIsOK:I,dataType:D});if(L&&W.progressContext&&(U=W.progressContext.on("cancel",function(){Y.abort(),Y=null})),(d=Y._uploadType)&&(f=d.get("ajaxConfig"),_&&f&&f.headers&&_&&v.mix(f.headers,_),r.HTTPRequestswithCredentials&&v.mix(f.xhrFields,{withCredentials:!0}),f=null),Y.on(pi.event.SUCCESS,function(k){i.content=null,Y=null,U&&W.progressContext.off("cancel",U),r.HTTPPostResponse=k?k.response:i.responseType==Eo.arraybuffer?[]:i.responseType==Eo.blob?new Blob([]):i.responseType==Eo.json?{}:"",v.isFunction(r.onHttpUploadStatus)&&r.onHttpUploadStatus({fileName:k.name,percentage:100,statusCode:200,responseString:r.HTTPPostResponse}),v.isFunction(a)&&a(r.HTTPPostResponse)}),Y.on(pi.event.ERROR,function(k){i.content=null,Y=null;var E=k&&k.canceled,M="",G=0;U&&W.progressContext.off("cancel",U),r.HTTPPostResponse=k&&v.isString(k.response)?k.response:"",E||(k&&k.msg&&(M=k.msg),k&&k.httpStatus&&(G=k.httpStatus));var J={};Jb(J,E,M,G),v.isFunction(r.onHttpUploadStatus)&&r.onHttpUploadStatus({fileName:k.name,percentage:100,statusCode:G,responseString:r.HTTPPostResponse}),v.isFunction(s)&&s(J._errorCode,J._errorString,r.HTTPPostResponse)}),(R||v.isFunction(r.onHttpUploadStatus))&&(Y.on(pi.event.PROGRESS,function(k){!j.bSafari&&k&&(delete k.totalSize,delete k.position);var E=0===k.total?100:Math.round(100*k.loaded/k.total);[k.loaded," / ",k.total].join(""),v.isFunction(r.onHttpUploadStatus)&&(E>99&&(E=99),r.onHttpUploadStatus({fileName:k.name,percentage:E,statusCode:0,responseString:""})),R&&r.onPercent([0,E,"","http",k.name])}),R&&r.onPercent([0,-1,Tn.Uploading,"http"]),v.isFunction(r.onHttpUploadStatus))){var Z="";v.isArray(u)&&u.length>0||(u&&u.name&&""!=u.name?Z=u.name:u&&u.fileName&&(Z=u.fileName)),!Z&&i.fileName&&(Z=i.fileName),r.onHttpUploadStatus({fileName:Z,percentage:0,statusCode:0,responseString:""})}if(x&&x.bCancel){x.st=2;var oe={};return Ko(oe),i.content=null,v.isFunction(s)&&s(oe._errorCode,oe._errorString),!1}var se=Y.upload(u);return u=null,se}function q4(r,i,a,s){var u,l,d=r.MaxUploadImageSize,f=0,g=i.content;if(!g||!v.isArray(g)||g.length<=0){i.content=null;var _={};return er(_),v.isFunction(s)&&s(_._errorCode,_._errorString),ve}for(u=0;u<g.length;u++){var T=g[u];if(!T||T.size<=0){var S={};return er(S),v.isFunction(s)&&s(S._errorCode,S._errorString),ve}var I=T.size,b=T.type;if(f+=I,""===b||b&&b!=i.contentType){var R=T.name,L=(T.slice||T.webkitSlice||T.mozSlice).call(T,0,I,i.contentType);v.isString(R)&&""!=R||(R=T.fileName),L.name=co(R,u+1),g[u]=L}g[u].remoteFilename=co(i.remoteFilename,u+1),T=null}if(f>d&&-1!=d){var x={};return ca(x),v.isFunction(s)&&s(x._errorCode,x._errorString),ve}for(l=$4(r,i,a,s),i=null,u=0;u<g.length;u++)g[u]=null;return g=null,l}function Xa(r){W.dlgRef<=0||0==W.dialogShowStatus||Bc(r)}(function(r){r.Init=-1,r.OK=0,r.Failed=1,r.Cancelled=2})(K4||(K4={})),W.setBtnCancelVisibleForProgress=Bc;var Zc,Za=function(){function r(){n(this,r)}return c(r,[{key:"_onProgress",value:function(i,a,s){var u=0===s.total?100:Math.round(100*s.loaded/s.total);[s.loaded," / ",s.total].join(""),i.onPercent([0,u,"","http",a])}},{key:"_uploadBlobFragment",value:function(i,a,s,u){var g,_,T,l=a.fileName,d=a.blockSize,f=0,S=a.offset,I=this,b=function(Y,Z){a.content=null,v.isFunction(u)&&u(Y,Z)};if((g=a.content).size<=0){var D={};return er(D),b(D._errorCode,D._errorString),ve}if((_=(f=g.size)-S)>0){var R;if(_>=d&&d>0?(_-=d,T=d):(T=_,_=0),!(R=0==S&&T==f?g:g.slice(S,S+T))){var L={};er(L),b(L._errorCode,L._errorString)}if(!i.IfShowProgressBar||i.IfShowProgressBar&&W.dlgRef>0){R.name=l,Xa(i.IfShowCancelDialogWhenImageTransfer),a.headers["Content-Range"]=["bytes ",S,"-",S+R.size-1,"/",f].join(""),I._onProgress(i,l,{total:f,loaded:S});var x=v.clone(a);return x.content=R,x.offset=0,I.httpPostUpload(i,x,function(Y){0==_&&(W.needShowTwiceShowDialog=!1),I._onProgress(i,l,{total:f,loaded:S+T}),0==_?(a.content=null,v.isFunction(s)&&hr(s,Y)):(a.offset=a.offset+T,setTimeout(function(){I._uploadBlobFragment(i,a,s,b)},100))},b),!0}var U={};return Ko(U),b(U._errorCode,U._errorString),!1}return W.needShowTwiceShowDialog=!1,a.content=null,v.isFunction(s)&&s(""),!0}},{key:"httpPostUploadFragment",value:function(i,a,s,u){var l;if(!(l=a.content)){var d={};return er(d),v.isFunction(u)&&u(d._errorCode,d._errorString),ve}if(v.isString(l)){if(""==l){var f={};return er(f),v.isFunction(u)&&u(f._errorCode,f._errorString),ve}var g=new Blob([l],{type:"text/plain"});g.name=a.fileName,a.content=g,g=null}return W.cancelFrom=on.HTTPUpload,this._uploadBlobFragment(i,a,s,u)}},{key:"httpPostUpload",value:function(i,a,s,u){var l,d,f=function(Z,oe){var se;a.content=null,a=null,v.isFunction(u)&&u(Z,oe,null!==(se=i?.HTTPPostResponse)&&void 0!==se?se:"")};if(!(l=a.content)){var g={};return er(g),f(g._errorCode,g._errorString),ve}if(v.isString(l)){var _,T=a.fileName;if(""==l){var S={};return er(S),f(S._errorCode,S._errorString),ve}if(l.length>(_=i.MaxUploadImageSize)&&-1!=_){var I={};return ca(I),f(I._errorCode,I._errorString),ve}(d=new Blob([l],{type:"text/plain"})).name=T,l=null}else if(l instanceof Blob&&(d=l,l=null,d.size<=0)){var b={};return er(b),f(b._errorCode,b._errorString),ve}if(d){var D,L=i.MaxUploadImageSize,x=d.size,U=d.type;if(x>L&&-1!=L){var Y={};return ca(Y),f(Y._errorCode,Y._errorString),ve}""===U||U&&U!=a.contentType?D.name=(D=(d.slice||d.webkitSlice||d.mozSlice).call(d,0,x,a.contentType))instanceof File?D.fileName:d.name||d.fileName:D=d,d=null,D&&(a.content=D),D=null}return Xa(i.IfShowCancelDialogWhenImageTransfer),W.cancelFrom=on.HTTPUpload,$4(i,a,function(Z){a.content=null,a=null,v.isFunction(s)&&s(Z),Z=null},f)}}]),r}(),Us=c(function r(){n(this,r),this.method="",this.httpMethod="POST",this.contentType="application/octet-stream",this.remoteFilename="RemoteFile",this.blockSize=0,this.offset=0,this.retry=0,this.bOnlyResponseEmptyIsOK=!0,this.responseType=Eo.text}),Q4=c(function r(){n(this,r),this.IfShowProgressBar=!1,this.IfShowCancelDialogWhenImageTransfer=!0}),Y4=239514e3;function zu(r){return 1*r+Y4}function J4(r){return 1*r-Y4}!function(r){r.url=0,r.blob=1,r.base64=2}(Zc||(Zc={}));var Wv=window.SparkMD5,JD=function(){function r(i,a,s,u){n(this,r);var l=this;l._md5=s,l._length=a,l._content=u}return c(r,[{key:"getLength",value:function(){return this._length}},{key:"getMD5",value:function(){return this._md5}},{key:"getData",value:function(i,a){var s=this,u=a;return v.isNumber(i)&&v.isNumber(a)?i<0||a<=0?"":0==i&&u==s._length?s._content:(i+u>s._length&&(u=s._length-i),s._content.substr(i,u)):""}}]),r}();W.html5.Base64Result=JD;var X4=function(r){di(L,r);var i,a,s,u,l,d,f,g,_,T,S,I,b,D,R=function Ome(r){var i=function(){if(typeof Reflect>"u"||!Reflect.construct||Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch{return!1}}();return function(){var a,s=yt(r);if(i){var u=yt(this).constructor;a=Reflect.construct(s,arguments,u)}else a=s.apply(this,arguments);return fi(this,a)}}(L);function L(x){var U;return n(this,L),(U=R.call(this,x)).__maxUploadImageSize=-1,U._strHttpContentTypeFieldValue="application/octet-stream",U}return c(L,[{key:"_saveImages",value:(D=Ae(A.mark(function x(U,Y,Z,oe){var se,k,E,M,G,V,J;return A.wrap(function(Q){for(;;)switch(Q.prev=Q.next){case 0:return se=this,k=Lv(Y,oe),E=this._imageBufferWrapper.convertIndicesToServerIds(Z),Q.next=4,this._innerConvertToArrayBufferWithUIAsync(U,oe,E);case 4:if(M=Q.sent,G=mt.getBlobTypeByImageType(oe),V=new Blob([M],{type:G}),!F.navInfo.bIE){Q.next=13;break}return Q.next=11,se._innerSaveLocal(V,k);case 11:Q.next=17;break;case 13:return J=URL.createObjectURL(V),Q.next=16,se._innerSaveLocal(J,k);case 16:URL.revokeObjectURL(J);case 17:V=null;case 18:case"end":return Q.stop()}},x,this)})),function(x,U,Y,Z){return D.apply(this,arguments)})},{key:"_innerSaveLocal",value:(b=Ae(A.mark(function x(U,Y){return A.wrap(function(Z){for(;;)switch(Z.prev=Z.next){case 0:return Z.abrupt("return",new W.Promise(function(oe,se){var k=window,E=F.navInfo;if(!E.biPad&&!E.biPhone||k.requestFileSystem||k.webkitRequestFileSystem||k.mozRequestFileSystem||!(j.bSafari&&parseFloat(j.strBrowserVersion)<13)&&j.bSafari){var G=document.createElementNS("http://www.w3.org/1999/xhtml","a");if(G.href=U,G.download=Y,G.target="_blank",document.body.appendChild(G),E.bEdge)G.click(),U=null,G.href=null;else if(E.bIE){var V;(V=window.navigator)&&"msSaveOrOpenBlob"in V&&V.msSaveOrOpenBlob(U,Y)}else{var J=document.createEvent("MouseEvents");J.initMouseEvent("click",!0,!1),G.dispatchEvent(J)}setTimeout(function(){document.body.removeChild(G),G=null,oe()},6e3)}else{var Q=k.open(U,"","",!1);setTimeout(function(){Q.document.title=Y,oe()},6e3)}}));case 2:case"end":return Z.stop()}},x,this)})),function(x,U){return b.apply(this,arguments)})},{key:"_OnPostTransferAsync",value:function(x,U,Y){var Z,oe=this;if(x&&x.length>=2)try{var se=String(x[1]).replace(/\\/g,"\\\\");Z=v.parse(se),!Y&&Z.imageId&&(Z.imageId=oe._convertServerIdToGuid(Z.imageId))}catch{v.log(x)}Z||(Z={imageId:-1});var k=!1;if(v.isFunction(oe.__OnPostTransferAsync))try{k=oe.__OnPostTransferAsync(Z)}catch(E){mn(E)}if(v.isFunction(oe.__OnPostTransferAsync2))try{oe.__OnPostTransferAsync2(Z)}catch(E){mn(E)}return k}},{key:"_checkIndices",value:function(x){var U,Y,Z=this;if(!v.isArray(x))return Ha(Z),!1;if(0==x.length)return Zb(Z),!1;if(F.DWT.ConnectWithSocket)return!0;for(U=this._imageBufferWrapper.count(),Y=0;Y<x.length;Y++){var oe=x[Y];if(v.isUndefined(oe)||null===oe)return tw(Z),!1;if(oe=parseInt(oe),isNaN(oe))return Dt(Z),!1;if(oe<0||oe>=U)return ew(Z),!1}return!0}},{key:"_acquireImageForSendTo",value:(I=Ae(A.mark(function x(U,Y,Z,oe){var se,k,E,M,G,V,J,Q;return A.wrap(function(te){for(;;)switch(te.prev=te.next){case 0:if(se=this,k=Z?v.clone(Z):{},M=E=oe,se._resetErr(),se._isValid()){te.next=4;break}throw{code:se._errorCode,message:se._errorString};case 4:if(v.isString(E._id)){te.next=6;break}throw{code:-2602,message:'The parameter "SendTo" is invalid.'};case 6:if(!se.__bAcquireImageNow){te.next=9;break}throw qb(se),{code:se._errorCode,message:se._getErrorString()};case 9:if(se.__bAcquireImageNow=!0,nr(U,M),G=W.Promise.resolve(),V=F.DWT.RemoteScanConfig,J=DV(),te.prev=13,LV(k),V&&cv(V.keepAwake),Ye.checkProductKey(se,{Core:!0})&&se._isValid()){te.next=18;break}throw{code:se._errorCode,message:se._errorString};case 18:return uo._innerSendHeartBeat(E,!1),Q=function(){var X=Ae(A.mark(function ae(he){return A.wrap(function(ye){for(;;)switch(ye.prev=ye.next){case 0:G=G.then(function(){return new W.Promise(function(Ce,Ke){var Ze=[se._convertGuidToServerId(he.imageId)],dt=F.DWT.EnumDWT_ImageType.IT_PNG;se._innerConvertToArrayBufferAsync(dt,Ze).then(function(ft){var ke;E._blts_tmp=E._blts,E._blts=!1,E.__LoadImageFromBytesV2(ft,dt,"",!0,0,0,!1,0,(ke=Ae(A.mark(function Te(Oe,Me){var et;return A.wrap(function(qe){for(;;)switch(qe.prev=qe.next){case 0:return et=se._convertGuidToServerId(he.imageId),Me?(v.log("LoadImageFromBinary success"),E._blts=E._blts_tmp,he.imageId=E._convertServerIdToGuid(Me.ids),v.isFunction(E._OnPostTransferAsync)&&E._OnPostTransferAsync([!0,v.stringify(he)],null,!0)):v.log("LoadImageFromBinary return null."),Ce(),qe.next=5,se._removeImageByIdAsync(et);case 5:case"end":return qe.stop()}},Te)})),function(Te,Oe){return ke.apply(this,arguments)}),function(ke,Te){v.log(Te),E._blts=E._blts_tmp,Ke({code:ke,message:Te})})},function(ft){ft&&ft.message&&v.log(ft.message),Ke(ft)})})});case 1:case"end":return ye.stop()}},ae)}));return function(ae){return X.apply(this,arguments)}}(),se._registerEvent("OnPostTransferAsync2",Q),null!=Y&&(k.Device=Y.strDevice,k.DeviceMatchField=zc.SMF_NAME),te.next=24,se._acquireImageFromServiceAsync(k);case 24:te.next=29;break;case 26:throw te.prev=26,te.t0=te.catch(13),te.t0;case 29:return te.prev=29,te.prev=30,te.next=33,G;case 33:te.next=37;break;case 35:te.prev=35,te.t1=te.catch(30);case 37:return se._unregisterEvent("OnPostTransferAsync2"),se.__bAcquireImageNow=!1,Cn(U),cv(J),te.finish(29);case 42:case"end":return te.stop()}},x,this,[[13,26,29,42],[30,35]])})),function(x,U,Y,Z){return I.apply(this,arguments)})},{key:"_imageIDToIndex",value:function(x){var U,Y=this,Z=-1;return Y._resetErr(),!!Y._isValid()&&((U=J4(x))>0&&(Z=Y._imageBufferWrapper.convertServerIdToClientIndex(U)),-1==Z&&Ee(Y,-1034,"Invalid image ID."),Z)}},{key:"_indexToImageID",value:function(x){var U=this;if(U._resetErr(),!U._isValid())return!1;var Y=parseInt(x);return isNaN(Y)?(Dt(U),-1):Y<0||Y>=U._imageBufferWrapper.count()?(We(U),-1):zu(U._imageBufferWrapper.convertClientIndexToServerId(Y))}},{key:"__LoadImageFromBytesV2",value:function(x,U,Y,Z,oe,se,k,E,M,G){var V,J=this,Q=U||3,te=0,X=x.name,ae=!0,he=1;x&&(te=x instanceof Blob?x.size:$a(x)?x.byteLength:x instanceof Array?x.length:x.size||x.byteLength||x.length),!isNaN(oe)&&oe>=0&&!isNaN(se)&&se>0?he=0:(oe=0,se=0),V=["[",te,",",0,",",Q,',"',Y,'",',oe,",",se,",",E,",",he,",",k?"true":"false","]"].join("");var Ce=function(){if(J.__bLoadingImage=!1,ae){var Ke=J._imageBufferWrapper.getCurrentImageIndex();Ke>=0&&J._innerRefreshUI(Ke)}return v.isFunction(G)&&G(J._errorCode,J._getErrorString(),X),!1};return Ye.checkProductKey(J,{Core:!0})||j.bWin&&Ye.checkProductKey(J,{Webcam:!0},!0)?Ye.checkPDFProductKeyWhenNeeds(J,U)?0===te?(Ee(J,-2312,"The file length is empty."),ae=!1,Ce()):this._innerSendBlob("LoadImageFromBytes",V,x,Z,he,function(Ke){if(J.__bLoadingImage=!1,J._isBindViewer()){var Ze=J._imageBufferWrapper.getCurrentImageIndex();Z&&Ze>=0&&J._innerRefreshUI(Ze)}if(v.isFunction(M)){var dt=Ke;if(v.isArray(dt)&&(dt=dt.length>0?dt[0]:{}),Z)setTimeout(function(){M(X,dt)},30);else try{M(X,dt)}catch(ft){v.error(ft.message)}}return J._blts&&F.DWT.lcvrf(J),!0},Ce):(ae=!1,Ce()):(Ye.checkProductKey(J,{Core:!0},!1),ae=!1,Ce())}},{key:"_innerSendBlob",value:function(x,U,Y,Z,oe,se,k){var E=this;if(uo.isServerInvalid(E))return E._waitForConnect().then(function(){E._innerSendBlob(x,U,Y,Z,oe,se,k)});if(!Z){var M,G,V,J,Q=[],te="";return E._resetErr(),!!E._isValid()&&(G=[E._httpUrl,"f/",x].join(""),V=Kc(E._clientId,x,U,0),V+="\r\n\r\n",J={method:"POST",url:G,processData:!1,data:V+=v.base64.encodeArray(Y),async:!1,onSuccess:function(X,ae,he){var ye=!1,Ce=!1;try{ye=v.isString(X)&&"text/json"===he.getResponseHeader("content-type")?v.parse(X):X}catch{}if(null!=ye&&(Qo(ye)?(E._errorCode=ye.exception,E._errorString=ye.description):E._resetErr(),(M=ye.result)&&v.isArray(M)&&M.length>=1))if(oe){var Ke=M[0];Ke&&v.isObject(Ke)&&(te=Ke.ids,v.isArray(Ke.metaData)&&(Q=Ke.metaData),Ce=!0)}else te=M.join(","),Q=[],Ce=!0;Ce||(Yb(E),M="",Q=[])},onError:function(){$_(E),M="",Q=[]}},v.mix(J,{headers:{"X-Requested-With":!1}}),j.bFileSystem&&(J.crossDomain=!1),Os(J),0==E._errorCode?(te.length>0&&E._OnBitmapChanged(["c2",te,1,E._imageBufferWrapper.getCurrentImageIndex(),E._imageBufferWrapper.count(),Q],null,Y.currentFileName),v.isFunction(se)&&se()):v.isFunction(k)&&k(),M)}return E._innerSendBlobByWS(x,U,Y,se,k),!0}},{key:"_convertToBase64ByServerIdsWithUI",value:function(x,U,Y,Z,oe,se,k){return this._convertToBase64ByServerIdsWithUIAsync(x,Y,U,Z).then(function(E){v.isFunction(se)&&hr(se,E)},function(){return v.isFunction(k)&&k(),!1}),!0}},{key:"_OnPercentDone",value:function(x){var U,Y,Z,oe,se,k=this,E=!1,M=!1,G=0;v.isArray(x)&&x.length>2&&(Y=x[0],Z=x[2],x.length>3&&(oe=x[3]),x.length>4&&(se=x[4]),U=G=x[1],G<0?U=0:G>100&&(U=100),U=Math.floor(U),W.cancelFrom!=on.HTTPUpload&&W.cancelFrom!=on.HTTPDownload&&W.cancelFrom!=on.Scan||(M=se)),(k._bServerPercentDone||0==Y)&&((G>0||0==G)&&(W.cancelFrom!=on.HTTPUpload&&W.cancelFrom!=on.HTTPDownload&&W.cancelFrom!=on.FTPUpload&&W.cancelFrom!=on.FTPDownload||(E=!0)),k.IfShowProgressBar&&W.progressBarOnPercentDone(G,Z,oe,U,M,this._containerElement),1==E&&(v.isFunction(k.__OnInternetTransferPercentage)&&k.__OnInternetTransferPercentage(U,!1),v.isFunction(k.__OnInternetTransferPercentageEx)&&k.__OnInternetTransferPercentageEx(U,!1)),v.isFunction(k.__OnPercentDone)&&k.__OnPercentDone())}},{key:"IfShowProgressBar",get:function(){return this._bIfShowProgressBar},set:function(x){this._resetErr(),v.isBoolean(x)?this._bIfShowProgressBar=x:Tr(this)}},{key:"IfShowCancelDialogWhenImageTransfer",get:function(){return this.__IfShowCancelDialogWhenImageTransfer},set:function(x){this._resetErr(),v.isBoolean(x)?this.__IfShowCancelDialogWhenImageTransfer=x:Tr(this)}},{key:"_getLogLevel",value:function(){return this._logLevel}},{key:"_setLogLevel",value:(S=Ae(A.mark(function x(U){return A.wrap(function(Y){for(;;)switch(Y.prev=Y.next){case 0:return this._logLevel=U,Y.next=3,this._innerFunV2("LogLevel",we(U));case 3:case"end":return Y.stop()}},x,this)})),function(x){return S.apply(this,arguments)})},{key:"MaxUploadImageSize",get:function(){return this.__maxUploadImageSize},set:function(x){var U=this;U._resetErr();var Y=1*x;!v.isNumber(Y)||isNaN(Y)?Tr(U):U.__maxUploadImageSize=Y}},{key:"HTTPRequestswithCredentials",get:function(){return this._resetErr(),this._bWithCredentials},set:function(x){this._resetErr(),v.isBoolean(x)?this._bWithCredentials=x:Tr(this)}},{key:"cancelableObj",get:function(){return this._cancelableObj},set:function(x){this._cancelableObj=x}},{key:"_getProfile",value:(T=Ae(A.mark(function x(U){var Y,Z;return A.wrap(function(oe){for(;;)switch(oe.prev=oe.next){case 0:if((Y=this)._resetErr(),Y._isValid()){oe.next=4;break}throw{code:Y._errorCode,message:Y._errorString};case 4:return U&&(Z=v.stringify([U.strDevice])),oe.abrupt("return",Y._innerFunV2("GetCustomDSDataEx",Z));case 6:case"end":return oe.stop()}},x,this)})),function(x){return T.apply(this,arguments)})},{key:"_setProfile",value:(_=Ae(A.mark(function x(U,Y){var Z,oe;return A.wrap(function(se){for(;;)switch(se.prev=se.next){case 0:if((Z=this)._resetErr(),Z._isValid()){se.next=4;break}throw{code:Z._errorCode,message:Z._errorString};case 4:return oe=U?v.stringify([Y,U.strDevice]):we(Y),se.abrupt("return",this._innerFunV2("SetCustomDSDataEx",oe));case 6:case"end":return se.stop()}},x,this)})),function(x,U){return _.apply(this,arguments)})},{key:"_removeAllImagesAsync",value:(g=Ae(A.mark(function x(U,Y){var Z,oe,se,k,E,M;return A.wrap(function(G){for(;;)switch(G.prev=G.next){case 0:if((Z=this)._resetErr(),Z._isValid()){G.next=4;break}throw{code:Z._errorCode,message:Z._errorString};case 4:for(se=[],E=Z._getHowManyImagesInBuffer(),k=E-1;k>=0;k--)(M=Z._imageBufferWrapper.convertClientIndexToServerId(k))>-1&&se.push(M);if(0!=se.length){G.next=13;break}return G.next=10,Z._innerFunV2("RemoveAllImages");case 10:oe=G.sent,G.next=23;break;case 13:if(!Y){G.next=19;break}return G.next=16,Z._innerFunV2("RemoveAllImages",we(se.join(",")));case 16:oe=G.sent,G.next=22;break;case 19:return G.next=21,Z._innerFunV2("RemoveAllImages");case 21:oe=G.sent;case 22:(oe||-1033==Z._errorCode)&&Z._OnBitmapChanged(["0",se.join(","),3,Z._imageBufferWrapper.getCurrentImageIndex(),Z._imageBufferWrapper.count()]);case 23:return G.abrupt("return",oe);case 24:case"end":return G.stop()}},x,this)})),function(x,U){return g.apply(this,arguments)})},{key:"__OnRecieveMsg",value:function(x,U){var Y=this,Z=U?.cmd;if(x.event)return br(yt(L.prototype),"__OnRecieveMsg",this).call(this,x,U);if(F.DWT.ConnectWithSocket)return br(yt(L.prototype),"__OnRecieveMsg",this).call(this,x,U);if(Qo(x)?(Y._errorCode=x.exception,Y._errorString=x.description):"StartScan"!=Z&&"GetAddOnVersion"!=Z&&(Y._errorCode=0,Y._errorString=""),"ReadBarcode"==Z||"OCRRecognize"==Z||x.request&&"OCRProRecognize"==x.request.method||"GetLicenseInfo"==Z&&v.isArray(x.Detail))return U.sFun?(U.sFun(x),!0):(U.fFun&&U.fFun(x),!0);if("SetCapabilities"==Z||"GetSkewAngleFromBinary"==Z||"UpdateImage"==Z)return"exception"in x&&"0"!=x.exception?(x.result.errorCode&&x.result.errorString?(Y._errorCode=x.result.errorCode,Y._errorString=x.result.errorString):(Y._errorCode=x.exception,Y._errorString=x.description),U.fFun&&U.fFun(x.result),x=null,!0):(U.sFun&&U.sFun(x.result),x=null,!0);if(x.result&&x.result.length&&("1"==x.result[0]||1==x.result[0]||"ok"==x.result[0]))return(U.sFun||U.sFun)&&U.sFun(x.result),!0;if(x.exception){var oe=!1;U.fFun&&(oe=U.fFun(Y._errorString)),!oe&&x.exception&&x.exception<0&&-2115!=x.exception&&v.isFunction(Y.__OnPrintMsg)&&Y.__OnPrintMsg(Y._errorString)}else{if("LoadImage"==Z||"LoadImageEx"==Z||"LoadImageFromBytes"==Z||"LoadImageFromBase64Binary"==Z||"LoadDibFromClipboard"==Z||"FTPDownload"==Z||"FTPDownloadEx"==Z)return U.sFun&&U.sFun(x.result),x=null,!0;U.fFun&&U.fFun(jc(["result:"],x.result))}return!0}},{key:"_convertServerIdToGuid",value:function(x){return zu(x)}},{key:"_convertGuidToServerId",value:function(x){return J4(x)}},{key:"_innerConvertToBlobWithUI",value:function(x,U,Y,Z,oe,se){var k=this,E=arguments,M=function(G){if(W.needShowTwiceShowDialog=!1,v.isFunction(se)){var V=[];v.isArray(Y)&&v.each(Y,function(J){var Q=k._imageBufferWrapper.convertServerIdToClientIndex(J);Q>-1&&V.push(Q)}),G&&(k._errorCode=G.code,k._errorString=G.message),se(V)}return!1};return k._innerConvertToArrayBufferWithUIAsync(x,U,Y,Z).then(function(G){if(!G||G.byteLength<=0)return rU(k),M();var V=k.__maxUploadImageSize;if(G.byteLength>V&&-1!=V)return ca(k),M();if(W.needShowTwiceShowDialog=!1,v.isFunction(oe)){var J=[];v.isArray(Y)&&v.each(Y,function(X){var ae=k._imageBufferWrapper.convertServerIdToClientIndex(X);ae>-1&&J.push(ae)});var Q=mt.getBlobTypeByImageType(U),te=new Blob([G],{type:Q});try{oe(te,J,E)}catch{}te=null}return!0},M),!0}},{key:"convertToBlob",value:(f=Ae(A.mark(function x(U,Y,Z){var oe,se,k,E;return A.wrap(function(M){for(;;)switch(M.prev=M.next){case 0:return oe=this,se=this._imageBufferWrapper.convertIndicesToServerIds(Y),M.next=3,oe._innerConvertToArrayBufferWithUIAsync("convertToBlob",U,se,Z);case 3:return k=M.sent,E=mt.getBlobTypeByImageType(U),M.abrupt("return",new Blob([k],{type:E}));case 6:case"end":return M.stop()}},x,this)})),function(x,U,Y){return f.apply(this,arguments)})},{key:"_innerConvertToArrayBufferWithUIAsync",value:(d=Ae(A.mark(function x(U,Y,Z,oe,se){var k,E;return A.wrap(function(M){for(;;)switch(M.prev=M.next){case 0:return k=this,M.prev=1,k.IfShowProgressBar?W.showProgress(k,U,!1):W.hideProgress(),k._OnPercentDone([0,-1,Tn.Encoding]),M.next=6,this._innerConvertToArrayBufferAsync(Y,Z,oe,se);case 6:E=M.sent;case 7:return M.prev=7,k.IfShowProgressBar&&W.closeProgress(null,U),M.finish(7);case 10:return M.abrupt("return",E);case 11:case"end":return M.stop()}},x,this,[[1,,7,10]])})),function(x,U,Y,Z,oe){return d.apply(this,arguments)})},{key:"_innerConvertToBase64Async",value:(l=Ae(A.mark(function x(U,Y,Z){var oe,se,k,E,J,Q;return A.wrap(function(te){for(;;)switch(te.prev=te.next){case 0:return oe=this,v.isString(se=Z)&&""!=se||(se="{}"),k=["[",U,',"',Y.join(","),'",',se,",1]"].join(""),te.next=5,oe._sendDataByHttpAsync("ConvertToBase64",k,"text",!0);case 5:if(J=(E=te.sent)&&E.result,0==oe._errorCode){te.next=9;break}throw{code:oe._errorCode,message:oe._errorString};case 9:if(!J||!v.isArray(J)||3!=J.length){te.next=17;break}return Q=new JD(null,J[1],J[2],J[0]),te.abrupt("return",Q);case 17:throw Ee(oe,-2366,"Converting images to a base64 string failed."),{code:oe._errorCode,message:oe._errorString};case 19:case"end":return te.stop()}},x,this)})),function(x,U,Y){return l.apply(this,arguments)})},{key:"_convertToBase64ByServerIdsWithUIAsync",value:(u=Ae(A.mark(function x(U,Y,Z,oe){var se;return A.wrap(function(k){for(;;)switch(k.prev=k.next){case 0:return se=this,k.prev=1,se.IfShowProgressBar?W.showProgress(se,U,!1):W.hideProgress(),se._OnPercentDone([0,-1,Tn.Encoding]),k.next=6,this._innerConvertToBase64Async(Y,Z,oe);case 6:return k.abrupt("return",k.sent);case 7:return k.prev=7,se.IfShowProgressBar&&W.closeProgress(null,U),k.finish(7);case 10:case"end":return k.stop()}},x,this,[[1,,7,10]])})),function(x,U,Y,Z){return u.apply(this,arguments)})},{key:"_convertToBlobForUpload",value:function(x,U,Y,Z,oe,se,k){var E=this,M=arguments;if(F.DWT.ConnectWithSocket){var G=Y,V=",";v.isString(G)&&""!=G||(G="",V="");var J=["[",x,',"',U.join(","),'"',V,G,"]"].join("");return E._sendData("ConvertToBlob",J,!0,function(Q){E._resetErr();var te=Q;if(te){if(te instanceof Blob||$a(te))return void oe(te,"",M);Qo(te)&&(E._errorCode=te.exception,E._errorString=te.description)}},function(Q){E._errorCode=Q.code,E._errorString=Q.message,se(Q)}),!0}return E._innerConvertToArrayBufferAsync(x,U,Y,"arraybuffer").then(function(Q){var X=new Blob([Q],{type:E._strHttpContentTypeFieldValue});if(F.DWT.IfAddMD5InUploadHeader){var ae=new Wv.ArrayBuffer;ae.append(Q),v.isFunction(oe)&&oe(X,ae.end(),M)}else v.isFunction(oe)&&oe(X,"",M);X=null},function(Q){se(Q.code,Q.message)})}},{key:"dispose",value:function(){return this.__unload()}},{key:"_innerDisposeWSClient",value:function(){return this._isValid()?this._sendData("dispose",null,!0,function(){},function(){}):W.Promise.reject()}},{key:"__unload",value:(s=Ae(A.mark(function x(){var U;return A.wrap(function(Y){for(;;)switch(Y.prev=Y.next){case 0:if(!(U=this)._bReady||W.page.bUnload){Y.next=10;break}if(!U._wsClient){Y.next=10;break}return Y.prev=3,Y.next=6,U._innerDisposeWSClient();case 6:Y.next=10;break;case 8:Y.prev=8,Y.t0=Y.catch(3);case 10:U._wsClient&&(U._wsClient.removeEvent("close",U._clientId),U._wsClient.removeEvent("error",U._clientId),U._wsClient.removeEvent("timeout",U._clientId),U._wsClient.dispose(),delete U._wsClient,U._wsClient=null),this._imageBufferWrapper.dispose(),this._bReady=ve,this._destroy=Ne;case 14:case"end":return Y.stop()}},x,this,[[3,8]])})),function(){return s.apply(this,arguments)})},{key:"_getImages",value:(a=Ae(A.mark(function x(U,Y,Z,oe){var se,k,E;return A.wrap(function(M){for(;;)switch(M.prev=M.next){case 0:if(v.isArray(Y)){M.next=3;break}throw Ha(this),{code:this._errorCode,message:this._errorString};case 3:if(0!=Y.length){M.next=6;break}throw Zb(this),{code:this._errorCode,message:this._errorString};case 6:if(oe!=Zc.url){M.next=12;break}if(!(Y.length>1)){M.next=10;break}throw Ee(this,-2619,"Only single index selection is allowed when enumImageFormatType is set to url."),{code:this._errorCode,message:this._errorString};case 10:M.next=16;break;case 12:if(Z!=F.DWT.EnumDWT_ImageType.IT_BMP&&Z!=F.DWT.EnumDWT_ImageType.IT_JPG&&Z!=F.DWT.EnumDWT_ImageType.IT_PNG){M.next=16;break}if(!(Y.length>1)){M.next=16;break}throw Fde(this),{code:this._errorCode,message:this._errorString};case 16:if(oe!=Zc.url){M.next=20;break}return M.abrupt("return",this._imageBufferWrapper.getImageUrl(Y[0]));case 20:if(se=this._imageBufferWrapper.convertIndicesToServerIds(Y),oe!=Zc.blob){M.next=29;break}return M.next=24,this._innerConvertToArrayBufferWithUIAsync(U,Z,se);case 24:return k=M.sent,E=mt.getBlobTypeByImageType(Z),M.abrupt("return",new Blob([k],{type:E}));case 29:if(oe!=Zc.base64){M.next=33;break}return M.next=32,this._convertToBase64ByServerIdsWithUIAsync(U,Z,se);case 32:return M.abrupt("return",M.sent);case 33:throw xde(this),{code:this._errorCode,message:this._errorString};case 35:case"end":return M.stop()}},x,this)})),function(x,U,Y,Z){return a.apply(this,arguments)})},{key:"_LicensePromptExpired",value:function(){var x=this,U=x.__licenseInfo.bTrial,Y="";x.__licenseInfo&&x.__licenseInfo.ExpireDate&&(Y=x.__licenseInfo.ExpireDate);var Z=Z4(Y);Z<=0&&v.isFunction(F.OnLicenseExpiredWarning)&&F.OnLicenseExpiredWarning(Y,Z,U)}},{key:"__saveToViewerAfterUpdate",value:function(x,U){var Y=this,Z=this,oe=this._imageBufferWrapper.getIndexByUid(x),se=this._imageBufferWrapper.convertClientIndexToServerId(oe),k=tn.getUrlByAct(this._imageBufferWrapper.BaseUrl,se,2);return new W.Promise(function(E,M){Os({method:"GET",xhrFields:{withCredentials:!0},url:k,onSuccess:function(G){var V,J=Z._imageBufferWrapper.getMetadataByIndex(oe);J||(J={}),J.width=U.width,J.height=U.height,V=F.navInfoSync.bMobile?Y._imageBufferWrapper.getMinImageUrl(oe,Math.round(J.controlWidth*devicePixelRatio),Math.round(J.controlHeight*devicePixelRatio)):Y._imageBufferWrapper.getMinImageUrl(oe,J.controlWidth,J.controlHeight);var Q=Z._imageBufferWrapper.getImageIdMap(se);Q.ticks=Date.now(),Q.imageUrl=Y._imageBufferWrapper.getImageUrl(oe),Q.minImageUrl=V,Q.width=U.width,Q.height=U.height,Z._imageBufferWrapper.UpdateImage(Q,J),E()},onError:function(){E(),Cn("save")}})})}}],[{key:"create",value:(i=Ae(A.mark(function x(U){var Y;return A.wrap(function(Z){for(;;)switch(Z.prev=Z.next){case 0:return Y=new L(U),Z.next=3,uo.STwainConnectToServer(Y);case 3:return Z.abrupt("return",Y);case 4:case"end":return Z.stop()}},x)})),function(x){return i.apply(this,arguments)})}]),L}(kme);function Z4(r){if(""==r)return 65536;var i=Ld(r),a=(new Date).getTime(),s=(i.getTime()-a)/864e5;return i.getTime()<a?0:Math.ceil(s)}function e3(r){var a="",s=!1;if(r.__licenseInfo&&(r.__licenseInfo.ExpireDate&&(a=r.__licenseInfo.ExpireDate),s=r.__licenseInfo.bTrial),s&&!F.DWT.HideTrialMessage){var u=Z4(a);u<=5&&(v.isFunction(F.OnLicenseExpiredWarning)&&F.OnLicenseExpiredWarning(a,u,!0),F.DWT.HideTrialMessage=!0)}}var Vs={changeImageUISize:function(r,i,a){var s,u,l,d,f=i,g=a,_=ve;s=_e.one(r._containerElement),v.isString(i)&&i.indexOf("%")>=0?(0==(l=_e.css(s,"width"))&&(s[0].style.width="100%"),l=_e.css(s,"width")*parseInt(i)/100,_=Ne):f=[(l=parseInt(i))+2,"px"].join(""),v.isString(a)&&a.indexOf("%")>=0?(0==(d=_e.css(s,"height"))&&(s[0].style.height="100%"),d=_e.css(s,"height")*parseInt(a)/100,_=Ne):g=[(d=parseInt(a))+2,"px"].join(""),s&&(u=_e.one(".dynamsoft-dwt-container-box",s))&&u.getEL()&&(u.style("width",f),u.style("height",g)),_?(r.__funResize||(r.__funResize=function(){if(r._ImgManager&&r._containerElement){var S=Vs.__innerGetUIViewRealSize(r._containerElement,r._width,r._height);return r._UIView.ChangeSize(S.width,S.height)}return Ne}),v.removeEventListener(window,"resize",r.__funResize),v.addEventListener(window,"resize",r.__funResize)):r.__funResize&&(v.removeEventListener(window,"resize",r.__funResize),r.__funResize=ve);var T=Vs.__innerGetUIViewRealSize(r._containerElement,l,d);return r._ImgManager?r._UIView.ChangeSize(T.width,T.height):Ne},__innerGetUIViewRealSize:function(r,i,a){var s,u=-1,l=-1;return s=_e.one(r),v.isString(i)&&i.indexOf("%")>=0&&(u=_e.css(s,"width")*parseInt(i)/100),u<0&&i&&(u=parseInt(i)),v.isString(a)&&a.indexOf("%")>=0&&(l=_e.css(s,"height")*parseInt(a)/100),l<0&&a&&(l=parseInt(a)),{width:u,height:l}},bindUIViewEvents:function(r,i){var a=r;i.onSelected=function(s){if(!a._isNoViewer()){var u,l=s.length;l>0&&(a._ImgManager.SetSelectedImageCount(l),u=s[l-1],v.isFunction(a.__OnRefreshUI)&&a.__OnRefreshUI(u))}},i.onRefreshUI=function(s){a._isNoViewer()||Vs.__innerRefreshFromUIView(a,s)},i.onResetCurrentIndex=function(s){if(!a._isNoViewer()){var u=a._ImgManager.getCurrentImageIndex();if(s>=0&&s<a._ImgManager.count()&&u!=s&&v.isFunction(a.__OnIndexChangeDuringDragDrop))try{a.__OnIndexChangeDuringDragDrop(u,s)}catch(l){mn(l)}}},i.onMouseMove=function(s){if(!a._isNoViewer()){var u=s.index;if(s){var d=s.y;a.__MouseX=s.x,a.__MouseY=d}if(v.isFunction(a.__OnMouseMove))try{a.__OnMouseMove(u)}catch(f){mn(f)}}},i.onMouseClick=function(s){if(!a._isNoViewer()){var u=s.index;if(s){var d=s.y;a.__MouseX=s.x,a.__MouseY=d}if(v.isFunction(a.__OnMouseClick))try{a.__OnMouseClick(u)}catch(f){mn(f)}}},i.onMouseDoubleClick=function(s){if(!a._isNoViewer()){var u=s.index;if(v.isFunction(a.__OnMouseDoubleClick))try{a.__OnMouseDoubleClick(u)}catch(l){mn(l)}}},i.onMouseRightClick=function(s){if(!a._isNoViewer()){var u=s.index;if(s){var d=s.y;a.__MouseX=s.x,a.__MouseY=d}if(v.isFunction(a.__OnMouseRightClick))try{return a.__OnMouseRightClick(u)}catch(f){mn(f)}return Ne}},i.onImageAreaSelected=function(s){if(!a._isNoViewer()&&v.isFunction(a.__OnImageAreaSelected))try{a.__OnImageAreaSelected(s.index,s.left,s.top,s.right,s.bottom,s.areaIndex)}catch(u){mn(u)}},i.onImageAreaDeSelected=function(s){if(!a._isNoViewer()&&v.isFunction(a.__OnImageAreaDeSelected))try{a.__OnImageAreaDeSelected(s)}catch(u){mn(u)}},i.onBufferChanged=function(s){if(v.isFunction(a.__OnBufferChanged))try{a.__OnBufferChanged(s)}catch(u){mn(u)}}},__innerRefreshFromUIView:function(r,i){var a=r;v.isFunction(a.__OnRefreshUI)&&a.__OnRefreshUI(i)}};function Kt(r,i,a){i in r||Object.defineProperty(r,i,a)}var Nme=function(){function r(i){n(this,r);var a=this;a._parent=i,Kt(a,"width",{get:function(){return this._parent._width},set:function(s){this.SetSize(s,!1)}}),Kt(a,"height",{get:function(){return this._parent._height},set:function(s){this.SetSize(!1,s)}})}return c(r,[{key:"SetSize",value:function(i,a){var s,u=this._parent,l=!1,d=!1;return!!u._isBindViewer()&&(v.isString(i)&&i.length>0&&"%"===i.charAt(i.length-1)&&(l=i),!l&&i&&(s=parseInt(i))&&(l=s+"px"),v.isString(a)&&a.length>0&&"%"===a.charAt(a.length-1)&&(d=a),!d&&a&&(s=parseInt(a))&&(d=s+"px"),l&&(u._width=l),d&&(u._height=d),Vs.changeImageUISize(u,l,d))}}]),r}();function t3(r){var i,a,u,l=r._config;W.dlgProgress||W.initProgress(r),l.bNoViewer?r._containerElement=null:(l.container?r._containerElement=l.container:l.containerId&&(r._containerElement=v.get(l.containerId)),r._width=l.width,r._height=l.height,i=_e.one(r._containerElement)),function(d,f){var g={Stwain:d},_=ve;if(f){var T,S=d._width,I=d._height;T=_e.one(d._containerElement),v.isString(S)&&S.indexOf("%")>=0?(S=_e.css(T,"width")*parseInt(S)/100,_=Ne):S=parseInt(S),v.isString(I)&&I.indexOf("%")>=0?(I=_e.css(T,"height")*parseInt(I)/100,_=Ne):I=parseInt(I),g={Stwain:d,Container:f,Width:S,Height:I}}Vs.bindUIViewEvents(d,g),d._UIView?d._UIView._Init(g):d._UIView=new W.UI.ImageUIView(d,g),d.Width<=0&&(d.Width=270),d.Height<=0&&(d.Height=350),_&&Vs.changeImageUISize(d,d._width,d._height)}(r,i),r._isBindViewer()&&((a=r).__OnImageAreaDeSelected=(u=r._config||{}).onImageAreaDeSelected||"",a.__OnImageAreaSelected=u.onImageAreaSelected||"",a.__OnMouseClick=u.onMouseClick||"",a.__OnMouseDoubleClick=u.onMouseDoubleClick||"",a.__OnMouseMove=u.onMouseMove||"",a.__OnMouseRightClick=u.onMouseRightClick||"",a.__OnTopImageInTheViewChanged=u.onTopImageInTheViewChanged||"",a.__OnBufferChanged=u.onBufferChanged||"",r.__OnMouseClick=l.onMouseClick||"",r.__OnThumbnailMouseClick="",r.__OnKeyDown=l.onKeyDown||"",r.__OnMouseWheel=l.onMouseWheel||"",r.__OnMouseDoubleClick=l.onMouseDoubleClick||"",r.__OnMouseRightClick=l.onMouseRightClick||"",r.__OnMouseMove=l.onMouseMove||"",r.__OnImageAreaSelected=l.onImageAreaSelected||"",r.__OnImageAreaDeSelected=l.onImageAreaDeSelected||"",r.__OnRefreshUI=l.onRefreshUI||"",r.__OnBufferChanged=l.onBufferChanged||"",r.__MouseX=0,r.__MouseY=0,r.__style=new Nme(r),r.__fSelectionRectAspectRatio=0)}var n3="data:image/gif;base64,R0lGODlhZABkAKUAAPyOFPzKjPyuVPzmxPy+dPyeNPzarPz27PzSnPy2ZPymRPzGhPyWJPzu3PzixPzOnPyyZPzChPyiRPzevPz+/PzWrPy6dPyqVPzOlPyyXPzq1PzCfPyiPPzetPz69PzWpPy6bPyqTPyaLPySHPzKlPyuXPzmzPy+fPyePPzatPz29PzSpPy2bPymTPzGjPyWLPzy5P///wAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAACH/C05FVFNDQVBFMi4wAwEAAAAh+QQJCQAxACwAAAAAZABkAAAG/sCYcEgsGo/IpHLJbDqf0Kh0Sq1ar9hslXI4aEwHFUVLLicpjUBrBACMFKTG2Ewne1Khtl4fSnnqgFYUFSJ7hgAiFXOBjE8mDIeHIyaNlUweGZGRGX+WnkYTL5qHIhOfp0MubKN7Iy6oUhQwDSYmDTBPHiyshyydsEwUJgslCiIFCgkPcpcJvIYJv8BJBy4okW8r0kceIM97LIvTRw0Cq5ojBNtGqt9uC08qGisnBA9g4loHAt8jESpKJhT6VqqJMALn3AiYsE7QAneIFCVRkelbiYZFKDhooanAinxWHFyDKABXEhMJ0VFiAkMBqwITQE6hEAGinhRKBg3UlEim/pENzwQcyAKDn00AJ3wKucMxUogKGIsc2DlqhIMsGjgcBRBC6dI0Cla9IaHBKxEHKTWRyGKCqjsUZpeqOFArTFwiK9JGIsDW7TcOd7FU0HuIL5asWwVELfPo2wOiELYuCHzFQ4FnIzRkoYCBsCYGVz3lZZVuMRQNLiGyGOrpQORRClZuHv2tgAPKWNBA0KvgdhkPJzzrYfDBNB0uKwowYDCCQYETMHA78RDB7x6P42J4MFFhhQPWgA4YKJGWAQgHxrObkdXhhAAOHDK4wKd+GgUKHu5Lr8+/v///AAYo4IAEAgODBhNoYFKBdVCgAQkKMDdCcwq40EB6DDoBAwbW/rUhwgMLZlhFA7vxMkICmolIxQEhCLeHUCpK4YEzNvkiIhomOGACDKYNdhQDFWR4wAMCiMKAAA+AZ8QBFR2VgZIBwsACJHswwEKIRAi0FSKmDEjBLtiEYwQFJGzZBgb7eWICabIN4QEBZiKFISxAsRLBkmBumQCU/pXASwZL0rjlagMaNQqgRbwZpzoDnsDLnRmVaSYJaVoygGeTHKHlVgV5mWcvMjG5JQR8/icllcOBgCURKaDqDgM4MXgAAgJAciQCpbopqDs2ZugBDDnaYhwMF7jYxggwxihFAxm4OAIEKSq77AMdIoJBA9JW4UEDLkQ4IYUWzpmtEgcmuOq4/uimq+66/qHhwAQfVDABGOxGodECFyjnBgMoZBAAM/UuAcMJl6HDAQniZiuMVt9AAHDAQ1AwAcPuCIAtxENo0JRNECTs664QjUApxg7EycHFp/x64XpNbjVCAJVS4cAGJQhggR9kaFCtRecCsqmHk2mxgqtbFdAmIw5Y94EWNcUJAKyWeFDnISF4fIQFTrcRZCUw+BmJCNFagXXWWzdSFE9HUzG1mQwYYIkKYx+iQK5RPGAsKyKEVkkK1r2SRdJOh4ByIx48ZEgJdEfhwcYuJ/UJBSu0UIAIEriQuBQVxFnAALBsR68ZBzBuEwExC0hBBzt31LMRKqRAAAEpAESgYgfU2sSB3kscsOueBXqQnDshxOTECocsXeDpokeCImWv7QFBhlxUEIIIEx7LgAgQoBeF13sgeqMJD7gAAgEurPAwFHYb8hjGT4iqB6nsPyELkSWAWHr8+Oev//789+8/u0EAACH5BAkJADEALAAAAABkAGQAAAb+wJhwSCwaj8ikcslsOp/QqHRKrVqv2Kx2y+0uPY1JJ+XQeLxob2OhYAAAjNaika5fKYPL6M0HjC4DFHaDUSYofYgAKCaEjUweAomJAmeOlkYOe5J9Iw6Xn0MEm4kEoJ8UCqOICoKmUB4aJiYNrU4UHKp9HLWuSwcBAhwoBQolFZVMFC25fC28vUceFQWSIyEOz0gWzG8W0EoeLm6jIilNmdyeUBQNsg3IXhXjqhyMX5G5lK8uF8IKJ3S8HKDGjQU8JA5wjeKgzkmDEprejECBrYsLbm/KJXOgJ9Gfik5g4EtUwJ4WSBjfLDiIpEGENm8YKIgQ0NaKiKRYVtGgEGP+Ahi2NExIkWKChmy+QKgKUROLA4IYBTQddCCEqpJbBhxKKQCoowMXVC3aokFCSgAsDljycELVhalWUKZ0gTQNBQPzEI2IUJdKBZxiB3xSsQHwm65dPFhlNmKDzkEwXIjowwAC3CxPmbXwCspDCgICLrBYoRYNhRRQPba4bImChwMHPPTVYoLFZEQcInD+tjbFAgglSrAgYeIxb0KvYcA4MPu48+fQo0ufTr269evYs1t3DaOBdxiytXOB8VnBixEiJJwwsFt8lQEl8vJhUEKweyoUKvTcxMFA8/tG5HdbLiJU8B+AQzSwXy4csDYdBTBoAMOBF521gHYutcBBCBv+OCgEDANiVEB70lHgQAs4tRBIEvKcBUcF1x1QgiQllHbEAi6+EcF16HjUkBHb5OiNdRiMgkESSgl5HQmjkJAEji7uxaNhfvxYRItnMQCjdQeM1IcANhoBoosjXodHKn2oOBuUKV2YXQMnhCBBCAAxoWBKDYoHoYQHCshNgQciKER+CybCgYGCRuFAfJLQZ2WiIVVAgAQijPCCBARUQCKktnjQ3XfhcSrqqKSWauqpqBbhqSwTppqMCScoUIAIBRTQAgm0uGqEBw5AQCUcAAWaKAUPpLaJAiClSsEKL2AkwaOknmZsLkyl2oCXGFkgrHb5/aoKAx7aQcG2T3gwY47+ALgAigoYXCBHuFIc4G0urDThGmyhTqHCYm+gYJ8WDqD7RgHhHjABBhFYAEIEGEwQ5hMBJFICuUoYIDAAIpi06wolTFtACSsYF80yej1sRQUXZ3wEOyHIhwgDTAXqAZqImFzFBBcTvOsEhW6CwgSBioIbxUnAcLEEB5loFp7JKqHBVhkhelLP3IAgJrbcXGDzEb3uEUIKIktBAQnzbjLCv0NEIPCOnXqQ7xYN0JwSBM+Mia4Im4JCrMtXPfpA2aOM8IBzB5wAeEYrPENBAhcDkADRaHhAAN+IFBCymCQLvNlzKjygwK8jCJACUnderAC8l7CDweecQKBpXWU1zoFdBiWCYUIFKZgQ22xxN346qR6EdbEAKpQqtMCllDrB4dVMYCoF/LoYAuTVpUD5t+acKnmOJ4QtKAwgMD8CC3mPWvj180WwdakeIICi2S0g4P2o7KwgAE6hr5ArKEEAACH5BAkJADAALAAAAABkAGQAhfyOFPzKjPyuVPzmxPyeNPzarPy+dPz27PzSnPymRPy2ZPzGhPyWJPzu3PzixPzOnPyiRPzevPzChPz+/PzWrPyqVPy6dPzOlPyyXPzq1PyiPPzetPzCfPz69PzWpPyqTPy6bPyaLPySHPzKlPyuXPzmzPyePPzatPy+fPz29PzSpPymTPy2bPzGjPyWLPzy5P///wAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAb+QJhwSCwaj8ikcslsOp/QqHRKrVqv2Kx2y+16v+CweAydRCyVjyUyIbujkwYGQK9jGu23Xtkg1f8AJA17hEYdLSKAdSItHYWPMA0Jin8Jg5CEA4mUdCIlmIQRnH8OoGUvJSUHeVAlm5yepkwTLyMaIrgMCQWrT5KjAJaySh0OK5QiGBmsS4evgCIBjsNHZhrAApdNfZyCVRPTYS/HwAAszEq0JM8iguhNcQYrGiwO71oj5XQMEWURIAIqrLk36wSDPyIWhNsy4Zo+ACgIisngEGG/Lg0OPqxwoFCAZ3a8OAA5StieDhY4aViYxdXDYNreTDDACQJLLC806hPQkdD+A5IAQHiZ8OGhCAkSxZFDmOELBaCAQjR91KCCRhEJ2Hw5oKAcI1AHEKBA8QAPmAkZKowSAaInqAlJtcRhobNOiBYvqOkxY0FAghUCUMTUK/NAhgYp4hJezLix48eQI0ueTLmy5cuYM397kaFEhheKNS+Z4ICDAA0mNAjgYE/0lA4oQigSEQLFTdd8BJTLhrvJCxZQF7HI2zvJBA/B/zBQEVov3OYHILwM5jZyBw8QQkDwcLuIg+l0SklOseBVwhRL8oEfMdmB7D8ELiahCd6A5AkXKD1IigI8APuRTfCAfkkF4B97kkXwnl3yIfEdeOJFdoAE5klQ3REHTPJSAhf+PnZddtt1R8QEKtQ1ynLNUQNOir8lB4AIwxW3RAO6YTOYjEd0YMCCf9QmIo5EFCOBABBoAIEAEjjwI5BF0JJKCaAxKeWUVFZp5ZVYPgHOCy8kluURL5yAAgYkCICBAWWN8VwHHcAFSgoPJGDiiyZIEGUXHTSgAgYmMMCABiBEcKceHZSgITAhULBkFAdcIN1sHyi61wmP6sPAA4s68ducPbaQ4hUlVPRQCB58ikQHfujDSKZXZOgfAARESEUHC0yXqKlwGPgqABiwikQJJoAnAHFgvFCpf7HMKgGyJ4hBAacvcVBFA0X5ZwGuTsy0ax0QYAtDCTy+tBIYB8yxLaz+Nzox0qsMZFqMCi20oIKSS7yg1rkhfDLFusj+SIstDOCSiwYjDFoEjecCkC8VA7jwKgESdUCBqIpowB2GqW4bQrrbHDqdAgR18AC0yu1nSErnjjvFASC8ylw1Jb7kQqlGjOAiMBhYcUK45ZjUpAPBTmdCa0RkQMC5DUrRQcsvMXDBPSnQVx9L2u66gq9INHAsMCx0KEQGPOvjwo0NhF0OAxR4S4ShXmFArBEIbIuAESTejBAKXk/RAAhhi0CABOglwcK2LOT4gNmzWZA3FSkUYEECIYjAQAgfJLlkta9WcKoKR59t4Rd5luCAAyWYxcRS/q1g3AAKBFfBCVi7kbFpfyQ0U0ILkIcQAgH0OODlYhxsK20THXAGZeyhbJt0cS9Q/JAGb8sooN2LmCzlC+a+pED0QJaw9SgQTEVlHB8kJ8IKplv5ggS3zKaBnV/CUOgICiRAAAEJKDBCCcj3NsEBDThMA3qBiSAAACH5BAkJAC8ALAAAAABkAGQAhfyOFPzKjPyuVPzmxPyeNPy+dPzarPz27PzSnPymRPy2ZPzGhPyWJPzu3PzOnPyiRPzChPzixPz+/PzWrPyqVPy6dPzOlPyyXPzq1PyiPPzCfPzevPz69PzWpPyqTPy6bPyaLPySHPzKlPyuXPzmzPyePPy+fPzatPz29PzSpPymTPy2bPzGjPyWLPzy5P///wAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAb+wJdwSCwaj8ikcslsOp/QqHRKrVqv2Kx2y+16v+CweEwum4sS1yYg2rgk53gzIgDYQ5SIfI9sJOyAAAkNfIVCEgWBgSZwhnsNKoqAKoSOchh/koIYlnKQmoKVnU4SHByNUoghmoyjTRwRDiwBKSSoUA0PkoOuTC4VBKsAIRkWKFN0gHh6vUouI5ohEAepaiIBbreppdpeHB+gww7dcQ0LCSUFtmERBOEAKtSFB3WADwNgEg7vw5yFKZJWkMPCYQE/ABsMXZAEYuAVDiwOJiwETlEJh1YkpBAGKoSoPScktfpCIsM7AfL4cFgRiMLHLhJEMAAFYgNGMhIiFKgwISX+GBQaOAICkYJDszIHHCQQFmLEBqNHy0g4QGJDhAYHbkbdyrWr169gw4odS7as2bNow3BwgcEF1LRVOJwoQCHBgwQUCpx4C7fJ1BPBopXoqRWuBAwrhEZbgaEw1QEkfH5t4EFxRw8v0TQokAGE5wcFGhR2hKLeQUAjJA9BkcKdJAIpVPfiUMAyvxAF+AopaPvOAt29NoA4zXDiEAkTZr5r0WF0HBQmeh80wZfyacxRG5gkLimDKAknpAcKccK5mQjcoxmXYJD4AvNlEKTXlGLISu4rgFuKOF9RAPsVnfaBfo6I0J8iLBwHAXcQEGgIQAcCUt8h4Z1GHnxkoBfhMMz+CGHdQS5lt92B3hGBXAv8MIchGSgkEqEJkvEWTgi/cSXcgQQYRwRrrikC2zFc0dZfCBUQKMFmnXmWQWgrxnEABfN5IFsRLpAQAQkujPXhQSF44E9fSByW2G2MNSmWBChMUIJtIQyWFZhOyEVXAhngpZeDcCpxAFsuTJnnn4AGKuigUJRyAgsfrLDABG+MUYoLDTTgliMSkGCCcoooEAGQXhyQQgEjJKDCBRA8pVIKI2oCwjQwRTACpoAQ8EFmY3AgAoq3KYBnFBykMFw4GXSIkwOwvhMCdVqcUKwmJdBKUgnpMdAcFgek+s6AZHBgQn8jZHmFBdzVRMYBy3Kp4xT+B0TCHbJiTPCimS+Q0ONp3Y6x4IEe7LrEjdzxIkaA82WgrxIn/Eqcv0uU0kAEKaRw1SlMsHRgCQMn0U56FHjrzAkCCBWCACf4KcS2+FaMhAuZEFeByC808EG5ADAwqxIQ9odtFYhwx0AKGLmggnjwaGxEAxFOAG/LBvOTmp6m8YNSmAvNl8CXVlgANAAgCGuErVffIcJA/BIXgggmKwGdeAwggNGW1zl7NncXCH3FASIkrUwGey1RIXfkJeGCAl2X2EUDJqhQAggElOCBBXIfAVF/LDhIG8x2MHCBs1hMNcAGG5DA6RLf9FekEr2+KkkICYjQeCcoSJzeCiynsYFdBgJkUIIABUzQQNlnCDkfu0yUYoopR4uhT3/jDBqB3fxkTegBUROnAMtwXXxajoQe4sDVISSf/QsQUR5z5N/bd4IKyzKgQt7lE+GpAnXhpUBs7YcJKQYH8F6/IUEAACH5BAkJADAALAAAAABkAGQAhfyOFPzKjPyuVPzmxPy+dPyeNPzarPz27Py2ZPymRPzSnPzGhPyWJPzu3PzixPzOnPyyZPzChPyiRPzevPz+/Py6dPyqVPzOlPyyXPzq1PzCfPyiPPzetPz69Py6bPyqTPzWrPyaLPySHPzKlPyuXPzmzPy+fPyePPzatPz29Py2bPymTPzSpPzGjPyWLPzy5P///wAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAb+QJhwSCwaj8ikcslsOp/QqHRKrVqv2Kx2y+16v+CweEwum5EUynkd7Uwuo0mHTVemTCEAIGRK1f9FFyJ6eiIjUhQdBygBJgQLIA0daoBPFAWEhCeUTm4qDJmFJCAHnJVKBy6hAAwHTwcLeauEDCoNp0yXq5tOLxWDs6EfGbhLI8CFh00HHsHBw6bFRAd4enyuuQHOzirYXB0ZICgN0VEHb3FzTS+y26sMIOVWvgUMLgUt8lBpUC3uzgLUZWmAKRQGb2QObPjn7FaWDghmGdLnxUE7hqFYaMlwMROJF2ZAgMK4SoMWFKpmJSBW5gEykoRUaOEwctVKMw9qwtTjQQv+wWAQEIoRuTPTAi0UTMxiwIJilxIdYYLY0gGCThcBnHbp8KGoHgYgtxx4IGBDAggG6LDwCkCFQKQvSmQoRUdh0RATtErbR5SkiAhv92LpkBOjiApCBWMZqzPY4bCKvxk4sS1EgMSRs1AYKyCECwagQyRoQS6zGAoZULB4AKKEH9OwY8ueTbu27duyOzRAYQJDAgwmxgXGHYVCgxYFQ+ErTbz4BAHuBOS1xM82BQ7JtxWYroTCCwcXTDxw8EJvsRIpGYYo0X0CBmQMMHCH3YHETgzDh6DITqgAB9koNPYPAyggwY4zIUAWGUReITAcBRq4o4F5dWQggVc3FXHACu7+rIBZMRNEpd4ERmSw0DYbsBSZAenB5EJaRZjozgkqKhagVwzAOE0C7iTwIS4heoWXERC6YwKFdGTAY1EZFnFgMAnSB0GD+cGw3ywFFBjbjTDBkwQF7tUU33ymHWAfTCRUKYR3DoygwQjkIVlJCQIiyF4TaciJC5j8BbOdnriBacFLoYhgAZnN4dnAAn0CsBygicKgGwe9/RbcC2pGqummnHbq6aeghlpcnqJa8p0CLWjwwASSkKFbBhmUd8oLCghA6AYBZAApniAgkIAEG6ygwp11NGCVYxY4sOuXDRBA6B6XLUtFA0tWxoG0RVDgQLWzfLTGC2f+E4JDWbxgwT/+BGBrSWEYEZApFC7944IDZrwAHUknDPBQo7OooG4TEzzrTj5YZCCwSgqCQcEDRXnwmhUoHLzKBsSGQUEERXl7RcQYUYyInEllnPAUJUgcSgLkMnFACRMowAIHJfxIBAUjFNXNYiLOAsG7QnTggAonIHOCB3IwEfBOC/DcRAUMiaAREx2MwO8JF7wrI0khaInFT9Hp1UEEJgMAWHcthJ3JzkiBwK8eTSrBsTsi/KdEBueO+A0HXa0iggoD6HVA3v98IDOYOWcyURfe4SHC4gwUwAJdTIDQ4jYvLsFnZSMoTYXPE0xQApJFkjSh5RlU0GcIGCibWQcqwORWEz4HUAFdBhioAMnDkaUQEUkOWpLCCy8coDkgFDBNUgX/mnaMYQGUOgRUGK3n/JqtM+TB8IkesDYhG4wsKpjc2oSo8xSUAMGzIkBQAvabJsIB0CGEcIIKciTf3AHeT69/qUEAACH5BAkJADAALAAAAABkAGQAhfyOFPzKjPyuVPzmxPy+dPzarPyeNPz27PzSnPy2ZPymRPzGhPyWJPzu3PzixPzOnPyyZPzChPzevPyiRPz+/PzWrPy6dPzOlPyyXPzq1PzCfPzetPyiPPz69PzWpPy6bPyqTPyaLPySHPzKlPyuXPzmzPy+fPzatPyePPz29PzSpPy2bPymTPzGjPyWLPzy5P///wAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAb+QJhwSCwaj0gk5dDYPBaRx6ZxoCSv2Kx2yx2mThYDYExGfU6prnrN5r5WIbKcHFq92vg8m1ICzf9kLCVWeoWGRnwTgIsACoOHkIYHAoyMAgeRmXgPlZUPmqBdL3GdiyF3oalXDyKliyKfqrJFFBiujBiEs7MvLLeLLKhYFMS6u2olHL+AHCVXFC8lJw8PFQ4NxsdZJSjLfyjOSC8qGKRjDCAB2Npayd5zzUgZAgyvCifZ7EYvCu9yCsKGUHAgphODB/n0CbTlbwyEbIluicCnEAmnhrCMHFjR6haLBqAodMjQoEPCfea8nTIiod4vEQE6ZDrQwqUBFSeLXPSWkVb+gncfI1Fo0fGcBC0HSLy7ZKSDi3cMHERK4VIOiZwCSyj6pcBBvgYNcUIqwQxkFj5+SolwlJCsvxFY1WRgFhDLm5R/6tQl4vbdhbhdOhSUswIwkQMbLCiDZ+EEpiQvGlYwvIWCh6IAGJjtsiSDhCcLpGSogkXwuxBShUrAwGHChwwKKUR4h2HvoRePKw7AaxBhxVkdZv8SYPu3phckMDMyANv4rgYClP/hcNT5sQYmeJ9b8cj6sQ4lIgwGECKBBNLe2RE7kCHDC5Pp48ufT7++/fv48+vfn17kAfj8aQKNBAGY8IEJI2zwAmUBnlWBAE/J4QIJHsjUYB4paFDVHwz+RJDbhWq88FMpdmxxgAMbOFCcfR0Q5YoILViYBAUFgGBACAYIQNF+DWhnymZHdPBAhGQcJCN+wv2iwRUlaBdCOPh10M0yKBxZRAuMtKBfBj4yEkJzRyi1CAn6ObChK1ElwRAgGJR5ZilpIoHlIlrmx6VKYBrRJCBP6ielN1UmISSRY7jwgJX2aeDNks8UIMCNKAhQAIPO9fhLCEBC5oAEKjbYonSAwIgoiFgckACocohQIqlqZPhmkRp8yCoXFKgA4RwuCCDWrHu8sMEIBByY4IK86uEfgMUmq+yyzDbr7LPQRqveqNIicYAEF0SgwQgnZFotER2sFkJRISiAQBr+qXQQzQMqjEZpJiks8CoAqq6jyQEBTDnGPejq08ECpdR2nAWAMDCCrLtsMO8cdULy6SIM7HjMAWt2shIkBFWiAMKqnNDlHw0XQsEIpUA5y8ioAvLQIR0QUEoF2gS3DAj96tEBwZ2oELOiv4DAMRsdBFBKaruMvMxVkLRUiQErItGBA9kucIEE1B5RwcJ/RBDJARBUMkLVR5RQTkciGICByVc00M+LaBfSQFpziGBB00V04IGPIagA9hCsuFKYJhlAkJIBC9BNBAUeLy2xoCuUokCeW//6gQUPOLB33WtrfDkMDVT8R1fvqtFBCshyccItJ2gBTQvjxv1a6No07ndgFw2MgAEIIJCwQHf3UZB5JwqEnsLP9VGwWCkcwH4hJa6Q+S0Mc5YSsrQZpEyGCJBHS8EHpVigPIgvQICqCBAY3mwDFrzJgAXZP39ABQmQUkcFxH/r3wH4l/78/vz3T0QQACH5BAkJADAALAAAAABkAGQAhfyOFPzKjPyuVPzmxPy+dPzarPyeNPz27PzSnPy2ZPymRPzGhPyWJPzu3PzixPzOnPyyZPzChPzevPz+/PzWrPy6dPyqVPzOlPyyXPzq1PzCfPzetPyiPPz69PzWpPy6bPyqTPyaLPySHPzKlPyuXPzmzPy+fPzatPyePPz29PzSpPy2bPymTPzGjPyWLPzy5P///wAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAb+QJhwSCwaj8ikcslsOp9QZad08lBOpUN0y+1CDyoMx8UQhVAYldbLbnMnDpAIQK/TRSDJxM3vIzsUDHaDdQwUHX6JfRMUIYSPACEUe4qVXSUKkJAKJZaeUB0EmpoEiJ+nShkuo5AMGahsGRQBEREXFGtLCKyaKrBREx0nJCFlcyIMKCslpkgQvJAQv09wAnOaIgQNlEYc0I8c003CBt8CA9xEjt+DBuMlFA8PHg4pihMn5ewsr0Yo7IPCKZlQYgUHYwwMWDiRjg0cfQBZ5BqCAaAdDEoORBD0SESCbW5SWLBYR0NDFSTp+EJyQBQrCw3cFEhJx0AnIhk4AnSFZML+iGusEjR7I4AmABER0nWoQJKAvSMlvEETcYJNiXU0BcTEKfUbpz8RAIKYGEWFzpQoBhRhhJWVpIZDGoAAaMCBlwVAUzLYYATQ2VaHkmRoy4vBSi4mjN6hcGSCBBZ57YhgoUdJicisRIzwklixiAJJwGBAYcwFBxJqmJT4m3lzlwCYAbqQsOQAFQoeTgx4yiQDRGiGvARSzOGmpRdF2RX30uA3SQxkE/mMDWnFUGAJjIp4ADdRAxbfGKhl44A6Lw5bP00owPpR0jYdVqTc3l1Rhwft62SLzqVBcnYirFBfJcIoEBsHI/DWBhzgfSMCBun9MkEDD5BgAAMJWRBBCQP+vpFBJrwECJI4QkzwQgYllJDBiJUcsAAK1DHAgQodkojKBBksIMAYyITAQQIPsGjjkEO8UIIEJ5wgQQkKEunkk1BGKeWUVFZp5ZVYZvlGCjVq6UcHDrTwAQQftODAdV76QRAGIQBlBgYcpplIBwWYZwiacr5xAmGEhFBAlyUaKWSe30HDQoQ9NbAChgysMKiWEwTAzgg1vlDRRS/kCcMBXZ3X5FoqRCYCjXm+YB4hImSaRAedDWICnleWYJFxR4TySCl5ZmBRPz2ZNYhhgEZpKoCqJvECCYOQUGyaKYAIjQL8EWFiBYxW8EKwUU7QwqSATujAtZrG1SArh4brxXr+fA7iJ6zmjjMcYOy228SabZkBQZzytpFCmBWQ2YIEn+br0AHxCmzwwQgnrPDCDDfs8MMQRywxlPhoAAEGBKQ28R8SyCGZASoU7EYHDaQI7pMdqJDuURFEy0cDC4DAAQcCjCDyJxKsTAcDNltygMf6vUrkBHOxYgCifMTXEaVDnnBqHRFUchUkAiw7jQlP06FAJe8SshyJE1xaGLZO+PqITTaGHR7ZTTiwMghIw8IUNAIlcsB/kkVwsyIUZA0AAZasRgjcRB7gXEd2VUKQAMUwEEICLg/UwAgGiqDACI8qEeooIgjtyb5WMPOGA+PWwYID2HawESQiQBC3lRkUTQhgP1+MwGfnr1fJ6iieO0FyBCxgyIEJZ+b6jyYo8LoxDOVxnvjyzPPy/PKCa8IArRsjN0rV0AtxX34McNe9EAd8gJkIH0QesbYw3oFCC2wzjOMDC0TwQAbxj6///vz3v38QACH5BAkJADAALAAAAABkAGQAhfyOFPzKjPyuVPzmxPy+dPyeNPzarPz27Py2ZPymRPzSpPzGhPyWJPzu3PzixPzOnPyyZPzChPyiRPzevPz+/Py6dPyqVPzOlPyyXPzq1PzCfPyiPPzetPz69Py6bPyqTPzWpPyaLPySHPzKlPyuXPzmzPy+fPyePPzatPz29Py2bPymTPzGjPyWLPzy5PzWrP///wAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAb+QJhwSCwaj8ikcslsOp/QqHRKrUI7pcmk1LF6v9ZOxlNgmBmFSqYLbruRjQgDQK/TGZrGe/92YeyAdCIkLnyGYRWBigAVbIePThQXc4uADBcUkJpLDR+Vih96m6NGKJSfdgwopFMUHQcZEw4NBx2ZSx0LqIoLjqxMFA0KAiKpHigut0gHCLuBCAe/TR0vFsWKDBgOSgckzoAk0dJKFAstuxsoykXM33bQTi4vASwKa3wdLNe7IS/rQx0iuKvTawmFEipEFFMoIsEEX14ogDjnbkMJJKYGqsKloMAiBgsKgWmwYiAdBP+EdBoYasmLEJ9EsIDY6sE+dyIyHKEw4ub+JwYjUhJx4REVgwlfOpQ0SccEkg4evnmgSYSCiW8JhEI54NPdCqowXJDoameQyCQulu4ScdFKCaZ1Cpw10kDDKUsmRClxUHTtAy8c4NIpoDOJGBVlzhTwUEJrkZfuFniZIBgA4SYHsmwR5wQFTGcyvWSofGKuoRInvolQ4OXAXZaO2xzwBFovlQ7N4F4YZdOZii8UXrx2xsD2oxS0PxVo60UsUw2x3zhIXamFArBRKPAdKMA4JAoZMAwHcOIF9ikGPu/6wJxVBwUWToQIUWCFBtNggm/YJaDxOCEHDIACCrNEV8VBHpAFQAgRePcfKeAtsMIJBRRwwgcKNGDgg5r+UOBCA7RsyOGIJJZoIoQUiHjiHh5OcMECESwwwgTJrDiKCyYkEMI+IoSQgAn42ejGARf0pUiPF3AmZBsuRAVaBUEuOcUBEJgEj5RhaKBgJSJocJ6JWJiwwgYrmOAAWMGpN1AL/mB5kDeAiNBfSgf8IRgGStpYwn6LWGTEBFuuhdSSDViASndFEFAZHQQsmU+gAIiwwDrUVbYBoQk4s4JtkK6lIikTUGTUNkMsWkeeJaLgziqlmgoAqiSq+g2rQnSKighfjuPAeIGEQKoQfJJGqFqfJGBbIos2KuSjt7KwDqCViTCokA0IcKhxdVaGJ5YDBBvIBgMYkSZc/Xz6y0H+xMQ55xEB2VpWBLmS2IEDJnywwQdmntfOQCrAimUUDSQImgcO/ivFASMYGUiPI/hr8BQuaLBCCKcwEEKZDj9MhYccPMDCAiw8gIy5GkORIsklp6zyyiy37PLLMMcs88wcvvKhC7bQLAV4ERQVQgUToCyFGA3E26EDxNIRggJCR4KCAAVsgEFhHGaQHCAFcPAIBQrcxADV43SgwScCRPlFCgoDgIDRfBxQqSIhTLvHW98WvEkDkL5wCGWBXPZfA7uwZohrgQjA9h4uqBkIA1obUk6cckvTAbKLtHTIASxQUgDTHFIwgeJ1iBDUdwfIckDTQlBwwOkbd7S4CaifW0JlACp4EIB/Oz/9GQMfjJ7yC2+XV4ULE7wAAgpFq7wdICG0pzMuuT1z+MwNZKqIsc83kYEEi0gAdvbLXG2HBRmDL4Q+C7NgPhPOAVL2+kwEzEAxDBAMfzxamH3//vz37///AFxREAAAO2l6MlNnMjJPaEJTY1lvVkpORFI0dmF6ek1tK1ZrditmL1VXWmxseUxSc0NPYk4vVU5kVVRWeThHRmlpUWNqNWQ=",_a={loaderBarClassName:"ds-dwt-loaderBar",loaderBarBackgroundColor:"",loaderBarSource:j.bIE?n3:W.loaderBarSource,loaderBarSourceIE:n3,loaderBarWidth:120,loaderBarHeight:120,errorMessages:{limitReachedForZoomIn:"Error: You have reached the limit for zooming in",limitReachedForZoomOut:"Error: You have reached the limit for zooming out",insufficientParas:"Error: Not enough parameters.",invalidAngle:"Error: The angle you entered is invalid.",invalidIndex:"Error: The index you entered is invalid.",invalidHeightOrWidth:"Error: The height or width you entered is invalid.",imageNotChanged:"Error: You have not changed the current image."},generalMessages:{checkingDWTVersion:"Checking WebTwain version ...",updatingDService:"Dynamsoft Service is updating ...",downloadingDWTModule:"Downloading the Dynamic Web TWAIN module.",refreshNeeded:"Please REFRESH your browser.",downloadNeeded:"Please download and install the Dynamic Web TWAIN.",DWTmoduleLoaded:"The Dynamic Web TWAIN module is loaded."},customProgressText:{upload:"Uploading...",download:"Downloading...",load:"Loading...",decode:"Processing...",decodeTIFF:"Processing tiff...",decodePDF:"Processing pdf...",encode:"Processing...",encodeTIFF:"Processing tiff...",encodePDF:"Processing pdf...",transfer:"Transferring...",canvasLoading:"Loading ..."},buttons:{titles:{previous:"Previous Image",next:"Next Image",print:"Print Image",scan:"Scan Documents",load:"Load Local Images",rotateleft:"Rotate Left",rotate:"Rotate",rotateright:"Rotate Right",deskew:"Deskew",crop:"Crop Selected Area",cut:"Cut Selected Area",changeimagesize:"Change Image Size",flip:"Flip Image",mirror:"Mirror Image",zoomin:"Zoom In",originalsize:"Show Original Size",zoomout:"Zoom Out",stretch:"Stretch Mode",fit:"Fit Window",fitw:"Fit Horizontally",fith:"Fit Vertically",hand:"Hand Mode",rectselect:"Select Mode",zoom:"Click to Zoom In",restore:"Restore Original Image",save:"Save Changes",close:"Close the Editor",removeall:"Remove All Images",removeselected:"Remove All Selected Images"},bShowAllButtons:!0,visibility:{scan:!0,load:!0,print:!0,removeall:!0,removeselected:!0,rotateleft:!0,rotate:!0,rotateright:!0,deskew:!0,crop:!0,cut:!0,changeimagesize:!0,flip:!0,mirror:!0,zoomin:!0,originalsize:!0,zoomout:!0,stretch:!0,fit:!0,fitw:!0,fith:!0,hand:!0,rectselect:!0,zoom:!0,restore:!0,save:!0,close:!0}},dialogText:{dlgRotateAnyAngle:["Angle :","Interpolation:","Keep size","  OK  ","Cancel"],dlgChangeImageSize:["New Height :","New Width :","Interpolation:","  OK  ","Cancel"],saveChangedImage:["You have changed the image. Do you want to keep the change(s)?","  Yes  ","  No  "],selectSource:["Select Source:","Select","Cancel","There is no source available!"]}},pr=v.mix({},_a);function r3(){var r;F.DWT&&(r=F.DWT.CustomizableDisplayInfo),r&&(v.isString(r.loaderBarSource)&&""!=r.loaderBarSource?W.loaderBarSource=r.loaderBarSource:j.bIE?(W.loaderBarSource=_a.loaderBarSourceIE,W.loaderBarSourceIE=_a.loaderBarSourceIE):W.loaderBarSource=_a.loaderBarSource,W.loaderBarClassName=v.isString(r.loaderBarClassName)&&""!=r.loaderBarClassName?r.loaderBarClassName:_a.loaderBarClassName,W.loaderBarBackgroundColor=v.isString(r.loaderBarBackgroundColor)?r.loaderBarBackgroundColor:_a.loaderBarBackgroundColor,W.loaderBarWidth=r.loaderBarWidth?r.loaderBarWidth:_a.loaderBarWidth,W.loaderBarHeight=r.loaderBarHeight?r.loaderBarHeight:_a.loaderBarHeight)}var i3=!0;function XD(r,i){(function(a,s){if(s.has(a))throw new TypeError("Cannot initialize the same private elements twice on an object")})(r,i),i.add(r)}function ZD(r,i,a){return i.has(r),a}W._funsAfterConfigLoaded=[],W._safePromptCustomMsg=function(r){r&&r()};var o3=new WeakSet,Bme=new WeakSet,eE=new WeakSet,Ume=function(r){di(T,r);var i,a,s,u,l,d,f,g,_=function Wme(r){var i=function(){if(typeof Reflect>"u"||!Reflect.construct||Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch{return!1}}();return function(){var a,s=yt(r);if(i){var u=yt(this).constructor;a=Reflect.construct(s,arguments,u)}else a=s.apply(this,arguments);return fi(this,a)}}(T);function T(S){var I;return n(this,T),XD(pt(I=_.call(this,S)),eE),XD(pt(I),Bme),XD(pt(I),o3),I}return c(T,[{key:"_getWSContextData",value:function(){return this._getCurrentDocumentName()}},{key:"_getErrorString",value:function(){var S=this;return-2207==S._errorCode&&S._bMustUpgradeService&&ip(S),0!=S._errorCode?S._errorString:"Successful."}},{key:"_getWebTwainId",value:function(){return this._id}},{key:"_isTwainServiceType",value:function(){return!0}},{key:"_isPC",value:function(){return j.bWin||j.bMac||j.bLinux}},{key:"_serviceSyncMethodNotSupport",value:function(S){var I=this;return Ee(I,-2605,'The synchronized method "'+S+'" is not supported under the current settings.'),{code:I._errorCode,message:I._getErrorString()}}},{key:"_serviceAsyncMethodNotSupport",value:function(S){var I=this;return Ee(I,-2606,'The asynchronized method "'+S+'" is not supported under the current settings.'),{code:I._errorCode,message:I._getErrorString()}}},{key:"_serviceNotSupportAsync",value:function(S){var I=this;return Ee(I,-2397,S+" doesn't work under current settings."),_e.Promise.reject({code:I._errorCode,message:I._getErrorString()})}},{key:"_nouiNotSupport",value:function(S,I){var b=this;return Ee(b,-2210,"You cannot call this method on this WebTwain instance because it does not use the default viewer."),v.isFunction(I)&&I(b._errorCode,b._getErrorString()),!1}},{key:"_innerFunRaw",value:function(S,I,b,D,R,L,x){var U,Y,Z,oe,se=this,k="f/",E=!1;if(F.DWT.ConnectWithSocket)return this._sendData(S,I,!1,L,x),!0;if(se._resetErr(),!se._isValid())return!1;var M=uo.isServerInvalid(se);if(b&&M)return se._waitForConnect().then(function(){return se._innerFunRaw(S,I,b,D,R,L,x)});if(!b&&M)return aU(se),!1;if(b&&(E=!0,k="fa/"),Z={method:"POST",url:U=[se._httpUrl,k,S].join(""),data:Y=Kc(se._clientId,S,I,0),async:E,onSuccess:function(V,J,Q){var te=!1;try{te=v.isString(V)&&"text/json"===Q.getResponseHeader("content-type")?v.parse(V):V}catch{}te?(Qo(te)?(se._errorCode=te.exception,se._errorString=te.description):se._resetErr(),oe=R?te:te.result):(Yb(se),oe=""),v.isFunction(L)&&L(oe),E&&(oe=null)},onError:function(){$_(se),oe="",!W.page.bUnload&&v.isFunction(x)&&x()}},!E&&D)j.bIE?(Z.dataType="arraybuffer",Z.onSuccess=function(V,J,Q){var te,X,ae,he=!1;if(Q.responseHeadersString&&-1!=Q.responseHeadersString.indexOf("text/json")&&(he=!0),te=Q.responseData,se._resetErr(),oe=!1,te&&(X=new Uint8Array(te),he?te=String.fromCharCode.apply(null,X):(oe=new Blob([X],{type:se._strHttpContentTypeFieldValue}),(ae=new Wv.ArrayBuffer).append(X),oe.md5=ae.end())),!te||he){var ye,Ce=!1;if((ye=he?te:Q.responseText).length>0){if("{"==ye.charAt(0))try{Ce=v.parse(ye),he=!0}catch{v.log(ye)}he?Qo(Ce)?(se._errorCode=Ce.exception,se._errorString=Ce.description,oe=!1):oe=!0:(X=new Uint8Array(ye),oe=new Blob([X],{type:se._strHttpContentTypeFieldValue}),(ae=new Wv.ArrayBuffer).append(X),oe.md5=ae.end())}}v.isFunction(L)&&L(oe)}):(E||(Z.dataType="text",Z.contentType="text/plain; charset=x-user-defined",Z.mimeType="text/plain; charset=x-user-defined"),Z.onSuccess=function(V,J,Q){var te,X,ae;if(se._resetErr(),(X=(te=Q.responseText).length)>0){var he,ye=!1;if("{"==te.charAt(0))try{he=v.parse(te),ye=!0}catch{v.log(te)}if(ye)Qo(he)?(se._errorCode=he.exception,se._errorString=he.description,oe=!1):oe=!0;else{ae=new Uint8Array(X);for(var Ce=0;Ce<X;Ce++)ae[Ce]=te.charCodeAt(Ce);oe=new Blob([ae],{type:se._strHttpContentTypeFieldValue});var Ke=new Wv.ArrayBuffer;Ke.append(ae),oe.md5=Ke.end()}}else oe="";v.isFunction(L)&&L(oe)});else if(E&&D){Z={method:"POST",body:Y},j.bIE?Z.dataType="arraybuffer":Z.fetchRaw=!0;var G=Wc(U,Z);return j.bIE||(G=G.then(function(V){var J=V.headers.get("content-type");return J.indexOf("image/")>=0||J.indexOf("application/octet-stream")>=0?V.arrayBuffer():V.json()})),G=G.then(function(V){if(se._resetErr(),$a(V))return v.isFunction(L)&&L(V),void(V=null);if(v.isObject(V)){var J=V;if(Qo(J))se._errorCode=J.exception,se._errorString=J.description,v.isFunction(x)&&x();else{var Q="";J.result&&(Q=J.result),v.isFunction(L)&&L(Q)}}else $_(se),!W.page.bUnload&&v.isFunction(x)&&x()},function(V){$_(se),!W.page.bUnload&&v.isFunction(x)&&x()}),!0}return E||v.mix(Z,{headers:{"X-Requested-With":!1}}),j.bFileSystem&&(Z.crossDomain=!1),Os(Z),!!E||oe}},{key:"_innerFunRawV3",value:function(S,I){var b,D=this;return D._resetErr(),D._isValid()?uo.isServerInvalid(D)?D._waitForConnect().then(function(){return D._innerFunRawV3(S,I)}):(b={method:"post",body:Kc(D._clientId,S,I,0),fetchRaw:!0},Wc([D._httpUrl,"fa/",S].join(""),b)):_e.Promise.reject({code:D._errorCode,message:D._errorString})}},{key:"_innerSendCmd",value:function(S,I){this._innerFunRaw(S,I,!0,!1,!0)}},{key:"_innerFun",value:function(S,I){var b;return b=this._innerFunRaw(S,I,!1,!1,!1),v.isArray(b)?b[0]:b}},{key:"__OnRecieveMsg",value:function(S,I){var b=this,D=I?.cmd;if(S.event)return br(yt(T.prototype),"__OnRecieveMsg",this).call(this,S,I);if(F.DWT.ConnectWithSocket)return br(yt(T.prototype),"__OnRecieveMsg",this).call(this,S,I);if(Qo(S)?(b._errorCode=S.exception,b._errorString=S.description):"StartScan"!=D&&"GetAddOnVersion"!=D&&(b._errorCode=0,b._errorString=""),"ReadBarcode"==D||"OCRRecognize"==D||S.request&&"OCRProRecognize"==S.request.method)return I.sFun?I.sFun(S):I.fFun&&I.fFun(S),!0;if("ActiveUI"==D||"VersionInfo"==D||"ConvertToBase64"==D||"SaveSelectedImagesToBase64Binary"==D||"ConvertToBlob"==D)return I.sFun&&v.isArray(S.result)&&S.result.length>0?I.sFun(S.result):I.fFun&&I.fFun(S.result),!0;if("ShowFileDialog"==D||"SplitTiff"==D||"SplitPDF"==D||"EncodeAsBase64"==D||"ProductKey"==D||"GetSourceNames"==D||"GetSkewAngle"==D||"GetImageInfo"==D||"GetSkewAngleFromBinary"==D)return I.sFun?I.sFun(S.result):I.fFun&&I.fFun(S.result),!0;if("GetLicenseInfo"==D&&v.isArray(S.Detail))return br(yt(T.prototype),"__OnRecieveMsg",this).call(this,S,I);if("SetCapabilities"==D)return br(yt(T.prototype),"__OnRecieveMsg",this).call(this,S,I);if(S.result&&S.result.length&&("1"==S.result[0]||1==S.result[0]||"ok"==S.result[0]))(I.sFun||I.sFun)&&I.sFun(I.rawData?S:S.result);else if(S.exception){var R=!1;I.fFun&&(R=I.fFun(b._errorString)),!R&&S.exception&&S.exception<0&&-2115!=S.exception&&v.isFunction(b.__OnPrintMsg)&&b.__OnPrintMsg(b._errorString)}else{if("LoadImage"==D||"LoadImageEx"==D||"LoadImageFromBytes"==D||"LoadImageFromBase64Binary"==D||"LoadDibFromClipboard"==D||"FTPDownload"==D||"FTPDownloadEx"==D)return I.sFun&&I.sFun(S.result),S=null,!0;I.fFun&&I.fFun(jc(["result:"],S.result))}return!0}},{key:"OnRefreshUI",value:function(S,I,b,D){return this._innerRefreshUI(S,I,b,D)}},{key:"GetCurrentDocumentName",value:function(){return this._resetErr(),!!this._isValid()&&this._getCurrentDocumentName()}},{key:"RegisterEvent",value:function(S,I){return!!this.registerEvent(S,I)}},{key:"UnregisterEvent",value:function(S,I){return this.unregisterEvent(S,I)}},{key:"onEvent",value:function(S,I){this.registerEvent(S,I)}},{key:"on",value:function(S,I){this.registerEvent(S,I)}},{key:"_OnConsumed",value:function(S){}},{key:"_OnPostLoad",value:function(S,I){var b,D,R,L,x=this;void 0!==I&&void 0!==I.exception&&void 0!==I.description&&(x._errorCode=I.exception,x._errorString=I.description),v.log("OnPostLoad Results:"),D=S[1].split(","),b=v.base64.decode(D[0]),R=v.base64.decode(D[1]),v.log(b),v.log(R),v.log(D[2]),a3(x,"On PostLoad"),(L=x._ImgManager.getCurrentImageIndex())>=0&&x._innerRefreshUI(L),v.isFunction(x.__OnPostLoad)&&x.__OnPostLoad(b,R,D[2])}},{key:"_OnPostTransfer",value:function(S){var I=this;if(v.log("On PostTransfer Results:"+S),a3(I,"On PostTransfer"),v.isFunction(I.__OnPostTransfer))try{I.__OnPostTransfer()}catch(b){mn(b)}}},{key:"_OnPreAllTransfersAsync",value:function(S){var I=this;if(v.isFunction(I.__OnPreAllTransfersAsync)){var b={event:"beforeAcquire",result:{}};try{v.isArray(S)&&S.length>1&&(b=v.parse(S[1]))}catch{}setTimeout(function(){try{I.__OnPreAllTransfersAsync(b)}catch(D){mn(D)}},10)}}},{key:"_OnPostAllTransfers",value:function(S){var I=this;if(S.length>=2&&0==I._errorCode&&(I._errorCode=S[1],I._errorString=S[2]),v.log("On PostAllTransfers Results:"+S),I.__bLoadingImage=!1,I.__bAcquireImageNow=!1,I.__closeRemoteScanUI(!0),v.isFunction(I.__OnPostAllTransfers))try{I.__OnPostAllTransfers()}catch(b){mn(b)}}},{key:"_OnResult",value:function(S){var I=S[1];if(v.isFunction(this.__OnResult))try{this.__OnResult(I)}catch(b){mn(b)}}},{key:"_OnTransferCancelled",value:function(S){var I=this;if(I._ImgManager.getCurrentImageIndex(),I._ImgManager.count(),I.__bLoadingImage=!1,I.__bAcquireImageNow=!1,v.isFunction(I.__OnTransferCancelled))try{I.__OnTransferCancelled()}catch(b){mn(b)}}},{key:"_OnTransferError",value:function(S){if(v.isFunction(this.__OnTransferError))try{this.__OnTransferError()}catch(I){mn(I)}}},{key:"_OnSourceUIClose",value:function(S){var I=this;if(I.__closeRemoteScanUI(!0),v.isFunction(I.__OnSourceUIClose))try{I.__OnSourceUIClose()}catch(b){mn(b)}}},{key:"_OnPreTransfer",value:function(S){if(v.isFunction(this.__OnPreTransfer))try{this.__OnPreTransfer()}catch(I){mn(I)}}},{key:"_OnPreAllTransfers",value:function(S){if(v.isFunction(this.__OnPreAllTransfers))try{this.__OnPreAllTransfers()}catch(I){mn(I)}}},{key:"_OnGetFilePath",value:function(S){var I,b,D,R=this;if(I=S[1].split(","),v.log("On GetFilePath Results:"+S),b=v.base64.decode(I[3]),D=v.base64.decode(I[4]),"-1032"==I[2]&&(I[2]="-1",b=D=""),v.isFunction(R.__OnGetFilePath))try{R.__OnGetFilePath(1*I[0],1*I[1],1*I[2],b,D)}catch(L){mn(L)}R.__bOpenFileNow=!1}},{key:"__GetLoadEventsNum",value:function(){var S=0;return v.isFunction(this.__OnPostLoad)&&(S|=1),v.isFunction(this.__OnGetFilePath)&&(S|=2),S}},{key:"_innerSend",value:function(S,I,b,D,R){if(F.DWT.ConnectWithSocket||"SaveSelectedImagesToBytes"!=S&&"ConvertToBlob"!=S)return this._sendData(S,I,b,D,R);var L=pp(),x=Kc(this._clientId,S,I,L);return this._innerFunRaw(S,x,!0,!0,!0,D,R),_e.Promise.resolve(!0)}},{key:"_convertToBlobByIndices",value:function(S,I,b,D,R){var L=this;if(L._resetErr(),!L._isValid())return!1;var x=parseInt(I),U=arguments,Y=function(oe){return v.isFunction(D)&&Ki(D,L,oe,I,U),oe=null,!1};if(!Ye.checkProductKey(L,{Core:!0}))return v.isFunction(D)&&D(L._errorCode,L._getErrorString()),!1;if(!L._checkIndices(S))return Y(S);if(x==F.DWT.EnumDWT_ImageType.IT_BMP||x==F.DWT.EnumDWT_ImageType.IT_JPG||x==F.DWT.EnumDWT_ImageType.IT_PNG||x==F.DWT.EnumDWT_ImageType.IT_J2K){if(S.length>1)return Ee(L,-2372,"You cannot convert more than one image to binary when the format is BMP, JPG or PNG."),Y(S)}else if(x!=F.DWT.EnumDWT_ImageType.IT_TIF&&x!=F.DWT.EnumDWT_ImageType.IT_PDF)return zi(L),Y(S);var Z=[];return v.isArray(S)&&v.each(S,function(oe){var se=L._ImgManager.convertClientIndexToServerId(oe);-1!=se&&Z.push(se)}),v.isFunction(b)?(L._innerConvertToBlobWithUI("ConvertToBlob",x,Z,!1,function(oe,se){return v.isFunction(b)&&hr(b,oe,se,I,U),oe=se=null,!0},Y),!0):ZD(L,o3,Vme).call(L,Z,x,!1)}},{key:"_getDefaultDevice",value:function(){var S=this;if(S._resetErr(),!S._isValid())return null;var I="",b=ze.TWAINSCANNER,D=S._innerFun("GetDefaultSourceName");if(D.length>0)try{var R=JSON.parse(D);b=R.type,I=v.base64.decode(R.ProductName)}catch{I=""}var L=new Xo;return L.name=I,L.deviceType=b,L.displayName=b==ze.TWAINX64SCANNER&&I.length>0?"Twain64-"+I:b==ze.WIASCANNER&&I.length>0?"WIA-"+I:b==ze.ESCLSCANNER&&I.length>0?"ESCL-"+I:b==ze.ICASCANNER&&S.__serverPlatform==lt.enumMac&&I.length>0?"ICA-"+I:I,L}},{key:"_getDefaultDeviceAsync",value:(g=Ae(A.mark(function S(){var I,b,D,R,L,x;return A.wrap(function(U){for(;;)switch(U.prev=U.next){case 0:if((I=this)._resetErr(),I._isValid()){U.next=4;break}return U.abrupt("return",null);case 4:return b="",D=ze.TWAINSCANNER,U.next=8,I._sendDataByHttpAsync("GetDefaultSourceName");case 8:if((R=U.sent).length>0)try{L=JSON.parse(R),D=L.type,b=v.base64.decode(L.ProductName)}catch{b=""}return(x=new Xo).name=b,x.deviceType=D,x.displayName=D==ze.TWAINX64SCANNER&&b.length>0?"Twain64-"+b:D==ze.ICASCANNER&&I.__serverPlatform==lt.enumMac&&b.length>0?"ICA-"+b:b,U.abrupt("return",x);case 15:case"end":return U.stop()}},S,this)})),function(){return g.apply(this,arguments)})},{key:"_getSources",value:function(S,I,b){return wV(this,this._innerFun("GetSources",we(S,null!=I&&I,null!=b&&b)))}},{key:"_getSourceCountAsync",value:(f=Ae(A.mark(function S(I){var b,D,R,L,x,U,Y;return A.wrap(function(oe){for(;;)switch(oe.prev=oe.next){case 0:if((b=this)._resetErr(),b._isValid()){oe.next=4;break}return oe.abrupt("return",_e.Promise.reject({code:b._errorCode,message:b._errorString}));case 4:return ZD(b,eE,s3).call(b),nr("GetSourceCountAsync",b),D=[],oe.prev=7,I&&(b._driverType=I),R=ve,L=ve,x=ve,U=ve,b._bRemoteMode?b.__serverPlatform==lt.enumWindow?x=!0:b.__serverPlatform==lt.enumLinux?L=!0:b.__serverPlatform==lt.enumMac?R=!0:b.__serverPlatform==lt.enumAndroid&&(U=!0):(R=j.bMac,L=j.bLinux,x=j.bWin,U=j.bAndroid),Y=dv(b._driverType,x,L,R,U),oe.next=15,this._getDevices(Y,!0,void 0);case 15:D=oe.sent,oe.next=21;break;case 18:throw oe.prev=18,oe.t0=oe.catch(7),oe.t0;case 21:return oe.prev=21,Cn("GetSourceCountAsync"),oe.finish(21);case 24:return oe.abrupt("return",b._setDevices(D));case 25:case"end":return oe.stop()}},S,this,[[7,18,21,24]])})),function(S){return f.apply(this,arguments)})},{key:"_setDevices",value:function(S){var I,b=this;return b.__devices=S,b.__sourceCount=I=S.length,I<=0?(b.__defaultSourceName="",b.__sourceCount=0,0):I}},{key:"_getSourceNameByIndex",value:function(S){return S<0||S>=this.__devices.length?"":this.__devices[S].displayName}},{key:"_dwtConvertToBlobSync",value:function(S,I,b,D,R,L){var x=b,U=",";v.isString(x)&&""!=x||(x="",U="");var Y=["[",S,',"',I.join(","),'"',U,x,"]"].join(""),Z=this._innerFunRaw("ConvertToBlob",Y,!1,!0,!1),oe="";return 0==this._errorCode?(Z&&"md5"in Z&&(oe=Z.md5),D(Z,oe,L)):(R(),!1)}},{key:"_getSourceCountSync",value:function(){var S,I=this,b=ve,D=ve,R=ve,L=ve;if(I._bRemoteMode?I.__serverPlatform==lt.enumWindow?R=!0:I.__serverPlatform==lt.enumLinux?D=!0:I.__serverPlatform==lt.enumMac?b=!0:I.__serverPlatform==lt.enumAndroid&&(L=!0):(b=j.bMac,D=j.bLinux,R=j.bWin,L=j.bAndroid),S=dv(this._driverType,R,D,b,L),I._resetErr(),!I._isValid()||!Ye.checkProductKey(I,{Core:!0}))return 0;ZD(I,eE,s3).call(I);var U=I._getSources(S,!0,void 0);return I._setDevices(U)}},{key:"_OnActiveUI",value:(d=Ae(A.mark(function S(I){var b;return A.wrap(function(D){for(;;)switch(D.prev=D.next){case 0:return b=this,I&&I.length>2&&(b.__strProductName=I[2]),D.next=4,br(yt(T.prototype),"_OnActiveUI",this).call(this,I);case 4:return D.next=6,b._setConvertModeAsync(b._pdfConvertMode).catch(function(){});case 6:case"end":return D.stop()}},S,this)})),function(S){return d.apply(this,arguments)})},{key:"_OnReady",value:(l=Ae(A.mark(function S(){var I,D,R,L;return A.wrap(function(x){for(;;)switch(x.prev=x.next){case 0:return oo((I=this)._serverInfo.server)&&(Zo.item("DWT_port",I._serverInfo.port),Zo.item("DWT_ssl",I._serverInfo.ssl?"true":"false")),I._bNoMask||nr("OnReady",I),x.prev=3,x.next=6,br(yt(T.prototype),"_OnReady",this).call(this);case 6:if(!li()){x.next=12;break}if(I._uuidForActiveUI){x.next=12;break}return x.next=10,F.DWT.lgcuid(F.DWT.EnumInstance.dwt_desktop,"");case 10:I._uuidForActiveUI=x.sent;case 12:return x.next=14,I._innerActiveUI(I._uuidForActiveUI);case 14:return D=x.sent,x.next=17,I._OnActiveUI(D);case 17:if(An("Changing Map..."),(R=I._id)&&!F.DWT.WebTwainIdMap[R]&&(F.DWT.WebTwainIdMap[R]=I),t3(I),L=!1,I._bRemoteMode||(L=W.attachAddon(I)),F.DWT.IfDisableDefaultSettings){x.next=29;break}return An("Configuring the WebTwain instance..."),x.next=27,jme(I);case 27:x.next=32;break;case 29:if(!L){x.next=32;break}return x.next=32,new _e.Promise(function(U){setTimeout(U,300)});case 32:x.next=39;break;case 34:throw x.prev=34,x.t0=x.catch(3),x.t0&&(I._errorCode=x.t0.code,I._errorString=x.t0.message),I.dispose(),x.t0;case 39:return x.prev=39,I._bNoMask||Cn("OnReady"),x.finish(39);case 42:case"end":return x.stop()}},S,this,[[3,34,39,42]])})),function(){return l.apply(this,arguments)})},{key:"_OnWSClose",value:function(S){br(yt(T.prototype),"_OnWSClose",this).call(this,S),W.detect.bOK=!1,this.__bAcquireImageNow=!1}},{key:"_OnWSTimeout",value:function(S){br(yt(T.prototype),"_OnWSTimeout",this).call(this,S),W.detect.bOK=!1}},{key:"_setConvertModeAsync",value:function(S){var I=this;if(!I._setConvertModeInner(S))return _e.Promise.reject({code:I._errorCode,message:I._errorString});var b=I._getPdfDllname();return I._innerFunV2("SetPDFConvertMode",we(I._pdfRealConvertMode,b)).then(function(){if(I._pdfRealConvertMode==Cr.CM_IMAGEONLY&&I._pdfConvertMode==Cr.CM_RENDERALL||I._pdfRealConvertMode==Cr.CM_IMAGEONLY&&I._pdfConvertMode==Cr.CM_RENDERALLWITHANNOTATION)throw ap(I),{code:I._errorCode,message:I._errorString};return!0})}},{key:"_setConvertMode",value:function(S){var I=this;if(!I._setConvertModeInner(S))return!1;var b=I._getPdfDllname();return I._innerFun("SetPDFConvertMode",we(I._pdfRealConvertMode,b)),!(I._pdfRealConvertMode==Cr.CM_IMAGEONLY&&I._pdfConvertMode==Cr.CM_RENDERALL||I._pdfRealConvertMode==Cr.CM_IMAGEONLY&&I._pdfConvertMode==Cr.CM_RENDERALLWITHANNOTATION)||(ap(I),!1)}},{key:"_setConvertModeInner",value:function(S){var I=this;if(!Ye.checkProductKey(I,{Core:!0}))return!1;var b=1*S;return I._resetErr(),!(!I._isValid()||(isNaN(b)?(xi(I),1):b!=Cr.CM_RENDERALL&&b!=Cr.CM_IMAGEONLY&&b!=Cr.CM_AUTO&&b!=Cr.CM_RENDERALLWITHANNOTATION?(Tr(I),1):(I._pdfConvertMode=b,I._pdfRealConvertMode=b==Cr.CM_IMAGEONLY||Ye.hasPDFRProductKey(I)?b:Cr.CM_IMAGEONLY,0)))}},{key:"_getPdfDllname",value:function(){var S=this,I=!1,b=!1;return S._bRemoteMode?S.__serverPlatform==lt.enumWindow||(S.__serverPlatform==lt.enumLinux?b=!0:S.__serverPlatform==lt.enumMac&&(I=!0)):(I=j.bMac,b=j.bLinux),I?S._b64bit?"libDynamicPdfCorex64_"+io.PdfVersion+".dylib":"libDynamicPdfCore_"+io.PdfVersion+".dylib":b?"libDynamicPdfCore_"+io.PdfVersion+".so":S._b64bit?"DynamicPdfCorex64_"+io.PdfVersion+".dll":"DynamicPdfCore_"+io.PdfVersion+".dll"}},{key:"_unload_viewer",value:function(){}},{key:"__innerDeleteInMap",value:function(){return delete F.DWT.WebTwainIdMap[this._id],Ne}},{key:"__unload",value:(u=Ae(A.mark(function S(){var I,b,D;return A.wrap(function(R){for(;;)switch(R.prev=R.next){case 0:if(I=this,b=v.clone(F.DWT.licenseException),I.__closeRemoteScanUI(!0),!I._destroy&&!I._destroying){R.next=5;break}return R.abrupt("return");case 5:if(I._destroying=!0,this.__innerDeleteInMap(),I.__addon&&I.__addon.Camera&&I.__addon.Camera._viewer&&(""!=I.__addon.Camera.getStatus()&&I.__addon.Camera.closeSource().catch(function(){}),I.__addon.Camera._viewer.dispose(),I.__addon.Camera._viewer=null),I._unload_viewer(),I._containerElement=null,I._ImgManager&&I._ImgManager.clear(),!I._bReady||W.page.bUnload){R.next=20;break}if(!I._wsClient){R.next=20;break}return R.prev=13,R.next=16,I._innerDisposeWSClient();case 16:R.next=20;break;case 18:R.prev=18,R.t0=R.catch(13);case 20:I._wsClient&&(I._wsClient.removeEvent("close",I._clientId),I._wsClient.removeEvent("error",I._clientId),I._wsClient.removeEvent("timeout",I._clientId),I._wsClient.dispose(),delete I._wsClient,I._wsClient=null),I._bReady=!1,F.DWT.lremoveDWTObj(I),I.__bAcquireImageNow=!1,I._destroying=!1,I._destroy=!0,(D=F.DWT.licenseException).code=b.code,D.message=b.message,D.fromLTS=b.fromLTS;case 30:case"end":return R.stop()}},S,this,[[13,18]])})),function(){return u.apply(this,arguments)})},{key:"_setIfShowUI",value:function(S){this._resetErr(),this._isValid()&&(v.isBoolean(S)?this._innerFun("IfShowUI",we(S)):Tr(self))}},{key:"_setIfShowFileDialog",value:function(S){this._resetErr(),this._isValid()&&(v.isBoolean(S)?this._innerFun("IfShowFileDialog",we(S)):Tr(self))}},{key:"_getDevicesAsync",value:(s=Ae(A.mark(function S(I,b,D,R){var L,x,U,Y,Z;return A.wrap(function(oe){for(;;)switch(oe.prev=oe.next){case 0:if(L=this,x=[],!b||v.isNumber(b)){oe.next=4;break}return qn(L),oe.abrupt("return",_e.Promise.reject({code:L._errorCode,message:L._errorString}));case 4:if(U=L._bRemoteMode?hp:j.bAndroid?Lw:hp,Y=b??U,L._resetErr(),L._isValid()){oe.next=8;break}return oe.abrupt("return",_e.Promise.reject({code:L._errorCode,message:L._errorString}));case 8:return nr(I,L),oe.prev=9,oe.next=12,L._getDevices(Y,D,R);case 12:v.isArray(Z=oe.sent)&&Z.length>0&&(x=x.concat(Z)),oe.next=19;break;case 16:throw oe.prev=16,oe.t0=oe.catch(9),oe.t0;case 19:return oe.prev=19,Cn(I),oe.finish(19);case 22:return x.length>0&&this._setDevices(x),oe.abrupt("return",x);case 24:case"end":return oe.stop()}},S,this,[[9,16,19,22]])})),function(S,I,b,D){return s.apply(this,arguments)})},{key:"_openSourceAsync",value:function(S){var I=this;return I._resetErr(),I._isValid()?(I._bRemoteMode&&I._initRemoteDiv(),I._innerFunV2("OpenSource").then(function(b){return I.__closeRemoteScanUI(!0),b},function(b){return I.__closeRemoteScanUI(!0),_e.Promise.reject(b)})):_e.Promise.reject({code:I._errorCode,message:I._errorString})}},{key:"_closeSourceAsync",value:function(S){var I=this;return I._resetErr(),I._isValid()?I._innerFunV2("CloseSource").then(function(){return I._curDevice=null,!0}):_e.Promise.reject({code:I._errorCode,message:I._errorString})}},{key:"_selectSourceAsync",value:function(S,I){var b=this;return b._resetErr(),b._isValid()?b._getDevicesAsync(S,I).then(function(D){var R,L,x=document,U=D?D.length:0;if(_e.dialog.selectsourcedlg)return qb(b),_e.Promise.reject({code:b._errorCode,message:b._errorString});var Y,Z=-1;for((L=x.createElement("dialog")).className="dynamsoft-dialog-selectsource",j.bIE&&(L.style.width="300px"),L.setAttribute("closed","closed"),(Y=[]).push('<ul id="dynamsoft-dialog-selectsource-sourcelist-ul">'),R=0;R<U;R++){var oe="",se=b._getSourceNameByIndex(R);(""==b.__defaultSourceName&&0==R||b.__defaultSourceName==se)&&(oe=" dynamsoft-dialog-selectsource-sourcelist-li-selected",Z=R),Y.push('<li class="dynamsoft-dialog-selectsource-item'+oe+'" sourceindex='+R+">"+se+"</li>")}Y.push("</ul>"),Y=Y.join("");var k=["<p>",pr.dialogText.selectSource[0],"</p>",'<div id="dynamsoft-dialog-selectsource-sourcelist">',Y,"</div>",'<div><input type="button" value="',pr.dialogText.selectSource[1],'" class="dynamsoft-dialog-selectsource-button-select">','<input type="button" value="',pr.dialogText.selectSource[2],'" class="dynamsoft-dialog-selectsource-button-cancel"></div>'].join("");return L.innerHTML=k,_e.dialog.selectsourcedlg=L,x.body.appendChild(_e.dialog.selectsourcedlg),v.each(v.sizzle(".dynamsoft-dialog-selectsource-item"),function(E,M){v.addEventListener(E,"click",function(G){for(var V=G.target,J=V.attributes.sourceindex.value,Q=V.parentElement.children,te=0;te<Q.length;te++)Q[te].className="dynamsoft-dialog-selectsource-item";V.className="dynamsoft-dialog-selectsource-item dynamsoft-dialog-selectsource-sourcelist-li-selected",v.get("dynamsoft-dialog-selectsource-sourcelist-ul").setAttribute("selectedSourceIndex",J)})}),v.get("dynamsoft-dialog-selectsource-sourcelist-ul").setAttribute("selectedSourceIndex",Z.toString()),_e.dialog.setup(_e.dialog.selectsourcedlg),_e.dialog.selectsourcedlg&&_e.dialog.selectsourcedlg.showModal(),new _e.Promise(function(E,M){v.removeEventListener(_e.one(".dynamsoft-dialog-selectsource-button-select")[0],"click"),v.removeEventListener(_e.one(".dynamsoft-dialog-selectsource-button-cancel")[0],"click"),U>0&&v.addEventListener(_e.one(".dynamsoft-dialog-selectsource-button-select")[0],"click",function(){var G=parseInt(v.get("dynamsoft-dialog-selectsource-sourcelist-ul").getAttribute("selectedSourceIndex"));G<0||b._selectSourceByIndexAsync(S,G).then(function(){_e.dialog.selectsourcedlg&&(_e.dialog.selectsourcedlg.close(),document.body.removeChild(_e.dialog.selectsourcedlg),_e.dialog.selectsourcedlg=!1),E(G)})}),v.addEventListener(_e.one(".dynamsoft-dialog-selectsource-button-cancel")[0],"click",function(){_e.dialog.selectsourcedlg&&(_e.dialog.selectsourcedlg.close(),document.body.removeChild(_e.dialog.selectsourcedlg),_e.dialog.selectsourcedlg=!1);var G={};Ko(G),M({code:G._errorCode,message:G._errorString})})})}):_e.Promise.reject({code:b._errorCode,message:b._errorString})}},{key:"_dwtGetCapabilities",value:function(S,I){var b=this,D=function(){v.isFunction(I)&&I(b._errorCode,b._errorString)};return b._sendDataByHttpAsync("GetCapabilities",null).then(function(R){try{var L,x;R.length>0&&(x=R[0]),v.isString(x)?(x=W.removeNonPrintableChar(x),x=v.replaceAll(x,"\\\\","\\\\"),0==(L=JSON.parse(x)).errorCode?v.isFunction(S)&&S(L.response):(b._errorCode=L.errorCode,b._errorString=L.errorString,D())):($o(b),D())}catch(U){b._errorCode=-2302,b._errorString=U,D()}},D),!0}},{key:"_dwtSetCapabilities",value:function(S,I,b){var D=this;if(!v.isObject(S)||v.isArray(S))return qn(D),v.isFunction(b)&&b(D._errorCode,D._getErrorString()),!1;var R=["[",v.stringify(S),"]"].join("");return D._innerSend("SetCapabilities",R,0,function(L){v.isFunction(I)&&I(L)},b),!0}},{key:"_selectDeviceAsync",value:(a=Ae(A.mark(function S(I,b,D){var R,L;return A.wrap(function(x){for(;;)switch(x.prev=x.next){case 0:return R=this,nr(I,this),x.prev=2,x.next=5,br(yt(T.prototype),"_innerSelectDeviceAsync",this).call(this,b,D);case 5:(L=x.sent)&&(R._curDevice=b,R._bSelectedSourceByServer=!1),x.next=12;break;case 9:throw x.prev=9,x.t0=x.catch(2),x.t0;case 12:return x.prev=12,Cn(I),x.finish(12);case 15:return x.abrupt("return",L);case 16:case"end":return x.stop()}},S,this,[[2,9,12,15]])})),function(S,I,b){return a.apply(this,arguments)})},{key:"_selectSourceByIndexAsync",value:(i=Ae(A.mark(function S(I,b){var D,R;return A.wrap(function(x){for(;;)switch(x.prev=x.next){case 0:if(R=1*b,(D=this)._resetErr(),D._isValid()){x.next=4;break}return x.abrupt("return",_e.Promise.reject({code:D._errorCode,message:D._errorString}));case 4:if(!v.isNaN(R)){x.next=7;break}return Dt(D),x.abrupt("return",_e.Promise.reject({code:D._errorCode,message:D._errorString}));case 7:if(D.__devices){x.next=10;break}return x.next=10,D._getDevicesAsync(I,null);case 10:if(!(R<0||R>=D.__devices.length)){x.next=13;break}return We(D),x.abrupt("return",_e.Promise.reject({code:D._errorCode,message:D._errorString}));case 13:return x.abrupt("return",D._selectDeviceAsync(I,D.__devices[R]));case 15:case"end":return x.stop()}},S,this)})),function(S,I){return i.apply(this,arguments)})},{key:"_removeAllImages",value:function(S){var I=this,b=!0;if(I._resetErr(),!I._isValid())return!1;var D,R=[];for(D=I._getHowManyImagesInBuffer()-1;D>=0;D--){var L=I._imageBufferWrapper.convertClientIndexToServerId(D);L>-1&&R.push(L)}if(R.length>0){if(I._OnBitmapChanged(["0",R.join(","),3,I._ImgManager.getCurrentImageIndex(),I._ImgManager.count()]),b=I._innerFunRaw("RemoveAllImages",we(R.join(",")),!1,!1,!1,function(){},function(){}),v.isArray(b))return b[0]}else b=!0;return b}},{key:"_removeImage",value:function(S,I){var b,D=this,R=parseInt(I);if(!Mr(D,R))return!1;var L=D._ImgManager.convertClientIndexToServerId(R);return-1==L?(We(D),!1):(((b=D._innerFun("RemoveImage",we(L)))||-1033==D._errorCode)&&D._OnBitmapChanged(["0",""+L,3,D._ImgManager.getCurrentImageIndex(),D._ImgManager.count()]),b)}},{key:"__innerAcquireOrLoadImageAsync",value:function(S,I,b,D){var R=this;return new _e.Promise(function(L,x){var U="LoadImage"==S||"LoadImageEx"==S||"GenerateURLForUploadData"==S,Y=U||"LoadDibFromClipboard"==S;U?W.showProgress(R,S,!1):nr(S,R),R._innerSend(S,I,!0,function(Z){if(R.__bLoadingImage=!1,R.__bOpenFileNow=!1,R.__closeRemoteScanUI(!0),U){if(W.closeProgress(null,S),R._isBindViewer()){var oe=R._ImgManager.getCurrentImageIndex();oe>=0&&R._innerRefreshUI(oe)}}else Cn(S);Y&&R._blts&&F.DWT.lcvrf(R),v.isFunction(L)&&L(Z)},function(Z){U?W.closeProgress(null,""):Cn(S),R.__bLoadingImage=!1,R.__bAcquireImageNow=!1,R.__bOpenFileNow=!1,R.__closeRemoteScanUI(!0);var oe=R._ImgManager.getCurrentImageIndex();oe>=0&&R._innerRefreshUI(oe),hU(R._errorCode)&&ap(R),v.isFunction(x)&&x(R._errorCode,R._getErrorString()),U?W.closeProgress(null,S):Cn(S),Z&&v.error(Z)})})}},{key:"_innerLoadImageFromBinary",value:function(S,I,b,D,R){var L,x,U=this,Y=I;if(!Ye.checkProductKey(U,{Core:!0}))return v.isFunction(R)&&R(U._errorCode,U._getErrorString()),!1;if(!S||""==S)return xi(U),v.isFunction(R)&&R(U._errorCode,U._getErrorString()),!1;if(!(x=S instanceof Blob?S.size:$a(S)?S.byteLength:S instanceof Array?S.length:S.size||S.byteLength||S.length)||""==x)return qn(U),v.isFunction(R)&&R(U._errorCode,U._getErrorString()),!1;var oe=S.currentFileName;oe||(oe=U._getCurrentDocumentName());var se=S.currentTagName;if(se||(se=U._getCurrentDefaultTagName()),S instanceof FileList){if(1==S.length)return S[0].currentFileName=oe,S[0].currentTagName=se,U._innerLoadImageFromBinary(S[0],Y,b,D,R);if(S.length>1){var k;for(v.asyncQueue.stop(),k=0;k<S.length;k++)S[k].currentFileName=oe,S[k].currentTagName=se,v.asyncQueue.pushToDo(U,"_innerLoadImageFromBinary",k==S.length-1?[S[k],Y,b,D,R]:[S[k],Y,b,null,R]);return v.asyncQueue.start(),!0}return xi(U),v.isFunction(R)&&R(U._errorCode,U._getErrorString()),!1}if(window.ReadableStream&&S instanceof ReadableStream?L=new Response(S):window.Response&&S instanceof Response&&(L=S),L)L.arrayBuffer().then(function(J){var Q=new Blob([J]),te=0;b&&(te=U.__GetLoadEventsNum()),U.__LoadImageFromBytesV1(Q,-1,"",te,!0,D,R)});else{var E=S;$a(E)&&((E=new Blob([S])).currentFileName=S.currentFileName,E.currentTagName=S.currentTagName);var M=-1,G=F.DWT.EnumDWT_ImageType;v.isString(E.type)&&("application/pdf"==E.type?M=G.IT_PDF:"image/png"==E.type?M=G.IT_PNG:"image/jpeg"==E.type||"image/jpg"==E.type?M=G.IT_JPG:"image/bmp"==E.type?M=G.IT_BMP:"image/tiff"==E.type||"image/tif"==E.type?M=G.IT_TIF:"image/jp2"==E.type&&(M=G.IT_J2K));var V=0;b&&(V=U.__GetLoadEventsNum()),U.__LoadImageFromBytesV1(E,M,"",V,!0,D,R)}return!0}},{key:"__LoadImageFromBytes",value:function(S,I,b,D,R,L,x,U){return this.__LoadImageFromBytesV2(S,I,b,D,x,U,!1,0,R,L)}},{key:"__LoadImageFromBytesV1",value:function(S,I,b,D,R,L,x){return this.__LoadImageFromBytesV2(S,I,b,R,0,0,!1,D,L,x)}},{key:"_isMobileMode",value:function(){return!1}},{key:"ErrorCode",get:function(){return this._errorCode}},{key:"ErrorString",get:function(){return this._getErrorString()}},{key:"HowManyImagesInBuffer",get:function(){return this._getHowManyImagesInBuffer()}}]),T}(X4);function Vme(r,i,a){var s=this;return s._dwtConvertToBlobSync(i,r,a,function(l){if(!l||l.size<=0)return rU(s),!1;var d=s.__maxUploadImageSize;return l.size>d&&-1!=d?(ca(s),!1):l},function(l){return!1})}function s3(){this.__defaultSourceName="",this.__sourceCount=0}var a3=function(r,i){if(Mn.bDiscardBlankImage){var a=r._ImgManager.getCurrentImageIndex();r.IsBlankImage(a)&&r.RemoveImage(a);var s=["Blank Discard (",i,"): ",r.ErrorString].join("");v.isFunction(r.__OnPrintMsg)&&r.__OnPrintMsg(s)}};function jme(r){return u3.apply(this,arguments)}function u3(){return(u3=Ae(A.mark(function r(i){var a,s,u,l;return A.wrap(function(d){for(;;)switch(d.prev=d.next){case 0:if(a=i,!F.DWT.ConnectWithSocket){d.next=6;break}return d.next=4,new _e.Promise(function(f,g){a._sendData("IfDisableSourceAfterAcquire","[1]",!1,f,g)});case 4:d.next=8;break;case 6:return d.next=8,i._innerFunV2("IfDisableSourceAfterAcquire","[1]");case 8:s=Bt.TWAIN,u=!1,l=!1,a._bRemoteMode?a.__serverPlatform==lt.enumWindow||(a.__serverPlatform==lt.enumLinux?l=!0:a.__serverPlatform==lt.enumMac&&(u=!0)):(u=j.bMac,l=j.bLinux),u?s=Bt.TWAIN_AND_ICA:l&&(s=Bt.SANE),i._driverType=s,i._bRemoteMode&&(i._setIfShowUI(!1),i._setIfShowFileDialog(!1));case 13:case"end":return d.stop()}},r)}))).apply(this,arguments)}function Rp(r,i){(function(a,s){if(s.has(a))throw new TypeError("Cannot initialize the same private elements twice on an object")})(r,i),i.add(r)}function lo(r,i,a){return i.has(r),a}var el=new WeakSet,tE=new WeakSet,c3=new WeakSet,Bv=new WeakSet,nE=new WeakSet,Gme=function(r){di(s,r);var i,a=function Hme(r){var i=function(){if(typeof Reflect>"u"||!Reflect.construct||Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch{return!1}}();return function(){var a,s=yt(r);if(i){var u=yt(this).constructor;a=Reflect.construct(s,arguments,u)}else a=s.apply(this,arguments);return fi(this,a)}}(s);function s(){var u;n(this,s);for(var l=arguments.length,d=new Array(l),f=0;f<l;f++)d[f]=arguments[f];return Rp(pt(u=a.call.apply(a,[this].concat(d))),nE),Rp(pt(u),Bv),Rp(pt(u),c3),Rp(pt(u),tE),Rp(pt(u),el),u}return c(s,[{key:"SaveAsGIF",value:function(u,l,d,f){var g=this;if(g._resetErr(),!g._isValid())return!1;if(!(Ye.checkProductKey(g,{Core:!0})||j.bWin&&Ye.checkProductKey(g,{Webcam:!0},!0)))return Ye.checkProductKey(g,{Core:!0},!1),v.isFunction(f)&&f(g._errorCode,g._getErrorString()),!1;var _,T=mt.replaceLocalFilename(u);if(!Uu(g,l,f))return!1;if(-1==(_=g._ImgManager.convertClientIndexToServerId(l)))return We(g),v.isFunction(f)&&$r(f,g),!1;var S=g.__GetLoadEventsNum();return g.__innerSaveImage("SaveAsGIF",we(T,_,S),d,f)}},{key:"SaveSelectedImagesToBase64Binary",value:function(u,l){var d=this;if(d._resetErr(),!d._isValid())return!1;if(!(Ye.checkProductKey(d,{Core:!0})||j.bWin&&Ye.checkProductKey(d,{Webcam:!0},!0)))return Ye.checkProductKey(d,{Core:!0},!1),v.isFunction(l)&&l(d._errorCode,d._getErrorString()),!1;var f=Ud(d);return v.isFunction(u)?(d._innerSend("SaveSelectedImagesToBase64Binary",we(f.join(",")),!0,u,l),!0):d._innerFun("SaveSelectedImagesToBase64Binary",we(f.join(",")))}},{key:"ShowFileDialog",value:function(u,l,d,f,g,_,T,S){var I=this;if(I._resetErr(),!I._isValid())return!1;var b,D=mt.replaceLocalFilename(g);return b=I.__GetLoadEventsNum(),I._innerSend("ShowFileDialog",we(u,l,d,f,D,_,T,S,b),!0),!0}},{key:"FTPDownload",value:function(u,l,d,f){var g=this;if(g._resetErr(),!g._isValid())return!1;if(!u)return qn(g),v.isFunction(f)&&f(g._errorCode,g._getErrorString()),!1;var _=mt.getImageType(l);return lo(g,nE,d3).call(g,"FTPDownload",we(u,l),_,d,f)}},{key:"FTPDownloadEx",value:function(u,l,d,f,g){var _=this;return _._resetErr(),!!_._isValid()&&(u?lo(_,nE,d3).call(_,"FTPDownloadEx",we(u,l,d),d,f,g):(qn(_),v.isFunction(g)&&g(_._errorCode,_._getErrorString()),!1))}},{key:"FTPUpload",value:function(u,l,d,f,g){var _=this;if(_._resetErr(),!_._isValid())return!1;var T=_._ImgManager.convertClientIndexToServerId(l);return!!Uu(_,l,g)&&(-1==T?(We(_),v.isFunction(g)&&$r(g,_),!1):_.__innerFTPUpload("FTPUpload",we(u,T,d),f,g))}},{key:"FTPUploadEx",value:function(u,l,d,f,g,_){var T,S=this;return S._resetErr(),!!S._isValid()&&!!Uu(S,l,_)&&(-1==(T=S._ImgManager.convertClientIndexToServerId(l))?(We(S),v.isFunction(_)&&$r(_,S),!1):S.__innerFTPUpload("FTPUploadEx",we(u,T,d,f),g,_))}},{key:"FTPUploadAllAsMultiPageTIFF",value:function(u,l,d,f){var g=this;if(g._resetErr(),!g._isValid())return!1;var _=[];return fv(g,_),this.__innerFTPUpload("FTPUploadAsMultiPageTIFF",we(u,l,_.join(",")),d,f)}},{key:"FTPUploadAllAsPDF",value:function(u,l,d,f){var g=this;if(g._resetErr(),!g._isValid())return!1;var _=[];return fv(g,_),g.__innerFTPUpload("FTPUploadAsMultiPagePDF",we(u,l,_.join(",")),d,f)}},{key:"FTPUploadAsMultiPagePDF",value:function(u,l,d,f){var g=this;if(g._resetErr(),!g._isValid())return!1;var _=Ud(g);return g.__innerFTPUpload("FTPUploadAsMultiPagePDF",we(u,l,_.join(",")),d,f)}},{key:"FTPUploadAsMultiPageTIFF",value:function(u,l,d,f){var g=this;if(g._resetErr(),!g._isValid())return!1;var _=Ud(g);return this.__innerFTPUpload("FTPUploadAsMultiPageTIFF",we(u,l,_.join(",")),d,f)}},{key:"HTTPDownloadDirectly",value:function(u,l,d,f,g){var _=this;if(_._resetErr(),!_._isValid())return!1;if(!Ye.checkProductKey(_,{Core:!0}))return v.isFunction(g)&&g(_._errorCode,_._getErrorString()),!1;var T,S,I=_._GetHttpHeadersAndClear(),b=mt.combineUrl(_,u,l);if(void 0===b)return xi(_),!1;if(!d||""==d)return Ee(_,-2309,"The LocalFile is empty in the name HTTPDownloadDirectly Function."),v.isFunction(g)&&$r(g,_),!1;if(T=mt.getImageType(d),!Ye.checkPDFProductKeyWhenNeeds(_,T))return v.isFunction(g)&&g(_._errorCode,_._errorString),!1;W.cancelFrom=on.HTTPDownload,S=mt.replaceLocalFilename(d),_.IfShowProgressBar?W.showProgress(_,"HTTPDownloadDirectly",!1):W.hideProgress();var D=!0,R=function(){return _.IfShowProgressBar&&W.closeProgress(null,"HTTPDownloadDirectly"),v.isFunction(f)&&f(),!0},L=function(){return _.IfShowProgressBar&&W.closeProgress(null,"HTTPDownloadDirectly"),v.isFunction(g)&&$r(g,_),!1};return _._OnPercentDone([0,-1,Tn.Downloading,"http"]),v.isFunction(f)||(D=!1),mt.loadHttpBlob(_,"get",b,D,function(U){_._OnPercentDone([0,-1,Tn.Loading]);var Y=_.__GetLoadEventsNum();return _.__LoadImageFromBytesV1(U,3,S,Y,D,R,L)},L,function(U){var Y=0===U.total?100:Math.round(100*U.loaded/U.total);[U.loaded," / ",U.total].join(""),_._OnPercentDone([0,Y,"","http"])},I)}},{key:"HTTPUploadThroughPostDirectly",value:function(u,l,d,f,g,_){var T=this;if(T._resetErr(),!T._isValid())return!1;var S=mt.combineUrl(T,u,d),I=function(){v.isFunction(_)&&$r(_,T,T.__HTTPPostResponseString)};return T.__HTTPPostResponseString="",l?u?T._innerUploadDirectly(S,l,f,this.IfShowProgressBar,!1,0,!0,!1,g,I):(Qb(T),I(),!1):(Nc(T),I(),!1)}},{key:"_innerUploadDirectly",value:function(u,l,d,f,g,_,T,S,I,b){var D,R=this,L=R._GetHttpHeadersAndClear(),x="HTTPUploadThroughPostDirectly",U=!0;if(void 0===u||!1===u||""===u)return xi(R),v.isFunction(b)&&b(),!1;if(v.isFunction(I)||(U=!1),!Ye.checkProductKey(R,{Core:!0}))return v.isFunction(b)&&b(),!1;W.cancelFrom=on.HTTPUpload;var Y=function(Z,oe,se){return 0!=Z&&oe&&(R._errorCode=Z,R._errorString=oe),se&&(R.__HTTPPostResponseString=se),W.needShowTwiceShowDialog=!1,f&&W.closeProgress(null,x),v.isFunction(b)&&b(),!1};return W.needShowTwiceShowDialog=!0,f?W.showProgress(R,x,!1):W.hideProgress(),(D=mt.replaceLocalFilename(l))&&""!=D?S&&S.bCancel?(S.st=2,Ko(R),Y(R._errorCode,R._errorString)):lo(R,tE,l3).call(R,D,U,g,function(Z){if(W.needShowTwiceShowDialog=!1,S&&S.bCancel)return S.st=2,Ko(R),Y(R._errorCode,R._errorString);if(Z&&(!f||f&&W.dlgRef>0||0==U)){Z instanceof File?Z.fileName=d:Z.name=d,f&&Xa(R.__IfShowCancelDialogWhenImageTransfer);var oe=new Za,se=R._createHttpUploaderConfig(),k=new Us;return R.__remoteFilename&&""!=R.__remoteFilename&&(k.remoteFilename=R.__remoteFilename),se.objUploadStatus=S,k.url=u,k.method=x,k.content=Z,Z=null,k.contentType=R._strHttpContentTypeFieldValue,k.headers=L,k.bAsync=U,k.httpFormData=Ku(R.httpFormFields),k.retry=_,k.bOnlyResponseEmptyIsOK=T,k.blockSize=R._moduleSize,oe.httpPostUpload(se,k,function(E){f&&W.closeProgress(null,x),v.isFunction(I)&&hr(I,E)},Y)}return Nc(R),Y(R._errorCode,R._errorString)},Y):(Nc(R),Y(R._errorCode,R._errorString))}},{key:"_innerUploadFilesDirectly",value:function(u,l,d,f,g,_,T,S,I){var b,D=this,R=D._GetHttpHeadersAndClear(),L="HTTPUploadThroughPostDirectly",x=!0,U=[];if(!1===u||""===u)return xi(D),v.isFunction(I)&&I({code:D._errorCode,message:D._getErrorString(),files:l}),!1;if(v.isFunction(S)||(x=!1),!Ye.checkProductKey(D,{Core:!0}))return v.isFunction(I)&&I({code:D._errorCode,message:D._getErrorString(),files:l}),!1;W.cancelFrom=on.HTTPUpload;var Y=function(k,E,M){return 0!=k&&E&&(D._errorCode=k,D._errorString=E),M&&(D.__HTTPPostResponseString=M),W.needShowTwiceShowDialog=!1,f&&W.closeProgress(null,L),v.isFunction(I)&&I({code:D._errorCode,message:D._errorString,response:M,files:l}),!1};W.needShowTwiceShowDialog=!0,f?W.showProgress(D,L,!1):W.hideProgress(),v.each(l,function(k){var E=mt.replaceLocalFilename(k);if(!E||""==E)return Nc(D),Y(D._errorCode,D._errorString),!1;U.push(E)});var Z=[],oe=U.length,se=0;return v.each(U,function(k,E){b=lo(D,tE,l3).call(D,k,x,g,function(M){if(W.needShowTwiceShowDialog=!1,!M||f&&!(f&&W.dlgRef>0)&&0!=x)return f&&W.closeProgress(null,L),Jb(D),v.isFunction(Y)&&Y(D._errorCode,D._errorString),!1;var G=co(d,E+1);if(M instanceof File?M.fileName=G:M.name=G,Z[E]=M,M=null,++se==oe){f&&Xa(D.__IfShowCancelDialogWhenImageTransfer);var V=D._createHttpUploaderConfig(),J=new Us;return D.__remoteFilename&&""!=D.__remoteFilename&&(J.remoteFilename=D.__remoteFilename),J.url=u,J.method=L,J.content=Z,Z=null,J.contentType=D._strHttpContentTypeFieldValue,J.headers=R,J.bAsync=x,J.httpFormData=Ku(D.httpFormFields),J.retry=_,J.bOnlyResponseEmptyIsOK=T,J.blockSize=D._moduleSize,q4(V,J,function(Q){f&&W.closeProgress(null,L),v.isFunction(S)&&hr(S,Q)},function(Q,te,X){f&&W.closeProgress(null,L),v.isFunction(Y)&&Y(Q,te,X)})}},function(){f&&W.closeProgress(null,L),v.isFunction(Y)&&Y()})}),b}},{key:"_createHttpUploaderConfig",value:function(){var u=this,l=new Q4;return l.IfShowProgressBar=u.IfShowProgressBar,l.IfShowCancelDialogWhenImageTransfer=u.__IfShowCancelDialogWhenImageTransfer,l.MaxUploadImageSize=u.MaxUploadImageSize,l.HTTPRequestswithCredentials=u.HTTPRequestswithCredentials,l.onPercent=function(d){u._OnPercentDone(d)},l.onHttpUploadStatus=function(d){v.isFunction(u.__OnHttpUploadStatus)&&u.__OnHttpUploadStatus(d)},l}},{key:"SetUploadSegment",value:function(u,l){var f,d=this;return d._resetErr(),!(!d._isValid()||(!v.isNumber(u)||u<0?(Ee(d,-2367,"Invalid value for the parameter segmentUploadThreshold."),1):!v.isNumber(l)||l<=0?(f=d,Ee(f,-2368,"Invalid value for the parameter moduleSize."),1):(d._segementUploadThreshold=1024*u*1024,d._moduleSize=1024*l,0)))}},{key:"ConvertToBase64",value:function(u,l,d,f){var g=this;if(g._resetErr(),!g._isValid())return!1;var _=[],T=arguments,S=parseInt(l);if(!Ye.checkProductKey(g,{Core:!0}))return v.isFunction(f)&&f(g._errorCode,g._getErrorString()),!1;if(!g._checkIndices(u))return v.isFunction(f)&&Ki(f,g,u,l,T),!1;if(S==F.DWT.EnumDWT_ImageType.IT_BMP||S==F.DWT.EnumDWT_ImageType.IT_JPG||S==F.DWT.EnumDWT_ImageType.IT_PNG){if(u.length>1)return Ee(g,-2361,"You cannot convert more than one image to base64 string when the format is BMP, JPG or PNG."),v.isFunction(f)&&Ki(f,g,u,l,T),!1}else if(S!=F.DWT.EnumDWT_ImageType.IT_TIF&&S!=F.DWT.EnumDWT_ImageType.IT_PDF)return zi(g),v.isFunction(f)&&Ki(f,g,u,l,T),!1;return v.isArray(u)&&v.each(u,function(I){var b=g._ImgManager.convertClientIndexToServerId(I);-1!=b&&_.push(b)}),g._convertToBase64ByServerIdsWithUI("ConvertToBase64",_,S,!1,3,function(I){var b=[];return v.isArray(_)&&v.each(_,function(D){var R=g._ImgManager.convertServerIdToClientIndex(D);R>-1&&b.push(R)}),v.isFunction(d)&&hr(d,I,b,l,T),!1},function(){var I=[];return v.isArray(_)&&v.each(_,function(b){var D=g._ImgManager.convertServerIdToClientIndex(b);D>-1&&I.push(D)}),v.isFunction(f)&&Ki(f,g,I,l,T),!1})}},{key:"ClearAllHTTPFormField",value:function(){var u=this;return u._resetErr(),!!u._isValid()&&(u.httpFormFields={},!0)}},{key:"SetHTTPFormField",value:function(u,l,d){var f=this;if(f._resetErr(),!f._isValid())return!1;var g=u;return v.isString(g)||(g=""+g),l instanceof Blob&&(l.name=d),f.httpFormFields[g]=l,!0}},{key:"HTTPDownloadThroughPost",value:function(u,l,d,f,g,_){var S=this,I=S._GetHttpHeadersAndClear(),b=mt.combineUrl(S,u,l);if(void 0===b)return xi(S),ve;if(!Ye.checkProductKey(S,{Core:!0})||!Ye.checkPDFProductKeyWhenNeeds(S,d))return v.isFunction(g)&&$r(g,S,""),ve;W.cancelFrom=on.HTTPDownload,S.IfShowProgressBar?W.showProgress(S,"HttpDownloadThroughPost",!1):W.hideProgress();var D=Ne;S._OnPercentDone([0,-1,Tn.Downloading,"http"]),v.isFunction(f)||(D=ve);var R=function(){S.IfShowProgressBar&&W.closeProgress(null,"HttpDownloadThroughPost"),v.isFunction(f)&&f()},L=function(){S.IfShowProgressBar&&W.closeProgress(null,"HttpDownloadThroughPost"),v.isFunction(g)&&$r(g,S,S.__HTTPPostResponseString)};return mt.loadHttpBlob(S,"post",b,D,function(x){S._OnPercentDone([0,-1,Tn.Loading]);var U=d;U!=F.DWT.EnumDWT_ImageType.IT_BMP&&U!=F.DWT.EnumDWT_ImageType.IT_JPG&&U!=F.DWT.EnumDWT_ImageType.IT_TIF&&U!=F.DWT.EnumDWT_ImageType.IT_PNG&&U!=F.DWT.EnumDWT_ImageType.IT_PDF&&U!=F.DWT.EnumDWT_ImageType.IT_J2K&&(U=-1);var Y=S.__GetLoadEventsNum();S.__LoadImageFromBytesV1(x,U,"",Y,D,R,L)},L,function(x){var U=0===x.total?100:Math.round(100*x.loaded/x.total);[x.loaded," / ",x.total].join(""),S._OnPercentDone([0,U,"","http"])},I)}},{key:"HTTPDownloadThroughGet",value:function(u,l,d,f,g){return this._innerHTTPDownloadThroughGet("HTTPDownload",u,l,d,f,g)}},{key:"HTTPUploadThroughPut",value:function(u,l,d,f,g){var _=mt.getImageType(d);return this.HTTPUploadThroughPutEx(u,l,d,_,f,g)}},{key:"HTTPUploadThroughPutEx",value:function(u,l,d,f,g,_){var T=this,S=T._GetHttpHeadersAndClear(),I="HTTPUploadThroughPutEx",b=mt.combineUrl(T,u,d),D=!0,R=[],L=!1,x=this.IfShowProgressBar;if(void 0===b)return xi(T),v.isFunction(_)&&Ki(_,T,"",[l],d,f),!1;v.isFunction(g)||(D=!1),W.cancelFrom=on.HTTPUpload;var U,Y=function(){return W.needShowTwiceShowDialog=!1,x&&W.closeProgress(null,I),v.isFunction(_)&&Ki(_,T,T.__HTTPPostResponseString,R,d,f),!1};switch(W.needShowTwiceShowDialog=!0,x?W.showProgress(T,I,!1):W.hideProgress(),l){case-1:for(var Z=0;Z<T._ImgManager.count();Z++)R.push(Z);break;case-2:R=T._ImgManager.getSelectedClientIndexArray();break;default:if(R.push(l),!(l>=0))return We(T),Y()}if(""===u)return Qb(T),Y();var oe=[];v.isArray(R)&&v.each(R,function(k){var E=T._ImgManager.convertClientIndexToServerId(k);-1!=E&&oe.push(E)}),x&&T._OnPercentDone([0,-1,Tn.Encoding,"http"]);var se=function(k,E,M){if(F.DWT.IfAddMD5InUploadHeader&&E&&""!=E&&(S["dwt-md5"]=E),W.needShowTwiceShowDialog=!1,k&&(!x||x&&W.dlgRef>0||0==D)){var G=T.__maxUploadImageSize;return k.size>G&&-1!=G?(ca(T),Y()):(U=function(V){var J=0===V.total?100:Math.round(100*V.loaded/V.total);[V.loaded," / ",V.total].join(""),x&&T._OnPercentDone([0,J,"","http"])},x&&T._OnPercentDone([0,-1,Tn.Uploading,"http"]),x&&Xa(T.__IfShowCancelDialogWhenImageTransfer),L=mt.httpPutImage(T,b,k,D,function(V){if(V&&(T.__HTTPPostResponseString=V),x&&W.closeProgress(null,I),v.isFunction(g)){var J=[];v.isArray(oe)&&v.each(oe,function(Q){var te=T._ImgManager.convertServerIdToClientIndex(Q);te>-1&&J.push(te)}),hr(g,T.__HTTPPostResponseString,J,d,f)}return!0},Y,U),k=null,L)}return k=null,x&&W.closeProgress(null,I),!1};return D?(T._convertToBlobForUpload(f,oe,!1,4,se,Y),L=!0):L=T._dwtConvertToBlobSync(f,oe,!1,se,Y),L}},{key:"HTTPUploadAllThroughPutAsMultiPageTIFF",value:function(u,l,d,f){return this.HTTPUploadThroughPutEx(u,-1,l,2,d,f)}},{key:"HTTPUploadThroughPutAsMultiPageTIFF",value:function(u,l,d,f){return this.HTTPUploadThroughPutEx(u,-2,l,2,d,f)}},{key:"HTTPUploadAllThroughPutAsPDF",value:function(u,l,d,f){return this.HTTPUploadThroughPutEx(u,-1,l,4,d,f)}},{key:"HTTPUploadThroughPutAsMultiPagePDF",value:function(u,l,d,f){return this.HTTPUploadThroughPutEx(u,-2,l,4,d,f)}},{key:"GetSelectedImagesSize",value:function(u){var l=this;if(l._resetErr(),!l._isValid())return!1;var d=Ud(l);return l._innerFun("GetSelectedImagesSize",we(u,d.join(",")))}},{key:"SetHTTPHeader",value:function(u,l){var d=this;if(d._resetErr(),!d._isValid())return!1;var f,g,_=u;if(d.__httpHeaderMap||(d.__httpHeaderMap={}),!_||!v.isString(_))return v.isUndefined(_)?Ee(d,-2356,"The header name cannot be undefined."):""===_?Ee(d,-2354,"The header name cannot be empty."):null===_?Ee(d,-2355,"The header name cannot be null."):function(T){Ee(T,-2357,"The header name you entered is invalid.")}(d),!1;for(f=["if-modified-since","if-none-match","if-range","range","accept-charset","accept-encoding","access-control-request-headers","access-control-request-method","connection","content-length","cookie","cookie2","date","dnt","expect","host","keep-alive","origin","referer","te","trailer","transfer-encoding","upgrade","user-agent","via"],_=_.toLowerCase(),g=0;g<f.length;g++)if(f[g]==_)return Pde(d),!1;return v.isUndefined(l)||null===l||""===l?(u in d.__httpHeaderMap&&delete d.__httpHeaderMap[u],!0):(v.isNumber(l)&&(l=""+l),d.__httpHeaderMap[u]=l,!0)}},{key:"ConvertToBlob",value:function(u,l,d,f,g){return W.cancelFrom=on.Other,this._convertToBlobByIndices(u,l,d,f,g)}},{key:"_asyncUploadFilesCmd",value:function(u,l,d,f,g,_,T,S,I,b,D,R){var L=this,x=parseInt(g),U="HTTPUpload",Y=u,Z=!0,oe=[];L.__HTTPPostResponseString="",W.cancelFrom=on.HTTPUpload;var se=function(V,J,Q){var te=[];if(v.isArray(l)&&v.each(l,function(X){var ae=L._ImgManager.convertServerIdToClientIndex(X);ae>-1&&te.push(ae)}),0!=V&&J&&(L._errorCode=V,L._errorString=J),Q&&(L.__HTTPPostResponseString=Q),L._bServerPercentDone=!0,W.needShowTwiceShowDialog=!1,S&&W.closeProgress(null,U),oe.slice(0),oe=null,v.isFunction(R))try{R({code:L._errorCode,message:L._errorString,response:Q,indices:te})}catch{}return!1};W.needShowTwiceShowDialog=!0,S?W.showProgress(L,U,!1):W.hideProgress();var k=l.length,E=0,M=0,G="";return L._bServerPercentDone=!1,L._OnPercentDone([0,-1,Tn.Encoding,"http"]),v.each(l,function(V,J){L._convertToBlobForUpload(x,[V],T,4,function(Q,te,X){if(!Q||Q.size<=0)return er(L),se(L._errorCode,L._errorString);var ae=L.__maxUploadImageSize;if(Q.size>ae&&-1!=ae)return ca(L),se(L._errorCode,L._errorString);var he=co(_,J+1);if(M=(E+1)/k*100,G=[E+1,"/",k].join(""),L._OnPercentDone([0,M,G,"http",he]),Q.name=he,oe.push(Q),++E>=k){F.DWT.IfAddMD5InUploadHeader&&te&&""!=te&&(d["dwt-md5"]=te);var ye=L._createHttpUploaderConfig(),Ce=new Us;L.__remoteFilename&&""!=L.__remoteFilename&&(Ce.remoteFilename=L.__remoteFilename),Ce.url=Y,Ce.method=U,Ce.content=oe,Ce.contentType=L._strHttpContentTypeFieldValue,Ce.headers=d,Ce.httpFormData=f,Ce.retry=I,Ce.bOnlyResponseEmptyIsOK=b,Ce.blockSize=L._moduleSize,Z=q4(ye,Ce,function(Ke){L.__HTTPPostResponseString=ye.HTTPPostResponse,function(Ze){if(L._bServerPercentDone=!0,W.needShowTwiceShowDialog=!1,S&&W.closeProgress(null,U),oe.slice(0),oe=null,v.isFunction(D)){var dt=[];v.isArray(l)&&v.each(l,function(ft){var ke=L._ImgManager.convertServerIdToClientIndex(ft);ke>-1&&dt.push(ke)}),hr(D,Ze,dt)}}(Ke)},se)}Q=null},se,[V,J])}),Z}},{key:"_getVersionInfoAsync",value:function(){return kn.versionInfoFromServer?_e.Promise.resolve(kn.versionInfoFromServer):this._innerFunV2("VersionInfo")}},{key:"__innerLoadImage",value:function(u,l,d,f,g,_,T){var S=this;if(!Ye.checkProductKey(S,{Core:!0})||!Ye.checkPDFProductKeyWhenNeeds(S,d))return v.isFunction(T)&&T(S._errorCode,S._getErrorString()),!1;if(v.isFunction(_)||F.DWT.ConnectWithSocket)return S._bRemoteMode&&S._getIfShowFileDialog()?(ow(S),{code:S._errorCode,message:S._getErrorString()}):(S.__innerAcquireOrLoadImageAsync(u,l,f,!0).then(_,T),!0);if(S._bRemoteMode&&S._getIfShowFileDialog())return ow(S),{code:S._errorCode,message:S._getErrorString()};var I=S._getCurrentDocumentName();return S.__innerLoadImageFun(u,l,g,I)}},{key:"__innerLoadImageFun",value:function(u,l,d,f){var g,_=this,T=!0;if(g=_._innerFunRaw(u,l,!1,!1,!0),_.__bOpenFileNow=!1,v.isArray(g.result)&&g.result.length>0){var S="",I=[];if(d){var b=g.result[0];v.isObject(b)?(S=b.ids,I=b.metaData):-1!=b||"LoadImage"!=u&&"LoadImageEx"!=u&&"FTPDownloadEx"!=u&&"FTPDownload"!=u&&"LoadImageFromBase64Binary"!=u||(T=!1)}else S=g.result.join(",");if(T)return v.isArray(I)||(I=[]),_._OnBitmapChanged(["c2",S,1,_._ImgManager.getCurrentImageIndex(),_._ImgManager.count(),I],null,f),_._blts&&F.DWT.lcvrf(_),!0}return hU(_._errorCode)&&ap(_),!1}},{key:"__innerSaveImage",value:function(u,l,d,f){var g=this;return g._OnPercentDone([0,-1,Tn.Encoding]),g._bRemoteMode||(F.DWT.IfAlwaysFocusOnPopupWindow?g._OnPageFocus(!0):g._OnPageBlur(!0)),v.isFunction(f)?g._bRemoteMode&&g._getIfShowFileDialog()?(ow(g),{code:g._errorCode,message:g._getErrorString()}):(g.IfShowProgressBar?W.showProgress(g,u,!1):W.hideProgress(),this._innerSend(u,l,!0,function(){W.closeProgress(null,u),v.isFunction(d)&&d()},function(_){return v.isFunction(f)&&f(g._errorCode,g._getErrorString()),W.closeProgress(null,u),_&&v.error(_),!0}),!0):g._bRemoteMode?g._serviceSyncMethodNotSupport(u):this._innerFun(u,l)}},{key:"__captureImage",value:function(u,l,d,f){var g=this.__GetLoadEventsNum();return this.__LoadImageFromBytesV2(u,l,"",!0,0,0,!0,g,d,f)}},{key:"_getIfShowFileDialog",value:function(){return this._resetErr(),this._isValid()?this._innerFun("IfShowFileDialog"):ve}},{key:"SaveAsBMP",value:function(u,l,d,f){var g=this;if(g._resetErr(),!g._isValid())return!1;if(!(Ye.checkProductKey(g,{Core:!0})||j.bWin&&Ye.checkProductKey(g,{Webcam:!0},!0)))return Ye.checkProductKey(g,{Core:!0},!1),v.isFunction(f)&&f(g._errorCode,g._getErrorString()),!1;var _,T=mt.replaceLocalFilename(u);if(!Uu(g,l,f))return!1;if(j.bAndroid){if(0==g._ImgManager.count())return Gi(g),v.isFunction(f)&&f(g._errorCode,g._getErrorString()),!1;var S=[];return S.push(l),g._saveImages("SaveAsBMP",T,S,Xt.IT_BMP).then(function(){v.isFunction(d)&&d()}).catch(function(b){v.isFunction(f)&&f(b.code,b.message)}),!0}if(-1==(_=g._ImgManager.convertClientIndexToServerId(l)))return We(g),v.isFunction(f)&&$r(f,g),!1;var I=g.__GetLoadEventsNum();return g.__innerSaveImage("SaveAsBMP",we(T,_,I),d,f)}},{key:"SaveAsJPEG",value:function(u,l,d,f){var g=this;if(g._resetErr(),!g._isValid())return!1;if(!(Ye.checkProductKey(g,{Core:!0})||j.bWin&&Ye.checkProductKey(g,{Webcam:!0},!0)))return Ye.checkProductKey(g,{Core:!0},!1),v.isFunction(f)&&f(g._errorCode,g._getErrorString()),!1;if(!Uu(g,l,f))return!1;var _,T=mt.replaceLocalFilename(u);if(j.bAndroid){if(0==g._ImgManager.count())return Gi(g),v.isFunction(f)&&f(g._errorCode,g._getErrorString()),!1;var S=[];return S.push(l),g._saveImages("SaveAsJPEG",T,S,Xt.IT_JPG).then(function(){v.isFunction(d)&&d()}).catch(function(b){v.isFunction(f)&&f(b.code,b.message)}),!0}if(-1==(_=g._ImgManager.convertClientIndexToServerId(l)))return We(g),v.isFunction(f)&&$r(f,g),!1;var I=g.__GetLoadEventsNum();return g.__innerSaveImage("SaveAsJPEG",we(T,_,I),d,f)}},{key:"SaveAsPDF",value:function(u,l,d,f){var g=this;if(g._resetErr(),!g._isValid())return!1;if(!(Ye.checkProductKey(g,{Core:!0})||j.bWin&&Ye.checkProductKey(g,{Webcam:!0},!0)))return Ye.checkProductKey(g,{Core:!0},!1),v.isFunction(f)&&f(g._errorCode,g._getErrorString()),!1;if(!Uu(g,l,f))return!1;var _,T=mt.replaceLocalFilename(u);if(j.bAndroid){if(0==g._ImgManager.count())return Gi(g),v.isFunction(f)&&f(g._errorCode,g._getErrorString()),!1;var S=[];return S.push(l),g._saveImages("SaveAsPDF",T,S,Xt.IT_PDF).then(function(){v.isFunction(d)&&d()}).catch(function(b){v.isFunction(f)&&f(b.code,b.message)}),!0}if(-1==(_=g._ImgManager.convertClientIndexToServerId(l)))return We(g),v.isFunction(f)&&$r(f,g),!1;var I=g.__GetLoadEventsNum();return g.__innerSaveImage("SaveAsPDF",we(T,_,I),d,f)}},{key:"SaveAsPNG",value:function(u,l,d,f){var g=this;if(g._resetErr(),!g._isValid())return!1;if(!(Ye.checkProductKey(g,{Core:!0})||j.bWin&&Ye.checkProductKey(g,{Webcam:!0},!0)))return Ye.checkProductKey(g,{Core:!0},!1),v.isFunction(f)&&f(g._errorCode,g._getErrorString()),!1;if(!Uu(g,l,f))return!1;var _,T=mt.replaceLocalFilename(u);if(j.bAndroid){if(0==g._ImgManager.count())return Gi(g),v.isFunction(f)&&f(g._errorCode,g._getErrorString()),!1;var S=[];return S.push(l),g._saveImages("SaveAsPNG",T,S,Xt.IT_PNG).then(function(){v.isFunction(d)&&d()}).catch(function(b){v.isFunction(f)&&f(b.code,b.message)}),!0}if(-1==(_=g._ImgManager.convertClientIndexToServerId(l)))return We(g),v.isFunction(f)&&$r(f,g),!1;var I=g.__GetLoadEventsNum();return g.__innerSaveImage("SaveAsPNG",we(T,_,I),d,f)}},{key:"SaveAsTIFF",value:function(u,l,d,f){var g=this;if(g._resetErr(),!g._isValid())return!1;if(!(Ye.checkProductKey(g,{Core:!0})||j.bWin&&Ye.checkProductKey(g,{Webcam:!0},!0)))return Ye.checkProductKey(g,{Core:!0},!1),v.isFunction(f)&&f(g._errorCode,g._getErrorString()),!1;if(!Uu(g,l,f))return!1;var _,T=mt.replaceLocalFilename(u);if(j.bAndroid){if(0==g._ImgManager.count())return Gi(g),v.isFunction(f)&&f(g._errorCode,g._getErrorString()),!1;var S=[];return S.push(l),g._saveImages("SaveAsTIFF",T,S,Xt.IT_TIF).then(function(){v.isFunction(d)&&d()}).catch(function(b){v.isFunction(f)&&f(b.code,b.message)}),!0}if(-1==(_=g._ImgManager.convertClientIndexToServerId(l)))return We(g),v.isFunction(f)&&$r(f,g),!1;var I=g.__GetLoadEventsNum();return g.__innerSaveImage("SaveAsTIFF",we(T,_,I),d,f)}},{key:"SaveSelectedImagesAsMultiPagePDF",value:function(u,l,d){var f=this;if(f._resetErr(),!f._isValid())return!1;if(!(Ye.checkProductKey(f,{Core:!0})||j.bWin&&Ye.checkProductKey(f,{Webcam:!0},!0)))return Ye.checkProductKey(f,{Core:!0},!1),v.isFunction(d)&&d(f._errorCode,f._getErrorString()),!1;var g=mt.replaceLocalFilename(u);if(j.bAndroid){if(0==f._ImgManager.count())return Gi(f),v.isFunction(d)&&d(f._errorCode,f._getErrorString()),!1;var _=WV(f);return f._saveImages("SaveSelectedImagesAsMultiPagePDF",g,_,Xt.IT_PDF).then(function(){v.isFunction(l)&&l()}).catch(function(I){v.isFunction(d)&&d(I.code,I.message)}),!0}var T=Ud(f),S=f.__GetLoadEventsNum();return f.__innerSaveImage("SaveSelectedImagesAsMultiPagePDF",we(g,T.join(","),S),l,d)}},{key:"SaveSelectedImagesAsMultiPageTIFF",value:function(u,l,d){var f=this;if(f._resetErr(),!f._isValid())return!1;if(!(Ye.checkProductKey(f,{Core:!0})||j.bWin&&Ye.checkProductKey(f,{Webcam:!0},!0)))return Ye.checkProductKey(f,{Core:!0},!1),v.isFunction(d)&&d(f._errorCode,f._getErrorString()),!1;var g=mt.replaceLocalFilename(u);if(j.bAndroid){if(0==f._ImgManager.count())return Gi(f),v.isFunction(d)&&d(f._errorCode,f._getErrorString()),!1;var _=WV(f);return f._saveImages("SaveSelectedImagesAsMultiPageTIFF",g,_,Xt.IT_TIF).then(function(){v.isFunction(l)&&l()}).catch(function(I){v.isFunction(d)&&d(I.code,I.message)}),!0}var T=Ud(f),S=f.__GetLoadEventsNum();return f.__innerSaveImage("SaveSelectedImagesAsMultiPageTIFF",we(g,T.join(","),S),l,d)}},{key:"SaveAllAsMultiPageTIFF",value:function(u,l,d){var f=this;if(f._resetErr(),!f._isValid())return!1;if(!(Ye.checkProductKey(f,{Core:!0})||j.bWin&&Ye.checkProductKey(f,{Webcam:!0},!0)))return Ye.checkProductKey(f,{Core:!0},!1),v.isFunction(d)&&d(f._errorCode,f._getErrorString()),!1;if(!tD(f,d))return!1;var g=[],_=mt.replaceLocalFilename(u);if(j.bAndroid){if(0==f._ImgManager.count())return Gi(f),v.isFunction(d)&&d(f._errorCode,f._getErrorString()),!1;for(var T=[],S=0;S<this._ImgManager.count();S++)T.push(S);return f._saveImages("SaveAllAsMultiPageTIFF",_,T,Xt.IT_TIF).then(function(){v.isFunction(l)&&l()}).catch(function(b){v.isFunction(d)&&d(b.code,b.message)}),!0}fv(f,g);var I=f.__GetLoadEventsNum();return f.__innerSaveImage("SaveSelectedImagesAsMultiPageTIFF",we(_,g.join(","),I),l,d)}},{key:"SaveAllAsPDF",value:function(u,l,d){var f=this;if(f._resetErr(),!f._isValid())return!1;if(!(Ye.checkProductKey(f,{Core:!0})||j.bWin&&Ye.checkProductKey(f,{Webcam:!0},!0)))return Ye.checkProductKey(f,{Core:!0},!1),v.isFunction(d)&&d(f._errorCode,f._getErrorString()),!1;if(!tD(f,d))return!1;var g=[],_=mt.replaceLocalFilename(u);if(j.bAndroid){if(0==f._ImgManager.count())return Gi(f),v.isFunction(d)&&d(f._errorCode,f._getErrorString()),!1;for(var T=[],S=0;S<this._ImgManager.count();S++)T.push(S);return f._saveImages("SaveAllAsPDF",_,T,Xt.IT_PDF).then(function(){v.isFunction(l)&&l()}).catch(function(b){v.isFunction(d)&&d(b.code,b.message)}),!0}fv(f,g);var I=f.__GetLoadEventsNum();return f.__innerSaveImage("SaveSelectedImagesAsMultiPagePDF",we(_,g.join(","),I),l,d)}},{key:"HTTPUpload",value:function(u,l,d,f,g,_,T){var S=this,I=g??"RemoteFile",b=S._GetHttpHeadersAndClear(),D=_,R=T;if(S._resetErr(),!S._isValid())return!1;if(arguments.length<=3)return this._innerFormFieldHTTPUpload(u,b,D=l,R=d);v.isFunction(arguments[4])&&v.isFunction(arguments[5])&&(I="RemoteFile",D=arguments[4],arguments.length>5&&(R=arguments[5]));var L,x=arguments,U=function(Z){v.isFunction(R)&&Ki(R,S,S.__HTTPPostResponseString,Z,x)};if(v.isUndefined(u)||""===u)return xi(S),U&&U(l),!1;if(!v.isString(u))return q_(S),U&&U(l),!1;if(!S._checkIndices(l))return U&&U(l),!1;var Y=[];if(v.isArray(l)&&v.each(l,function(Z){var oe=S._imageBufferWrapper.convertClientIndexToServerId(Z);-1!=oe&&Y.push(oe)}),0==Y.length)return Dt(S),U&&U(l),!1;if(v.isUndefined(d))return zi(S),U&&U(l),!1;if(d==F.DWT.EnumDWT_ImageType.IT_BMP||d==F.DWT.EnumDWT_ImageType.IT_JPG||d==F.DWT.EnumDWT_ImageType.IT_PNG){if(Y.length>1)return xd(S),U(l),!1}else if(d!=F.DWT.EnumDWT_ImageType.IT_TIF&&d!=F.DWT.EnumDWT_ImageType.IT_PDF)return zi(S),U(l),!1;return v.isUndefined(f)||f!=F.DWT.EnumDWT_UploadDataFormat.Binary&&f!=F.DWT.EnumDWT_UploadDataFormat.Base64?(tU(S),U(l),!1):(L={method:"HTTPUpload",url:u,serverIds:Y,headers:b,formData:Ku(S.httpFormFields),enumImageType:d,saveSetup:!1,dataFormat:f,fileName:I,retry:0,bOnlyResponseEmptyIsOK:!0,objUploadFileStatus:!1,asyncSuccessFunc:function(Z,oe){v.isFunction(D)&&hr(D,S.__HTTPPostResponseString,oe,x)},asyncFailureFunc:U},this._asyncUploadCmd(L),!0)}},{key:"_innerFormFieldHTTPUpload",value:function(u,l,d,f){var g,_=this,T="HTTPUpload",S=u,I=_.IfShowProgressBar;if(_.__HTTPPostResponseString="",g=function(R,L,x){return 0!=R&&L&&(_._errorCode=R,_._errorString=L),x&&(_.__HTTPPostResponseString=x),W.needShowTwiceShowDialog=!1,W.closeProgress(null,T),v.isFunction(f)&&Ki(f,_,_.__HTTPPostResponseString),!1},v.isUndefined(S)||""===S)return xi(_),g(_._errorCode,_._getErrorString()),!1;if(!v.isString(S))return q_(_),g(_._errorCode,_._getErrorString()),!1;0!=S.indexOf("http://")&&0!=S.indexOf("https://")&&(S=W.detect.ssl?"https://"+S:"http://"+S),_.__HTTPPostResponseString="",W.cancelFrom=on.HTTPUpload,I?W.showProgress(_,T,!1):W.hideProgress(),W.needShowTwiceShowDialog=!0,_._OnPercentDone([0,-1,Tn.Uploading,"http"]);var b=_._createHttpUploaderConfig(),D=new Us;return _.__remoteFilename&&""!=_.__remoteFilename&&(D.remoteFilename=_.__remoteFilename),D.url=S,D.method=T,D.content=[],D.headers=l,D.httpFormData=Ku(_.httpFormFields),D.blockSize=_._moduleSize,(new Za).httpPostUpload(b,D,function(R){W.needShowTwiceShowDialog=!1,W.closeProgress(null,T),v.isFunction(d)&&hr(d,R,u,[u,d,f])},g)}},{key:"HTTPUploadThroughPost",value:function(u,l,d,f,g,_,T){var S=this;if(S._resetErr(),!S._isValid())return!1;var I=mt.getImageType(f),b=arguments,D=!1,R=function(L){return v.isFunction(_)&&Ki(_,S,S.__HTTPPostResponseString,L,b),!1};return v.isString(f)&&""!=f?(g&&v.isFunction(g)&&(D=function(L,x){return hr(g,S.__HTTPPostResponseString,x,b),!0}),!!f3(S,l,I,R)&&lo(S,el,tf).call(S,u,l,d,f,I,D,R,T)):(er(S),R())}},{key:"HTTPUploadThroughPostEx",value:function(u,l,d,f,g,_,T,S){var I=this;if(I._resetErr(),!I._isValid())return!1;var b=arguments,D=!1,R=function(L){return v.isFunction(T)&&Ki(T,I,I.__HTTPPostResponseString,L,b),!1};return v.isString(f)&&""!=f?(_&&v.isFunction(_)&&(D=function(L,x){return hr(_,I.__HTTPPostResponseString,x,b),!0}),!!f3(I,l,g,R)&&lo(I,el,tf).call(I,u,l,d,f,g,D,R,S)):(er(I),R())}},{key:"HTTPUploadAllThroughPostAsMultiPageTIFF",value:function(u,l,d,f,g,_){var T=this;if(T._resetErr(),!T._isValid())return!1;var S=arguments,I=!1,b=function(D){return v.isFunction(g)&&Ki(g,T,T.__HTTPPostResponseString,D,S),!1};return v.isString(d)&&""!=d?(f&&v.isFunction(f)&&(I=function(D,R){return hr(f,T.__HTTPPostResponseString,R,S),!0}),lo(T,el,tf).call(T,u,-1,l,d,2,I,b,_)):(er(T),b())}},{key:"HTTPUploadAllThroughPostAsPDF",value:function(u,l,d,f,g,_){var T=this;if(T._resetErr(),!T._isValid())return!1;var S=arguments,I=!1,b=function(D){return v.isFunction(g)&&Ki(g,T,T.__HTTPPostResponseString,D,S),!1};return v.isString(d)&&""!=d?(f&&v.isFunction(f)&&(I=function(D,R){return hr(f,T.__HTTPPostResponseString,R,S),!0}),lo(T,el,tf).call(T,u,-1,l,d,4,I,b,_)):(er(T),b())}},{key:"HTTPUploadThroughPostAsMultiPagePDF",value:function(u,l,d,f,g,_){var T=this;if(T._resetErr(),!T._isValid())return!1;var S=arguments,I=!1,b=function(D){return v.isFunction(g)&&Ki(g,T,T.__HTTPPostResponseString,D,S),!1};return v.isString(d)&&""!=d?(f&&v.isFunction(f)&&(I=function(D,R){return hr(f,T.__HTTPPostResponseString,R,S),!0}),lo(T,el,tf).call(T,u,-2,l,d,4,I,b,_)):(er(T),b())}},{key:"HTTPUploadThroughPostAsMultiPageTIFF",value:function(u,l,d,f,g,_){var T=this;if(T._resetErr(),!T._isValid())return!1;var S=arguments,I=!1,b=function(D){return v.isFunction(g)&&Ki(g,T,T.__HTTPPostResponseString,D,S),!1};return v.isString(d)&&""!=d?(f&&v.isFunction(f)&&(I=function(D,R){return hr(f,T.__HTTPPostResponseString,R,S),!0}),lo(T,el,tf).call(T,u,-2,l,d,2,I,b,_)):(er(T),b())}},{key:"_innerHTTPDownloadThroughGet",value:function(u,l,d,f,g,_){var S=this,I=S._GetHttpHeadersAndClear(),b=S.IfShowProgressBar,D=mt.combineUrl(S,l,d);if(void 0===D)return xi(S),v.isFunction(_)&&$r(_,S),ve;if(!Ye.checkProductKey(S,{Core:!0})||!Ye.checkPDFProductKeyWhenNeeds(S,f))return v.isFunction(_)&&$r(_,S),ve;W.cancelFrom=on.HTTPDownload;var R=Ne;S._OnPercentDone([0,-1,Tn.Downloading,"http"]),v.isFunction(g)||(R=ve);var L=S._getCurrentDocumentName(),x=S._getCurrentDefaultTagName();return v.log("_innerHTTPDownloadThroughGet.currentFileName:"+L+", tag="+x),b&&R?W.showProgress(S,u,!1):R&&W.hideProgress(),mt.loadHttpBlob(S,"get",D,R,function(U){b&&R&&Xa(!1),S._OnPercentDone([0,-1,Tn.Loading]);var Y=f;Y!=F.DWT.EnumDWT_ImageType.IT_BMP&&Y!=F.DWT.EnumDWT_ImageType.IT_JPG&&Y!=F.DWT.EnumDWT_ImageType.IT_TIF&&Y!=F.DWT.EnumDWT_ImageType.IT_PNG&&Y!=F.DWT.EnumDWT_ImageType.IT_PDF&&Y!=F.DWT.EnumDWT_ImageType.IT_J2K&&(Y=-1),U.currentFileName=L,U.currentTagName=x;var Z=S.__GetLoadEventsNum();S.__LoadImageFromBytesV1(U,Y,"",Z,R,function(){b&&R&&W.closeProgress(null,u),v.isFunction(g)&&g()},function(){b&&R&&W.closeProgress(null,u),v.isFunction(_)&&$r(_,S)})},function(){b&&R&&W.closeProgress(null,u),v.isFunction(_)&&$r(_,S)},function(U){var Y=0===U.total?100:Math.round(100*U.loaded/U.total);[U.loaded," / ",U.total].join(""),S._OnPercentDone([0,Y,"","http"])},I)}},{key:"LoadImage",value:function(u,l,d){var f=this;if(f._resetErr(),!f._isValid())return!1;var g,_,T,S=mt.replaceLocalFilename(u),I=mt.getImageType(S);return l&&v.isFunction(l)&&(_=function(b){l()}),d&&v.isFunction(d)&&(T=function(){d(f._errorCode,f._getErrorString())}),g=f.__GetLoadEventsNum(),""==S&&(f.__bOpenFileNow=!0),f.__innerLoadImage("LoadImage",we(S,g,1),I,!0,1,_,T)}},{key:"LoadImageEx",value:function(u,l,d,f){var g=this;if(g._resetErr(),!g._isValid())return!1;var _,T,S,I=mt.replaceLocalFilename(u),b=l;if(d&&v.isFunction(d)&&(T=function(L){d()}),f&&v.isFunction(f)&&(S=function(){f(g._errorCode,g._getErrorString())}),j.bAndroid){var D=_e.one(".d-loadImage");if(0==D.length){var R=document.createElement("input");R._stwain=g,R.setAttribute("type","file"),R.setAttribute("multiple","multiple"),R.style="position:absolute;top:-2px;left:-2px;width:1px;height:1px;",R.className="d-loadImage",R.setAttribute("accept",l==F.DWT.EnumDWT_ImageType.IT_BMP?"image/bmp":l==F.DWT.EnumDWT_ImageType.IT_JPG?"image/jpeg":l==F.DWT.EnumDWT_ImageType.IT_TIF?"image/tiff":l==F.DWT.EnumDWT_ImageType.IT_PNG?"image/png":l==F.DWT.EnumDWT_ImageType.IT_PDF?".pdf":l==F.DWT.EnumDWT_ImageType.IT_J2K?".jp2,.j2k,.j2c":Mn.bMobile?"image/jpeg,image/png,image/tiff,image/tif":"image/*,.pdf,.jp2,.j2k,.j2c"),R.ondoubleclick=function(){this.files.length>0&&this._stwain.LoadImageFromBinary(this.files,T,S),this.value="",this._stwain=null,R&&R.parentElement.removeChild(R)},R.onchange=function(){this.files.length>0&&this._stwain.LoadImageFromBinary(this.files,T,S),this.value="",this._stwain=null,R&&R.parentElement.removeChild(R)},document.body.appendChild(R),R.click()}else D[0].setAttribute("accept",l==F.DWT.EnumDWT_ImageType.IT_BMP?"image/bmp":l==F.DWT.EnumDWT_ImageType.IT_JPG?"image/jpeg":l==F.DWT.EnumDWT_ImageType.IT_TIF?"image/tiff":l==F.DWT.EnumDWT_ImageType.IT_PNG?"image/png":l==F.DWT.EnumDWT_ImageType.IT_PDF?".pdf":l==F.DWT.EnumDWT_ImageType.IT_J2K?".jp2,.j2k,.j2c":Mn.bMobile?"image/jpeg,image/png,image/tiff,image/tif":"image/*,.pdf,.jp2,.j2k,.j2c"),D[0].value="",D[0]._stwain=g,D[0].click();return!0}return b==F.DWT.EnumDWT_ImageType.IT_ALL&&(b=-1),_=g.__GetLoadEventsNum(),""==I&&(g.__bOpenFileNow=!0),g.__innerLoadImage("LoadImageEx",we(I,b,_,1),b,!0,1,T,S)}},{key:"HTTPDownload",value:function(u,l,d,f){var g=this;if(g._resetErr(),!g._isValid())return _e.Promise.reject({code:g._errorCode,message:g._getErrorString()});var _=mt.getImageType(l);return g._innerHTTPDownloadThroughGet("HTTPDownload",u,l,_,d,f)}},{key:"HTTPDownloadEx",value:function(u,l,d,f,g){var _=this;return _._resetErr(),_._isValid()?_._innerHTTPDownloadThroughGet("HTTPDownloadEx",u,l,d,f,g):_e.Promise.reject({code:_._errorCode,message:_._getErrorString()})}},{key:"getFormateDate",value:function(){var u=new Date,l=u.getFullYear(),d=u.getMonth()+1,f=u.getDate(),g=u.getHours(),_=u.getMinutes(),T=u.getSeconds();return d<=9&&(d="0"+d),f<=9&&(f="0"+f),g<=9&&(g="0"+g),_<=9&&(_="0"+_),T<=9&&(T="0"+T),{currentTime_title:l+"-"+d+"-"+f+" "+g+":"+_+":"+T,currentTime_info:d+"/"+f+"/"+l+" "+g+":"+_+":"+T}}},{key:"__shareImagesInner",value:function(u,l,d,f){var g=navigator;g.canShare&&g.canShare({files:u})&&g.share({files:u,title:l,text:this.getFormateDate().currentTime_info}).then(function(){v.isFunction(d)&&d()}).catch(function(_){v.isFunction(f)&&f(_)})}},{key:"ShareImages",value:(i=Ae(A.mark(function u(l,d,f){var g,_,T,S,I,b,D,R,L;return A.wrap(function(x){for(;;)switch(x.prev=x.next){case 0:if(g=this,!j.bAndroid){x.next=39;break}if(f!=Xt.IT_ALL&&f!=Xt.IT_MULTIPAGE_PDF&&f!=Xt.IT_MULTIPAGE_TIF){x.next=5;break}throw lU(g),{code:g._errorCode,message:g._errorString};case 5:if(!((_=d.sort(function(U,Y){return U-Y})).length>0)){x.next=37;break}if(T="IMAGE File",f==Xt.IT_PDF&&(T="PDF File"),S=Lv(l,f),v.isUndefined(S)&&(S=l),f!=Xt.IT_PDF&&f!=Xt.IT_TIF){x.next=15;break}return x.abrupt("return",new _e.Promise(function(U,Y){g.ConvertToBlob(_,f,function(Z,oe,se){var k=[new File([Z],S,{type:Z.type})];g.__shareImagesInner(k,T,function(){U()},function(E){Y({code:0!=E.code?E.code:2201,message:E.message})})},function(){Y({code:g._errorCode,message:g._errorString})})}));case 15:I=[],b=S,x.t0=f,x.next=x.t0===Xt.IT_BMP?20:x.t0===Xt.IT_JPG?22:x.t0===Xt.IT_PNG?24:26;break;case 20:return D=".bmp",x.abrupt("break",27);case 22:return D=".jpg",x.abrupt("break",27);case 24:return D=".png",x.abrupt("break",27);case 26:D=".jpg";case 27:S&&S.lastIndexOf(".")>0&&(b=S.substring(0,S.lastIndexOf(".")),D=S.substring(S.lastIndexOf("."),S.length)),R=A.mark(function U(Y){return A.wrap(function(Z){for(;;)switch(Z.prev=Z.next){case 0:return Z.next=2,new _e.Promise(function(oe,se){g.ConvertToBlob([_[Y]],f,function(k,E,M){I.push(0==Y?new File([k],b+D,{type:k.type}):new File([k],b+Y+D,{type:k.type})),oe()},function(){se({code:g._errorCode,message:g._errorString})})});case 2:case"end":return Z.stop()}},U)}),L=0;case 31:if(!(L<_.length)){x.next=36;break}return x.delegateYield(R(L),"t1",33);case 33:L++,x.next=31;break;case 36:g.__shareImagesInner(I,T);case 37:x.next=41;break;case 39:throw Ee(g,-2617,"ShareImages is only supported on Android devices."),{code:g._errorCode,message:g._errorString};case 41:case"end":return x.stop()}},u,this)})),function(u,l,d){return i.apply(this,arguments)})},{key:"Addon",get:function(){return this.__addon}},{key:"LoadDibFromClipboard",value:function(u,l){var d,f,_,g=this;return g._resetErr(),!!g._isValid()&&(g._bRemoteMode?(Ee(g,-2609,"LoadDibFromClipboard is not supported when Object is created by CreateRemoteScanObjectAsync."),{code:g._errorCode,message:g._getErrorString()}):(u&&v.isFunction(u)&&(d=function(T){u()}),l&&v.isFunction(l)&&(f=function(){l(g._errorCode,g._getErrorString())}),_=g.__GetLoadEventsNum(),g.__innerLoadImage("LoadDibFromClipboard",we(_,1),-1,!0,1,d,f)))}},{key:"__innerGetBarcodeResultAsyncFunction",value:function(u){var l=W.NewBarcodeResult();return u&&(l._errorCode=u.exception,l._errorString=u.description,l._resultlist=u.result,l._Count=u.result.length),l}},{key:"__innerGetOCRResultAsyncFunction",value:function(u){var l=W.NewOCRResult(this);return u&&(l._errorCode=u.exception,l._errorString=u.description,l._resultlist=u.result),l}},{key:"__innerFTPDownloadDirectly",value:function(u,l,d,f,g){var _=this;return Ye.checkProductKey(_,{Core:!0})&&Ye.checkPDFProductKeyWhenNeeds(_,d)?(W.cancelFrom=on.FTPDownload,lo(_,Bv,rE).call(_,u,l,!0,f,g)):(v.isFunction(g)&&g(_._errorCode,_._errorString),!1)}},{key:"__innerFTPUpload",value:function(u,l,d,f){return W.cancelFrom=on.FTPUpload,lo(this,Bv,rE).call(this,u,l,!0,d,f)}},{key:"_GetHttpHeadersAndClear",value:function(){var u=this.__httpHeaderMap;return this.__httpHeaderMap={},u||(u={}),u}},{key:"_asyncUploadCmd",value:function(u){var l=this,d=u.url,f=u.asyncSuccessFunc,g=u.asyncFailureFunc,_=u.method,T=u.serverIds,S=u.headers,I=u.formData,b=u.enumImageType,D=u.dataFormat,R=u.fileName,L=u.saveSetup,x=u.retry,U=u.bOnlyResponseEmptyIsOK,Y=u.objUploadFileStatus,Z=function(oe,se,k){var E=[];if(v.isArray(T)&&v.each(T,function(M){var G=l._ImgManager.convertServerIdToClientIndex(M);G>-1&&E.push(G)}),0!=oe&&se&&(l._errorCode=oe,l._errorString=se),k&&(l.__HTTPPostResponseString=k),v.isFunction(g))try{g(E)}catch{}return!1};return v.isNumber(x)&&x>0||(x=0),0!=l._errorCode?Z(l._errorCode,l._errorString,l.__HTTPPostResponseString):(l.__HTTPPostResponseString="",s._innerHTTPUpload(l,_,d,S,I,T,b,D,R,L,x,U,Y,function(oe){if(v.isFunction(f)){var se=[];v.isArray(T)&&v.each(T,function(k){var E=l._ImgManager.convertServerIdToClientIndex(k);E>-1&&se.push(E)});try{hr(f,oe,se)}catch{}oe=null}return!0},Z))}}],[{key:"_innerHTTPUpload",value:function(u,l,d,f,g,_,T,S,I,b,D,R,L,x,U){var Y=parseInt(T),Z=parseInt(S),oe=I,se=d,k=u._segementUploadThreshold;if(v.isUndefined(T))return zi(u),v.isFunction(U)&&U(u._errorCode,u._errorString,""),!1;u._resetErr(),W.cancelFrom=on.HTTPUpload;var E,M=function(V,J,Q){return 0!=V&&J&&(u._errorCode=V,u._errorString=J),Q&&(u.__HTTPPostResponseString=Q),W.needShowTwiceShowDialog=!1,u.IfShowProgressBar&&W.closeProgress(null,l),v.isFunction(U)&&U(u._errorCode,u._errorString,u.__HTTPPostResponseString),!1},G=u._createHttpUploaderConfig();if(G.objUploadStatus=L,oe=Lv(oe,Y),W.needShowTwiceShowDialog=!0,u.IfShowProgressBar?(W.showProgress(u,l,!1),W.progressContext&&(W.progressContext._onPercent=function(V){var J=0;V&&(J=Math.floor(V.loaded/V.total*100))>100&&(J=100),W.progressBarOnPercentDone(-1,"Transferring","",J,"")})):W.hideProgress(),Z==F.DWT.EnumDWT_UploadDataFormat.Binary){if(L&&L.bCancel)return L.st=2,Ko(u),M(u._errorCode,u._errorString);u._OnPercentDone([0,-1,Tn.Encoding,"http"]),u._convertToBlobForUpload(Y,_,b,4,function(V,J,Q){if(E=function(Ce){return W.needShowTwiceShowDialog=!1,u.IfShowProgressBar&&W.closeProgress(null,l),v.isFunction(x)&&hr(x,Ce),!0},L&&L.bCancel)return L.st=2,Ko(u),M(u._errorCode,u._errorString);if(!V||V.size<=0)return er(u),M(u._errorCode,u._errorString);var te=u.__maxUploadImageSize;if(V.size>te&&-1!=te)return ca(u),M(u._errorCode,u._errorString);if(0!=u._errorCode)return M(u._errorCode,u._errorString);if(F.DWT.IfAddMD5InUploadHeader&&J&&""!=J&&(f["dwt-md5"]=J),k>0&&V.size>k){u._OnPercentDone([0,-1,Tn.Uploading,"http",oe]);var X=new Za,ae=new Us;return u.__remoteFilename&&""!=u.__remoteFilename&&(ae.remoteFilename=u.__remoteFilename),ae.url=se,ae.method=l,ae.content=V,V=null,ae.contentType=u._strHttpContentTypeFieldValue,ae.headers=f,ae.fileName=oe,ae.httpFormData=g,ae.retry=D,ae.bOnlyResponseEmptyIsOK=R,ae.blockSize=u._moduleSize,X.httpPostUploadFragment(G,ae,E,M)}var he=new Za,ye=new Us;u.__remoteFilename&&""!=u.__remoteFilename&&(ye.remoteFilename=u.__remoteFilename),ye.url=se,ye.method=l,ye.content=V,V=null,ye.contentType=u._strHttpContentTypeFieldValue,ye.headers=f,ye.fileName=oe,ye.httpFormData=g,ye.retry=D,ye.bOnlyResponseEmptyIsOK=R,ye.blockSize=u._moduleSize,G.objUploadStatus=L,he.httpPostUpload(G,ye,E,M)},M)}else Z==F.DWT.EnumDWT_UploadDataFormat.Base64&&u._convertToBase64ByServerIdsWithUI(l,_,Y,b,4,function(V){var J;if(!V||V.getLength()<=0)return er(u),M(u._errorCode,u._errorString);if(E=function(){return W.needShowTwiceShowDialog=!1,u.IfShowProgressBar&&W.closeProgress(null,l),v.isFunction(x)&&hr(x,V),!0},k>0&&V.getLength()>k){J=V.getMD5(),F.DWT.IfAddMD5InUploadHeader&&(f["dwt-md5"]=J),u._OnPercentDone([0,-1,Tn.Uploading,"http"]);var Q=new Us;u.__remoteFilename&&""!=u.__remoteFilename&&(Q.remoteFilename=u.__remoteFilename),Q.url=se,Q.method=l,Q.content=V.getData(0,V.getLength()),Q.headers=f,Q.fileName=oe,Q.httpFormData=g,Q.retry=D,Q.bOnlyResponseEmptyIsOK=R,Q.blockSize=u._moduleSize,Q.offset=0,(new Za).httpPostUploadFragment(G,Q,E,M)}else{var te;if(J=V.getMD5(),F.DWT.IfAddMD5InUploadHeader&&(f["dwt-md5"]=J),!(te=V.getData(0,V.getLength()))||""==te)return er(u),M(u._errorCode,u._errorString);var X=new Us;u.__remoteFilename&&""!=u.__remoteFilename&&(X.remoteFilename=u.__remoteFilename),X.url=se,X.method=l,X.content=te,X.headers=f,X.fileName=oe,X.httpFormData=g,X.retry=D,X.bOnlyResponseEmptyIsOK=R,X.blockSize=u._moduleSize,(new Za).httpPostUpload(G,X,E,M)}},M);return!0}}]),s}(Ume);function tf(r,i,a,s,u,l,d,f){var g,_,T=this,S="HTTPUploadThroughPostEx",I=T._GetHttpHeadersAndClear(),b=mt.combineUrl(T,r,a),D=!0,R=!1,L=[],x=function(oe){return v.isFunction(d)&&d(oe),!1};if(T.__HTTPPostResponseString="",v.isNumber(i)){if(i<-2)return We(T),x(i)}else if(!v.isArray(i))return We(T),x(i);if(!v.isString(s)||""==s)return er(T),x();if(v.isUndefined(u))return zi(T),x(i);if(u==F.DWT.EnumDWT_ImageType.IT_BMP||u==F.DWT.EnumDWT_ImageType.IT_JPG||u==F.DWT.EnumDWT_ImageType.IT_PNG||u==F.DWT.EnumDWT_ImageType.IT_J2K){if(-1==i&&T._ImgManager.count()>1||v.isArray(i)&&i.length>1)return xd(T),x(i);v.isArray(i)?L.push(i[0]):L.push(-1==i?0:i)}else{if(u!=F.DWT.EnumDWT_ImageType.IT_TIF&&u!=F.DWT.EnumDWT_ImageType.IT_PDF)return zi(T),x(i);if(-1==i){if(0==T._ImgManager.count())return Gi(T),x();for(_=0;_<T._ImgManager.count();_++)L.push(_)}else if(-2==i)L=T._ImgManager.getSelectedClientIndexArray();else if(v.isArray(i))for(_=0;_<i.length;_++)L.push(i[_]);else L.push(i)}if(v.isFunction(l)||(D=!1),""===r)return Qb(T),x(L);if(v.isUndefined(b)||""===b)return xi(T),x(L);if(!v.isString(b))return q_(T),x(L);if(0!=b.indexOf("http://")&&0!=b.indexOf("https://")&&(b=W.detect.ssl?"https://"+b:"http://"+b),!T._checkIndices(L)&&-1!=L)return x(L);var U=[];if(v.isArray(L)&&v.each(L,function(oe){var se=T._ImgManager.convertClientIndexToServerId(oe);-1!=se&&U.push(se)}),T._resetErr(),!T._isValid())return!1;if(D)return g={method:"HTTPUploadThroughPostEx",url:b,serverIds:U,headers:I,formData:Ku(T.httpFormFields),enumImageType:u,saveSetup:!1,fileName:s,retry:0,bOnlyResponseEmptyIsOK:!0,objUploadFileStatus:!1,dataFormat:F.DWT.EnumDWT_UploadDataFormat.Binary,asyncSuccessFunc:l,asyncFailureFunc:x},this._asyncUploadCmd(g),!0;W.cancelFrom=on.HTTPUpload;var Y=this.IfShowProgressBar,Z=function(oe,se,k){return 0!=oe&&se&&(T._errorCode=oe,T._errorString=se),k&&(T.__HTTPPostResponseString=k),W.needShowTwiceShowDialog=!1,Y&&W.closeProgress(null,S),x(L),!1};return W.needShowTwiceShowDialog=!0,Y?W.showProgress(T,S,!1):W.hideProgress(),T._OnPercentDone([0,-1,Tn.Encoding,"http"]),T._dwtConvertToBlobSync(u,U,!1,function(oe,se){if(W.needShowTwiceShowDialog=!1,oe){var k=T.__maxUploadImageSize;if(oe.size>k&&-1!=k)return ca(T),Z(T._errorCode,T._errorString);F.DWT.IfAddMD5InUploadHeader&&se&&""!=se&&(I["dwt-md5"]=se),oe instanceof File?oe.fileName=s:oe.name=s,Y&&Xa(T.__IfShowCancelDialogWhenImageTransfer);var E=T._createHttpUploaderConfig(),M=new Us;return T.__remoteFilename&&""!=T.__remoteFilename&&(M.remoteFilename=T.__remoteFilename),M.url=b,M.method=S,M.content=oe,M.contentType=T._strHttpContentTypeFieldValue,M.headers=I,M.bAsync=D,M.httpFormData=Ku(T.httpFormFields),M.blockSize=T._moduleSize,(new Za).httpPostUpload(E,M,function(V){return Y&&W.closeProgress(null,S),R=!0,!0},Z)}var G={};return Jb(G),Z(G._errorCode,G._errorString)},Z),R}function l3(r,i,a,s,u){var l=this;if(i)return l._innerFunRaw("SaveSelectedImagesToBytes",we(0,0,r,a),i,!0,!0,function(g){if(v.isFunction(s)){var _=new Blob([g],{type:l._strHttpContentTypeFieldValue});s(_),_=null}},u),!0;var d=l._innerFunRaw("SaveSelectedImagesToBytes",we(0,0,r,a),i,!0,!1);if(0==l._errorCode){var f=s(d);return d=null,f}return d=null,u(),!1}function zme(){return this._resetErr(),!!this._isValid()&&(this._innerSend("SetCancel",null,!0),!0)}function rE(r,i,a,s,u){var l=this;return v.isFunction(u)?(l.IfShowProgressBar?(W.showProgress(l,r,a),a&&W.progressContext&&W.progressContext.on("cancel",function(){lo(l,c3,zme).call(l)})):W.hideProgress(),this._innerSend(r,i,!0,function(){W.closeProgress(null,r),v.isFunction(s)&&s()},function(d){return v.isFunction(u)&&u(l._errorCode,l._getErrorString()),W.closeProgress(null,r),d&&v.error(d),!0}),!0):this._innerFun(r,i)}function d3(r,i,a,s,u){var l,d=this;if(!Ye.checkProductKey(d,{Core:!0})||!Ye.checkPDFProductKeyWhenNeeds(d,a))return v.isFunction(u)&&u(d._errorCode,d._errorString),!1;if(W.cancelFrom=on.FTPDownload,v.isFunction(u))return lo(d,Bv,rE).call(d,r,i,!0,function(){var _=d._ImgManager.getCurrentImageIndex();_>=0&&d._innerRefreshUI(_),d._blts&&F.DWT.lcvrf(d),v.isFunction(s)&&s()},u);var f=d._getCurrentDocumentName();(l=d.__innerLoadImageFun(r,i,0,f))&&d._blts&&F.DWT.lcvrf(d);var g=d._ImgManager.getCurrentImageIndex();return g>=0&&d._innerRefreshUI(g),l}function f3(r,i,a,s){if(0==r._ImgManager.count())return Gi(r),v.isFunction(s)&&s(i),!1;if(v.isNumber(i)){if(isNaN(i)||i<-2||i>=r._ImgManager.count())return We(r),v.isFunction(s)&&s(i),!1}else{if(!v.isArray(i))return We(r),v.isFunction(s)&&s(i),!1;var u;for(u=0;u<i.length;u++){var l=i[u];if(isNaN(l)||!v.isNumber(l)||l<0||l>=r._ImgManager.count())return ew(r),v.isFunction(s)&&s(i),!1}}if(a==F.DWT.EnumDWT_ImageType.IT_BMP||a==F.DWT.EnumDWT_ImageType.IT_JPG||a==F.DWT.EnumDWT_ImageType.IT_PNG||a==F.DWT.EnumDWT_ImageType.IT_J2K)(-1==i&&r._ImgManager.count()>1||v.isArray(i)&&i.length>1)&&(xd(r),v.isFunction(s)&&s(i));else if(a!=F.DWT.EnumDWT_ImageType.IT_TIF&&a!=F.DWT.EnumDWT_ImageType.IT_PDF)return zi(r),v.isFunction(s)&&s(i),!1;return!0}function Ku(r){var i;return r&&(i=new FormData,v.each(r,function(a,s){a instanceof Blob?i.append(s,a,a.name):i.append(s,a)})),i}var Uv,va=function(r){di(a,r);var i=function Kme(r){var i=function(){if(typeof Reflect>"u"||!Reflect.construct||Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch{return!1}}();return function(){var a,s=yt(r);if(i){var u=yt(this).constructor;a=Reflect.construct(s,arguments,u)}else a=s.apply(this,arguments);return fi(this,a)}}(a);function a(){return n(this,a),i.apply(this,arguments)}return c(a,[{key:"Viewer",get:function(){return this._viewer}},{key:"BindViewer",value:function(s){var u=this,l=s;return F.DWT.UseDefaultViewer?(v.isString(s)&&(l=v.get(s),v.show(l)),u._config.container!=l&&(u._config.container=l,t3(u)),u._UIView.BindView(s)):(Ee(u,-2439,"You cannot call the method bindViewer() when Dynamsoft.DWT.UseDefaultViewer is set to false."),!1)}},{key:"UnbindViewer",value:function(){return this._innerUnbindViewer(!1)}},{key:"AddText",value:function(s,u,l,d,f,g,_,T){var S=this,I=parseInt(s);if(!Mr(S,I))return!1;var b=Go.RGB2BGR(f),D=Go.RGB2BGR(g),R=S._ImgManager.convertClientIndexToServerId(I);return-1==R?(We(S),!1):S._innerFun("AddText",we(R,u,l,d,b,D,_,T))}},{key:"CreateTextFont",value:function(s,u,l,d,f,g,_,T,S,I,b,D,R,L){return this._resetErr(),!!this._isValid()&&this._innerFun("CreateTextFont",we(s,u,l,d,f,g,_,T,S,I,b,D,R,L))}},{key:"CopyToClipboard",value:function(s){var u=parseInt(s);return!!Mr(this,u)&&xp(this,"CopyToClipboard",u,null,null,!1,!1)}},{key:"CopyToClipboardAsync",value:function(s){var u=this;if(u._resetErr(),!u._isValid())return _e.Promise.reject({code:u._errorCode,message:u._errorString});var d,_,l=parseInt(s);return isNaN(l)?(Dt(u),_e.Promise.reject({code:u._errorCode,message:u._errorString})):l<0||l>=u._ImgManager.count()?(We(u),_e.Promise.reject({code:u._errorCode,message:u._errorString})):-1==(_=(d=u)._ImgManager.convertClientIndexToServerId(l))?(We(d),_e.Promise.reject({code:d._errorCode,message:d._errorString})):d._innerFunV2("CopyToClipboard",we(_))}},{key:"getView",value:function(){return this._UIView}},{key:"Erase",value:function(s,u,l,d,f,g,_){var T=this;if(v.isFunction(g))return T.EraseAsync(s,u,l,d,f).then(g,function(D){T._wrappeAsyncFailed(T,D,_)}),!0;var S,I=parseInt(s);if(!Mr(T,I,_))return!1;var b=T._ImgManager.convertClientIndexToServerId(I);return-1==b?(We(T),v.isFunction(_)&&_(T._errorCode,T._getErrorString()),!1):(T.getView().ClearSelectedAreas(),(S=1==T._innerFun("Erase",we(b,u,l,d,f)))?v.isFunction(g)&&g():v.isFunction(_)&&_(T._errorCode,T._getErrorString()),S)}},{key:"EraseAsync",value:function(s,u,l,d,f){var g=this;if(g._resetErr(),!g._isValid())return _e.Promise.reject({code:g._errorCode,message:g._errorString});var _=parseInt(s);if(isNaN(_))return Dt(g),_e.Promise.reject({code:g._errorCode,message:g._errorString});if(_<0||_>=g._ImgManager.count())return We(g),_e.Promise.reject({code:g._errorCode,message:g._errorString});var T=g._ImgManager.convertClientIndexToServerId(_);return-1==T?(We(g),_e.Promise.reject({code:g._errorCode,message:g._errorString})):(g.getView().ClearSelectedAreas(),g._innerFunV2("Erase",we(T,u,l,d,f),!0).then(function(S){if(1!=S)throw{code:g._errorCode,message:g._errorString}}))}},{key:"GetImageBitDepth",value:function(s){var u=this,l=parseInt(s);if(!Mr(u,l))return!1;var d=u._ImgManager.convertClientIndexToServerId(l);return-1==d?(We(u),!1):u._innerFun("GetImageBitDepth",we(d))}},{key:"GetImageWidth",value:function(s){var u=this;if(u._resetErr(),!u._isValid())return!1;var l=parseInt(s);if(isNaN(l))return Dt(u),-1;if(l<0||l>=u._ImgManager.count())return We(u),-1;var d=u._ImgManager.convertClientIndexToServerId(l);return-1==d?(We(u),-1):u._innerFun("GetImageWidth",we(d))}},{key:"GetImageHeight",value:function(s){var u=this;if(u._resetErr(),!u._isValid())return!1;var l=parseInt(s);if(isNaN(l))return Dt(u),-1;if(l<0||l>=u._ImgManager.count())return We(u),-1;var d=u._ImgManager.convertClientIndexToServerId(l);return-1==d?(We(u),-1):u._innerFun("GetImageHeight",we(d))}},{key:"GetImageSize",value:function(s,u,l){var d=this;if(d._resetErr(),!d._isValid())return!1;var f=parseInt(s);if(isNaN(f))return Dt(d),-1;if(f<0||f>=d._ImgManager.count())return We(d),-1;var g=d._ImgManager.convertClientIndexToServerId(f);return-1==g?(We(d),-1):d._innerFun("GetImageSize",we(g,u,l))}},{key:"GetImageSizeWithSpecifiedType",value:function(s,u){var l=this;if(l._resetErr(),!l._isValid())return!1;var d=parseInt(s);if(isNaN(d))return Dt(l),-1;if(d<0||d>=l._ImgManager.count())return We(l),-1;var f=l._ImgManager.convertClientIndexToServerId(d);return-1==f?(We(l),-1):l._innerFun("GetImageSizeWithSpecifiedType",we(f,u))}},{key:"GetImageXResolution",value:function(s){var u=this,l=parseInt(s);if(!Mr(u,l))return!1;var d=u._ImgManager.convertClientIndexToServerId(l);return-1==d?(We(u),!1):u._innerFun("GetImageXResolution",we(d))}},{key:"GetImageYResolution",value:function(s){var u=this,l=parseInt(s);if(!Mr(u,l))return!1;var d=u._ImgManager.convertClientIndexToServerId(l);return-1==d?(We(u),!1):u._innerFun("GetImageYResolution",we(d))}},{key:"SelectAllImages",value:function(){var s,u=this,l=u._getHowManyImagesInBuffer(),d=[];if(u._resetErr(),!u._isValid())return!1;for(s=0;s<l;s++)d.push(s);return u._ImgManager.setSelectedClientIndexArray(d),d}},{key:"SelectImages",value:function(s){var u=this;return u._resetErr(),!!u._isValid()&&u._ImgManager.setSelectedClientIndexArray(s)}},{key:"GetSkewAngle",value:function(s,u,l){var d,f=this;if(v.isFunction(u))return f.GetSkewAngleAsync(s).then(u,function(_){f._wrappeAsyncFailed(f,_,l)}),!0;var g=parseInt(s);return!!Mr(f,g,l)&&(d=xp(f,"GetSkewAngle",g,u,l,!0,!1),0==f._errorCode?(mt.refreshImageAfterInvokeFun(f,g),v.isFunction(u)&&u(d),d):(v.isFunction(l)&&l(f._errorCode,f._errorString),0))}},{key:"GetSkewAngleAsync",value:function(s){var u=this;if(u._resetErr(),!u._isValid())return _e.Promise.reject({code:u._errorCode,message:u._errorString});var l=parseInt(s);if(isNaN(l))return Dt(u),_e.Promise.reject({code:u._errorCode,message:u._errorString});if(l<0||l>=u._ImgManager.count())return We(u),_e.Promise.reject({code:u._errorCode,message:u._errorString});var d=u._ImgManager.convertClientIndexToServerId(l);return-1==d?(We(u),_e.Promise.reject({code:u._errorCode,message:u._errorString})):u._innerFunV2("GetSkewAngle",we(d),!0).then(function(f){var g=f;return v.isArray(f)&&(g=f.length>0?f[0]:0),mt.refreshImageAfterInvokeFun(u,l),g})}},{key:"GetSkewAngleEx",value:function(s,u,l,d,f){var g=this,_=parseInt(s);if(!Mr(g,_))return!1;var T=g._ImgManager.convertClientIndexToServerId(_);return-1==T?(We(g),!1):g._innerFun("GetSkewAngleEx",we(T,u,l,d,f))}},{key:"GetSkewAngleFromBinaryAsync",value:function(s,u,l,d){var f=this;if(f._resetErr(),!f._isValid())return _e.Promise.reject({code:f._errorCode,message:f._errorString});var g=this._imageBufferWrapper.getMetadataByIndex(s),_={imageId:this._ImgManager.convertClientIndexToServerId(s),bufferLen:u.size,imageType:Xt.IT_BMP,width:g.width,height:g.height,bit:g.bitDepth,xres:g.resolutionX,yres:g.resolutionY},T=v.stringify([v.stringify(_)]);return this._innerSendBlob("GetSkewAngleFromBinary",T,u,!0,!0,l,d)}},{key:"IsBlankImageEx",value:function(s,u,l,d,f,g){var _,T=this;if(!Mr(T,_=parseInt(s)))return!1;var S=T._ImgManager.convertClientIndexToServerId(_);return-1==S?(We(T),!1):T._innerFun("IsBlankImageEx",we(S,u,l,d,f,g))}},{key:"MirrorAsync",value:function(s){var u=this;if(u._resetErr(),!u._isValid())return _e.Promise.reject({code:u._errorCode,message:u._errorString});var l=parseInt(s);if(isNaN(l))return Dt(u),_e.Promise.reject({code:u._errorCode,message:u._errorString});if(l<0||l>=u._ImgManager.count())return We(u),_e.Promise.reject({code:u._errorCode,message:u._errorString});var d=u._ImgManager.convertClientIndexToServerId(l);return-1==d?(We(u),_e.Promise.reject({code:u._errorCode,message:u._errorString})):u._innerFunV2("Mirror",we(d),!0).then(function(f){if(1!=f)throw{code:u._errorCode,message:u._errorString};mt.refreshImageAfterInvokeFun(u,l),u.getView().ClearSelectedAreas()})}},{key:"Mirror",value:function(s,u,l){var d=this;if(v.isFunction(u))return d.MirrorAsync(s).then(u,function(g){d._wrappeAsyncFailed(d,g,l)}),!0;var f=parseInt(s);return!!Mr(d,f,l)&&xp(d,"Mirror",f,u,l,!1,!0)}},{key:"RemoveAllImages",value:function(){return this._removeAllImages("RemoveAllImages")}},{key:"RemoveAllImagesAsync",value:function(){return this._removeAllImagesAsync("RemoveAllImagesAsync",!0)}},{key:"RemoveImageAsync",value:function(s){var u=this;if(u._resetErr(),!u._isValid())return _e.Promise.reject({code:u._errorCode,message:u._errorString});var l=parseInt(s);if(isNaN(l))return Dt(u),_e.Promise.reject({code:u._errorCode,message:u._errorString});if(l<0||l>=u._ImgManager.count())return We(u),_e.Promise.reject({code:u._errorCode,message:u._errorString});var d=u._ImgManager.convertClientIndexToServerId(l);return-1==d?(We(u),_e.Promise.reject({code:u._errorCode,message:u._errorString})):u._innerFunV2("RemoveImage",we(d),!0).then(function(f){return!(!f&&-1033!=u._errorCode||(u._OnBitmapChanged(["0",""+d,3,u._ImgManager.getCurrentImageIndex(),u._ImgManager.count()]),0))})}},{key:"Rotate",value:function(s,u,l,d,f){return this.RotateEx(s,u,l,-1,d,f)}},{key:"_wrappeAsyncFailed",value:function(s,u,l){u&&(s._errorCode=u.code,s._errorString=u.message),v.isFunction(l)&&l(s._errorCode,s._getErrorString())}},{key:"RotateEx",value:function(s,u,l,d,f,g){var _=this;if(v.isFunction(f))return _.RotateExAsync(s,u,l,d).then(f,function(b){_._wrappeAsyncFailed(_,b,g)}),!0;if(_._resetErr(),!_._isValid())return!1;var T,S=parseInt(s);if(isNaN(S))return Dt(_),v.isFunction(g)&&g(_._errorCode,_._getErrorString()),!1;if(S<0||S>=_._ImgManager.count())return We(_),v.isFunction(g)&&g(_._errorCode,_._getErrorString()),!1;var I=_._ImgManager.convertClientIndexToServerId(S);return-1==I?(We(_),v.isFunction(g)&&g(_._errorCode,_._getErrorString()),!1):((T=1==_._innerFun("RotateEx",we(I,u,l,d)))?(mt.refreshImageAfterInvokeFun(_,S),_.getView().ClearSelectedAreas(),v.isFunction(f)&&f()):v.isFunction(g)&&g(_._errorCode,_._getErrorString()),T)}},{key:"RotateLeft",value:function(s,u,l){return this.RotateEx(s,-90,!0,-1,u,l)}},{key:"RotateRight",value:function(s,u,l){return this.RotateEx(s,90,!0,-1,u,l)}},{key:"RotateAsync",value:function(s,u,l){return this.RotateExAsync(s,u,l,-1)}},{key:"RotateExAsync",value:function(s,u,l,d){var f=this;if(f._resetErr(),!f._isValid())return _e.Promise.reject({code:f._errorCode,message:f._errorString});var g=parseInt(s);if(isNaN(g))return Dt(f),_e.Promise.reject({code:f._errorCode,message:f._errorString});if(g<0||g>=f._ImgManager.count())return We(f),_e.Promise.reject({code:f._errorCode,message:f._errorString});var _=f._ImgManager.convertClientIndexToServerId(g);return-1==_?(We(f),_e.Promise.reject({code:f._errorCode,message:f._errorString})):f._innerFunV2("RotateEx",we(_,u,l,d),!0).then(function(T){if(1!=T&&1!=T)throw{code:f._errorCode,message:f._errorString};mt.refreshImageAfterInvokeFun(f,g),f.getView().ClearSelectedAreas()})}},{key:"RotateLeftAsync",value:function(s){return this.RotateExAsync(s,-90,!0,-1)}},{key:"RotateRightAsync",value:function(s){return this.RotateExAsync(s,90,!0,-1)}},{key:"ChangeImageSize",value:function(s,u,l,d,f,g){var _=this;if(v.isFunction(f))return _.ChangeImageSizeAsync(s,u,l,d).then(f,function(R){_._wrappeAsyncFailed(_,R,g)}),!0;var T,S=parseInt(s),I=1*u,b=1*l;if(!Mr(_,S,g))return!1;if(I<=0||b<=0)return ZB(_),v.isFunction(g)&&g(_._errorCode,_._getErrorString()),!1;var D=_._ImgManager.convertClientIndexToServerId(S);return-1==D?(We(_),v.isFunction(g)&&g(_._errorCode,_._getErrorString()),!1):((T=1==_._innerFun("ChangeImageSize",we(D,I,b,d)))?(mt.refreshImageAfterInvokeFun(_,S),v.isFunction(f)&&f()):v.isFunction(g)&&g(_._errorCode,_._getErrorString()),T)}},{key:"ChangeImageSizeAsync",value:function(s,u,l,d){var f=this,g=parseInt(s),_=1*u,T=1*l;if(f._resetErr(),!f._isValid())return _e.Promise.reject({code:f._errorCode,message:f._errorString});if(isNaN(g))return Dt(f),_e.Promise.reject({code:f._errorCode,message:f._errorString});if(g<0||g>=f._ImgManager.count())return We(f),_e.Promise.reject({code:f._errorCode,message:f._errorString});if(_<=0||T<=0)return ZB(f),_e.Promise.reject({code:f._errorCode,message:f._errorString});var S=f._ImgManager.convertClientIndexToServerId(g);return-1==S?(We(f),_e.Promise.reject({code:f._errorCode,message:f._errorString})):f._innerFunV2("ChangeImageSize",we(S,_,T,d),!0).then(function(I){if(1!=I)throw{code:f._errorCode,message:f._errorString};mt.refreshImageAfterInvokeFun(f,g)})}},{key:"Flip",value:function(s,u,l){var d=this;if(v.isFunction(u))return d.FlipAsync(s).then(u,function(g){d._wrappeAsyncFailed(d,g,l)}),!0;var f=parseInt(s);return!!Mr(d,f,l)&&xp(d,"Flip",f,u,l,!1,!0)}},{key:"FlipAsync",value:function(s){var u=this;if(u._resetErr(),!u._isValid())return _e.Promise.reject({code:u._errorCode,message:u._errorString});var l=parseInt(s);if(isNaN(l))return Dt(u),_e.Promise.reject({code:u._errorCode,message:u._errorString});if(l<0||l>=u._ImgManager.count())return We(u),_e.Promise.reject({code:u._errorCode,message:u._errorString});var d=u._ImgManager.convertClientIndexToServerId(l);return-1==d?(We(u),_e.Promise.reject({code:u._errorCode,message:u._errorString})):u._innerFunV2("Flip",we(d),!0).then(function(f){if(1!=f)throw{code:u._errorCode,message:u._errorString};mt.refreshImageAfterInvokeFun(u,l),u.getView().ClearSelectedAreas()})}},{key:"Crop",value:function(s,u,l,d,f,g,_){var T=this;if(v.isFunction(g))return T.CropAsync(s,u,l,d,f).then(g,function(L){T._wrappeAsyncFailed(T,L,_)}),!0;var S,I=parseInt(s);if(!Mr(T,I,_))return!1;var b,D,R=T._ImgManager.convertClientIndexToServerId(I);return-1==R?(We(T),v.isFunction(_)&&_(T._errorCode,T._getErrorString()),!1):(S=1==T._innerFun("Crop",we(R,u,l,d,f)),b=T._errorCode,D=T._getErrorString(),T.getView().ClearSelectedAreas(),T._errorCode=b,T._errorString=D,S?(mt.refreshImageAfterInvokeFun(T,I),v.isFunction(g)&&g()):v.isFunction(_)&&_(b,D),S)}},{key:"CropAsync",value:function(s,u,l,d,f){var g=this;if(g._resetErr(),!g._isValid())return _e.Promise.reject({code:g._errorCode,message:g._errorString});var _=parseInt(s);if(isNaN(_))return Dt(g),_e.Promise.reject({code:g._errorCode,message:g._errorString});if(_<0||_>=g._ImgManager.count())return We(g),_e.Promise.reject({code:g._errorCode,message:g._errorString});var T=g._ImgManager.convertClientIndexToServerId(_);return-1==T?(We(g),_e.Promise.reject({code:g._errorCode,message:g._errorString})):g._innerFunV2("Crop",we(T,u,l,d,f),!0).then(function(S){var I,b;if(I=g._errorCode,b=g._getErrorString(),g.getView().ClearSelectedAreas(),g._errorCode=I,g._errorString=b,1!=S)throw{code:g._errorCode,message:g._errorString};return mt.refreshImageAfterInvokeFun(g,_),!0})}},{key:"CropToClipboard",value:function(s,u,l,d,f){var g,_=this,T=parseInt(s);if(!Mr(_,T))return!1;var S=_._ImgManager.convertClientIndexToServerId(T);return-1==S?(We(_),!1):(_.getView().ClearSelectedAreas(),(g=1==_._innerFun("CropToClipboard",we(S,u,l,d,f)))&&mt.refreshImageAfterInvokeFun(_,T),g)}},{key:"CutFrameToClipboard",value:function(s,u,l,d,f){var g,_=this,T=parseInt(s);if(!Mr(_,T))return!1;var S=_._ImgManager.convertClientIndexToServerId(T);return-1==S?(We(_),!1):(_.getView().ClearSelectedAreas(),(g=1==_._innerFun("CutFrameToClipboard",we(S,u,l,d,f)))&&mt.refreshImageAfterInvokeFun(_,T),g)}},{key:"CutToClipboard",value:function(s){var u,l=this,d=parseInt(s);if(!Mr(l,d))return!1;var f=l._ImgManager.convertClientIndexToServerId(d);return-1==f?(We(l),!1):((u=1==l._innerFun("CutToClipboard",we(f)))&&l._OnBitmapChanged(["0",""+f,3,l._ImgManager.getCurrentImageIndex(),l._ImgManager.count()]),u)}},{key:"CutFrameToClipboardAsync",value:function(s,u,l,d,f){var g=this;if(g._resetErr(),!g._isValid())return _e.Promise.reject({code:g._errorCode,message:g._errorString});var _=parseInt(s);if(isNaN(_))return Dt(g),_e.Promise.reject({code:g._errorCode,message:g._errorString});if(_<0||_>=g._ImgManager.count())return We(g),_e.Promise.reject({code:g._errorCode,message:g._errorString});var T=g._ImgManager.convertClientIndexToServerId(_);return-1==T?(We(g),_e.Promise.reject({code:g._errorCode,message:g._errorString})):g._innerFunV2("CutFrameToClipboard",we(T,u,l,d,f)).then(function(S){var I=1==S;if(!I)throw{code:g._errorCode,message:g._errorString};return mt.refreshImageAfterInvokeFun(g,_),I})}},{key:"CropToClipboardAsync",value:function(s,u,l,d,f){var g=this;if(g._resetErr(),!g._isValid())return _e.Promise.reject({code:g._errorCode,message:g._errorString});var _=parseInt(s);if(isNaN(_))return Dt(g),_e.Promise.reject({code:g._errorCode,message:g._errorString});if(_<0||_>=g._ImgManager.count())return We(g),_e.Promise.reject({code:g._errorCode,message:g._errorString});var T=g._ImgManager.convertClientIndexToServerId(_);return-1==T?(We(g),_e.Promise.reject({code:g._errorCode,message:g._errorString})):g._innerFunV2("CropToClipboard",we(T,u,l,d,f)).then(function(S){var I=1==S;if(!I)throw{code:g._errorCode,message:g._errorString};return mt.refreshImageAfterInvokeFun(g,_),I})}},{key:"CutToClipboardAsync",value:function(s){var u=this;if(u._resetErr(),!u._isValid())return _e.Promise.reject({code:u._errorCode,message:u._errorString});var l=parseInt(s);if(isNaN(l))return Dt(u),_e.Promise.reject({code:u._errorCode,message:u._errorString});if(l<0||l>=u._ImgManager.count())return We(u),_e.Promise.reject({code:u._errorCode,message:u._errorString});var d=u._ImgManager.convertClientIndexToServerId(l);return-1==d?(We(u),_e.Promise.reject({code:u._errorCode,message:u._errorString})):u._innerFunV2("CutToClipboard",we(d)).then(function(f){var g=1==f;if(!g)throw{code:u._errorCode,message:u._errorString};return u._OnBitmapChanged(["0",""+d,3,u._ImgManager.getCurrentImageIndex(),u._ImgManager.count()]),g})}},{key:"SetDPI",value:function(s,u,l,d,f,g,_){var T,S=this,I=parseInt(s);if(!Mr(S,I,_))return!1;var b=S._ImgManager.convertClientIndexToServerId(I);return-1==b?(We(S),v.isFunction(_)&&_(S._errorCode,S._getErrorString()),!1):((T=1==S._innerFun("SetDPI",we(b,u,l,d,f)))?v.isFunction(g)&&g():v.isFunction(_)&&_(S._errorCode,S._getErrorString()),T)}},{key:"MoveImage",value:function(s,u){var l=this;if(l._resetErr(),!l._isValid())return!1;var d=parseInt(s),f=parseInt(u);return isNaN(d)||isNaN(f)?(Dt(l),!1):d<0||d>=l._ImgManager.count()||f<0||f>=l._ImgManager.count()?(We(l),!1):l._ImgManager.moveImage(d,f)}},{key:"SwitchImage",value:function(s,u){var l=this;if(l._resetErr(),!l._isValid())return!1;var d=parseInt(s),f=parseInt(u);return isNaN(d)||isNaN(f)?(Dt(l),!1):d<0||d>=l._ImgManager.count()||f<0||f>=l._ImgManager.count()?(We(l),!1):l._ImgManager.switchImage(d,f)}},{key:"CloseWorkingProcess",value:function(){var s=this;return s._resetErr(),!!s._isValid()&&s._innerFun("CloseWorkerProcess")}},{key:"RemoveAllSelectedImages",value:function(){var s=this;if(s._resetErr(),!s._isValid())return!1;var u=!0,l=s._ImgManager.getCurrentImageIndex(),d=s._ImgManager.getSelectedClientIndexArray(),f=[];if(v.isArray(d)&&v.each(d,function(_){var T=s._ImgManager.convertClientIndexToServerId(_);-1!=T&&f.push(T)}),0==f.length&&l>=0){var g=s._ImgManager.convertClientIndexToServerId(l);f.push(g)}return f.length>0&&(u=s._innerFun("RemoveAllSelectedImages",we(f.join(",")))),u&&v.each(f,function(_){s._OnBitmapChanged(["0",""+_,3,s._ImgManager.getCurrentImageIndex(),s._ImgManager.count()])}),u}},{key:"RemoveAllSelectedImagesAsync",value:function(){var s=this;if(s._resetErr(),!s._isValid())return _e.Promise.reject({code:s._errorCode,message:s._errorString});var u=s._ImgManager.getCurrentImageIndex(),l=s._ImgManager.getSelectedClientIndexArray(),d=[];if(v.isArray(l)&&v.each(l,function(g){var _=s._ImgManager.convertClientIndexToServerId(g);-1!=_&&d.push(_)}),0==d.length&&u>=0){var f=s._ImgManager.convertClientIndexToServerId(u);d.push(f)}return d.length>0?s._innerFunV2("RemoveAllSelectedImages",we(d.join(","),!0)).then(function(g){g&&v.each(d,function(_){s._OnBitmapChanged(["0",""+_,3,s._ImgManager.getCurrentImageIndex(),s._ImgManager.count()])})}):_e.Promise.resolve()}},{key:"TagImages",value:function(s,u){var l=this;if(l._resetErr(),!l._isValid())return!1;var d=!0,f=l._ImgManager.count();return v.isArray(s)?v.isString(u)&&""!=u?(v.each(s,function(g){if(isNaN(g)||g<0||g>=f)return We(l),d=!1}),d&&l._ImgManager.addImageTag(s,u)):(Ee(l,-2394,"Invalid tag name."),!1):(Ha(l),!1)}},{key:"ClearImageTags",value:function(s){var u=this;return u._resetErr(),!!u._isValid()&&(-1==s||s>=u._getHowManyImagesInBuffer()?(We(u),!1):u._ImgManager.removeImageTag(s))}},{key:"SetDefaultTag",value:function(s){var u=this;return u._resetErr(),!!u._isValid()&&u._ImgManager.setDefaultTag(s)}},{key:"FilterImagesByTag",value:function(s,u,l){var d=this;return d._resetErr(),!!d._isValid()&&d._ImgManager.showImagesByFilter(s,u,l)}},{key:"ClearFilter",value:function(){var s=this;return s._resetErr(),!!s._isValid()&&s._ImgManager.clearFilter()}},{key:"CreateDocument",value:function(s){var u=this;return u._resetErr(),!!u._isValid()&&(s&&""!=s?v.isString(s)?u._ImgManager.CreateFile(s):(up(u),!1):(v.isNumber(s)?up(u):rw(u),!1))}},{key:"OpenDocument",value:function(s){var u=this;return u._resetErr(),!!u._isValid()&&(s&&""!=s?v.isString(s)?u._ImgManager.OpenFile(s):(up(u),!1):(v.isNumber(s)?up(u):rw(u),!1))}},{key:"RemoveDocument",value:function(s){var u=this;if(u._resetErr(),!u._isValid())return!1;var l=u._ImgManager.GetImageIdsByFileName(s);return l.length>0&&u._innerFun("RemoveAllSelectedImages",we(l.join(","))),u._ImgManager.RemoveFile(s)}},{key:"RenameDocument",value:function(s,u){var l=this;return l._resetErr(),!!l._isValid()&&(v.isString(s)&&v.isString(u)?s&&""!=s&&u&&""!=u?l._ImgManager.RenameFile(s,u):(rw(l),!1):(up(l),!1))}},{key:"GetDocumentInfoList",value:function(){var s=this;return s._resetErr(),!!s._isValid()&&s._ImgManager.GetFileInfoList()}},{key:"Invert",value:function(s,u,l){var d=this;if(v.isFunction(u))return d.InvertAsync(s).then(u,function(g){d._wrappeAsyncFailed(d,g,l)}),!0;var f=parseInt(s);return!!Mr(d,f,l)&&xp(d,"Invert",f,u,l,!1,!0)}},{key:"InvertAsync",value:function(s){var u=this,l=parseInt(s);if(u._resetErr(),!u._isValid())return _e.Promise.reject({code:u._errorCode,message:u._errorString});if(isNaN(l))return Dt(u),_e.Promise.reject({code:u._errorCode,message:u._errorString});if(l<0||l>=u._ImgManager.count())return We(u),_e.Promise.reject({code:u._errorCode,message:u._errorString});var d=u._ImgManager.convertClientIndexToServerId(l);return-1==d?(We(u),_e.Promise.reject({code:u._errorCode,message:u._errorString})):u._innerFunV2("Invert",we(d),!0).then(function(f){var g=1==f;if(!g)throw{code:u._errorCode,message:u._errorString};return mt.refreshImageAfterInvokeFun(u,l),g})}},{key:"RenameTag",value:function(s,u){var l=this;return l._resetErr(),!!l._isValid()&&(v.isUndefined(s)?(xi(l),!1):0==s.length?(Ee(l,-2517,"Old tag name is required."),!1):v.isUndefined(u)||0==u.length?(Ee(l,-2518,"New tag name is required."),!1):l._ImgManager.renameTag(s,u))}},{key:"RemoveTag",value:function(s,u){var l=this;return l._resetErr(),!!l._isValid()&&(v.isUndefined(s)||0==s.length?(xi(l),!1):v.isUndefined(u)||v.isArray(u)?l._ImgManager.removeTag(s,u):(Ha(l),!1))}},{key:"GetTagList",value:function(){var s=this;return s._resetErr(),!!s._isValid()&&s._ImgManager.getTagList()}},{key:"GetTagListByIndex",value:function(s){var u=this;return u._resetErr(),!!u._isValid()&&u._ImgManager.getTagListByIndex(s)}},{key:"GetImageBitDepthAsync",value:function(s){var u=this;if(u._resetErr(),!u._isValid())return _e.Promise.reject({code:u._errorCode,message:u._errorString});var l=parseInt(s);if(isNaN(l))return Dt(u),_e.Promise.reject({code:u._errorCode,message:u._errorString});if(l<0||l>=u._ImgManager.count())return We(u),_e.Promise.reject({code:u._errorCode,message:u._errorString});var d=u._ImgManager.convertClientIndexToServerId(l);return-1==d?(We(u),_e.Promise.reject({code:u._errorCode,message:u._errorString})):u._innerFunV2("GetImageBitDepth",we(d))}},{key:"GetImageWidthAsync",value:function(s){var u=this;if(u._resetErr(),!u._isValid())return _e.Promise.reject({code:u._errorCode,message:u._errorString});var l=parseInt(s);if(isNaN(l))return Dt(u),_e.Promise.reject({code:u._errorCode,message:u._errorString});if(l<0||l>=u._ImgManager.count())return We(u),_e.Promise.reject({code:u._errorCode,message:u._errorString});var d=u._ImgManager.convertClientIndexToServerId(l);return-1==d?(We(u),_e.Promise.reject({code:u._errorCode,message:u._errorString})):u._innerFunV2("GetImageWidth",we(d))}},{key:"GetImageHeightAsync",value:function(s){var u=this;if(u._resetErr(),!u._isValid())return _e.Promise.reject({code:u._errorCode,message:u._errorString});var l=parseInt(s);if(isNaN(l))return Dt(u),_e.Promise.reject({code:u._errorCode,message:u._errorString});if(l<0||l>=u._ImgManager.count())return We(u),_e.Promise.reject({code:u._errorCode,message:u._errorString});var d=u._ImgManager.convertClientIndexToServerId(l);return-1==d?(We(u),_e.Promise.reject({code:u._errorCode,message:u._errorString})):u._innerFunV2("GetImageHeight",we(d))}},{key:"GetImageSizeAsync",value:function(s,u,l){var d=this;if(d._resetErr(),!d._isValid())return _e.Promise.reject({code:d._errorCode,message:d._errorString});var f=parseInt(s);if(isNaN(f))return Dt(d),_e.Promise.reject({code:d._errorCode,message:d._errorString});if(f<0||f>=d._ImgManager.count())return We(d),_e.Promise.reject({code:d._errorCode,message:d._errorString});var g=d._ImgManager.convertClientIndexToServerId(f);return-1==g?(We(d),_e.Promise.reject({code:d._errorCode,message:d._errorString})):d._innerFunV2("GetImageSize",we(g,u,l))}},{key:"GetImageSizeWithSpecifiedTypeAsync",value:function(s,u){var l=this;if(l._resetErr(),!l._isValid())return _e.Promise.reject({code:l._errorCode,message:l._errorString});var d=parseInt(s);if(isNaN(d))return Dt(l),_e.Promise.reject({code:l._errorCode,message:l._errorString});if(d<0||d>=l._ImgManager.count())return We(l),_e.Promise.reject({code:l._errorCode,message:l._errorString});var f=l._ImgManager.convertClientIndexToServerId(d);return-1==f?(We(l),_e.Promise.reject({code:l._errorCode,message:l._errorString})):l._innerFunV2("GetImageSizeWithSpecifiedType",we(f,u))}},{key:"GetImageXResolutionAsync",value:function(s){var u=this;if(u._resetErr(),!u._isValid())return _e.Promise.reject({code:u._errorCode,message:u._errorString});var l=parseInt(s);if(isNaN(l))return Dt(u),_e.Promise.reject({code:u._errorCode,message:u._errorString});if(l<0||l>=u._ImgManager.count())return We(u),_e.Promise.reject({code:u._errorCode,message:u._errorString});var d=u._ImgManager.convertClientIndexToServerId(l);return-1==d?(We(u),_e.Promise.reject({code:u._errorCode,message:u._errorString})):u._innerFunV2("GetImageXResolution",we(d))}},{key:"GetImageYResolutionAsync",value:function(s){var u=this;if(u._resetErr(),!u._isValid())return _e.Promise.reject({code:u._errorCode,message:u._errorString});var l=parseInt(s);if(isNaN(l))return Dt(u),_e.Promise.reject({code:u._errorCode,message:u._errorString});if(l<0||l>=u._ImgManager.count())return We(u),_e.Promise.reject({code:u._errorCode,message:u._errorString});var d=u._ImgManager.convertClientIndexToServerId(l);return-1==d?(We(u),_e.Promise.reject({code:u._errorCode,message:u._errorString})):u._innerFunV2("GetImageYResolution",we(d))}},{key:"ChangeBrightnessAsync",value:function(s,u){var l=this,d=parseInt(s);if(!l._isValid())return _e.Promise.reject({code:l._errorCode,message:l._errorString});if(u<-1e3||u>1e3)return Tr(l),_e.Promise.reject({code:l._errorCode,message:l._errorString});var f=l._ImgManager.convertClientIndexToServerId(d);return-1==f?(We(l),_e.Promise.reject({code:l._errorCode,message:l._errorString})):l._innerFunV2("ChangeBrightness",we(f,u))}},{key:"ChangeContrastAsnyc",value:function(s,u){var l=this,d=parseInt(s);if(!l._isValid())return _e.Promise.reject({code:l._errorCode,message:l._errorString});if(u<-1e3||u>1e3)return Tr(l),_e.Promise.reject({code:l._errorCode,message:l._errorString});var f=l._ImgManager.convertClientIndexToServerId(d);return-1==f?(We(l),_e.Promise.reject({code:l._errorCode,message:l._errorString})):l._innerFunV2("ChangeContrast",we(f,u))}},{key:"GetImageAsync",value:function(s,u,l,d,f){var g=this;if(g._resetErr(),!g._isValid())return _e.Promise.reject({code:g._errorCode,message:g._errorString});var _=parseInt(s);if(isNaN(_))return Dt(g),_e.Promise.reject({code:g._errorCode,message:g._errorString});if(_<0||_>=g._ImgManager.count())return We(g),_e.Promise.reject({code:g._errorCode,message:g._errorString});var T,S=g._ImgManager.convertClientIndexToServerId(_);return-1==S?(We(g),_e.Promise.reject({code:g._errorCode,message:g._errorString})):(v.isNumber(u)?T=we(S,u):v.isNumber(l)&&v.isNumber(d)?T=we(S,l,d):v.isNumber(f)&&(T=we(S,-1,-1,f)),g._sendDataByHttpAsync("GetImageByIndex",T,"blob"))}},{key:"GetImageInfoAsync",value:function(s){var u=this;if(u._resetErr(),!u._isValid())return _e.Promise.reject({code:u._errorCode,message:u._errorString});var l=parseInt(s);if(isNaN(l))return Dt(u),_e.Promise.reject({code:u._errorCode,message:u._errorString});if(l<0||l>=u._ImgManager.count())return We(u),_e.Promise.reject({code:u._errorCode,message:u._errorString});var d=u._ImgManager.convertClientIndexToServerId(l);return-1==d?(We(u),_e.Promise.reject({code:u._errorCode,message:u._errorString})):u._innerFunV2("GetImageInfo",we(d)).then(function(f){var g=0,_=0,T=f;if(v.isArray(f)&&1==f.length&&(T=f[0]),v.isString(T)){var S=T.split(",");g=parseInt(S[0]),_=parseInt(S[1])}return{width:g,height:_}})}},{key:"IfShowUI",get:function(){return this._resetErr(),this._isValid()?this._innerFun("IfShowUI"):ve},set:function(s){this._setIfShowUI(s)}},{key:"IfShowFileDialog",get:function(){return this._getIfShowFileDialog()},set:function(s){this._setIfShowFileDialog(s)}},{key:"checkErrorString",value:function(){var s=this._errorCode;return-2115===s||(-2003!==s||F.DWT.IfHttpPostErrorNoWindow||window.open("","ErrorMessage","height=500,width=750,top=0,left=0,toolbar=no,menubar=no,scrollbars=no, resizable=no,location=no, status=no")?.document.writeln(this.__HTTPPostResponseString),0===s)}},{key:"OverlayRectangle",value:function(s,u,l,d,f,g,_){var T,S=this;return S._resetErr(),!!S._isValid()&&(S._isNoViewer()?S._nouiNotSupport("OverlayRectangle"):u>d||l>f||u==d&&l==f?(Ee(S,-2375,"The left or top or right or bottom you entered is invalid."),!1):(T=v.isNumber(g)?Go.getColor(g):g,S._UIView.OverlayRectangle(s,u,l,d,f,T,_)))}},{key:"SetViewMode",value:function(s,u){var l=this;if(l._resetErr(),!l._isValid())return!1;if(l._isNoViewer())return l._nouiNotSupport("SetViewMode");if(v.isString(s)||v.isString(u)||s<-1&&u<-1)return Tr(l),ve;var d=Math.floor(s),f=Math.floor(u);return l._UIView.SetViewMode(d,f),!0}},{key:"ShowImageEditor",value:function(s,u,l,d){var f=this;return f._resetErr(),!!f._isValid()&&(f._isNoViewer()?f._nouiNotSupport("ShowImageEditor"):uo.isServerInvalid(f)?ve:f._UIView.GetWebViewer().webViewer.imageEditor?f.ShowImageEditorEx(-1,-1,-1,-1,3):s&&u&&l?f.ShowImageEditorEx(-1,-1,u,l,0,!0,s,d):f.ShowImageEditorEx(-1,-1,-1,-1,0,!1))}},{key:"ShowImageEditorEx",value:function(s,u,l,d,f,g,_,T){var S=this;return S._resetErr(),!!S._isValid()&&(S._isNoViewer()?S._nouiNotSupport("ShowImageEditorEx"):S._UIView.ShowImageEditorEx(s,u,l,d,f,g,_,T))}},{key:"SetSelectedImageArea",value:function(s,u,l,d,f){var g=this;if(g._resetErr(),!g._isValid())return!1;if(g._isNoViewer())return g._nouiNotSupport("SetSelectedImageArea");var _=parseInt(s);return isNaN(_)||_<0||_>=g._ImgManager.count()?(We(g),!1):!uo.isServerInvalid(g)&&g._UIView.SetSelectedImageArea(u,l,d,f)}},{key:"first",value:function(){var s=this,u=s._ImgManager.count();return s._resetErr(),!!s._isValid()&&(s._isNoViewer()?s._nouiNotSupport("first"):(u>0&&(s._UIView.Go(0),Vs.__innerRefreshFromUIView(s,s._ImgManager.getCurrentImageIndex())),Ne))}},{key:"previous",value:function(){var s=this,u=s._ImgManager.count();return s._resetErr(),!!s._isValid()&&(s._isNoViewer()?s._nouiNotSupport("previous"):(u>0&&(s._UIView.__Previous(),Vs.__innerRefreshFromUIView(s,s._ImgManager.getCurrentImageIndex())),Ne))}},{key:"next",value:function(){var s=this,u=s._ImgManager.count();return s._resetErr(),!!s._isValid()&&(s._isNoViewer()?s._nouiNotSupport("next"):(u>0&&(s._UIView.__Next(),Vs.__innerRefreshFromUIView(s,s._ImgManager.getCurrentImageIndex())),Ne))}},{key:"last",value:function(){var s=this,u=s._ImgManager.count();return s._resetErr(),!!s._isValid()&&(s._isNoViewer()?s._nouiNotSupport("last"):(u>0&&(s._UIView.Go(u-1),Vs.__innerRefreshFromUIView(s,s._ImgManager.getCurrentImageIndex())),Ne))}},{key:"_isBindViewer",value:function(){return!(!this._viewer||!this._viewer.webViewer)&&this._viewer.webViewer.bindViewUI}},{key:"_isNoViewer",value:function(){return!this._isBindViewer()}},{key:"_innerUnbindViewer",value:function(s){var u=this;u.__funResize&&(v.removeEventListener(window,"resize",u.__funResize),u.__funResize=ve),u._viewer&&(s?u._viewer.webViewer.dispose():u._viewer.unbind()),u._config.container=null}},{key:"_unload_viewer",value:function(){var s=this;s._isBindViewer()&&s._innerUnbindViewer(!0),s._ImgManager&&(s._ImgManager.dispose(),s._ImgManager=null),s._UIView&&(s._UIView.dispose(),s._UIView=null),s._viewer=null}},{key:"_innerRefreshUI",value:function(s,u,l,d,f){var g=this;return 4==f&&g._isBindViewer()&&(0==g._ImgManager.bImageJustChangedInEditor?g._ImgManager.bImageChangedInViewer=!0:(g._ImgManager.bImageJustChangedInEditor=!1,g._ImgManager.bImageChangedInViewer=!1)),l&&g._ImgManager.refresh(s,g._ImgManager.count(),!0,d),v.isFunction(g.__OnRefreshUI)&&g.__OnRefreshUI(g._ImgManager.getCurrentImageIndex(),g._ImgManager.count()),!0}}],[{key:"ProcessGetBlobByQueue",value:function(){if(a._getblob_queue.length>0&&!a._processing_getblob_queue){a._processing_getblob_queue=!0;var s=a._getblob_queue.shift(),u=s[0],d=s[2];u._convertToBlobForUpload(F.DWT.EnumDWT_ImageType.IT_PNG,[s[1]],!1,4,function(f,g,_){var T=_[1][0],S={imageId:T,uuid:u._ImgManager.convertServerIdToUUID(T),imageUrl:URL.createObjectURL(f),minImageUrl:URL.createObjectURL(f)};f=null,u._ImgManager.UpdateImage(S,d),a._processing_getblob_queue=!1,setTimeout(a.ProcessGetBlobByQueue,0)},function(f){a._processing_getblob_queue=!1,setTimeout(a.ProcessGetBlobByQueue,0)})}}},{key:"_getContainer",value:function(s){return s._containerElement}},{key:"_setContainer",value:function(s,u){return s._containerElement=u}},{key:"_closeImageEditorUI",value:function(s){if(v.isFunction(s.__CloseImageEditorUI))try{s.__CloseImageEditorUI()}catch(u){mn(u)}}}]),a}(Gme);function xp(r,i,a,s,u,l,d){var f,g=r._ImgManager.convertClientIndexToServerId(a);if(-1==g)return We(r),v.isFunction(u)&&u(r._errorCode,r._errorString),!1;if(f=r._innerFun(i,we(g)),l)return f;var _=1==f;return _?(d&&(mt.refreshImageAfterInvokeFun(r,a),r.getView().ClearSelectedAreas()),v.isFunction(s)&&s()):v.isFunction(u)&&u(r._errorCode,r._errorString),_}function iE(r){var i=r,a=window;if(a.ShadowRoot)for(;i;){if(i instanceof a.ShadowRoot)return i;i=i.parentNode}return null}function oE(r){var i=window;return!!(i.ShadowRoot&&r instanceof i.ShadowRoot)}at(va,"_processing_getblob_queue",!1),at(va,"_getblob_queue",[]),function(r){r.normal=0,r.balance=1}(Uv||(Uv={}));var ss,sE,aE,uE,cE,lE,dE,fE,hE,pE,gE,mE,_E,vE,yE,SE,IE,TE,CE,bE,wE,DE,eu,Fp,fo=tn,js={background:"#434246",topMenuBorder:"",innerBorder:"",promptToSaveChange:!0,buttons:pr.buttons,dialogText:pr.dialogText},$me=function(){function r(a,s){n(this,r);var u=this;u._stwain=a,u._ImgManager=a._ImgManager,u.zoomInStep=1.2,u.zoomOutStep=.8,u.MIN_ZOOM=.02,u.MAX_ZOOM=65,u.MAX_ROWS=128,u.MAX_COLUMNS=128,u.__MousewheelValue=0,this._Init(s)}var i;return c(r,[{key:"_Init",value:function(a){var s=this;if(s.borderWidth=v.isUndefined(a.borderWidth)?1:a.borderWidth,s.BackgroundColorByDefault=a.BackgroundColor?a.BackgroundColor:"#FFFFFF",a.BackgroundColor=s.BackgroundColorByDefault,s.BackgroundFillColor=s.BackgroundColorByDefault,a.onTopImageInTheViewChanged=function(l){v.isFunction(s._stwain.__OnTopImageInTheViewChanged)&&s._stwain.__OnTopImageInTheViewChanged(l.index,l.bByScrollBar)},a.onGetImageInfo=function(l){return{width:s._stwain.GetImageWidth(l),height:-1}},!s._stwain._viewer&&F.DWT.UseDefaultViewer){var u={viewerContainer:{},viewerEvents:{topPageChanged:function(l,d){s.__topPageChanged(l,d,s)},click:function(l){s.__click(l,s)},rightclick:function(l){s.__rightclick(l,s)},dblclick:function(l){s.__dblclick(l,s)},mousemove:function(l){s.__mousemove(l,s)},pageAreaSelected:function(l,d){s.__pageAreaSelected(l,d,s)},pageAreaUnselected:function(l){s.__pageAreaUnselected(l,s)},dragdone:function(l){s.__dragdone(l,s)},onDrop:function(l){s.__onDrop(l,s)},pageChange:function(l){s.__pageChange(l,s)},bufferChanged:function(l,d){s.__bufferChanged(s,l,d)},onBind:function(l){s.__onBindViewer(l)},onUnBind:function(l){s.__onUnBindViewer(l)},save:function(l,d,f,g){return s.__save(s,l,d,f,g)}},viewerError:{setError:function(l,d){s.__setError(l,d,s)}},imageEditorEvents:{acquire:function(){s.__acquire(s)},loadImage:function(){s.__loadImage(s)},deskew:function(l,d){s.__deskew(s,l,d)},removeImage:function(){s.__remove(s)},removeAllImage:function(){s.__removeAll(s)},close:function(){s.__close(s)}},imageEditorServerCallback:{rotateRight:function(){s.__rotateRightForServer(s)},rotate:function(l,d,f){s.__rotateForServer(s,l,d,f)},rotateLeft:function(){s.__rotateLeftForServer(s)},deskew:function(l){s.__deskewForServer(s)},crop:function(l){s.__cropForServer(s,l)},erase:function(l){s.__eraseForServer(s,l)},changeImageSize:function(l,d,f){s.__changeImageSizeForServer(s,l,d,f)},flip:function(){s.__flipForServer(s)},mirror:function(){s.__mirrorForServer(s)},restore:function(l){s.__restoreForServer(s,l)},save:function(l){return s.__saveForServer(s,l)}}};a.Container&&(_e.isNodeList(a.Container)||v.isArray(a.Container)&&a.Container.length>0)&&(u.viewerContainer={container:a.Container[0],width:a.Width,height:a.Height}),s._stwain._viewer=new F.DWTViewer(Pp._getBuffer(s._ImgManager),u)}else a.Container&&(_e.isNodeList(a.Container)||v.isArray(a.Container)&&a.Container.length>0)&&s.__onBindViewer(a.Container[0]);s.__InitEvents(a)}},{key:"dispose",value:function(){}},{key:"__InitEvents",value:function(a){var s=this;v.isFunction(a.onTopImageInTheViewChanged)&&(s.onTopImageInTheViewChanged=a.onTopImageInTheViewChanged),v.isFunction(a.onGetImageInfo)&&(s.onGetImageInfo=a.onGetImageInfo),v.isFunction(a.onZoomChanged)&&(s.onZoomChanged=a.onZoomChanged),v.isFunction(a.onMouseMove)&&(s.onMouseMove=a.onMouseMove),v.isFunction(a.onMouseClick)&&(s.onMouseClick=a.onMouseClick),v.isFunction(a.onMouseRightClick)&&(s.onMouseRightClick=a.onMouseRightClick),v.isFunction(a.onMouseDoubleClick)&&(s.onMouseDoubleClick=a.onMouseDoubleClick),v.isFunction(a.onImageAreaDeSelected)&&(s.onImageAreaDeSelected=a.onImageAreaDeSelected),v.isFunction(a.onImageAreaSelected)&&(s.onImageAreaSelected=a.onImageAreaSelected),v.isFunction(a.onBufferChanged)&&(s.onBufferChanged=a.onBufferChanged),v.isFunction(a.onSelected)&&(s.onSelected=a.onSelected),v.isFunction(a.onRefreshUI)&&(s.onRefreshUI=a.onRefreshUI),v.isFunction(a.onResetCurrentIndex)&&(s.onResetCurrentIndex=a.onResetCurrentIndex)}},{key:"GetWebViewer",value:function(){return this._stwain._viewer}},{key:"SetSelectedImageArea",value:function(a,s,u,l){if(null!=this.GetWebViewer()){var d=[],f={};return f.left=a,f.top=s,f.right=u,f.bottom=l,d.push(f),this.GetWebViewer().setSelectedAreas(d)}return!1}},{key:"OverlayRectangle",value:function(a,s,u,l,d,f,g){var _=this;return!!_._stwain._isNoViewer()||null!=_.GetWebViewer()&&_.GetWebViewer().webViewer.overlayRectangle(a,s,u,l,d,f,g)}},{key:"ChangeImageViewSize",value:function(a,s){var u=this;return a>=0&&(u.GetWebViewer(),u.GetWebViewer().width=a),s>=0&&(u.GetWebViewer(),u.GetWebViewer().height=s),!0}},{key:"ChangeSize",value:function(a,s){var u=this;return u.GetWidth()!=a&&u.SetWidth(a),u.GetHeight()!=a&&u.SetHeight(a),!0}},{key:"GetWidth",value:function(){return this.GetWebViewer().width}},{key:"SetWidth",value:function(a){var s=a;return this._stwain._isNoViewer()||(this.GetWebViewer().width=s),!0}},{key:"GetHeight",value:function(){return this.GetWebViewer().height}},{key:"SetHeight",value:function(a){var s=a;return this._stwain._isNoViewer()||(this.GetWebViewer().height=s),!0}},{key:"SetViewMode",value:function(a,s){var u=this;return u._stwain._isNoViewer()?u._stwain._nouiNotSupport("SetViewMode"):u.GetWebViewer().setViewMode(a,s)}},{key:"SetIfFitWindowAndType",value:function(a){var s;if(null!=this.GetWebViewer()){switch(a){case 1:s="height";break;case 2:s="width";break;default:s="window"}this.GetWebViewer().fitWindow(s)}return!0}},{key:"GetAllowMultiSelect",value:function(){return!this._stwain._isNoViewer()&&this.GetWebViewer().selectionMode}},{key:"SetAllowMultiSelect",value:function(a){return this._stwain._isNoViewer()||(this.GetWebViewer().selectionMode=a?1:0),!0}},{key:"GetFitWindowType",value:function(){return this._stwain._isNoViewer(),0}},{key:"SetSelectionRectAspectRatio",value:function(a){return this.GetWebViewer().selectionRectAspectRatio=a,!0}},{key:"GetSelectionRectAspectRatio",value:function(){return this.GetWebViewer().selectionRectAspectRatio}},{key:"SetFitWindowType",value:function(a){return this._stwain._isNoViewer()||this.SetIfFitWindowAndType(a),!0}},{key:"GetIfFitWindow",value:function(){return this._stwain._isNoViewer(),!0}},{key:"SetIfFitWindow",value:function(a){var s=this;return s._stwain._isNoViewer()||(a?s.GetWebViewer().fitWindow("window"):s.GetWebViewer().zoom=1),!0}},{key:"GetImageMargin",value:function(){return this._stwain._isNoViewer()?0:this.GetWebViewer().pageMargin}},{key:"SetImageMargin",value:function(a){return this._stwain._isNoViewer()||(this.GetWebViewer().pageMargin=a),!0}},{key:"GetSelectionImageBorderColor",value:function(){return this.GetWebViewer().selectedPageBorder}},{key:"SetSelectionImageBorderColor",value:function(a){var s=a;return v.isNumber(s)&&(s=Go.getColor(s)),-1==s.indexOf("1px solid")&&(s="1px solid "+s),this.GetWebViewer().selectedPageBorder=s,!0}},{key:"GetZoom",value:function(){return this.GetWebViewer().zoom}},{key:"SetZoom",value:function(a,s,u){var l=this;return a<l.MIN_ZOOM&&(a=l.MIN_ZOOM),a>l.MAX_ZOOM&&(a=l.MAX_ZOOM),null!=l.GetWebViewer()&&(l.GetWebViewer().zoom=a),!0}},{key:"ZoomIn",value:function(a,s){var u=this,l=u._ImgManager.getImageIdMap(u._ImgManager.convertClientIndexToServerId(u._ImgManager.getCurrentImageIndex())),d=u.GetWebViewer().zoom,f=Math.floor(100*d*u.zoomInStep)+1;return 1<f&&f<2501?ei(l.imageWidth*d)>15e3||ei(l.imageHeight*d)>15e3?(tn.output(u,pr.errorMessages.limitReachedForZoomIn),alert(pr.errorMessages.limitReachedForZoomIn),!1):(u.SetZoom(f/100,a,s),!0):(tn.output(u,pr.errorMessages.limitReachedForZoomIn),alert(pr.errorMessages.limitReachedForZoomIn),!1)}},{key:"ZoomOut",value:function(){var a=this,s=a.GetWebViewer().zoom,u=Math.floor(100*s*a.zoomOutStep)-1;return 1<u&&u<6501?(a.SetZoom(u/100),!0):(tn.output(a,pr.errorMessages.limitReachedForZoomOut),alert(pr.errorMessages.limitReachedForZoomOut),!1)}},{key:"GetMouseShape",value:function(){return this._stwain._isNoViewer()?0:"crosshair"!=this.GetWebViewer().cursor}},{key:"SetMouseShape",value:function(a){return this._stwain._isNoViewer()||(this.GetWebViewer().cursor=a?"pointer":"crosshair"),!0}},{key:"GetShowPageNumber",value:function(){return!this._stwain._isNoViewer()&&this.GetWebViewer().showPageNumber}},{key:"SetShowPageNumber",value:function(a){return this._stwain._isNoViewer()||(this.GetWebViewer().showPageNumber=a),!0}},{key:"SetBackgroundFillColor",value:function(a){return this.BackgroundFillColor=a,!0}},{key:"GetBackgroundColor",value:function(){return this.GetWebViewer().background}},{key:"SetBackgroundColor",value:function(a){var s=a;return this._stwain._isNoViewer()||(this.GetWebViewer().background=s),!0}},{key:"Go",value:function(a){return this.GetWebViewer().gotoPage(a)}},{key:"__Previous",value:function(){return this.Go(this._ImgManager.getCurrentImageIndex()-1),!0}},{key:"__Next",value:function(){return this.Go(this._ImgManager.getCurrentImageIndex()+1),!0}},{key:"__fireEvent",value:function(a,s){if(v.isFunction(this[a]))try{return this[a](s)}catch(u){mn(u)}return!0}},{key:"GetIfAutoScroll",value:function(){return this.GetWebViewer().ifAutoScroll}},{key:"SetIfAutoScroll",value:function(a){return this.GetWebViewer().ifAutoScroll=a,!0}},{key:"BindView",value:function(a){var s,u=a;return v.isString(a)?u=v.get(a):v.isDOM(u)&&(u.id&&""!=u.id||(u.id=["dwt_",v.getRandom()].join(""))),(s=this.GetWebViewer().bind(u))&&this.GetWebViewer().show(),s}},{key:"GetIfShowVideoContainer",value:function(){var a=this,s=a.GetWebViewer();return v.isUndefined(s)?(F.DWT.UseDefaultViewer?iw(a._stwain):Y_(a._stwain),!1):s.webViewer.getIfShowVideoContainer()}},{key:"ShowVideoContainer",value:function(a){var s=this,u=s.GetWebViewer();return v.isUndefined(u)?(F.DWT.UseDefaultViewer?iw(s._stwain):Y_(s._stwain),!1):u.webViewer.showVideoContainer(a)}},{key:"UpdateVideoContainer",value:function(a){var s=this,u=s.GetWebViewer();return v.isUndefined(u)?(F.DWT.UseDefaultViewer?iw(s._stwain):Y_(s._stwain),!1):u.webViewer.updateVideoImage(a)}},{key:"ClearSelectedAreas",value:function(){var a=this.GetWebViewer();if(a)return a.clearSelectedAreas()}},{key:"OnCloseImageEditor",value:function(){return!!this.GetWebViewer().webViewer.imageEditor&&(this.GetWebViewer().createImageEditor().dispose(),!0)}},{key:"ShowImageEditorEx",value:function(a,s,u,l,d,f,g,_){var T=this;if(this._stwain._isNoViewer())return T._stwain._nouiNotSupport("ShowImageEditorEx");switch(d){case 0:case 1:case 2:break;case 3:if(T.OnCloseImageEditor())return!0}var S,I=document;if(va._getContainer(T._stwain)==g&&(f=!1),g){var b=F.DWT.ContainerMap;if(b){var D,R=Object.keys(b);for(D=0;D<R.length;D++)if(R[D]==g.id){f=!1;break}}}if(f&&g&&(v.isDOM(g)?S=g:oE(g)?(S=document.createElement("div"),g.appendChild(S)):(S=I.getElementById(g))&&"DIV"!=S.nodeName&&(f=!1)),f&&g&&v.isDOM(g)){var L=iE(g);if(L){var x,U,Y=W.timestamp;return(x=I.createElement("link")).href=[F.DWT.ResourcesPath,"/src/dynamsoft.webtwain.viewer.css",Y].join(""),x.rel="stylesheet",x.async=!0,(U=I.createElement("link")).href=[F.DWT.ResourcesPath,"/src/dynamsoft.webtwain.css",Y].join(""),U.rel="stylesheet",U.async=!0,v.scriptOnload(x,function(){v.scriptOnload(U,function(){return T.ShowImageEditor(S,f,u,l)}),L.appendChild(U)}),L.appendChild(x),!0}}return T.ShowImageEditor(S,f,u,l)}},{key:"ShowImageEditor",value:function(a,s,u,l){var d=this;return a&&u&&l?(js.element=a,js.width=u,js.height=l):(js.element=void 0,js.width=void 0,js.height=void 0),js.border=d.GetWebViewer().border,js.selectionRectAspectRatio=d.GetWebViewer().selectionRectAspectRatio,js.workMode=Uv.normal,d.GetWebViewer().createImageEditor(js),0!=d._stwain.ErrorCode&&(d.GetWebViewer().webViewer.imageEditor&&d.GetWebViewer().webViewer.imageEditor.dispose(),d.GetWebViewer().createImageEditor(js)),d.GetWebViewer().webViewer.imageEditor&&d.GetWebViewer().webViewer.imageEditor.show(),!0}},{key:"__topPageChanged",value:function(a,s,u){u.__fireEvent("onTopImageInTheViewChanged",{index:a,bByScrollBar:s})}},{key:"__click",value:function(a,s){s.__fireEvent("onMouseClick",{e:a,x:a.imageX,y:a.imageY,index:s._ImgManager.getCurrentImageIndex()})}},{key:"__rightclick",value:function(a,s){s.__fireEvent("onMouseRightClick",{e:a,x:a.imageX,y:a.imageY,index:s._ImgManager.getCurrentImageIndex()})}},{key:"__dblclick",value:function(a,s){s.__fireEvent("onMouseDoubleClick",{e:a,x:a.imageX,y:a.imageY,index:s._ImgManager.getCurrentImageIndex()})}},{key:"__mousemove",value:function(a,s){s.__fireEvent("onMouseMove",{e:a,x:a.imageX,y:a.imageY,index:s._ImgManager.getCurrentImageIndex()})}},{key:"__pageAreaSelected",value:function(a,s,u){var l=u,d=1;if(s&&s.length>0){var f=s[s.length-1];f.index&&(d=ei(f.index)+1),l.__fireEvent("onImageAreaSelected",{index:a,left:ei(f.x),top:ei(f.y),right:ei(f.x+f.width),bottom:ei(f.y+f.height),areaIndex:d})}}},{key:"__pageAreaUnselected",value:function(a,s){s.__fireEvent("onImageAreaDeSelected",a)}},{key:"__dragdone",value:function(a,s){var u=s;v.isFunction(u._stwain.__OnIndexChangeDragDropDone)&&u._stwain.__OnIndexChangeDragDropDone(a)}},{key:"__onDrop",value:function(a,s){var u=s;u.GetWebViewer().webViewer.acceptDrop&&u.__dropEvent(a,u)}},{key:"__dropEvent",value:function(a,s){var u,l,d=s,f=null,g=function(L){d._stwain._bIfShowProgressBar&&W.closeProgress(null),L&&tn.output(null,L+" was loaded successfully!"),null!=f&&d._stwain.Addon.PDF.SetConvertMode(f)},_=function(L,x,U){d._stwain._bIfShowProgressBar&&W.closeProgress(null),d._stwain._errorCode=L,d._stwain._errorString=x,IV({code:L,message:x}),U&&tn.output(null,U+" failed to load. Error code: "+L+"Error String: "+x),null!=f&&d._stwain.Addon.PDF.SetConvertMode(f)};try{for(var T=a.dataTransfer.files,S=0;S<T.length;S++){if(0==(u=T[S]).type.length){var I=void 0,b=u.name.indexOf(".");switch(b>0&&(I=u.name.substring(b+1)),I){case"bmp":l=F.DWT.EnumDWT_ImageType.IT_BMP;break;case"jpg":case"jpeg":l=F.DWT.EnumDWT_ImageType.IT_JPG;break;case"tif":case"tiff":l=F.DWT.EnumDWT_ImageType.IT_TIF;break;case"png":l=F.DWT.EnumDWT_ImageType.IT_PNG;break;case"pdf":l=F.DWT.EnumDWT_ImageType.IT_PDF;break;case"jp2":case"j2k":case"j2c":l=F.DWT.EnumDWT_ImageType.IT_J2K;break;default:tn.output(null,u.name+" failed to load because the file type is not supported!"),l=-1,JB(d._stwain)}}else switch(u.type){case"image/bmp":l=F.DWT.EnumDWT_ImageType.IT_BMP;break;case"image/jpg":case"image/jpeg":l=F.DWT.EnumDWT_ImageType.IT_JPG;break;case"image/tif":case"image/tiff":l=F.DWT.EnumDWT_ImageType.IT_TIF;break;case"image/png":l=F.DWT.EnumDWT_ImageType.IT_PNG;break;case"application/pdf":l=F.DWT.EnumDWT_ImageType.IT_PDF;break;case"image/jp2":l=F.DWT.EnumDWT_ImageType.IT_J2K;break;default:tn.output(null,u.name+" failed to load because the file type is not supported!"),l=-1,JB(d._stwain)}if(-1!=l){if(d._stwain._bIfShowProgressBar?W.showProgress(d._stwain,"DropLoading",d._stwain.IfShowCancelDialogWhenImageTransfer):W.hideProgress(),d._stwain._OnPercentDone([0,-1,Tn.Loading]),d._stwain.Addon&&d._stwain.Addon.PDF){var D=!1;if(Ye.checkProductKey(d._stwain,{PDFRasterizer:!0},!0)){f=d._stwain.Addon.PDF.GetConvertMode();var R=d._stwain._innerFun("GetAddOnVersion",we("pdf"));(j.bMac||j.bLinux||R==io.PdfVersion)&&(D=!0),D&&d._stwain.Addon.PDF.SetConvertMode(Cr.CM_RENDERALL)}}!function(L){var x=new FileReader;x.readAsDataURL(L),x.onload=function(){var U=d._stwain.__GetLoadEventsNum();d._stwain.__LoadImageFromBytesV2(L,l,"",!0,0,L.size,!1,U,g,_)},x.onerror=function(U){Nc(d._stwain),d._stwain._errorString=this.error,_(d._stwain._errorCode,d._stwain._getErrorString())}}(T[S])}}}catch(L){v.error(L.stack||L,"error"),setTimeout(function(){throw L},0)}}},{key:"__pageChange",value:function(a,s){var u,l=s,d=l._ImgManager.count();v.log("OnPagination"),d<=0?Gi(l._stwain):1!=d&&(!/^\d+$/.test(a)||a<=0?alert(pr.errorMessages.invalidIndex):((u=ei(a)-1)<0?u=0:u>=d&&(u=d-1),u!=l._ImgManager.getCurrentImageIndex()&&l.GetWebViewer().gotoPage(u)))}},{key:"__bufferChanged",value:function(a,s,u){var l,d=a,f=[],g=-1,_=[];s.operation&&(s.action=s.operation);for(var T=0;T<d._ImgManager.count();T++)(l=d._ImgManager.getCustomDataByIndex(T))&&l.imageId&&f.push(zu(l.imageId));if(s.imageIds=f,s.curIndex>=0&&(l=d._ImgManager.getCustomDataByIndex(s.curIndex))&&l.imageId&&(g=zu(l.imageId)),s.currentId=g,s.afterStatus.selectedUids)for(var S=0;S<s.afterStatus.selectedUids.length;S++)if(s.afterStatus.selectedUids[S]){var I=d._ImgManager.getIndexByUid(s.afterStatus.selectedUids[S]);I>=0&&(l=d._ImgManager.getCustomDataByIndex(I))&&l.imageId&&_.push(zu(l.imageId))}s.selectedIds=_,v.mix(s,{}),delete s.uids,delete s.currentUid,delete s.selectedUids,delete s.afterStatus,delete s.beforeStatus,delete s.operation,delete s.curIndex,delete s.docUid,d.__fireEvent("onBufferChanged",s)}},{key:"__setError",value:function(a,s,u){var l=u;l._stwain._errorCode=a,l._stwain._errorString=s}},{key:"__acquire",value:function(a){var s=a;try{var u=!1;1==F.DWT.IfConfineMaskWithinTheViewer&&(F.DWT.IfConfineMaskWithinTheViewer=!1,u=!0),s._stwain.SelectSourceAsync().then(function(){return s._stwain.AcquireImageAsync({IfShowUI:!0,IfCloseSourceAfterAcquire:!0})}).then(function(){u&&(F.DWT.IfConfineMaskWithinTheViewer=!0)}).catch(function(l){v.log("User did not select a source"),u&&(F.DWT.IfConfineMaskWithinTheViewer=!0)})}catch{}}},{key:"__loadImage",value:function(a){try{var s=a,u=null,l=null;if(F.DWT.IfConfineMaskWithinTheViewer&&(l=!0,F.DWT.IfConfineMaskWithinTheViewer=!1),s._stwain._containerElement=void 0,s._stwain.IfShowFileDialog=!0,s._stwain.Addon&&s._stwain.Addon.PDF){var d=!1;if(Ye.checkProductKey(s._stwain,{PDFRasterizer:!0},!0)){u=s._stwain.Addon.PDF.GetConvertMode();var f=s._stwain._innerFun("GetAddOnVersion",we("pdf"));(j.bMac||j.bLinux||f==io.PdfVersion)&&(d=!0),d&&s._stwain.Addon.PDF.SetConvertMode(Cr.CM_RENDERALL)}}s._stwain.LoadImageEx("",5,function(){v.log("Loaded an image successfully."),null!=l&&(F.DWT.IfConfineMaskWithinTheViewer=l),null!=u&&s._stwain.Addon.PDF.SetConvertMode(u)},function(g,_){v.log("Loading failed with the error: "+_),null!=l&&(F.DWT.IfConfineMaskWithinTheViewer=l),null!=u&&s._stwain.Addon.PDF.SetConvertMode(u)})}catch{}}},{key:"__print",value:function(a){var s=a;tr(s._stwain),s._ImgManager.getCurrentImageIndex()<0||s._ImgManager.PrintCurrentImage()}},{key:"__save",value:(i=Ae(A.mark(function a(s,u,l,d,f){var g,_,T,S,I;return A.wrap(function(b){for(;;)switch(b.prev=b.next){case 0:if(_="save",tr((g=s)._stwain),!(g._ImgManager.count()<=0||g._ImgManager.getCurrentImageIndex()<0)){b.next=4;break}return b.abrupt("return");case 4:return g._stwain._containerElement=void 0,T=g.__getViewerElement(g,f),nr(_,T),b.prev=7,S=this._ImgManager.getIndexByUid(u),I=this._ImgManager.convertClientIndexToServerId(S),b.next=12,g._stwain._updateImage(I,l,d);case 12:if(!b.sent){b.next=19;break}return b.next=16,g._stwain.__saveToViewerAfterUpdate(u,d);case 16:b.next=20;break;case 19:case 20:b.next=24;break;case 22:b.prev=22,b.t0=b.catch(7);case 24:return b.prev=24,l=null,Cn(_),b.finish(24);case 28:return b.abrupt("return",void 0);case 29:case"end":return b.stop()}},a,this,[[7,22,24,28]])})),function(a,s,u,l,d){return i.apply(this,arguments)})},{key:"__getViewerElement",value:function(a,s){var u,l=a;if(s)if(l.GetWebViewer().webViewer.imageEditor){var d=l.GetWebViewer().createImageEditor();u="dwt-viewer-imageEditor-fullScreen"==d.inner.containerElement.className?{_containerElement:document.body}:{_containerElement:d.inner.containerElement}}else u=l._stwain;else u=l._stwain;return u}},{key:"__deskew",value:function(a,s,u){var l=this,d="deskew";tr(l._stwain);var f=l._ImgManager.getCurrentImageIndex();if(l._ImgManager.count()<=0||f<0)fo.output(l,"No image in Buffer");else{var g=l.__getViewerElement(l,!0);nr(d,g),l._stwain.GetSkewAngleFromBinaryAsync(f,s,function(_){u(_[0]),Cn(d)},function(){Cn(d)})}}},{key:"__remove",value:function(a){var s=this;tr(s._stwain),s._ImgManager.count()<=0||s._ImgManager.getCurrentImageIndex()<0?fo.output(s,"No image in Buffer"):s._stwain.RemoveAllSelectedImages()}},{key:"__removeAll",value:function(a){var s=this;tr(s._stwain),s._ImgManager.count()<=0||s._ImgManager.getCurrentImageIndex()<0?fo.output(s,"No image in Buffer"):s._stwain.RemoveAllImages()}},{key:"__onBindViewer",value:function(a){a&&(va._setContainer(this._stwain,a),a.id&&(F.DWT.ContainerMap[a.id]=this._stwain))}},{key:"__onUnBindViewer",value:function(a){if(a){var s=va._getContainer(this._stwain);s&&(s.innerHTML=""),va._setContainer(this._stwain,null),a.id&&a.id in F.DWT.ContainerMap&&delete F.DWT.ContainerMap[a.id]}}},{key:"__close",value:function(a){tr(this._stwain),va._closeImageEditorUI(this._stwain)}},{key:"__rotateRightForServer",value:function(a){var s=this;tr(s._stwain);var u=s._ImgManager.getCurrentImageIndex();s._ImgManager.count()<=0||u<0?fo.output(s,"No image in Buffer"):s._stwain.RotateRight(u)}},{key:"__rotateForServer",value:function(a,s,u,l){var d=this;tr(d._stwain);var f=d._ImgManager.getCurrentImageIndex();d._ImgManager.count()<=0||f<0?fo.output(d,"No image in Buffer"):d._stwain.RotateEx(f,s,l,u)}},{key:"__rotateLeftForServer",value:function(a){var s=this;tr(s._stwain);var u=s._ImgManager.getCurrentImageIndex();s._ImgManager.count()<=0||u<0?fo.output(s,"No image in Buffer"):s._stwain.RotateLeft(u)}},{key:"__deskewForServer",value:function(a){var s=this;tr(s._stwain);var u=s._ImgManager.getCurrentImageIndex();s._ImgManager.count()<=0||u<0?fo.output(s,"No image in Buffer"):s._stwain.GetSkewAngleAsync(u).then(function(l){s._stwain.RotateEx(u,l,!0,1,function(){},function(){})})}},{key:"__cropForServer",value:function(a,s){var u=this;tr(u._stwain);var l=u._ImgManager.getCurrentImageIndex();if(u._ImgManager.count()<=0||l<0)fo.output(u,"No image in Buffer");else{var d=s.left,f=s.top,g=d+s.width,_=f+s.height;u._stwain.Crop(l,ei(d),ei(f),ei(g),ei(_))}}},{key:"__eraseForServer",value:function(a,s){var u=this;tr(u._stwain);var l=u._ImgManager.getCurrentImageIndex();if(u._ImgManager.count()<=0||l<0)fo.output(u,"No image in Buffer");else{var d=s.left,f=s.top,g=d+s.width,_=f+s.height;u._stwain.CutFrameToClipboard(l,ei(d),ei(f),ei(g),ei(_))}}},{key:"__changeImageSizeForServer",value:function(a,s,u,l){var d=this;tr(d._stwain);var f=d._ImgManager.getCurrentImageIndex();d._ImgManager.count()<=0||f<0?fo.output(d,"No image in Buffer"):d._stwain.ChangeImageSize(f,s,u,l)}},{key:"__flipForServer",value:function(a){var s=this;tr(s._stwain);var u=s._ImgManager.getCurrentImageIndex();s._ImgManager.count()<=0||u<0?fo.output(s,"No image in Buffer"):s._stwain.Flip(u)}},{key:"__mirrorForServer",value:function(a){var s=this;tr(s._stwain);var u=s._ImgManager.getCurrentImageIndex();s._ImgManager.count()<=0||u<0?fo.output(s,"No image in Buffer"):s._stwain.Mirror(u)}},{key:"__restoreForServer",value:function(a,s){var u=a;if(tr(u._stwain),u._ImgManager.count()<=0||u._ImgManager.getCurrentImageIndex()<0)fo.output(u,"No image in Buffer");else{var l=u._ImgManager.getIndexByUid(s);l>=0&&u.__RestoreImageInner(u,l)}}},{key:"__saveForServer",value:function(a,s){var u=a;return new _e.Promise(function(l,d){tr(u._stwain),(u._ImgManager.count()<=0||u._ImgManager.getCurrentImageIndex()<0)&&(fo.output(u,"No image in Buffer"),l());var f=u._ImgManager.getIndexByUid(s);f>=0?u.__SaveImageInner(u,f,!0,function(){l()}):l()})}},{key:"__RestoreImageInner",value:function(a,s,u){var l=a,d=l._ImgManager.getImageIdMap(l._ImgManager.convertClientIndexToServerId(s));l.__OnGetImageFromServerForEdit(d,s,1,function(f,g,_){if(f&&(v.log("__RestoreImageInner: "+[f.guid].join(",")),l._ImgManager.UpdateImage(f,_)),-1==(f&&f.imageId))return u&&u(),!1;u&&u()})}},{key:"__SaveImageInner",value:function(a,s,u,l){var d=a,f=d._ImgManager.getImageIdMap(d._ImgManager.convertClientIndexToServerId(s));return d.__OnGetImageFromServerForEdit(f,s,2,function(g,_,T){return g&&(1==u&&(v.log("__SaveImageInner: "+[g.guid].join(",")),d._ImgManager.getCurrentImageIndex()==_&&d._ImgManager.UpdateImage(g,T)),-1==g.imageId)?(l&&l(),!1):(l&&l(),!0)}),!0}},{key:"__OnGetImageFromServerForEdit",value:function(a,s,u,l){var d=this;if(l&&d._ImgManager.getBaseUrl){var f=d._ImgManager.convertClientIndexToServerId(s);if(-1==f)return!1;F.DWT.ConnectWithSocket?l():Os({method:"GET",xhrFields:{withCredentials:!0},url:tn.getUrlByAct(d._ImgManager.getBaseUrl,f,u),onSuccess:function(g){var _;a.ticks=Date.now(),_=F.navInfoSync.bMobile?tn.getImageUrl(d._ImgManager.getBaseUrl,f,Math.round(a.iImageControlWidth*devicePixelRatio),Math.round(a.iImageControlHeight*devicePixelRatio),a.ticks):tn.getImageUrl(d._ImgManager.getBaseUrl,f,ei(a.iImageControlWidth),ei(a.iImageControlHeight),a.ticks),a.imageUrl=tn.getImageUrl(d._ImgManager.getBaseUrl,f,-1,-1,a.ticks),a.minImageUrl=_;var T=d._ImgManager.GetMetaDataByIndex(s);if(T){var S=d._ImgManager.getImageIdMap(f);T.width=S&&S.width?S.width:d._stwain.GetImageWidth(s),T.height=S&&S.height?S.height:d._stwain.GetImageHeight(s)}l(a,s,T)},onError:function(){}})}return!0}}]),r}(),h3=function(r){di(a,r);var i=function qme(r){var i=function(){if(typeof Reflect>"u"||!Reflect.construct||Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch{return!1}}();return function(){var a,s=yt(r);if(i){var u=yt(this).constructor;a=Reflect.construct(s,arguments,u)}else a=s.apply(this,arguments);return fi(this,a)}}(a);function a(s,u){var l;n(this,a);var d=pt(l=i.call(this,u));return d._stwain=s,d.bImageJustChangedInEditor=!1,d.bImageChangedInViewer=!1,l}return c(a,[{key:"getUidByIndex",value:function(s){return this._buffer.getUidByIndex(s)}},{key:"dispose",value:function(){return!0}},{key:"unshift",value:function(s,u,l){return this._updateUIAfterAdd(0,u,l)}},{key:"append",value:function(s,u,l){var d,f,g,_,T=this;f=this._buffer.isActiveFile&&l.currentFileName&&l.currentFileName.length>0?T.getCountByDocumentName(l.currentFileName):T.count(),g=T.getCurrentImageIndex();for(var S=f-1;S>=s;S--)_=T.convertClientIndexToServerId(S),T.removeByServerId(_,S);return f<s?T._updateUIAfterAdd(d=f,u,l,!0):(_=T.convertClientIndexToServerId(d=g>=f-1?0:g+1),T.removeByServerId(_,d),T._updateUIAfterAdd(d,u,l,d==s-1))}},{key:"insertBefore",value:function(s,u,l,d){var f,g=1*s;return(g<0||g>u)&&(g=-1),g>=(f=this.count())&&(g=f),this._updateUIAfterAdd(g,l,d,!1)}},{key:"exists",value:function(s){return!v.isUndefined(this.getImageIdMap(s))}},{key:"insert",value:function(s,u,l,d){var f,g=1*s;return(g<0||g>u)&&(g=-1),g>=(f=this.count())&&(g=f),this._updateUIAfterAdd(g,l,d,!1)}},{key:"moveImage",value:function(s,u,l){return this._buffer.moveImage(s,u)}},{key:"switchImage",value:function(s,u){return this._buffer.switchImage(s,u)}},{key:"refresh",value:function(s,u,l,d){var f,g=this,_=1*s;if(l){var T=g.count();if(_<0||_>T)return!1;f=g.convertClientIndexToServerId(_),g.SetDataImageControl(_,f,d)}return!0}},{key:"setSelectedClientIndexArray",value:function(s){return this._buffer.selectImages(s)}},{key:"getSelectedClientIndexArray",value:function(s){return this._buffer.getSelectedImagesIndices()}},{key:"showImagesByFilter",value:function(s,u,l){return this._buffer.filterImagesByTag(s,u,l)}},{key:"clearFilter",value:function(){return this._buffer.clearFilter()}},{key:"removeImageTag",value:function(s){return this._buffer.removeImageTag(s)}},{key:"addImageTag",value:function(s,u){return this._buffer.tagImages(s,u)}},{key:"getCurrentTag",value:function(){var s;return 0==(s=this._buffer.getCurrentTag())?"":s}},{key:"renameTag",value:function(s,u){return this._buffer.renameTag(s,u)}},{key:"removeTag",value:function(s,u){return this._buffer.removeTag(s,u)}},{key:"getTagList",value:function(){return this._buffer.getTagList()}},{key:"getTagListByIndex",value:function(s){return this._buffer.getTagListByIndex(s)}},{key:"OpenFile",value:function(s){return this._buffer.openDocument(s)}},{key:"CreateFile",value:function(s){return this._buffer.createDocument(s)}},{key:"GetCurrentFileName",value:function(){return this._buffer.getCurrentFileName()}},{key:"RemoveFile",value:function(s){return this._buffer.removeDocument(s)}},{key:"RenameFile",value:function(s,u){return this._buffer.renameDocument(s,u)}},{key:"GetFileInfoList",value:function(){return this._buffer.getDocumentInfoList()}},{key:"GetImageIdsByFileName",value:function(s){var u,l,d=this,f=[];return(u=d.GetFileInfoList())?v.each(u,function(g){if(s==g.name){if(l={},g.chs)for(var _=0;_<g.chs.length;_++){var T=g.chs[_];T&&(l=d._buffer.getCustomDataByUid(T))&&f.push(l.imageId)}return!1}}):f=[],f}},{key:"insertImage",value:function(s,u,l){this._buffer.insertImage(u,s,l)}},{key:"GetMetaDataByIndex",value:function(s){return this._buffer.getMetadataByUid(this._buffer.getUidByIndex(s))}},{key:"RefreshAllImages",value:function(s,u){for(var l,d,f,g=this,_=0;_<g.count();_++){l=g.convertClientIndexToServerId(_);var T=g.getImageIdMap(l);T&&(d=F.navInfoSync.bMobile?tn.getImageUrl(g._baseUrl,l,Math.round(s*devicePixelRatio),Math.round(u*devicePixelRatio),Date.now()):tn.getImageUrl(g._baseUrl,l,s,u,Date.now()),T.minImageUrl=d,f=g.GetMetaDataByIndex(_),g._buffer.updateImage(T,f))}}},{key:"UpdateData",value:function(s,u){var d=this.getImageIdMap(s);return d&&this._buffer.updateImage(d,u),!0}},{key:"UpdateImage",value:function(s,u){return this._buffer.updateImage(s,u),!0}},{key:"SetDataImageControl",value:function(s,u,l){var d,f=this;return-1!=u&&((d=f.getImageIdMap(u))||((d=new hv).imageId=u,f._imageIdMap[u]=d),null!=d&&(d.bIsDirty=!0),f.__GetImageAndAttach(d,u,!0,!1,!1,s,l),!0)}},{key:"__AttachImages",value:function(){var s,u,l,d=this;u=d.count();for(var f=0;f<u;f++)(s=d.convertClientIndexToServerId(f))>=0&&(l=d.getImageIdMap(s),d.__GetImageAndAttach(l,s,!0,!1,!1,0))}},{key:"AddImage",value:function(s,u,l,d){var f,g=1*s;return-1!=u&&((f=new hv).bIsDirty=!0,f.imageId=u,this._imageIdMap[u]=f,u>=0&&this.__GetImageAndAttach(f,u,!1,!0,d,g,l),!0)}},{key:"OnGetImageByURL",value:function(s,u,l,d,f,g,_,T){return u.imageUrl&&""!=u.imageUrl?(u.iImageControlWidth=l,u.iImageControlHeight=d,u.bAddImage=f,u.bAppendImage=g,u.index=_,this._attachImagesForControl(u,T),!0):this.OnGetImageFromServer(s,u,l,d,f,g,_,T)}},{key:"OnGetImageFromServer",value:function(s,u,l,d,f,g,_,T){var S,I,b=this,D=b._baseUrl;if(D){if(-1==s)return!1;u.bIsDirty&&(u.ticks=Date.now()),v.isUndefined(l)&&(l=-1),v.isUndefined(d)&&(d=-1),u.iImageControlWidth=l,u.iImageControlHeight=d,u.bAddImage=f,u.bAppendImage=g,u.index=_,F.DWT.ConnectWithSocket&&b._stwain._isBindViewer()?(b._attachImagesForControl(u,T),va._getblob_queue.push([b._stwain,s,T]),va.ProcessGetBlobByQueue()):(S=tn.getImageUrl(D,s,-1,-1,u.ticks),I=F.navInfoSync.bMobile?tn.getImageUrl(D,s,Math.round(l*devicePixelRatio),Math.round(d*devicePixelRatio),u.ticks):tn.getImageUrl(D,s,l,d,u.ticks),u.imageUrl=S,u.minImageUrl=I,b._attachImagesForControl(u,T))}return!0}},{key:"getBaseUrl",get:function(){return this._baseUrl}},{key:"_attachImagesForControl",value:function(s,u){var l=this;return s.bAddImage?u.currentFileName.length>0?l._buffer.addImage(s,u,u.currentFileName):l._buffer.addImage(s,u):l._buffer.updateImage(s,u),!0}},{key:"_updateUIAfterAdd",value:function(s,u,l,d){return!(u<0)&&this.AddImage(s,u,l,d)}},{key:"__GetImageAndAttach",value:function(s,u,l,d,f,g,_){var T,S,b,I=this;I._stwain._isBindViewer()?(S=I._stwain.Viewer.height>=400?I._stwain.Viewer.height:400,T=I._stwain.Viewer.width>=400?I._stwain.Viewer.width:400):(T=-1,S=-1),b=!!l||1==s.bIsDirty;var D=I.getImageIdMap(u).uuid;D&&s.iImageControlWidth==T&&s.iImageControlHeight==S&&0==s.bIsDirty||I.__SetArrayControlLoadImage(D,u,s,T,S,I._attachImagesForControl,b,d,f,g,_)}},{key:"__SetArrayControlLoadImage",value:function(s,u,l,d,f,g,_,T,S,I,b){_?this.OnGetImageFromServer(u,l,d,f,T,S,I,b):this.OnGetImageByURL(u,l,d,f,T,S,I,b)}},{key:"GetServerIdList",value:function(){var s,u,l,d=this,f=[];if(s=d._buffer.getDocumentContents(d._buffer.getCurrentDocument()))for(var g=0;g<s.length;g++)(u=s[g])&&(l=d._buffer.getCustomDataByUid(u))&&f.push(l.imageId);return f}}]),a}(Pp),Qme=function(r){var i=r||window.event,a=!0;return v.each(_e.Events.registedObjs,function(s){v.each(_e.Events.registedClass,function(u){if(s instanceof u&&s.bFocus&&s.handlerKeyDown&&!(a=s.handlerKeyDown(i)))return!1})}),a};function EE(r,i){for(var a in i)i.hasOwnProperty(a)&&!v.isUndefined(i[a])&&(r.hasOwnProperty(a)&&!v.isUndefined(r[a])||(r[a]=i[a]));return r}Od(function(){v.addEventListener(document.documentElement,"keydown",Qme)}),EE(F.DWT,io),EE(F.DWT,Ede),F.DWT.CertificateConfig?EE(F.DWT.CertificateConfig,Gb):F.DWT.CertificateConfig=Gb,F.DWT.RegisterEvent=function(r,i){return v.isFunction(i)&&("OnWebTwainReady"!==r&&"OnWebTwainError"!==r&&"OnWebTwainInitMessage"!==r||(F.DWT[r]=i)),!0},function(r){r.CAP_NONE=0,r.CAP_XFERCOUNT=1,r.ICAP_COMPRESSION=256,r.ICAP_PIXELTYPE=257,r.ICAP_UNITS=258,r.ICAP_XFERMECH=259,r.CAP_AUTHOR=4096,r.CAP_CAPTION=4097,r.CAP_FEEDERENABLED=4098,r.CAP_FEEDERLOADED=4099,r.CAP_TIMEDATE=4100,r.CAP_SUPPORTEDCAPS=4101,r.CAP_EXTENDEDCAPS=4102,r.CAP_AUTOFEED=4103,r.CAP_CLEARPAGE=4104,r.CAP_FEEDPAGE=4105,r.CAP_REWINDPAGE=4106,r.CAP_INDICATORS=4107,r.CAP_SUPPORTEDCAPSEXT=4108,r.CAP_PAPERDETECTABLE=4109,r.CAP_UICONTROLLABLE=4110,r.CAP_DEVICEONLINE=4111,r.CAP_AUTOSCAN=4112,r.CAP_THUMBNAILSENABLED=4113,r.CAP_DUPLEX=4114,r.CAP_DUPLEXENABLED=4115,r.CAP_ENABLEDSUIONLY=4116,r.CAP_CUSTOMDSDATA=4117,r.CAP_ENDORSER=4118,r.CAP_ALARMS=4120,r.CAP_ALARMVOLUME=4121,r.CAP_AUTOMATICCAPTURE=4122,r.CAP_TIMEBEFOREFIRSTCAPTURE=4123,r.CAP_TIMEBETWEENCAPTURES=4124,r.CAP_CLEARBUFFERS=4125,r.CAP_MAXBATCHBUFFERS=4126,r.CAP_DEVICETIMEDATE=4127,r.CAP_POWERSUPPLY=4128,r.CAP_CAMERAPREVIEWUI=4129,r.CAP_SERIALNUMBER=4132,r.CAP_PRINTER=4134,r.CAP_PRINTERENABLED=4135,r.CAP_PRINTERINDEX=4136,r.CAP_PRINTERMODE=4137,r.CAP_PRINTERSTRING=4138,r.CAP_PRINTERSUFFIX=4139,r.CAP_LANGUAGE=4140,r.CAP_FEEDERALIGNMENT=4141,r.CAP_FEEDERORDER=4142,r.CAP_REACQUIREALLOWED=4144,r.CAP_BATTERYMINUTES=4146,r.CAP_BATTERYPERCENTAGE=4147,r.CAP_CAMERASIDE=4148,r.CAP_SEGMENTED=4149,r.CAP_CAMERAENABLED=4150,r.CAP_CAMERAORDER=4151,r.CAP_MICRENABLED=4152,r.CAP_FEEDERPREP=4153,r.CAP_FEEDERPOCKET=4154,r.CAP_AUTOMATICSENSEMEDIUM=4155,r.CAP_CUSTOMINTERFACEGUID=4156,r.ICAP_AUTOBRIGHT=4352,r.ICAP_BRIGHTNESS=4353,r.ICAP_CONTRAST=4355,r.ICAP_CUSTHALFTONE=4356,r.ICAP_EXPOSURETIME=4357,r.ICAP_FILTER=4358,r.ICAP_FLASHUSED=4359,r.ICAP_GAMMA=4360,r.ICAP_HALFTONES=4361,r.ICAP_HIGHLIGHT=4362,r.ICAP_IMAGEFILEFORMAT=4364,r.ICAP_LAMPSTATE=4365,r.ICAP_LIGHTSOURCE=4366,r.ICAP_ORIENTATION=4368,r.ICAP_PHYSICALWIDTH=4369,r.ICAP_PHYSICALHEIGHT=4370,r.ICAP_SHADOW=4371,r.ICAP_FRAMES=4372,r.ICAP_XNATIVERESOLUTION=4374,r.ICAP_YNATIVERESOLUTION=4375,r.ICAP_XRESOLUTION=4376,r.ICAP_YRESOLUTION=4377,r.ICAP_MAXFRAMES=4378,r.ICAP_TILES=4379,r.ICAP_BITORDER=4380,r.ICAP_CCITTKFACTOR=4381,r.ICAP_LIGHTPATH=4382,r.ICAP_PIXELFLAVOR=4383,r.ICAP_PLANARCHUNKY=4384,r.ICAP_ROTATION=4385,r.ICAP_SUPPORTEDSIZES=4386,r.ICAP_THRESHOLD=4387,r.ICAP_XSCALING=4388,r.ICAP_YSCALING=4389,r.ICAP_BITORDERCODES=4390,r.ICAP_PIXELFLAVORCODES=4391,r.ICAP_JPEGPIXELTYPE=4392,r.ICAP_TIMEFILL=4394,r.ICAP_BITDEPTH=4395,r.ICAP_BITDEPTHREDUCTION=4396,r.ICAP_UNDEFINEDIMAGESIZE=4397,r.ICAP_EXTIMAGEINFO=4399,r.ICAP_MINIMUMHEIGHT=4400,r.ICAP_MINIMUMWIDTH=4401,r.ICAP_AUTODISCARDBLANKPAGES=4404,r.ICAP_FLIPROTATION=4406,r.ICAP_BARCODEDETECTIONENABLED=4407,r.ICAP_SUPPORTEDBARCODETYPES=4408,r.ICAP_BARCODEMAXSEARCHPRIORITIES=4409,r.ICAP_BARCODESEARCHPRIORITIES=4410,r.ICAP_BARCODESEARCHMODE=4411,r.ICAP_BARCODEMAXRETRIES=4412,r.ICAP_BARCODETIMEOUT=4413,r.ICAP_ZOOMFACTOR=4414,r.ICAP_PATCHCODEDETECTIONENABLED=4415,r.ICAP_SUPPORTEDPATCHCODETYPES=4416,r.ICAP_PATCHCODEMAXSEARCHPRIORITIES=4417,r.ICAP_PATCHCODESEARCHPRIORITIES=4418,r.ICAP_PATCHCODESEARCHMODE=4419,r.ICAP_PATCHCODEMAXRETRIES=4420,r.ICAP_PATCHCODETIMEOUT=4421,r.ICAP_FLASHUSED2=4422,r.ICAP_IMAGEFILTER=4423,r.ICAP_NOISEFILTER=4424,r.ICAP_OVERSCAN=4425,r.ICAP_AUTOMATICBORDERDETECTION=4432,r.ICAP_AUTOMATICDESKEW=4433,r.ICAP_AUTOMATICROTATE=4434,r.ICAP_JPEGQUALITY=4435,r.ICAP_FEEDERTYPE=4436,r.ICAP_ICCPROFILE=4437,r.ICAP_AUTOSIZE=4438,r.ICAP_AUTOMATICCROPUSESFRAME=4439,r.ICAP_AUTOMATICLENGTHDETECTION=4440,r.ICAP_AUTOMATICCOLORENABLED=4441,r.ICAP_AUTOMATICCOLORNONCOLORPIXELTYPE=4442,r.ICAP_COLORMANAGEMENTENABLED=4443,r.ICAP_IMAGEMERGE=4444,r.ICAP_IMAGEMERGEHEIGHTTHRESHOLD=4445,r.ICAP_SUPPORTEDEXTIMAGEINFO=4446}(ss||(ss={})),function(r){r.TWLG_DAN=0,r.TWLG_DUT=1,r.TWLG_ENG=2,r.TWLG_FCF=3,r.TWLG_FIN=4,r.TWLG_FRN=5,r.TWLG_GER=6,r.TWLG_ICE=7,r.TWLG_ITN=8,r.TWLG_NOR=9,r.TWLG_POR=10,r.TWLG_SPA=11,r.TWLG_SWE=12,r.TWLG_USA=13,r.TWLG_USERLOCALE=-1,r.TWLG_AFRIKAANS=14,r.TWLG_ALBANIA=15,r.TWLG_ARABIC=16,r.TWLG_ARABIC_ALGERIA=17,r.TWLG_ARABIC_BAHRAIN=18,r.TWLG_ARABIC_EGYPT=19,r.TWLG_ARABIC_IRAQ=20,r.TWLG_ARABIC_JORDAN=21,r.TWLG_ARABIC_KUWAIT=22,r.TWLG_ARABIC_LEBANON=23,r.TWLG_ARABIC_LIBYA=24,r.TWLG_ARABIC_MOROCCO=25,r.TWLG_ARABIC_OMAN=26,r.TWLG_ARABIC_QATAR=27,r.TWLG_ARABIC_SAUDIARABIA=28,r.TWLG_ARABIC_SYRIA=29,r.TWLG_ARABIC_TUNISIA=30,r.TWLG_ARABIC_UAE=31,r.TWLG_ARABIC_YEMEN=32,r.TWLG_BASQUE=33,r.TWLG_BYELORUSSIAN=34,r.TWLG_BULGARIAN=35,r.TWLG_CATALAN=36,r.TWLG_CHINESE=37,r.TWLG_CHINESE_HONGKONG=38,r.TWLG_CHINESE_PRC=39,r.TWLG_CHINESE_SINGAPORE=40,r.TWLG_CHINESE_SIMPLIFIED=41,r.TWLG_CHINESE_TAIWAN=42,r.TWLG_CHINESE_TRADITIONAL=43,r.TWLG_CROATIA=44,r.TWLG_CZECH=45,r.TWLG_DANISH=0,r.TWLG_DUTCH=1,r.TWLG_DUTCH_BELGIAN=46,r.TWLG_ENGLISH=2,r.TWLG_ENGLISH_AUSTRALIAN=47,r.TWLG_ENGLISH_CANADIAN=48,r.TWLG_ENGLISH_IRELAND=49,r.TWLG_ENGLISH_NEWZEALAND=50,r.TWLG_ENGLISH_SOUTHAFRICA=51,r.TWLG_ENGLISH_UK=52,r.TWLG_ENGLISH_USA=13,r.TWLG_ESTONIAN=53,r.TWLG_FAEROESE=54,r.TWLG_FARSI=55,r.TWLG_FINNISH=4,r.TWLG_FRENCH=5,r.TWLG_FRENCH_BELGIAN=56,r.TWLG_FRENCH_CANADIAN=3,r.TWLG_FRENCH_LUXEMBOURG=57,r.TWLG_FRENCH_SWISS=58,r.TWLG_GERMAN=6,r.TWLG_GERMAN_AUSTRIAN=59,r.TWLG_GERMAN_LUXEMBOURG=60,r.TWLG_GERMAN_LIECHTENSTEIN=61,r.TWLG_GERMAN_SWISS=62,r.TWLG_GREEK=63,r.TWLG_HEBREW=64,r.TWLG_HUNGARIAN=65,r.TWLG_ICELANDIC=7,r.TWLG_INDONESIAN=66,r.TWLG_ITALIAN=8,r.TWLG_ITALIAN_SWISS=67,r.TWLG_JAPANESE=68,r.TWLG_KOREAN=69,r.TWLG_KOREAN_JOHAB=70,r.TWLG_LATVIAN=71,r.TWLG_LITHUANIAN=72,r.TWLG_NORWEGIAN=9,r.TWLG_NORWEGIAN_BOKMAL=73,r.TWLG_NORWEGIAN_NYNORSK=74,r.TWLG_POLISH=75,r.TWLG_PORTUGUESE=10,r.TWLG_PORTUGUESE_BRAZIL=76,r.TWLG_ROMANIAN=77,r.TWLG_RUSSIAN=78,r.TWLG_SERBIAN_LATIN=79,r.TWLG_SLOVAK=80,r.TWLG_SLOVENIAN=81,r.TWLG_SPANISH=11,r.TWLG_SPANISH_MEXICAN=82,r.TWLG_SPANISH_MODERN=83,r.TWLG_SWEDISH=12,r.TWLG_THAI=84,r.TWLG_TURKISH=85,r.TWLG_UKRANIAN=86,r.TWLG_ASSAMESE=87,r.TWLG_BENGALI=88,r.TWLG_BIHARI=89,r.TWLG_BODO=90,r.TWLG_DOGRI=91,r.TWLG_GUJARATI=92,r.TWLG_HARYANVI=93,r.TWLG_HINDI=94,r.TWLG_KANNADA=95,r.TWLG_KASHMIRI=96,r.TWLG_MALAYALAM=97,r.TWLG_MARATHI=98,r.TWLG_MARWARI=99,r.TWLG_MEGHALAYAN=100,r.TWLG_MIZO=101,r.TWLG_NAGA=102,r.TWLG_ORISSI=103,r.TWLG_PUNJABI=104,r.TWLG_PUSHTU=105,r.TWLG_SERBIAN_CYRILLIC=106,r.TWLG_SIKKIMI=107,r.TWLG_SWEDISH_FINLAND=108,r.TWLG_TAMIL=109,r.TWLG_TELUGU=110,r.TWLG_TRIPURI=111,r.TWLG_URDU=112,r.TWLG_VIETNAMESE=113}(sE||(sE={})),function(r){r.TWSS_NONE=0,r.TWSS_A4LETTER=1,r.TWSS_B5LETTER=2,r.TWSS_USLETTER=3,r.TWSS_USLEGAL=4,r.TWSS_A5=5,r.TWSS_B4=6,r.TWSS_B6=7,r.TWSS_USLEDGER=9,r.TWSS_USEXECUTIVE=10,r.TWSS_A3=11,r.TWSS_B3=12,r.TWSS_A6=13,r.TWSS_C4=14,r.TWSS_C5=15,r.TWSS_C6=16,r.TWSS_4A0=17,r.TWSS_2A0=18,r.TWSS_A0=19,r.TWSS_A1=20,r.TWSS_A2=21,r.TWSS_A4=1,r.TWSS_A7=22,r.TWSS_A8=23,r.TWSS_A9=24,r.TWSS_A10=25,r.TWSS_ISOB0=26,r.TWSS_ISOB1=27,r.TWSS_ISOB2=28,r.TWSS_ISOB3=12,r.TWSS_ISOB4=6,r.TWSS_ISOB5=29,r.TWSS_ISOB6=7,r.TWSS_ISOB7=30,r.TWSS_ISOB8=31,r.TWSS_ISOB9=32,r.TWSS_ISOB10=33,r.TWSS_JISB0=34,r.TWSS_JISB1=35,r.TWSS_JISB2=36,r.TWSS_JISB3=37,r.TWSS_JISB4=38,r.TWSS_JISB5=2,r.TWSS_JISB6=39,r.TWSS_JISB7=40,r.TWSS_JISB8=41,r.TWSS_JISB9=42,r.TWSS_JISB10=43,r.TWSS_C0=44,r.TWSS_C1=45,r.TWSS_C2=46,r.TWSS_C3=47,r.TWSS_C7=48,r.TWSS_C8=49,r.TWSS_C9=50,r.TWSS_C10=51,r.TWSS_USSTATEMENT=52,r.TWSS_BUSINESSCARD=53,r.TWSS_MAXSIZE=54}(aE||(aE={})),function(r){r.TWON_NONE=0,r.TWON_ARRAY=3,r.TWON_ENUMERATION=4,r.TWON_ONEVALUE=5,r.TWON_RANGE=6}(uE||(uE={})),function(r){r.TWTY_INT8=0,r.TWTY_INT16=1,r.TWTY_INT32=2,r.TWTY_UINT8=3,r.TWTY_UINT16=4,r.TWTY_int=5,r.TWTY_BOOL=6,r.TWTY_FIX32=7,r.TWTY_FRAME=8,r.TWTY_STR32=9,r.TWTY_STR64=10,r.TWTY_STR128=11,r.TWTY_STR255=12}(cE||(cE={})),function(r){r.TWFA_NONE=0,r.TWFA_LEFT=1,r.TWFA_CENTER=2,r.TWFA_RIGHT=3}(lE||(lE={})),function(r){r.TWFO_FIRSTPAGEFIRST=0,r.TWFO_LASTPAGEFIRST=1}(dE||(dE={})),function(r){r.TWPR_IMPRINTERTOPBEFORE=0,r.TWPR_IMPRINTERTOPAFTER=1,r.TWPR_IMPRINTERBOTTOMBEFORE=2,r.TWPR_IMPRINTERBOTTOMAFTER=3,r.TWPR_ENDORSERTOPBEFORE=4,r.TWPR_ENDORSERTOPAFTER=5,r.TWPR_ENDORSERBOTTOMBEFORE=6,r.TWPR_ENDORSERBOTTOMAFTER=7}(fE||(fE={})),function(r){r.TWPM_SINGLESTRING=0,r.TWPM_MULTISTRING=1,r.TWPM_COMPOUNDSTRING=2}(hE||(hE={})),function(r){r.TWBR_THRESHOLD=0,r.TWBR_HALFTONE=1,r.TWBR_CUSTHALFTONE=2,r.TWBR_DIFFUSION=3}(pE||(pE={})),function(r){r.TWBO_LSBFIRST=0,r.TWBO_MSBFIRST=1}(gE||(gE={})),function(r){r.TWFT_RED=0,r.TWFT_GREEN=1,r.TWFT_BLUE=2,r.TWFT_NONE=3,r.TWFT_WHITE=4,r.TWFT_CYAN=5,r.TWFT_MAGENTA=6,r.TWFT_YELLOW=7,r.TWFT_BLACK=8}(mE||(mE={})),function(r){r.TWFL_NONE=0,r.TWFL_OFF=1,r.TWFL_ON=2,r.TWFL_AUTO=3,r.TWFL_REDEYE=4}(_E||(_E={})),function(r){r.TWFR_BOOK=0,r.TWFR_FANFOLD=1}(vE||(vE={})),function(r){r.TWIF_NONE=0,r.TWIF_AUTO=1,r.TWIF_LOWPASS=2,r.TWIF_BANDPASS=3,r.TWIF_HIGHPASS=4,r.TWIF_TEXT=3,r.TWIF_FINELINE=4}(yE||(yE={})),function(r){r.TWLP_REFLECTIVE=0,r.TWLP_TRANSMISSIVE=1}(SE||(SE={})),function(r){r.TWLS_RED=0,r.TWLS_GREEN=1,r.TWLS_BLUE=2,r.TWLS_NONE=3,r.TWLS_WHITE=4,r.TWLS_UV=5,r.TWLS_IR=6}(IE||(IE={})),function(r){r.TWNF_NONE=0,r.TWNF_AUTO=1,r.TWNF_LONEPIXEL=2,r.TWNF_MAJORITYRULE=3}(TE||(TE={})),function(r){r.TWOR_ROT0=0,r.TWOR_ROT90=1,r.TWOR_ROT180=2,r.TWOR_ROT270=3,r.TWOR_PORTRAIT=0,r.TWOR_LANDSCAPE=3,r.TWOR_AUTO=4,r.TWOR_AUTOTEXT=5,r.TWOR_AUTOPICTURE=6}(CE||(CE={})),function(r){r.TWOV_NONE=0,r.TWOV_AUTO=1,r.TWOV_TOPBOTTOM=2,r.TWOV_LEFTRIGHT=3,r.TWOV_ALL=4}(bE||(bE={})),function(r){r.TWPF_CHOCOLATE=0,r.TWPF_VANILLA=1}(wE||(wE={})),function(r){r.TWPC_CHUNKY=0,r.TWPC_PLANAR=1}(DE||(DE={})),function(r){r.Info=1,r.Error=2,r.NotInstalledError=3}(eu||(eu={})),function(r){r.Binary=0,r.Base64=1}(Fp||(Fp={})),v.mix(F.DWT,{EnumDWT_DeviceType:ze,EnumDWT_Cap:ss,EnumDWT_CapLanguage:sE,EnumDWT_CapSupportedSizes:aE,EnumDWT_CapType:uE,EnumDWT_CapValueType:cE,EnumDWT_CapFeederAlignment:lE,EnumDWT_CapFeederOrder:dE,EnumDWT_CapPrinter:fE,EnumDWT_CapPrinterMode:hE,EnumDWT_CapBitdepthReduction:pE,EnumDWT_CapBitOrder:gE,EnumDWT_CapFilterType:mE,EnumDWT_CapFlash:_E,EnumDWT_CapFlipRotation:vE,EnumDWT_CapImageFilter:yE,EnumDWT_CapLightPath:SE,EnumDWT_CapLightSource:IE,EnumDWT_CapNoiseFilter:TE,EnumDWT_CapORientation:CE,EnumDWT_CapOverscan:bE,EnumDWT_CapPixelFlavor:wE,EnumDWT_CapPlanarChunky:DE,EnumDWT_ImageType:Xt,EnumDWT_ImageFormatType:Zc,EnumDWT_ResponseType:Eo,EnumDWT_SourceMatchField:zc,EnumDWT_UploadDataFormat:Fp,EnumDWT_WorkMode:Uv,EnumDWT_ConvertMode:Cr});var kp,Hs,Vv,jv,Mp,Hv,On=F.DWT;On.EnumPDF_Page={Page_Default:0,Page_Custom:1,Page_A4:2,Page_A4_Reverse:3,Page_A3:4,Page_A3_Reverse:5,Page_Letter:6,Page_Letter_Reverse:7,Page_Legal:8,Page_Legal_Reverse:9},On.EnumDWT_PixelType={TWPT_BW:0,TWPT_GRAY:1,TWPT_RGB:2,TWPT_PALLETE:3,TWPT_CMY:4,TWPT_CMYK:5,TWPT_YUV:6,TWPT_YUVK:7,TWPT_CIEXYZ:8,TWPT_LAB:9,TWPT_SRGB:10,TWPT_SCRGB:11,TWPT_INFRARED:16},On.EnumDWT_BorderStyle={TWBS_NONE:0,TWBS_SINGLEFLAT:1,TWBS_SINGLE3D:2},On.EnumDWT_MessageType={TWQC_GET:1,TWQC_SET:2,TWQC_GETDEFAULT:4,TWQC_GETCURRENT:8,TWQC_RESET:16},On.EnumDWT_TransferMode={TWSX_NATIVE:0,TWSX_FILE:1,TWSX_MEMORY:2},On.EnumDWT_FileFormat={TWFF_TIFF:0,TWFF_PICT:1,TWFF_BMP:2,TWFF_XBM:3,TWFF_JFIF:4,TWFF_FPX:5,TWFF_TIFFMULTI:6,TWFF_PNG:7,TWFF_SPIFF:8,TWFF_EXIF:9,TWFF_PDF:10,TWFF_JP2:11,TWFF_JPN:12,TWFF_JPX:13,TWFF_DEJAVU:14,TWFF_PDFA:15,TWFF_PDFA2:16},On.EnumDWT_TIFFCompressionType={TIFF_AUTO:0,TIFF_NONE:1,TIFF_RLE:2,TIFF_FAX3:3,TIFF_T4:3,TIFF_FAX4:4,TIFF_T6:4,TIFF_LZW:5,TIFF_JPEG:7,TIFF_PACKBITS:32773},On.EnumDWT_InterpolationMethod={IM_NEARESTNEIGHBOUR:1,IM_BILINEAR:2,IM_BICUBIC:3,IM_BESTQUALITY:5},On.EnumDWT_PDFCompressionType={PDF_AUTO:0,PDF_FAX3:1,PDF_FAX4:2,PDF_LZW:3,PDF_RLE:4,PDF_JPEG:5,PDF_JP2000:6,PDF_JBIG2:7},On.EnumDWT_ShowMode={SW_ACTIVE:0,SW_MAX:1,SW_MIN:2,SW_CLOSE:3,SW_IFLIVE:4},On.EnumDWT_UnitType={TWUN_INCHES:0,TWUN_CENTIMETERS:1,TWUN_PICAS:2,TWUN_POINTS:3,TWUN_TWIPS:4,TWUN_PIXELS:5,TWUN_MILLIMETERS:6},On.EnumDWT_DUPLEX={TWDX_NONE:0,TWDX_1PASSDUPLEX:1,TWDX_2PASSDUPLEX:2},On.EnumDWT_MagType={TWMD_MICR:0,TWMD_RAW:1,TWMD_INVALID:2},On.EnumDWT_DataSourceStatus={TWDSS_CLOSED:0,TWDSS_OPENED:1,TWDSS_ENABLED:2,TWDSS_ACQUIRING:3},function(r){r.enumFitWindow=0,r.enumFitWindowHeight=1,r.enumFitWindowWidth=2}(kp||(kp={})),On.EnumDWT_FitWindowType={enumFitWindow:kp.enumFitWindow,enumFitWindowHeight:kp.enumFitWindowHeight,enumFitWindowWidth:kp.enumFitWindowWidth},On.EnumDWT_PlatformType={enumUnknown:lt.enumUnknown,enumWindow:lt.enumWindow,enumMac:lt.enumMac,enumLinux:lt.enumLinux,enumEmbed:lt.enumEmbed,enumChromeOS:lt.enumChromeOS,enumHarmonyOS:lt.enumHarmonyOS,enumAndroid:lt.enumAndroid,enumiOS:lt.enumiOS},function(r){r.Default=0,r.Hand=1,r.Crosshair=2,r.Zoom=3,r.NWResize=4,r.EResize=5,r.NResize=6,r.Resize=7,r.Move=8}(Hs||(Hs={})),On.EnumDWT_MouseShape={Default:Hs.Default,Hand:Hs.Hand,Crosshair:Hs.Crosshair,Zoom:Hs.Zoom,NWResize:Hs.NWResize,EResize:Hs.EResize,NResize:Hs.NResize,Resize:Hs.Resize,Move:Hs.Move},On.EnumDWT_Language={English:0,French:1,Arabic:2,Spanish:3,Portuguese:4,German:5,Italian:6,Russian:7,Chinese:8},On.EnumDWT_InitMsg={Info:eu.Info,Error:eu.Error,NotInstalledError:eu.NotInstalledError},On.EnumDWT_Driver={TWAIN:Bt.TWAIN,ICA:Bt.ICA,SANE:Bt.SANE,TWAIN_AND_ICA:Bt.TWAIN_AND_ICA,TWAIN_AND_TWAIN64:Bt.TWAIN_AND_TWAIN64,TWAIN64:Bt.TWAIN64},On.EnumDWT_CompressionType={TWCP_NONE:0,TWCP_PACKBITS:1,TWCP_GROUP31D:2,TWCP_GROUP31DEOL:3,TWCP_GROUP32D:4,TWCP_GROUP4:5,TWCP_JPEG:6,TWCP_LZW:7,TWCP_JBIG:8,TWCP_PNG:9,TWCP_RLE4:10,TWCP_RLE8:11,TWCP_BITFIELDS:12,TWCP_ZIP:13,TWCP_JPEG2000:14},function(r){r.Single=0,r.Multiple=1}(Vv||(Vv={})),On.EnumDWT_SelectionMode={Single:Vv.Single,Multiple:Vv.Multiple},On.EnumDWT_ConfirmExitType={Cancel:0,Exit:1,SaveAndExit:2},On.EnumDWT_WebsocketReadyState={CONNECTING:Jo.CONNECTING,OPEN:Jo.OPEN,CLOSING:Jo.CLOSING,CLOSED:Jo.CLOSED},function(r){r.TwainService=1}(jv||(jv={})),On.EnumDWT_ServiceType={TwainService:jv.TwainService},function(r){r.default=0,r.standard=1,r.supported=2}(Mp||(Mp={})),On.EnumDWT_ExtImageInfo={default:Mp.default,standard:Mp.standard,supported:Mp.supported};var p3,Gv=20230506,AE=function(){if(F.dcp){var r=F.dcp.dcpJSVer;if(v.isNumber(r))return r>=Gv}return!1};if(AE())AE=Hv,Gv=Hv;else{var un=vt.detect,ir={_checkService:function(r,i){un.dcpStatus=un.EnumDCP_DetectStatus.CheckingServiceVer,zv(null,"DSVersion").then(r,i)},_checkUpdateFile:function(r,i){zv(null,"CheckUpdateFile").then(r,i)},_updateService:function(r,i){zv(null,"UpdateService").then(r,i)},loadZip:(p3=Ae(A.mark(function r(i,a){var s,u,l,d;return A.wrap(function(f){for(;;)switch(f.prev=f.next){case 0:return u=!1,100===(s=a)&&(s=0,u=!0),F.DWT.IfUpdateService?[tp(),"/LoadZipFromBytes?type=",s,"&dsver=",Rd().join(""),"&ts=",v.now()].join(""):["dcp/",vt.oldDWASMVerStr,"/LoadZipFromBytes?type=0","&dsver=",Rd().join(""),"&ts=",v.now()].join(""),l=da.getHttpClientForDcp(),f.next=6,l.request(i,void 0,{},3e4);case 6:return d=f.sent,u&&v.isString(d)&&(d=d.replace('"result" : [ 0,','"result" : [ 100,')),f.abrupt("return",d);case 9:case"end":return f.stop()}},r)})),function(r,i){return p3.apply(this,arguments)}),_getDSUpdateZipUrl:function(){var r,i,a="";return r="Win",j.bMac?r="Mac":j.bLinux&&(r="Linux"),i=j.bFileSystem?"":"?t="+v.now(),j.bWin&&vt.b64bit&&(a="_x64"),[F.DWT.ResourcesPath,"/dist/serviceupdate/",r,"DSUpdate_",qB().join("."),a,".zip",i].join("")},getPorts:function(r,i){var a="GetPorts",s="dwasm2_"+np();return g3(r,a,{id:v.now(),method:a,version:s,parameter:[i]},Oc)},_checkUpdateZip:function(r,i,a,s,u){var l,d,f,g,_,T,S,I=3;l=function(b,D,R){var L=-1;if(R&&(L=R.status),0==L)return setTimeout(function(){ir._checkService(T,S)},5e3),!0;var x=ir._getDSUpdateZipUrl();return Wc(x,{mode:"cors",dataType:"arraybuffer"}).then(g,d),!0},d=function(b){i&&i();var D="The update package can't be downloaded. The error code is "+b.httpCode+".";return a&&a(!0,D),ir._sendStatusEvent(!0,D),setTimeout(s,0),!0},f=function(b){if(!(v.isArray(b)&&b.length>1))return!1;if(1==b[1])un.dcpStatus=un.EnumDCP_DetectStatus.VerifiedZip,ir._sendStatusEvent(),un.dcpStatus=un.EnumDCP_DetectStatus.UpdatingService,ir._sendStatusEvent(),setTimeout(function(){ir._checkService(T,S)},5e3);else{var D=0;if("exception"in b&&(D=b.exception),-2373==D)return ir._funUpdateFailed(i,a,b,200),setTimeout(s,0),!0;setTimeout(l,0)}return!0},g=function(b){F.dcp.loadZip(b,1).then(function(D){var R,L;try{v.isString(D)&&"result"in(L=v.parse(D.replace(/\0/g,"")))&&(R=L.result)}catch{}v.isArray(R)&&R.length>2&&1==R[2]?setTimeout(function(){ir._checkService(T,S)},5e3):(ir._funUpdateFailed(i,a,D,200),setTimeout(s,0))},_),b=null},_=function(b,D,R){var L=-1;return R&&(L=R.status),0==L?setTimeout(function(){ir._checkService(T,S)},5e3):(ir._funUpdateFailed(i,a,b,R.status),setTimeout(s,0)),!0},T=function(b){return!(!(v.isArray(b)&&b.length>0&&b[0])||(D=b[0].split(","),R=Rd(),oo(Ri())&&!(v.isArray(D)&&4==D.length&&v.isArray(R)&&R.length>=4?D[0]>R[0]||D[0]==R[0]&&D[1]>R[1]||D[0]==R[0]&&D[1]==R[1]&&D[2]>R[2]||D[0]==R[0]&&D[1]==R[1]&&D[2]==R[2]&&parseInt(D[3])>=parseInt(R[3]):v.isArray(D)&&1==D.length&&v.isArray(R)&&R.length>=1&&parseInt(D[0])>=parseInt(R[0])))||(un.bConnected=!0,i&&i(),un.dcpStatus=un.EnumDCP_DetectStatus.CheckedService,ir._sendStatusEvent(!1,b[0]),un.dcpStatus=un.EnumDCP_DetectStatus.UpdateSucceed,ir._sendStatusEvent(),setTimeout(s,0),0));var D,R},S=function(b,D){var R=1e3;return I<3&&(R=500),--I<0?(ir._funShowUpgradeDialogWhenUpdateFailed(i,a),setTimeout(s,0),!0):(setTimeout(function(){ir._checkService(T,S)},R),!0)},r&&r(),un.dcpStatus=un.EnumDCP_DetectStatus.VerifyingZip,ir._sendStatusEvent(),ir._checkUpdateFile(f,l)},_getStatusString:function(r,i){var a,s,u="";return r==un.EnumDCP_DetectStatus.Init?"Getting manager version":r==un.EnumDCP_DetectStatus.Connected?(i&&(u=i),"Getting manager version succeeded and the version is "+u):r==un.EnumDCP_DetectStatus.CheckingManagerVer?"Getting manager version":r==un.EnumDCP_DetectStatus.CheckingServiceVer?"Getting service version":r==un.EnumDCP_DetectStatus.NotInstalled?"Dynamsoft Service Not Installed":r==un.EnumDCP_DetectStatus.UpdateSkipped?"Update skipped":r==un.EnumDCP_DetectStatus.CheckedService?(i&&(u=i),"Getting service version succeeded and the version is "+u):r==un.EnumDCP_DetectStatus.VerifyingZip?"Verifying the update package":r==un.EnumDCP_DetectStatus.VerifiedZip?"Update package verified":r==un.EnumDCP_DetectStatus.UpdatingService?"Updating the service":r==un.EnumDCP_DetectStatus.UpdateSucceed?"Update succeeded":r==un.EnumDCP_DetectStatus.UpdateFailed?(s=".",i&&i.length>0?("."==i.slice(i.length-1)&&(s=""),a=" with the error: "+i):a="","The update failed"+a+s):""},_sendStatusEvent:function(r,i){var a=!!r,s=window;v.isFunction(s.OnGetServiceUpdateStatus)&&s.OnGetServiceUpdateStatus(a,un.dcpStatus,ir._getStatusString(un.dcpStatus,i))},_getErr:function(r){var i,a="";try{v.isString(r)?(i=r.replace(/\0/g,""),i=v.parse(i)):r&&(i=r),"description"in i&&(a=i.description)}catch{}return a},_funShowUpgradeDialogWhenUpdateFailed:function(r,i){return un.bConnected=!0,un.dcpStatus=un.EnumDCP_DetectStatus.UpdateFailed,r&&r(),i&&i(),ir._sendStatusEvent(!0),!0},_funUpdateFailed:function(r,i,a,s){var u,l;return un.bConnected=!0,un.dcpStatus=un.EnumDCP_DetectStatus.UpdateFailed,r&&r(),200==s?(u="The update failed.",l=ir._getStatusString(un.dcpStatus,ir._getErr(a))):l=u="The update failed. The error code is "+s,i&&i(!0,u),ir._sendStatusEvent(!0,l),!0},getDSPath:function(r,i){return ro.getDSPath(i)},getLinuxHTML5DebPath:function(){return ro.getDSPath(".deb")},getLinuxHTML5RpmPath:function(){return ro.getDSPath(".rpm")},getBinaryFileInfo:function(r,i){var a="GetBinaryFileInfo",s={id:(new Date).getTime().toString(),method:a,version:"dwasm2_"+np(),parameter:[]},u=v.stringify(s),l=function(g,_,T){var S;g&&(S=v.parse(g)),S?r(S):i(g,_,T)};if(F.DWT.ConnectWithSocket&&j.bHTML5Edition){var d=Qa.getWsUrl(F.DWT.Host,j.bSSL?vt.SSLPort:vt.Port);return Qa.postStringDataByWSUrl(d,u).then(l,i),!0}var f=[tp(),"/",a,"?type=1&dsver=",Rd().join(""),"&ts=",v.now()].join("");da.getHttpClientForDcp().request(u,f,{},500).then(l,i)}};v.mix(vt,ir),F.dcp=vt,F.dcp.dcpJSVer=Gv,AE=Hv,Gv=Hv}function zv(r,i,a,s){var u;return u={id:(new Date).getTime().toString(),method:i,version:"dwasm2_"+np(),parameter:[]},"VersionInfo"==i&&(u.version="dwasm2_"+kn.getVersionStrForCheck()),Ye.isLongKey(a)&&(u.productKey=a),g3(r,i,u,Oc,s)}function g3(r,i,a,s,u){return PE.apply(this,arguments)}function PE(){return PE=Ae(A.mark(function r(i,a,s,u,l){var d,f,g,_,S,I,b,D;return A.wrap(function(R){for(;;)switch(R.prev=R.next){case 0:return d=v.stringify(s),vt.detect.bConnected=!1,f=[tp(),"/",a,"?type=1&dsver=",Rd().join(""),"&ts=",v.now()].join(""),g=da.getHttpClient(i,(_=j.bSSL)?vt.SSLPort:vt.Port,_),S={},l&&!j.bSSL&&(S.redirect="manual"),R.prev=8,R.next=11,g.request(d,f,S,u);case 11:I=R.sent,R.next=21;break;case 14:if(R.prev=14,R.t0=R.catch(8),!l||j.bSSL){R.next=20;break}if((R.t0&&R.t0.code)!=yn.HTTPRedirected){R.next=20;break}throw fU();case 20:throw R.t0;case 21:if(I&&(b=v.parse(I)),!(b&&"exception"in b&&"description"in b)){R.next=24;break}throw{code:b.exception,message:b.description};case 24:if(!b||!("result"in b)){R.next=30;break}if(!vt.detect.bConnected){R.next=27;break}return R.abrupt("return",b.result);case 27:return vt.detect.bConnected=!0,vt.detect.dcpStatus=vt.detect.EnumDCP_DetectStatus.Connected,R.abrupt("return",b.result);case 30:throw $o(D={}),$t(D);case 33:case"end":return R.stop()}},r,null,[[8,14]])})),PE.apply(this,arguments)}function m3(r){var i=Date.parse(r+"T00:00:00");return""!=r&&!isNaN(i)&&!!F.DWT.CheckCertExpired&&(new Date).getTime()>=i-864e5*F.DWT.CertificateConfig.UpdateDaysBeforeExpired}F.DWT.__innerCheckCertDate=function(r){m3(r)&&(v.isFunction(F.OnCertExpired)&&F.OnCertExpired(r),setTimeout(function(){F.DWT.UpdateCert(F.DWT.CertificateConfig.URL,F.OnUpdateCertSuccess,F.OnUpdateCertFailure)},5e3))},F.DWT.__innerUpdateCert=function(r,i,a,s){var u=[tp(),"/LoadZipFromBytes?type=",2,"&dsver=",Rd().join(""),"&ts=",v.now()].join("");da.getHttpClientForDcp(null,i).request(r,u,{},3e4).then(a,function(l){v.isFunction(s)&&s(l)})},F.DWT.__innerReboot=function(r,i){var a=[tp(),"/admin?ts=",v.now()].join(""),s='{"id":"'+(new Date).getTime().toString()+'","method":"Reboot","parameter":[],"version":"dwasm2_'+np()+'"}';da.getHttpClientForDcp().request(s,a,{},3e4).then(r,i)},F.DWT.UpdateCert=function(r,i,a){v.isString(r)&&""!=r?Wc(r,{mode:"cors",dataType:"arraybuffer"}).then(function(s){F.DWT.__innerUpdateCert(s,!1,function(){F.DWT.CheckCertExpired=!1,v.isFunction(i)&&i()},function(u){j.bSSL?F.DWT.__innerUpdateCert(s,!0,i,a):v.isFunction(a)&&a(u)})},a):v.isFunction(a)&&a()};var RE={Errors:{FilePathSyntaxIncorrect:function(r){r._errorCode=-3123,r._errorString="The filename, directory name, or volume label syntax is incorrect."}},checkFilePath:function(r,i){return v.isString(i)&&0!=i.length?v.startsWith(i,"http://")||v.startsWith(i,"https://")||v.startsWith(i,"ftp://")?(W.File.Errors.FilePathSyntaxIncorrect(r),ve):Ne:(Nc(r),ve)}};RE.checkFolder=RE.checkFilePath,W.File=RE,W.showProgress=function(){},W.closeProgress=function(){};var Op,Yme=document.location.protocol,Jme=location.hostname,_3=j.bSSL;function v3(){var r=Gb;if(F.DWT.CertificateConfig){var i=F.DWT.CertificateConfig;v.isString(i.URL)||(i.URL=r.URL),(!v.isNumber(i.UpdateDaysBeforeExpired)||i.UpdateDaysBeforeExpired<=0)&&(i.UpdateDaysBeforeExpired=r.UpdateDaysBeforeExpired)}else F.DWT.CertificateConfig=r;(function Lme(){var r;i3&&(pr=v.mix({},_a),F.DWT&&(r=F.DWT.CustomizableDisplayInfo),r&&(r.errorMessages&&v.mix(pr.errorMessages,r.errorMessages),r.generalMessages&&v.mix(pr.generalMessages,r.generalMessages),r.customProgressText&&v.mix(pr.customProgressText,r.customProgressText),r.buttons&&(r.buttons.titles&&v.mix(pr.buttons.titles,r.buttons.titles),r.buttons.bShowAllButtons&&v.mix(pr.buttons.bShowAllButtons,r.buttons.bShowAllButtons),r.buttons.visibility&&v.mix(pr.buttons.visibility,r.buttons.visibility)),r.dialogText&&v.mix(pr.dialogText,r.dialogText)),r3(),i3=!1)})(),v.isString(F.DWT.ProductKey)&&(F.DWT.ProductKey=v.trim(F.DWT.ProductKey)),F.navInfo&&(j.bMac||j.bWin)&&(F.navInfo.bEmbed=!1,F.navInfo.bArm64=!1,F.navInfo.bMips64=!1),F.DWT.Debug&&(v.debug=!0)}function y3(){if(W.detect.cssLoaded)return W.Promise.resolve();var r=F.DWT.ResourcesPath,i="";j.bFileSystem||(i=W.timestamp);var a=[[r,"/src/dynamsoft.webtwain.css",i].join("")];return be.bHTML5Edition&&F.DWT.UseDefaultViewer&&a.push([r,"/src/dynamsoft.webtwain.viewer.css",i].join("")),new W.Promise(function(s,u){var l=!0;j.bSafari?(v.addAllCss(a,!1,function(d){d||l&&(u({code:-2804,message:"Loading the WebTwain css files has failed."}),l=!1)}),W.detect.cssLoaded=Ne,s()):v.addAllCss(a,!1,function(d){if(d)return W.detect.cssLoaded=Ne,void s();l&&(l=!1,u({code:-2804,message:"Loading the WebTwain css files has failed."}))})})}function S3(){if(be.loadResourcePath||!be.loadingResourcePath)return Op&&Op(),void(Op=null);setTimeout(S3,100)}function nf(r){if(An("Loading css..."),v3(),be.loadResourcePath||be.loadingResourcePath)return be.loadResourcePath?y3():be.loadResourcePath||!be.loadingResourcePath?W.Promise.resolve():(Op=null,new W.Promise(function(f){Op=f,setTimeout(S3,100)}));be.loadingResourcePath=!0,(F.DWT.Port>0||F.DWT.SSLPort>0)&&(W.detect.ports=[{port:F.DWT.Port,ssl:!1},{port:F.DWT.SSLPort,ssl:!0}],Zo.removeItem("DWT_port"),Zo.removeItem("DWT_ssl")),v.each(W._funsAfterConfigLoaded,function(f){try{v.isFunction(f)&&f()}catch{}});var i=v.sizzle(".dynamsoft_waiting");if(i&&i.length>0){var a=i[0];a.parentNode&&a.parentNode.removeChild(a)}var s=F.DWT.ResourcesPath,u="";j.bFileSystem||(u=W.timestamp);var l=Ne,d=[];return j.bSafari&&(l=ve),d.push([s,"/dynamsoft.webtwain.install.js",u].join("")),F.DWT.bNpm&&(d=[]),be.bHTML5Edition&&F.DWT.UseDefaultViewer&&(An("Loading the viewer script..."),d.push([s,"/src/dynamsoft.webtwain.viewer.js",u].join(""))),y3().then(function(){if(0!=d.length)return new W.Promise(function(f,g){v.addScripts(d,l,!1,function(_){var T=_;if(j.bIE&&(be.bHTML5Edition?F.DWT.UseDefaultViewer&&!v.isFunction(F.DWTViewer)&&(T=!1):be.bActiveXEdition&&(v.isFunction(F.DWT._innerLoad)||(T=!1))),!T)return be.loadingResourcePath=!1,void g({code:-2803,message:"Loading the WebTwain JavaScript source files has failed."});if(!W.bNode&&!j.bJSDom&&v.isArray(F.aryAddonReadyFun)){for(var S=0,I=function(){var b=F.aryAddonReadyFun[S];if(v.isFunction(b))try{b(W)}catch(D){v.log(D.stack||D,"error"),setTimeout(function(){throw D},0)}};S<F.aryAddonReadyFun.length;S++)I();F.aryAddonReadyFun=[]}be.loadResourcePath=!0,be.loadingResourcePath=!1,F.DWT.OnWebTwainWillInit&&F.DWT.OnWebTwainWillInit(),f()})})})}v.mix(W,{detect:{ssl:_3,dcpStatus:0,dcpCallbackType:0,arySTwains:[],bFirst:Ne,bOK:ve,__dialog:ve,cssLoaded:ve,viewerScriptLoaded:ve,bNoControlEvent:ve,bNeedUpgradeEvent:ve,bPromptJSOrServerOutdated:ve,detectType:_3?1:"http:"===Yme||""===Jme?0:-1,tryTimes:0,ports:[{port:F.DWT.SSLPort,ssl:Ne},{port:F.DWT.Port,ssl:ve}],cUrlIndex:0,urls:[],onNoControl:ve,needUpgrade:ve,OnDetectNext:ve,OnCreatWS:ve,bMaskShow:ve},page:{bUnload:ve,OnUnload:ve}}),W.Addon_Events=[],W.Addon_Sendback_Events=[];var Np=[],Lp=[];function xE(){var r,i=Np.length;for(r=0;r<i;r++)Np[r]();Np.splice(0),Lp.splice(0),Wp=0}function I3(){if(Wp>0&&(new Date).getTime()-Wp>FE){var r,i={code:-2802,message:"The file dynamsoft.webtwain.config.js timed out while loading."},a=F.DWT.Containers;a&&0!==a.length||(cU(r={}),i={code:r._errorCode,message:r._errorString}),function(_){var T,S=Lp.length;for(T=0;T<S;T++)Lp[T](_);Np.splice(0),Lp.splice(0),Wp=0}(i)}else if(F.DWT.Containers||F.DWT.ProductKey){if(be.dwtConfigLoading)return;if(be.dwtConfigLoaded)return void xE();be.dwtConfigLoading=!0;var s=j.bFileSystem,u=Mn.basePath,l=F.DWT.ResourcesPath,d="";if(v.isArray(F.DWT.Containers)||(F.DWT.Containers=[]),!s&&(void 0!==l&&""!=l||(l=u),l.length>0&&"/"==l.charAt(l.length-1)&&(l=l.substr(0,l.length-1)),d=W.timestamp,F.DWT.ResourcesPath=l),j.bIE){var f=j.IEVersion;if((""===f||f>=10)&&F.DWT.IfUseActiveXForIE10Plus){j.bHTML5Edition=false,be.bHTML5Edition=false,be.bActiveXEdition=!0,be.bChromeEdition=be.bHTML5Edition}}be.bActiveXEdition?v.addScript([l,"/src/dynamsoft.webtwain.activex.js",d].join(""),!0,!1,function(){be.dwtConfigLoaded=!0,be.dwtConfigLoading=!1,xE()}):(be.dwtConfigLoaded=!0,be.dwtConfigLoading=!1,xE())}else setTimeout(I3,100)}var T3,tu,FE=3e3,Wp=0;function Kv(r){return An("Loading the config script..."),be.dwtConfigLoaded?W.Promise.resolve():(r&&(FE=1e3*parseInt(r))<1&&(FE=1),new W.Promise(function(i,a){Np.push(i),Lp.push(a),Od(function(){Wp=(new Date).getTime(),setTimeout(I3,100)})}))}function C3(){var r;(r=F.DWT.WebTwainIdMap)&&v.each(r,function(i,a){i&&i._OnPageBlur&&i._OnPageBlur()})}if(be.bActiveXEdition){var b3=function(){var r,i,a,s,u;if(F.DWT.lunload(),W.closeAll&&W.closeAll(),s=F.DWT.ContainerMap)for(u=Object.keys(s),r=0;r<u.length;r++)(a=u[r])&&a in s&&(i=s[a])&&(i.__unload(),delete s[a]);if(s=F.DWT.WebTwainIdMap)for(u=Object.keys(s),r=0;r<u.length;r++)(a=u[r])&&a in s&&(i=s[a])&&(i.__unload(),delete s[a]);for(r=0;r<W.product.unloadQueue.length;r++){var l=W.product.unloadQueue[r];W.isFunction(l)&&l()}return W.product.unloadQueue.splice(0),W.detect.arySTwains.splice(0),W.Promise.resolve()};F.DWT.Unload=function(){b3();try{F.DWT.CloseDialog(),W._zdgb_xkz_dhk(),W.closeProgress(null,""),W.hideMask()}catch{}},F.DWT.Load=function(){if(!W.product.bDWTLoading)return W.product.bDWTLoading=!0,W.detect.axAutoLoadDone=!1,Kv().then(nf).then(b3).then(function(){return F.DWT._innerLoad()}).then(function(){W.product.bDWTLoading=!1,W.detect.axAutoLoadDone=!0},function(r){W.product.bDWTLoading=!1,W.detect.axAutoLoadDone=!1,Hw(r)})},F.DWT.ConnectToTheService=F.DWT.Load,F.DWT.CheckConnectToTheService=function(r,i,a,s){W.product.bActiveXEdition?W.isFunction(s)&&s():W.isFunction(a)&&a()},F.DWT.CreateDWTObject=function(r,i,a,s,u,l){return W._safePromptCustomMsg(function(){l&&l("Error: This browser is currently not supported.")}),!1},F.DWT.CreateDWTObjectEx=function(r,i,a){return W._safePromptCustomMsg(function(){a&&a("Error: This browser is currently not supported.")}),!1},F.DWT.CreateRemoteScanObjectAsync=function(){var r={};return Ee(r,-2433,"The ActiveX edition does not support this method or property."),W.Promise.reject({code:r._errorCode,message:r._errorString})},F.DWT.DeleteDWTObject=function(r){return!1}}function w3(){return!(function(r){if(v.isString(r)){if("localhost"==r||"127.0.0.1"==r)return!0;var i=r.split(".");if(4==i.length&&/^(([1-9]?\d|1\d{2}|2[0-4]\d|25[0-5])\.){3}([1-9]?\d|1\d{2}|2[0-4]\d|25[0-5])$/.test(r)){var a=parseInt(i[0]),s=parseInt(i[1]);if(127==a||10==a||169==a&&254==s||172==a&&s>=16&&s<=31||192==a&&168==s)return!0}}return!1}(location.hostname)||j.bSSL||j.bFileSystem||!((j.bChrome||j.bEdge)&&parseInt(j.strBrowserVersion)>=94))}function D3(r,i,a,s){return ME.apply(this,arguments)}function ME(){return ME=Ae(A.mark(function r(i,a,s,u){var l,d;return A.wrap(function(f){for(;;)switch(f.prev=f.next){case 0:if(a!=Gn.GET_TASKID){f.next=4;break}return f.abrupt("return",u.taskId);case 4:if(a!=Gn.ONMESSAGE_PROCESS_DATA){f.next=8;break}return f.abrupt("return",v.parse(i));case 8:if(a!=Gn.ONMESSAGE_GET_TASKID){f.next=13;break}if(!u||!u.client){f.next=11;break}return f.abrupt("return",u.client.getRequestTaskId());case 11:f.next=20;break;case 13:if(a!=Gn.HANDLE_RAW_MESSAGE){f.next=20;break}if(l=u?.userData){f.next=17;break}return f.abrupt("return",!1);case 17:return(d=i).indexOf("Version not found")>=0||d.indexOf("Function not found")>=0?v.isFunction(l.fFun)&&l.fFun():v.isFunction(l.sFun)&&l.sFun(d),f.abrupt("return",d);case 20:case"end":return f.stop()}},r)})),ME.apply(this,arguments)}function E3(r,i,a,s){var u,l=v.now(),d=v.guid(),f={id:d,method:"VersionInfo",version:[be.getDWTPrefix(),kn.getVersionStrForCheck()].join("")},g=D3,_=Oc;u={client:r,userData:{cmdId:d,cmd:null,sFun:i,fFun:a,rawData:!0},taskId:l},r.setRetry(0),r.request(v.stringify(f),g,u,_).then(function(T){return r.dispose(),T},function(){v.isFunction(s)&&s(),r.dispose()})}function A3(){be.loadResourcePath?(An(UU),T3()):setTimeout(A3,100)}function $v(){return be.loadResourcePath?(An(UU),W.Promise.resolve()):new W.Promise(function(r,i){T3=r,setTimeout(A3,100)})}function P3(r){var i,a,s=r.WebTwainId,u=r.Host,l=r.Port,d=r.PortSSL;return(a={}).id=v.isString(s)&&""!==s?s:s=_V(),v.isDOM(r.Container)?(v.isString((i=r.Container).id)&&""!==i.id||(i.id=["dwt_node_",v.getRandom()].join("")),a.container=i,a.bNoViewer=!1):a.bNoViewer=!0,a.bNoViewer?(a.width=0,a.height=0):(a.width=v.isUndefined(r.Width)?i.style.width?i.style.width:300:r.Width,a.height=v.isUndefined(r.Height)?i.style.height?i.style.height:300:r.Height),a.dmService=r.dmService,v.isString(u)&&""!=u||(u=Ri()),a.host=u,j.bSSL?(d||(d=F.DWT.SSLPort),a.port=d):(l||(l=F.DWT.Port),a.port=l),a}function Zme(r){if(v.isUndefined(r))return!1;var i,a,s,l=(s=r.toString().toLowerCase().toLowerCase().replace(be.name.toLowerCase()+" ",""),(s=v.replaceAll(s,"[.]",",")).split(","));i=be.bActiveXEdition?io.ActiveXVersion:be.getServerVersionInfo(!0),a=(i=v.replaceAll(String(i),"[.]",",")).split(",");for(var d=l.length>a.length?l.length:a.length,f=0;f<d;f++){if(null==l[f]&&(l[f]=0),null==a[f]&&(a[f]=0),parseInt(l[f])<parseInt(a[f]))return!1;if(parseInt(l[f])>parseInt(a[f]))return!0}return!0}function F3(r,i){var a=r.split(","),s=i.split(",");return a.length>3&&v.trim(a[0])==s[0]&&(v.trim(a[1])>s[1]||v.trim(a[1])==s[1]&&v.trim(a[2])>s[2]||v.trim(a[1])==s[1]&&v.trim(a[2])==s[2]&&parseInt(v.trim(a[3]))>=parseInt(s[3]))}function t_e(r,i){oo(r)&&(Zo.item("DWT_port",i),Zo.item("DWT_ssl",j.bSSL?"true":"false"))}function M3(r,i,a,s){return O3.apply(this,arguments)}function O3(){return(O3=Ae(A.mark(function r(i,a,s,u){var d,f,g,_,T,S,I,b,D,R,L,x,U,Y,Z,oe,se,k,E;return A.wrap(function(M){for(;;)switch(M.prev=M.next){case 0:if(F.DWT.OnWebTwainInitMessage&&F.DWT.OnWebTwainInitMessage("Checking WebTwain version ...",eu.Info),f=!1,g=v.now(),_=['{"id":"',v.guid(),'","method":"VersionInfo","version":"',be.getDWTPrefix(),kn.getVersionStrForCheck(),'"}'].join(""),T=!j.bSSL,M.prev=4,!F.DWT.ConnectWithSocket){M.next=11;break}return M.next=8,Qa.postStringDataByWSUrl(Qa.getWsUrl(i,a),_);case 8:d=M.sent,M.next=18;break;case 11:return S="fa/VersionInfo?ts="+g,I=da.getHttpClient(i,a,W.detect.ssl),b={},T&&(b.redirect="manual"),M.next=17,I.request(_,S,b,s);case 17:d=M.sent;case 18:M.next=36;break;case 20:if(M.prev=20,M.t0=M.catch(4),v.log(["check DWT Version failed",v.stringify(M.t0)]),!f){M.next=26;break}M.next=36;break;case 26:if(!T){M.next=30;break}if((M.t0&&M.t0.code)!=yn.HTTPRedirected){M.next=30;break}throw fU();case 30:throw Nde(D={}),F.DWT.OnWebTwainInitMessage&&F.DWT.OnWebTwainInitMessage(D._errorString,eu.Error),{code:D._errorCode,message:D._errorString};case 36:if(R="",x={},U=!1,d&&(Y=v.parse(d)),!Y||!("result"in Y)){M.next=71;break}if(!(v.isArray(Y=Y.result)&&Y.length>0)){M.next=68;break}if(Z=Y[0],oe=Y.length>2?Y[2]:0,se=Y.length>3?Y[3]:"",L=Y.length>4?Y[4]:"",""!==(R=Y.length>1?Y[1]:"")){M.next=65;break}if(k="The WebTwain version is: "+Z,F.DWT.OnWebTwainInitMessage&&F.DWT.OnWebTwainInitMessage(k,eu.Info),"32"==oe&&oo(i)&&(vt.b64bit=!1),oo(i)&&(F.DWT.li({instanceMode:F.DWT.EnumInstance.dwt_desktop},"")||""!=se&&(F.DWT.lsmid(se,""),F.DWT.lsmid2b(se))),v.isFunction(F.OnSSLCertInfo)&&(""!=L&&(E=Date.parse(L+"T00:00:00"),E=isNaN(E)?null:new Date(E)),F.OnSSLCertInfo(E)),!v.isString(Z)||""==Z){M.next=62;break}if(u&&An(VU),!F3(Z,be.getServerVersionInfo(!0))){M.next=58;break}return M.abrupt("return",{host:i,port:a,version:Z});case 58:An(jU),ip(x);case 60:M.next=63;break;case 62:U=!0;case 63:M.next=66;break;case 65:Mde(x,R);case 66:M.next=69;break;case 68:U=!0;case 69:M.next=72;break;case 71:U=!0;case 72:throw U&&$o(x),F.DWT.OnWebTwainInitMessage&&F.DWT.OnWebTwainInitMessage(x._errorString,eu.Error),{code:x._errorCode,message:x._errorString};case 75:case"end":return M.stop()}},r,null,[[4,20]])}))).apply(this,arguments)}function N3(r,i,a){return L3.apply(this,arguments)}function L3(){return(L3=Ae(A.mark(function r(i,a,s){var u,l,d;return A.wrap(function(f){for(;;)switch(f.prev=f.next){case 0:return An(sfe),a||v.each(W.detect.ports,function(g){j.bSSL?g.ssl&&(a=g.port):g.ssl||(a=g.port)}),f.prev=2,f.next=5,M3(i,a,Oc,!0);case 5:return l=(u=f.sent).host,d=u.port,W.detect.dcpStatus=2,t_e(l,d),f.next=11,eV(!1,!0);case 11:if(!li()||!oo(i)){f.next=15;break}if(F.DWT.li({instanceMode:F.DWT.EnumInstance.dwt_desktop},"")){f.next=15;break}throw{code:-2827,message:"Failed to get Machine ID."};case 15:An(afe),f.next=27;break;case 18:if(f.prev=18,f.t0=f.catch(2),!s){f.next=25;break}throw W.detect.dcpStatus=3,f.t0;case 25:throw W.detect.dcpStatus=3,f.t0;case 27:return!kn.versionInfoFromServer&&oo(u.host)&&(kn.versionInfoFromServer=u.version),f.abrupt("return",u);case 29:case"end":return f.stop()}},r,null,[[2,18]])}))).apply(this,arguments)}function OE(r,i){return NE.apply(this,arguments)}function NE(){return NE=Ae(A.mark(function r(i,a){var s,u,l,d,f,g;return A.wrap(function(_){for(;;)switch(_.prev=_.next){case 0:if(s=i,u=a,l=j.bSSL,d=n_e(i),!oo(i)){_.next=9;break}if(!w3()){_.next=6;break}throw g={code:yn.CORSError,message:'The Connection from the insecure (HTTP) web page to the local "Dynamsoft Service" failed!'},v.isFunction(F.OnHTTPCorsError)&&F.OnHTTPCorsError(g.message),g;case 6:s=kn.hostForCheckCert,u=l?F.DWT.SSLPort:F.DWT.Port,d==tu.Check127&&(j.bSafari||(l=!1,u=F.DWT.Port));case 9:if(kn.bFullEdition||!Mn.bMobile||j.bAndroid){_.next=15;break}return v.isFunction(F.OnMobileNotSupportCallback)?F.OnMobileNotSupportCallback():v.isFunction(F.MobileNotSupportCallback)&&F.MobileNotSupportCallback(),_.abrupt("return",{upgrade:!1,socket:!1});case 15:!kn.bFullEdition&&Mn.bMobile&&j.bAndroid&&(d=tu.CheckLocalDynamsoftCert,l=!1,u=F.DWT.Port);case 16:return _.next=19,W3(s,u,l,d);case 19:if(f=_.sent,!(l&&f&&f.checkWithNoneSSL)){_.next=29;break}return l=!1,u=F.DWT.Port,_.next=26,W3(s,u,l,d);case 26:if(!(f=_.sent)||!f.cert){_.next=29;break}throw{code:-2824,message:"The Connection from the web page failed. Please make sure the Dynamsoft Service is running."};case 29:return _.abrupt("return",f);case 30:case"end":return _.stop()}},r)})),NE.apply(this,arguments)}function W3(r,i,a,s){return new W.Promise(function(u,l){if(s==tu.Check127){var d,f;j.bSafari?(d=vt.SSLPort,f=!0):(d=vt.Port,f=!1);var _=da.getWsClient(kn.hostForCheckCert,d,f);return _&&_.connected?(_.dispose(),u({upgrade:!1,socket:!0})):(T=_,b=function(){u({upgrade:!1,socket:!1})},L={id:R=v.now(),method:"GetServerInfo",parameter:[1],version:["dwasm2_",kn.getVersionStrForCheck()].join("")},x=D3,U=Oc,D={client:T,userData:{cmdId:R,cmd:null,sFun:function(T){var S,I=T;if(v.isString(T))try{I=v.parse(T)}catch{}if(I&&I.dcp){if(I.dcp.port&&I.dcp.sslPort)return void u({upgrade:!1,socket:!0,retry:!0});if(I.dcp.port&&!I.dcp.sslPort)return void l({code:-2819,message:"The Dynamsoft Service SSL certificate is invalid."})}throw $o(S={}),$t(S)},fFun:function(){u({upgrade:!0,socket:!0})},rawData:!0},taskId:R},T.setRetry(0),void T.request(v.stringify(L),x,D,U).then(function(Y){return T.dispose(),Y},function(){v.isFunction(b)&&b(),T.dispose()}))}var T,b,D,R,L,x,U;E3(da.getWsClient(r,i,a,!0),function(T){if(s==tu.CheckLocalDynamsoftCert){var S=T;if(v.isString(T))try{S=v.parse(T)}catch{}if(S&&v.isArray(S.result)){var I=S.result;if(I.length>4){var b=I[4];return""==b?void l({code:-2819,message:"The Dynamsoft Service SSL certificate is invalid."}):m3(b)?void l({code:-2818,message:"The Dynamsoft Service SSL certificate has expired."}):void u({cert:!0,upgrade:!1,socket:!0})}return void u({cert:!1,upgrade:!1,socket:!0})}}var D;throw $o(D={}),$t(D)},function(){u({cert:!1,upgrade:!0,socket:!0})},function(){u(!a||j.bSafari?{cert:!1,upgrade:!1,socket:!1}:{cert:!1,checkWithNoneSSL:!0})})})}function n_e(r){var i=tu.DoNotCheck;return j.bSSL&&("127.0.0.1"==r?i=tu.Check127:"local.dynamsoft.com"!=r&&"local.dynamsoftwebtwain.com"!=r||(i=tu.CheckLocalDynamsoftCert)),i}F.DWT.GetWebTwain=F.DWT.GetWebTwainEx=function(r){var i=r,a=F.DWT.WebTwainIdMap;if(!i){var s=Object.keys(a);return s.length>0?a[i=s[0]]:void 0}if(i in a)return a[i];var u=F.DWT.ContainerMap;return i in u?u[i]:void 0},F.DWT.NeedCheckWebTwainBySocket=w3,F.DWT.CheckWebTwainBySocket=function(r,i,a){var s,u,l,d=W.detect.urls;if(d&&d.length>0){var f=d[0];s=f.host||Ri(),u=f.port,l=f.ssl}else oo(s=Ri())?(l=!(!j.bSSL||!j.bSafari),s=kn.hostForCheckCert):l=j.bSSL,u=l?F.DWT.SSLPort:F.DWT.Port;E3(da.getWsClient(s,u,l,!0),r,i,a)},F.DWT.IsLocalServiceConnected=function(){return new W.Promise(function(r,i){var a,s=Ri();v.each(W.detect.ports,function(u){j.bSSL?u.ssl&&(a=u.port):u.ssl||(a=u.port)}),F.DWT.CheckConnectToTheService(s,a,function(u,l,d){r(!0)},function(){i(!1)})})},function(r){r.DoNotCheck=0,r.Check127=1,r.CheckLocalDynamsoftCert=2}(tu||(tu={}));var i_e=function(r){di(s,r);var i,a=function r_e(r){var i=function(){if(typeof Reflect>"u"||!Reflect.construct||Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch{return!1}}();return function(){var a,s=yt(r);if(i){var u=yt(this).constructor;a=Reflect.construct(s,arguments,u)}else a=s.apply(this,arguments);return fi(this,a)}}(s);function s(){return n(this,s),a.apply(this,arguments)}return c(s,[{key:"SetCookie",value:function(u){return this._cookie=u,document.cookie=u,Ne}},{key:"LoadImageFromBase64Binary",value:function(u,l,d,f){var g=this;if(g._resetErr(),!g._isValid())return!1;if(!u)return qn(g),v.isFunction(f)&&f(g._errorCode,g._getErrorString()),!1;var _,T,S,I,b,se,D=u,R=ve,L="LoadImageFromBase64Binary",x=l,U=1;if(D instanceof JD&&v.isFunction(D.getLength)&&v.isFunction(D.getData)&&(D=D.getData(0,D.getLength())),v.isString(D))if(-1!=D.indexOf("data:image/bmp"))x=0;else if(-1!=D.indexOf("data:image/jpeg"))x=1;else if(-1!=D.indexOf("data:image/tif"))x=2;else if(-1!=D.indexOf("data:image/png"))x=3;else if(-1!=D.indexOf("data:application/pdf"))x=4;else if(-1!=D.indexOf("data:image/jp2"))x=14;else{var Y=D.substr(0,64),Z=v.base64.decode(Y,!0);I=F.DWT.EnumDWT_ImageType,b=S=Z,(S instanceof ArrayBuffer||S instanceof Array)&&(b=new Uint8Array(S.slice(0,12))),x=37==(se=b)[0]&&80==se[1]&&68==se[2]&&70==se[3]?I.IT_PDF:function(se){return 73==se[0]&&73==se[1]&&42==se[2]&&0==se[3]||77==se[0]&&77==se[1]&&0==se[2]&&42==se[3]}(b)?I.IT_TIF:function(se){return 137==se[0]&&80==se[1]&&78==se[2]&&71==se[3]}(b)?I.IT_PNG:function(se){return 255==se[0]&&216==se[1]}(b)?I.IT_JPG:function(se){return 66==se[0]&&77==se[1]}(b)?I.IT_BMP:function(se){return 0==se[0]&&0==se[1]&&0==se[2]&&12==se[3]&&106==se[4]&&80==se[5]&&32==se[6]&&32==se[7]||255==se[0]&&79==se[1]&&255==se[2]&&81==se[3]}(b)?I.IT_J2K:I.IT_PNG}if(x!=F.DWT.EnumDWT_ImageType.IT_BMP&&x!=F.DWT.EnumDWT_ImageType.IT_JPG&&x!=F.DWT.EnumDWT_ImageType.IT_TIF&&x!=F.DWT.EnumDWT_ImageType.IT_PNG&&x!=F.DWT.EnumDWT_ImageType.IT_PDF&&x!=F.DWT.EnumDWT_ImageType.IT_J2K&&(x=-1),!Ye.checkProductKey(g,{Core:!0})||!Ye.checkPDFProductKeyWhenNeeds(g,x))return v.isFunction(f)&&f(g._errorCode,g._getErrorString()),ve;var oe=g._getCurrentDocumentName();return v.isFunction(d)&&(R=Ne),v.isString(D)&&-1!=D.indexOf("base64,")&&(D=D.substr(D.indexOf("base64,")+7)),T=g.__GetLoadEventsNum(),R?(W.cancelFrom=on.Other,g.IfShowProgressBar?W.showProgress(g,L,g.__IfShowCancelDialogWhenImageTransfer):W.hideProgress(),g.__bLoadingImage=Ne,_=g._innerSend(L,we(D,x,T,U=0),Ne,function(){if(W.closeProgress(null,L),g.__bLoadingImage=!1,g._isBindViewer()){var se=g._ImgManager.getCurrentImageIndex();se>=0&&g._innerRefreshUI(se)}return g._blts&&F.DWT.lcvrf(g),d&&d(D,l),!0},function(){W.closeProgress(null,L),g.__bLoadingImage=!1,v.isFunction(f)&&f(g._errorCode,g._getErrorString(),D,l)})):(_=g.__innerLoadImageFun(L,we(D,x,T,U),U,oe))&&g._blts&&F.DWT.lcvrf(g),_}},{key:"SaveSelectedImagesToBytes",value:function(u,l){return op(this),ve}},{key:"LoadImageFromBytes",value:function(u,l,d){return op(this),ve}},{key:"SetImageWidth",value:function(u,l,d,f){var g,_=this;if(_._resetErr(),!_._isValid())return!1;var T=parseInt(u);if(isNaN(T))return Dt(_),v.isFunction(f)&&f(_._errorCode,_._getErrorString()),!1;if(T<0||T>=_._ImgManager.count())return We(_),v.isFunction(f)&&f(_._errorCode,_._getErrorString()),!1;if(v.isUndefined(l))return qn(_),v.isFunction(f)&&f(_._errorCode,_._getErrorString()),!1;var S=_._ImgManager.convertClientIndexToServerId(T);return-1==S?(We(_),v.isFunction(f)&&f(_._errorCode,_._getErrorString()),!1):((g=1==_._innerFun("SetImageWidth",we(S,l)))?v.isFunction(d)&&d():v.isFunction(f)&&f(_._errorCode,_._getErrorString()),g)}},{key:"HTTPDownloadStreamThroughPost",value:function(u,l){return op(this),ve}},{key:"HTTPUploadStreamThroughPost",value:function(u,l,d,f,g){return op(this),ve}},{key:"HTTPUploadThroughPutDirectly",value:function(u,l,d,f,g){return op(this),!1}},{key:"SetCustomDSDataEx",value:function(u){return this._resetErr(),!!this._isValid()&&this._innerFun("SetCustomDSDataEx",we(u))}},{key:"SetCustomDSData",value:function(u){if(this._resetErr(),!this._isValid())return!1;var l=mt.replaceLocalFilename(u);return this._innerFun("SetCustomDSData",we(l))}},{key:"GetCustomDSDataEx",value:function(){var u=this;return u._resetErr(),!!u._isValid()&&u._innerFun("GetCustomDSDataEx")}},{key:"GetCustomDSData",value:function(u){var l=this;if(l._resetErr(),!l._isValid())return!1;var d=mt.replaceLocalFilename(u);return l._innerFun("GetCustomDSData",we(d))}},{key:"on",value:function(u,l){return this.registerEvent(u,l)}},{key:"off",value:function(u,l){return this.unregisterEvent(u,l)}},{key:"ConvertToBW",value:function(u,l,d){var f=this;if(f._resetErr(),!f._isValid())return!1;if(!Ye.checkProductKey(f,{Core:!0}))return v.isFunction(d)&&d(f._errorCode,f._getErrorString()),!1;var g=parseInt(u);if(isNaN(g))return Dt(f),v.isFunction(d)&&d(f._errorCode,f._getErrorString()),!1;if(g<0||g>=f._ImgManager.count())return We(f),v.isFunction(d)&&d(f._errorCode,f._getErrorString()),!1;var _=f.ChangeBitDepth(u,1,!0);return _?v.isFunction(l)&&l():v.isFunction(d)&&d(f._errorCode,f._getErrorString()),_}},{key:"LoadImageFromBinary",value:function(u,l,d){var f=this,g="LoadImageFromBinary";return v.isFunction(l)&&(f.IfShowProgressBar?W.showProgress(f,g,f.__IfShowCancelDialogWhenImageTransfer):W.hideProgress()),this._innerLoadImageFromBinary(u,0,!0,function(){v.isFunction(l)&&(f.IfShowProgressBar&&W.closeProgress(null,g),l())},function(_,T){v.isFunction(l)&&f.IfShowProgressBar&&W.closeProgress(null,g),v.isFunction(d)&&d(_,T)})}},{key:"EnableSourceUI",value:function(u,l){var d=this;return d._resetErr(),!!d._isValid()&&(d._innerSend("EnableSourceUI",null,!0,u,l),!0)}},{key:"GetIfShowVideoContainer",value:function(){return this._UIView.GetIfShowVideoContainer()}},{key:"ShowVideoContainer",value:function(u){return this._UIView.ShowVideoContainer(u)}},{key:"UpdateVideoContainer",value:function(u){return this._UIView.UpdateVideoContainer(u)}},{key:"ChangeBitDepth",value:function(u,l,d){var f,g=this;if(g._resetErr(),!g._isValid())return!1;if(f=parseInt(u),isNaN(f))return Dt(g),!1;if(f<0||f>=g._ImgManager.count())return We(g),!1;var _=g._ImgManager.convertClientIndexToServerId(f);return-1==_?(We(g),!1):g._innerFun("ChangeBitDepth",we(_,l,d))}},{key:"ConvertToGrayScale",value:function(u,l,d){var f,g=this;if(g._resetErr(),!g._isValid())return!1;var _=parseInt(u);if(isNaN(_))return Dt(g),v.isFunction(d)&&d(g._errorCode,g._getErrorString()),!1;if(_<0||_>=g._ImgManager.count())return We(g),v.isFunction(d)&&d(g._errorCode,g._getErrorString()),!1;var T=g._ImgManager.convertClientIndexToServerId(_);return-1==T?(We(g),v.isFunction(d)&&d(g._errorCode,g._getErrorString()),!1):((f=1==g._innerFun("ConvertToGrayScale",we(T)))?(mt.refreshImageAfterInvokeFun(g,_),v.isFunction(l)&&l()):v.isFunction(d)&&d(g._errorCode,g._getErrorString()),f)}},{key:"ClearTiffCustomTag",value:function(){var u=this;return u._resetErr(),!!u._isValid()&&(u._aryTiffTag.splice(0,u._aryTiffTag.length),u._innerFun("ClearTiffCustomTag"))}},{key:"SetTiffCustomTag",value:function(u,l,d){var f=this;if(f._resetErr(),!f._isValid())return!1;if(v.isUndefined(u)||v.isUndefined(l))return qn(f),!1;var g,_=1*u;if(g=v.isString(l)?v.replaceAll(l,'"','\\"'):l,_<=0||_>2147483647)return Ee(f,-2378,"Invalid value for the tiff tag code."),!1;var T,S=0,I=!1,b=f._aryTiffTag.length;for(S=0;S<b;S++)(T=f._aryTiffTag[S]).tag==_&&(T.Content=l,T.UseBase64Encoding=d,I=!0);return!I&&b>=32?(Ee(f,-2428,"Tiff tag count has exceeded the limit."),!1):f._innerFun("SetTiffCustomTag",we(_,g,d))}},{key:"IsBlankImage",value:function(u){var l,d=this;if(d._resetErr(),!d._isValid())return!1;if(l=parseInt(u),isNaN(l))return Dt(d),!1;if(l<0||l>=d._ImgManager.count())return We(d),!1;var f=d._ImgManager.convertClientIndexToServerId(l);return-1==f?(We(d),!1):d._innerFun("IsBlankImage",we(f,ve))}},{key:"IsBlankImageExpress",value:function(u){var l=this;if(l._resetErr(),!l._isValid())return!1;var d=parseInt(u);if(isNaN(d))return Dt(l),!1;if(d<0||d>=l._ImgManager.count())return We(l),!1;var f=l._ImgManager.convertClientIndexToServerId(d);return-1==f?(We(l),!1):l._innerFun("IsBlankImage",we(f,Ne))}},{key:"SetOpenSourceTimeout",value:function(u){var l=this;return l._resetErr(),!!l._isValid()&&l._innerFun("SetOpenSourceTimeout",we(u))}},{key:"GetImageURL",value:function(u,l,d,f,g){var _=this;if(_._resetErr(),!_._isValid())return!1;var T,S,I,b=u,D=parseInt(l),R=parseInt(d);if(f?(T="",S="dwt://"):(T=_._httpUrl,S="dwt/"),I=[T,S,be.getDWTPrefix(),be.getServerVersionInfo(),"/img?id=",_._clientId],v.isUndefined(b)||null===b)return tw(_),"";if(g)I.push("&index=-1&width=-1&height=-1&webcam="),I.push(g);else{if(b=parseInt(b),isNaN(b))return Dt(_),"";if(b<-1||b>=_._ImgManager.count())return We(_),"";var L=_._ImgManager.convertClientIndexToServerId(b);if(-1==L)return"";I.push("&index="),I.push(L),D>0&&R>0?(I.push("&width="),I.push(D),I.push("&height="),I.push(R)):I.push("&width=-1&height=-1"),Mn.bMobile&&I.push("&type=1&quality=85")}if(I.push("&t="),I.push((new Date).getTime()),I=I.join(""),j.bFileSystem&&I.indexOf("dwt://")<0){var x=new Image;x.crossOrigin="anonymous",x.src=I,x=null}return I}},{key:"GetImagePartURL",value:function(u,l,d){var f=this;if(f._resetErr(),!f._isValid())return!1;var g=parseInt(u);return isNaN(g)?(Dt(f),""):g<0||g>=f._ImgManager.count()?(We(f),""):this.GetImageURL(g,l,d,!0)}},{key:"SetLanguage",value:function(u){var l=this;return l._resetErr(),!!l._isValid()&&l._innerFun("SetLanguageForSecurity",we(u))}},{key:"GetLicenseInfo",value:function(u,l){var d=this;return d.__licenseInfo?v.isFunction(u)&&u(d.__licenseInfo):d._innerFunRaw("GetLicenseInfo",null,Ne,ve,Ne,function(f){f?f.exception?v.isFunction(l)&&l(f.exception):(jw(d,f),v.isFunction(u)&&u(d.__licenseInfo)):v.isFunction(l)&&l()},l),Ne}},{key:"SetProductKeyAsync",value:function(u){return this._setProductKeyAsync(u)}},{key:"GetVersionInfoAsync",value:function(){return _e.Promise.resolve(kn.versionInfoFromServer)}},{key:"isUsingActiveX",value:function(){return!1}},{key:"SetLTSLicenseAsync",value:function(u){return this._setLTSLicenseAsync(u)}},{key:"Print",value:function(u){var l=this;return l._resetErr(),!!l._isValid()&&(l._isNoViewer()?l._nouiNotSupport("Print"):u?(l._innerSend("PrintEx",we(!0),!0,function(){},function(){}),!0):(l._ImagePrint.Print(),!0))}},{key:"PrintEx",value:function(u){var l=this;return l._resetErr(),!!l._isValid()&&(v.isArray(u)?l._isNoViewer()?l._nouiNotSupport("Print"):!!l._checkIndices(u)&&(l._ImagePrint.PrintEx(u),!0):(Ha(l),!1))}},{key:"RunCommandAsync",value:(i=Ae(A.mark(function u(l){var d,f,g,_;return A.wrap(function(T){for(;;)switch(T.prev=T.next){case 0:if(d=this,l&&v.isString(l.command)&&l.parameter){T.next=4;break}throw qn(d),{code:d._errorCode,message:d._errorString};case 4:if(!v.isNumber(f=l.parameter.index)){T.next=11;break}if(!(isNaN(f)||!v.isNumber(f)||f<0||f>=d.HowManyImagesInBuffer)){T.next=9;break}throw We(d),{code:d._errorCode,message:d._errorString};case 9:T.next=13;break;case 11:throw Dt(d),{code:d._errorCode,message:d._errorString};case 13:return g=d._ImgManager.convertClientIndexToServerId(f),l.parameter.index=g,_=["[",v.stringify(l),"]"].join(""),T.abrupt("return",d._innerFunRawV3("runCommand",_));case 17:case"end":return T.stop()}},u,this)})),function(u){return i.apply(this,arguments)})}]),s}(va);function nl(r,i,a,s){var u;0!==a&&1!==a?u=a:(u={},a&&(u.set=1==s?function(l){var d=1*l;return!v.isNumber(d)||isNaN(d)?(Tr(r),ve):(r._resetErr(),!!r._isValid()&&r._innerFun(i,we(d)))}:2==s?function(l){return v.isBoolean(l)?(r._resetErr(),!!r._isValid()&&r._innerFun(i,we(l))):(Tr(r),ve)}:function(l){return v.isString(l)?(r._resetErr(),!!r._isValid()&&r._innerFun(i,we(l))):(Tr(r),ve)})),u.get||(u.get=function(){return r._resetErr(),!!r._isValid()&&r._innerFun(i)}),i in r||Object.defineProperty(r,i,u)}function o_e(r,i){var a=typeof Symbol<"u"&&r[Symbol.iterator]||r["@@iterator"];if(!a){if(Array.isArray(r)||(a=function(g,_){if(g){if("string"==typeof g)return U3(g,_);var T=Object.prototype.toString.call(g).slice(8,-1);if("Object"===T&&g.constructor&&(T=g.constructor.name),"Map"===T||"Set"===T)return Array.from(g);if("Arguments"===T||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(T))return U3(g,_)}}(r))||i&&r&&"number"==typeof r.length){a&&(r=a);var s=0,u=function(){};return{s:u,n:function(){return s>=r.length?{done:!0}:{done:!1,value:r[s++]}},e:function(g){throw g},f:u}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var l,d=!0,f=!1;return{s:function(){a=a.call(r)},n:function(){var g=a.next();return d=g.done,g},e:function(g){f=!0,l=g},f:function(){try{d||null==a.return||a.return()}finally{if(f)throw l}}}}function U3(r,i){(null==i||i>r.length)&&(i=r.length);for(var a=0,s=new Array(i);a<i;a++)s[a]=r[a];return s}function u_e(r,i,a){return i.has(r),a}var V3=new WeakSet,j3=function(){function r(s,u,l,d){n(this,r),function a_e(r,i){(function(a,s){if(s.has(a))throw new TypeError("Cannot initialize the same private elements twice on an object")})(r,i),i.add(r)}(this,V3),at(this,"serverUrl",void 0),this.serverUrl=s,this.bLocal=oo(s),this.clientId=l??v.guid(),this.bGlobal=u,this.serverName=d,this.bLicenseOK=!1}var i,a;return c(r,[{key:"checkSource",value:function(s){if(!s)throw{code:-1003,message:"Source Manager unable to find the specified Source"}}},{key:"parseResultDefault",value:function(s){var u;if(v.isObject(s)&&s.exception&&0!=s.exception)throw{code:s.exception,message:null!==(u=s.description)&&void 0!==u?u:"general error"};if(s&&v.isArray(s.result)&&s.result.length>0){var l=s.result[s.result.length-1];try{return JSON.parse(l)}catch{return l}}throw s}},{key:"_requestAsync",value:(a=Ae(A.mark(function s(u,l,d){var f,g,_,T,S,I,b,D;return A.wrap(function(R){for(;;)switch(R.prev=R.next){case 0:if(f=[MU(),"/",u.method].join(""),!F.DWT.ConnectWithSocket){R.next=9;break}return R.next=4,u_e(this,V3,c_e).call(this);case 4:return S=0,u&&(S=u.cmdId),I={client:T=R.sent,userData:{command:u},taskId:S},R.abrupt("return",T.request(v.stringify(u),null,I));case 9:return l&&(g=l),b=(D=this).serverUrl?Qa.getDDMUrl(D.serverUrl,D.bGlobal,[kU,u.method].join("")):Qa.getModuleUrl(f),R.prev=12,R.next=15,Wc(b,{method:"post",dataType:"json",body:v.stringify(u),fetchRaw:null!=d&&d,timeout:g});case 15:_=R.sent,R.next=21;break;case 18:throw R.prev=18,R.t0=R.catch(12),R.t0;case 21:return R.abrupt("return",_);case 22:case"end":return R.stop()}},s,this,[[12,18]])})),function(s,u,l){return a.apply(this,arguments)})},{key:"_resetLicense",value:(i=Ae(A.mark(function s(u,l,d){return A.wrap(function(f){for(;;)switch(f.prev=f.next){case 0:case"end":return f.stop()}},s)})),function(s,u,l){return i.apply(this,arguments)})}]),r}();function c_e(){return H3.apply(this,arguments)}function H3(){return(H3=Ae(A.mark(function r(){var i,a,s;return A.wrap(function(u){for(;;)switch(u.prev=u.next){case 0:if((i=this)._wsClient){u.next=10;break}return a=new Fd,this.serverUrl?v.startsWith(this.serverUrl,"wss://")?(a.ssl=!0,a.server=this.serverUrl.substring(8)):v.startsWith(this.serverUrl,"ws://")?(a.ssl=!1,a.server=this.serverUrl.substring(7)):(a.ssl=W.detect.ssl,a.server=this.serverUrl):(a.ssl=W.detect.ssl,a.server=Ri()),a.port=a.ssl?vt.SSLPort:vt.Port,a.useWS=!0,s=Ga.Instance.getClient(a),u.next=9,s.testConnection();case 9:i._wsClient=s;case 10:return u.abrupt("return",i._wsClient);case 11:case"end":return u.stop()}},r,this)}))).apply(this,arguments)}at(j3,"logLevel",-1);var G3,l_e=function(r){di(s,r);var i,a=function s_e(r){var i=function(){if(typeof Reflect>"u"||!Reflect.construct||Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch{return!1}}();return function(){var a,s=yt(r);if(i){var u=yt(this).constructor;a=Reflect.construct(s,arguments,u)}else a=s.apply(this,arguments);return fi(this,a)}}(s);function s(){var u;n(this,s);for(var l=arguments.length,d=new Array(l),f=0;f<l;f++)d[f]=arguments[f];return at(pt(u=a.call.apply(a,[this].concat(d))),"_bInited",!1),u}return c(s,[{key:"getDynamsoftService",value:(i=Ae(A.mark(function u(l,d,f,g){var _,T,S,I,b,D,R,L,x,U,Y,Z,oe,se,k;return A.wrap(function(E){for(;;)switch(E.prev=E.next){case 0:return f=null!==(_=f)&&void 0!==_&&_,g=null!==(T=g)&&void 0!==T?T:30,S={id:this.clientId,cmdId:v.guid(),method:"SearchScanner",parameter:[1,"_privet._tcp.local.",!1,!0,f,g,l,d],version:za},E.prev=5,E.next=8,this._requestAsync(S,3e4,!1);case 8:I=E.sent,this._bInited=!0,E.next=19;break;case 12:if(E.prev=12,E.t0=E.catch(5),!this.bLocal){E.next=18;break}throw Lc(b={}),{code:b._errorCode,message:b._errorString};case 18:throw{code:-2604,message:"Failed to connect to the Proxy Service. Please make sure the Proxy Service is configured successfully, Dynamsoft Service is running, or the certificate is valid."};case 19:D=[],R=this.parseResultDefault(I),L=o_e(R),E.prev=22,L.s();case 24:if((x=L.n()).done){E.next=40;break}if(!((U=x.value).service_type&&U.service_type==gi.ST_UNKNOWN||U.type&&"dynamsoft_private_cloud_scan"!=U.type&&"twaindirect"!=U.type)){E.next=30;break}return E.abrupt("continue",38);case 30:if(!U.service_type){E.next=38;break}E.t1=U.service_type,E.next=E.t1===gi.ST_DYNAMSOFT_SERVICE?34:38;break;case 34:return(Y=U.modules)&&v.isArray(Y)&&v.isString(Y[0])&&(Z=Y[0].split(",")).length>=3&&Z[0]>=1&&Z[1]>=8&&Z[2]>0&&(U.bGlobalFind=!0,oe=z3(this.serverUrl,U),D.push(oe)),U.bGlobalFind||(k=null!==(se=U?.ty)&&void 0!==se?se:"",v.warn(["The Dynamsoft Service on [",k,"] is old version."].join(""))),E.abrupt("break",38);case 38:E.next=24;break;case 40:E.next=45;break;case 42:E.prev=42,E.t2=E.catch(22),L.e(E.t2);case 45:return E.prev=45,L.f(),E.finish(45);case 48:return E.abrupt("return",D);case 49:case"end":return E.stop()}},u,this,[[5,12],[22,42,45,48]])})),function(u,l,d,f){return i.apply(this,arguments)})},{key:"dispose",value:function(){var u={id:this.clientId,cmdId:v.guid(),method:"dispose",version:za};this._requestAsync(u,500)}}]),s}(j3);function z3(r,i){var a=new Kw;return a.server=r,a.attrs=i,a}function d_e(r,i){var a=typeof Symbol<"u"&&r[Symbol.iterator]||r["@@iterator"];if(!a){if(Array.isArray(r)||(a=function(g,_){if(g){if("string"==typeof g)return K3(g,_);var T=Object.prototype.toString.call(g).slice(8,-1);if("Object"===T&&g.constructor&&(T=g.constructor.name),"Map"===T||"Set"===T)return Array.from(g);if("Arguments"===T||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(T))return K3(g,_)}}(r))||i&&r&&"number"==typeof r.length){a&&(r=a);var s=0,u=function(){};return{s:u,n:function(){return s>=r.length?{done:!0}:{done:!1,value:r[s++]}},e:function(g){throw g},f:u}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var l,d=!0,f=!1;return{s:function(){a=a.call(r)},n:function(){var g=a.next();return d=g.done,g},e:function(g){f=!0,l=g},f:function(){try{d||null==a.return||a.return()}finally{if(f)throw l}}}}function K3(r,i){(null==i||i>r.length)&&(i=r.length);for(var a=0,s=new Array(i);a<i;a++)s[a]=r[a];return s}function $3(r,i){(function(a,s){if(s.has(a))throw new TypeError("Cannot initialize the same private elements twice on an object")})(r,i),i.add(r)}function LE(r,i,a){return i.has(r),a}function q3(r){var i,a=gi.ST_UNKNOWN;return r==ze.ESCLSCANNER?a=gi.ST_ESCL:r==ze.WIFIDIRECTSCANNER?a=gi.ST_WIFI_DIRECT:((i=r)==ze.TWAINSCANNER||i==ze.WIATWAINSCANNER||i==ze.TWAINX64SCANNER||i==ze.ICASCANNER||i==ze.SANESCANNER)&&(a=gi.ST_DYNAMSOFT_SERVICE),a}!function(r){r.SAM_ANONYMOUS=0,r.SAM_PWD=1}(G3||(G3={}));var WE=new WeakSet,Q3=new WeakSet,Qv=function(r){di(T,r);var i,a,s,u,l,d,f,g,_=function f_e(r){var i=function(){if(typeof Reflect>"u"||!Reflect.construct||Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch{return!1}}();return function(){var a,s=yt(r);if(i){var u=yt(this).constructor;a=Reflect.construct(s,arguments,u)}else a=s.apply(this,arguments);return fi(this,a)}}(T);function T(){var S;n(this,T);for(var I=arguments.length,b=new Array(I),D=0;D<I;D++)b[D]=arguments[D];return $3(pt(S=_.call.apply(_,[this].concat(b))),Q3),$3(pt(S),WE),at(pt(S),"_bInited",!1),at(pt(S),"_currentDevice",void 0),S}return c(T,[{key:"getSources",value:(g=Ae(A.mark(function S(I,b,D){var R,L,x,U,Y,Z,oe,se,k,E,M,G,V,J;return A.wrap(function(Q){for(;;)switch(Q.prev=Q.next){case 0:if(x="",U=!1,Y=[],Z=!1,((oe=I??Lw)&ze.ESCLSCANNER)==ze.ESCLSCANNER&&(x="_uscan._tcp.local."),(oe&ze.WIFIDIRECTSCANNER)==ze.WIFIDIRECTSCANNER&&(U=!0),0!=x.length||U){Q.next=9;break}return Q.abrupt("return",[]);case 9:return b=null!==(R=b)&&void 0!==R&&R,D=null!==(L=D)&&void 0!==L?L:30,se={id:this.clientId,cmdId:v.guid(),method:"SearchScanner",parameter:[1,x,U,Z,b,D],version:za},Q.next=14,this._requestAsync(se,3e4,!1);case 14:if(k=Q.sent,this._bInited=!0,E=this.parseResultDefault(k),v.isArray(E)){Q.next=19;break}throw{code:-2612,message:"The devices must be an Array."};case 19:M=d_e(E),Q.prev=20,M.s();case 22:if((G=M.n()).done){Q.next=47;break}if(!((V=G.value).service_type&&V.service_type==gi.ST_UNKNOWN||V.type&&"dynamsoft_private_cloud_scan"!=V.type&&"twaindirect"!=V.type)){Q.next=28;break}return Q.abrupt("continue",45);case 28:if(!V.service_type){Q.next=45;break}Q.t0=V.service_type,Q.next=Q.t0===gi.ST_DYNAMSOFT_SERVICE?32:Q.t0===gi.ST_ESCL||Q.t0===gi.ST_WIFI_DIRECT?33:45;break;case 32:return Q.abrupt("break",45);case 33:return(J=new Xo).name="",J.displayName="",J.deviceType=0,V.service_type==gi.ST_ESCL?J.deviceType=ze.ESCLSCANNER:V.service_type==gi.ST_WIFI_DIRECT&&(J.deviceType=ze.WIFIDIRECTSCANNER),J.name=V.ty,V.hostname&&V.hostname.length>V.ty.length&&(J.name=V.hostname),J.displayName=(V.service_type==gi.ST_ESCL?"eSCL-":"")+J.name,this.bGlobal||(V.url=this.serverUrl,this.serverName&&(J.displayName=J.displayName+" on ["+this.serverName+"]")),J.serviceInfo=z3(this.serverUrl,V),Y.push(J),Q.abrupt("break",45);case 45:Q.next=22;break;case 47:Q.next=52;break;case 49:Q.prev=49,Q.t1=Q.catch(20),M.e(Q.t1);case 52:return Q.prev=52,M.f(),Q.finish(52);case 55:return Q.abrupt("return",Y);case 56:case"end":return Q.stop()}},S,this,[[20,49,52,55]])})),function(S,I,b){return g.apply(this,arguments)})},{key:"getCapabilitiesAsync",value:(f=Ae(A.mark(function S(I){var b,D;return A.wrap(function(L){for(;;)switch(L.prev=L.next){case 0:return this.checkSource(I),(I.deviceType&ze.ESCLSCANNER)!=ze.ESCLSCANNER&&(I.deviceType&ze.WIFIDIRECTSCANNER)!=ze.WIFIDIRECTSCANNER||(this._currentDevice=I),b=q3(I.deviceType),D={id:this.clientId,cmdId:v.guid(),method:"SendRequestToScanner",parameter:["getCapabilities",v.stringify({UUID:I.serviceInfo.attrs.UUID,service_type:b,ty:I.name})],version:za},L.next=6,this._requestAsync(D,0);case 6:return L.abrupt("return",this.parseResultDefault(L.sent));case 8:case"end":return L.stop()}},S,this)})),function(S){return f.apply(this,arguments)})},{key:"selectSourceAsync",value:(d=Ae(A.mark(function S(I){var b;return A.wrap(function(D){for(;;)switch(D.prev=D.next){case 0:return D.next=2,this.getCapabilitiesAsync(I);case 2:if(!(b=D.sent)&&""!=b){D.next=5;break}return D.abrupt("return",!0);case 5:case"end":return D.stop()}},S,this)})),function(S){return d.apply(this,arguments)})},{key:"versionInfo",value:(l=Ae(A.mark(function S(){var I,b;return A.wrap(function(D){for(;;)switch(D.prev=D.next){case 0:return I={id:this.clientId,cmdId:v.guid(),method:"VersionInfo",version:za},D.next=3,this._requestAsync(I,5e3);case 3:return b=D.sent,this._bInited=!0,D.abrupt("return",b);case 6:case"end":return D.stop()}},S,this)})),function(){return l.apply(this,arguments)})},{key:"getLicenseInfo",value:function(S,I,b){return this._resetLicense(S,I,b)}},{key:"getImageAsArrayBuffer",value:(u=Ae(A.mark(function S(I,b){return A.wrap(function(D){for(;;)switch(D.prev=D.next){case 0:return D.abrupt("return",LE(this,WE,Y3).call(this,I,b));case 1:case"end":return D.stop()}},S,this)})),function(S,I){return u.apply(this,arguments)})},{key:"getImageToDWT",value:(s=Ae(A.mark(function S(I,b,D){return A.wrap(function(R){for(;;)switch(R.prev=R.next){case 0:return R.abrupt("return",LE(this,WE,Y3).call(this,I,b,D));case 1:case"end":return R.stop()}},S,this)})),function(S,I,b){return s.apply(this,arguments)})},{key:"acquireImage",value:(a=Ae(A.mark(function S(I,b,D){var R,L,x,U,Y,Z,oe;return A.wrap(function(k){for(;;)switch(k.prev=k.next){case 0:I=null!==(R=I)&&void 0!==R?R:this._currentDevice,this.checkSource(I),this._currentDevice=I,L=q3(I.deviceType),x=["scan",v.stringify({UUID:I.serviceInfo.attrs.UUID,service_type:L})],U=LE(this,Q3,h_e).call(this,b),x[2]=v.stringify(U),Y={id:this.clientId,cmdId:v.guid(),method:"SendRequestToScanner",parameter:x,version:za},Z=0;case 10:if(!(Z<5)){k.next=33;break}return k.prev=11,k.next=14,this._requestAsync(Y,0);case 14:return oe=this.parseResultDefault(k.sent),v.isObject(oe)&&(oe.device=I,oe.scanOptions=U),k.abrupt("break",33);case 20:if(k.prev=20,k.t0=k.catch(11),-1004!=k.t0.code&&-1001!=k.t0.code){k.next=29;break}if(!(Z>=4)){k.next=25;break}throw k.t0;case 25:return k.next=27,new W.Promise(function(E,M){setTimeout(E,2e3)});case 27:k.next=30;break;case 29:throw k.t0;case 30:Z++,k.next=10;break;case 33:return k.abrupt("return",oe);case 34:case"end":return k.stop()}},S,this,[[11,20]])})),function(S,I,b){return a.apply(this,arguments)})},{key:"_resetLicense",value:(i=Ae(A.mark(function S(I,b,D){var R,L,x,U;return A.wrap(function(Y){for(;;)switch(Y.prev=Y.next){case 0:return this.longKeyOrShortkey=I,this.cu=b,v.isNumber(Qv.logLevel)||(Qv.logLevel=-1),R=b??"",L={id:this.clientId,cmdId:v.guid(),method:"GetLicenseInfo",parameter:[I,T.logLevel,R,D],version:za},Y.prev=5,Y.next=8,this._requestAsync(L,1e4);case 8:return x=Y.sent,this._bInited=!0,Y.abrupt("return",this.parseResultDefault(x));case 13:if(Y.prev=13,Y.t0=Y.catch(5),!this.bLocal){Y.next=19;break}throw Lc(U={}),{code:U._errorCode,message:U._errorString};case 19:throw{code:-2604,message:"Failed to connect to the Proxy Service. Please make sure the Proxy Service is configured successfully, Dynamsoft Service is running, or the certificate is valid."};case 20:case"end":return Y.stop()}},S,this,[[5,13]])})),function(S,I,b){return i.apply(this,arguments)})}]),T}(l_e);function Y3(r,i,a){return J3.apply(this,arguments)}function J3(){return(J3=Ae(A.mark(function r(i,a,s){var u,l,d,f,_;return A.wrap(function(T){for(;;)switch(T.prev=T.next){case 0:if(null!=i&&i.device){T.next=2;break}throw{code:-1011,message:"Operation out of expected sequence"};case 2:return s=null!==(u=s)&&void 0!==u?u:{ver:"",clientId:""},(l=["getImage",v.stringify({UUID:i.device.serviceInfo.attrs.UUID,service_type:a})])[2]=v.stringify(i.scanOptions),l[3]=i.scanJobs,l[4]=i.scanId,l[5]=s._clientId,l[6]=s._ver,d={id:this.clientId,cmdId:v.guid(),method:"SendRequestToScanner",parameter:l,version:za},T.next=12,this._requestAsync(d,0,!0);case 12:if(!((f=T.sent).headers.get("content-type").indexOf("image/")>=0)){T.next=20;break}return T.next=17,f.arrayBuffer();case 17:return T.abrupt("return",T.sent);case 20:return T.next=22,f.json();case 22:if("boolean"!=typeof(_=this.parseResultDefault(T.sent))){T.next=28;break}return T.abrupt("return",null);case 28:return T.abrupt("return",_);case 29:case"end":return T.stop()}},r,this)}))).apply(this,arguments)}function h_e(r){var i=[];if(r){v.isNumber(r.PixelType)&&(i.push({capability:ss.ICAP_PIXELTYPE,curValue:r.PixelType}),F.DWT.EnumDWT_PixelType.TWPT_BW==r.PixelType&&(i.push({capability:32771,curValue:"application/octet-stream"}),i.push({capability:32772,curValue:"application/octet-stream"})));var a=r.Resolution;a||(a=300),i.push({capability:ss.ICAP_XRESOLUTION,curValue:a}),i.push({capability:ss.ICAP_YRESOLUTION,curValue:a}),void 0!==r.Brightness&&i.push({capability:ss.ICAP_BRIGHTNESS,curValue:r.Brightness}),void 0!==r.XferCount&&i.push({capability:ss.CAP_XFERCOUNT,curValue:r.XferCount}),void 0!==r.Contrast&&i.push({capability:ss.ICAP_CONTRAST,curValue:r.Contrast}),void 0!==r.TransferMode&&i.push({capability:ss.ICAP_XFERMECH,curValue:r.TransferMode}),void 0!==r.IfFeederEnabled&&i.push({capability:ss.CAP_FEEDERENABLED,curValue:r.IfFeederEnabled?1:0}),void 0!==r.IfDuplexEnabled&&i.push({capability:ss.CAP_DUPLEXENABLED,curValue:r.IfDuplexEnabled?1:0})}return i}var X3=function(r,i,a){2==a&&v.each(i,function(s,u){Kt(r,s,{get:function(){return r._resetErr(),r._isValid()?Ne:ve},set:function(l){return r._resetErr(),r._isValid()?Ne:ve}})})},Z3=function(r,i){v.each(i,function(a,s){nl(r,a,1,2)})},eH=function(r,i){v.each(i,function(a,s){nl(r,a,1,1)})},tH=function(r,i){v.each(i,function(a,s){nl(r,a,0)})},nH=function(r,i){v.each(i,function(a,s){nl(r,a,1)})};W.DynamicLoadAddonFuns=[],W.attachAddon=function(r){var i=!1;return v.each(W.DynamicLoadAddonFuns,function(a){v.isFunction(a)&&(a(r),i=!0)}),!kn.bFullEdition&&r.__addon&&delete r.__addon.Camera,i};var rH=c(function r(i,a,s){n(this,r),this.Url=i,this.Width=a,this.Height=s}),m_e=function(){function r(i){n(this,r),this._stwain=i,this._ImgManager=i._ImgManager}return c(r,[{key:"Print",value:function(){var i=this;if(i.count()<=0)return!1;var a,s=[];for(a=0;a<i.count();a++)s.push(a);return i.PrintEx(s)}},{key:"PrintCurrentImage",value:function(){var i,a,s,u=this;if(!((i=u._ImgManager.getCurrentImageIndex())<0))return-1==(s=u._ImgManager.convertClientIndexToServerId(i))?(We(u),!1):(a=tn.getImageUrl(u._ImgManager.getBaseUrl,s,-1,-1),u.__PrintInner(a,s,i))}},{key:"PrintEx",value:function(i){var a=this;if(!(a.count()<=0)){var s=[];return F.DWT.ConnectWithSocket?a.__GetPrintUrlforSocket(i,s):a.__GetPrintUrlforHttp(i,s),!0}}},{key:"__PrintInner",value:function(i,a,s){var u=this,l=u._ImgManager.getImageIdMap(a),d=[];if(!l)return!1;var f=l.width;(v.isUndefined(l.width)||l.width<=0)&&(l.width=u.getImageWidthFromServer(s));var g=l.height;(v.isUndefined(l.height)||l.height<=0)&&(l.height=u.getImageHeightFromServer(s));var _=new rH(i,l.width,l.height);return d.push(_),l.width=f,l.height=g,tn.print(d),!0}},{key:"__GetPrintUrl",value:function(i,a,s){var u,l,d=this,f=0,g=0;return(u=d._ImgManager.getImageIdMap(a))&&(!u.width||u.width<=0?u.width=d.getImageWidthFromServer(s):f=u.width,!u.height||u.height<=0?u.height=d.getImageHeightFromServer(s):g=u.height,l=new rH(i,u.width,u.height),u.width=f,u.height=g),l}},{key:"__GetPrintUrlforHttp",value:function(i,a){var s=this;v.each(i,function(u){var l=s._ImgManager.convertClientIndexToServerId(u);if(-1!=l){var d=tn.getImageUrl(s._ImgManager.getBaseUrl,l,-1,-1),f=s.__GetPrintUrl(d,l,u);a.push(f)}}),tn.print(a)}},{key:"__GetPrintUrlforSocket",value:function(i,a){var s,u=this,l=_e.Promise.resolve(0),d=0;return v.each(i,function(f){l=l.then(function(){var g=u._ImgManager.convertClientIndexToServerId(f);-1!=g&&u._ImgManager.getImageData(f).then(function(_){if(d++,!_){var T={};return Dt(T),void mn(T._errorString)}s=$a(_.oriData)?URL.createObjectURL(new Blob([_.oriData])):_.oriData instanceof Blob?URL.createObjectURL(_.oriData):_.oriData;var S=u.__GetPrintUrl(s,g,f);a.push(S),i.length==d&&tn.print(a)})})}),!0}},{key:"__GetPrintUrlforMobileEx",value:function(i,a){var s,u=this,l=_e.Promise.resolve(0),d=0;return v.each(i,function(f){l=l.then(function(){var g=u._ImgManager.convertClientIndexToServerId(f);-1!=g&&u._ImgManager.getImageData(f).then(function(_){if(d++,!_){var T={};return Dt(T),void mn(T._errorString)}s=$a(_.oriData)?URL.createObjectURL(new Blob([_.oriData])):_.oriData instanceof Blob?URL.createObjectURL(_.oriData):_.oriData;var S=u.__GetPrintUrl(s,g,f);a.push(S),i.length==d&&tn.print(a)})})}),!0}},{key:"count",value:function(){return this._ImgManager.count()}},{key:"getImageHeightFromServer",value:function(i){var a,s,u,l=this,d=1*i;return a=l.count(),d<0||d>a?0:(u=l._ImgManager.convertClientIndexToServerId(d),(s=l._ImgManager.getImageIdMap(u))&&s.imageHeight?s.imageHeight:l._stwain.GetImageHeight(d))}},{key:"getImageWidthFromServer",value:function(i){var a,s,u,l=this,d=1*i;return a=l.count(),d<0||d>a?0:(u=l._ImgManager.convertClientIndexToServerId(d),(s=l._ImgManager.getImageIdMap(u))&&s.imageWidth?s.imageWidth:l._stwain.GetImageWidth(d))}}]),r}();function rf(r,i){(function(a,s){if(s.has(a))throw new TypeError("Cannot initialize the same private elements twice on an object")})(r,i),i.add(r)}function wr(r,i,a){return i.has(r),a}W.detect.viewerScriptLoaded=Ne;var BE=new WeakSet,UE=new WeakSet,iH=new WeakSet,oH=new WeakSet,Po=new WeakSet,Yv=new WeakSet,sH=function(r){di(u,r);var i,a,s=function __e(r){var i=function(){if(typeof Reflect>"u"||!Reflect.construct||Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch{return!1}}();return function(){var a,s=yt(r);if(i){var u=yt(this).constructor;a=Reflect.construct(s,arguments,u)}else a=s.apply(this,arguments);return fi(this,a)}}(u);function u(l){var d;n(this,u),rf(pt(d=s.call(this,l)),Yv),rf(pt(d),Po),rf(pt(d),oH),rf(pt(d),iH),rf(pt(d),UE),rf(pt(d),BE),d._ImgManager=new h3(pt(d),d._imageBufferWrapper),d._imageBufferWrapper=d._ImgManager,d._ImagePrint=new m_e(pt(d));var f,g=l||{};return d._config=g,d._destroying=ve,d._iServiceType=jv.TwainService,d.__addon={},d._bNoMask=g.bNoMask?Ne:ve,d._bNotShowMessage=g.bNotShowMessage?Ne:ve,d._bSelectedSourceByServer=ve,d._bKeepAwake=g.keepAwake,d._bAx=ve,g.container?d._containerElement=g.container:g.containerId&&(d._containerElement=v.get(g.containerId)),d.__IfShowCancelDialogWhenImageTransfer=Ne,d._errorCode=0,d._errorString="",d.__bLoadingImage=ve,d.__bAcquireImageNow=ve,d.__bOpenFileNow=ve,d.__defaultSourceName="",d.__sourceCount=0,d._bConnecting=ve,d.__licenseInfo=void 0,d.__strProductName=F.DWT.ProductName,d.__productKey="",d._moduleSize=1048576,d._driverType=Bt.TWAIN,d.__maxUploadImageSize=-1,d._bServerPercentDone=Ne,d._bSSL=j.bSSL,d._bRegistedLoad=!1,d._logLevel=0,d._scaleDownThreshold=0,d._pdfWriteSetting={},d.__serverPlatform=lt.enumUnknown,d._reconnectTimeSpan=kn.LocaleReconnectTimeSpan,d._bRemoteMode||(d.httpFormFields={},d.HTTPPassword=g.HTTPPassword||"",d.HTTPPort=W.detect.ssl?443:80,d.HTTPUserName=g.HTTPUserName||"",d.__HTTPPostResponseString="",d.__remoteFilename="RemoteFile",d.__httpHeaderMap=ve,d._segementUploadThreshold=d._b64bit?4294967296:524288e3,d._aryTiffTag=[],d._tiffCompressionType=F.DWT.EnumDWT_TIFFCompressionType.TIFF_AUTO,d._jpgQuality=80,d._pdfConvertMode=3,d._pdfRealConvertMode=3,d._pdfResolution=200,d._pdfPassword=""),function g_e(r){var i=r;i._bRemoteMode||(Kt(i,"ProductKey",{get:function(){return F.DWT.ProductKey},set:function(a){return v.isString(a)?(i._resetErr(),!!i._isValid()&&i._setProductKey(a,!1)):(Tr(i),ve)}}),Kt(i,"ProductName",{get:function(){return i.__strProductName},set:function(a){return i._resetErr(),v.isString(a)?(i.__strProductName=a,Ne):(Tr(i),ve)}}),Kt(i,"VersionInfo",{get:function(){return io.JSVersion}}),Kt(i,"DefaultSourceName",{get:function(){var a=i._getDefaultDevice();return a?a.displayName:""}}),Kt(i,"ImageCaptureDriverType",{get:function(){return i._resetErr(),i._isValid()?i._driverType:0},set:function(a){var s=!1,u=!1,l=!1;if(i._bRemoteMode?i.__serverPlatform==lt.enumWindow?l=!0:i.__serverPlatform==lt.enumLinux?u=!0:i.__serverPlatform==lt.enumMac&&(s=!0):(s=j.bMac,u=j.bLinux,l=j.bWin),i._resetErr(),!i._isValid())return!1;if(""!==a){var d=1*a,f=!1;if(d<Bt.TWAIN||d>Bt.TWAIN64)return Q_(i),ve;if(l){if(d===Bt.TWAIN_AND_TWAIN64)i._b64bit&&(i._driverType=d);else if(d!=Bt.TWAIN&&d!=Bt.TWAIN64)return Q_(i),ve;i._b64bit||(d=Bt.TWAIN),i._driverType=d,f=!0}else if(u)i._driverType=d=Bt.SANE,f=!0;else if(s){if(d!==Bt.TWAIN_AND_ICA&&d!=Bt.ICA&&d!=Bt.TWAIN&&d!=Bt.TWAIN64)return Q_(i),ve;i._driverType=d,f=!0}return f&&(i._curDevice=null,i.__devices=null),!0}return Q_(i),ve}}),Kt(i,"HTTPPostResponseString",{get:function(){return i._resetErr(),i._isValid()&&i.__HTTPPostResponseString?i.__HTTPPostResponseString:""}}),Kt(i,"IfAppendImage",{get:function(){return i._resetErr(),!!i._isValid()&&i.__IfAppendImage},set:function(a){return i._resetErr(),!!i._isValid()&&(v.isBoolean(a)?i.__IfAppendImage=a:(Tr(i),ve))}}),Kt(i,"FTPPort",{get:function(){return i._resetErr(),i._isValid()?i._innerFun("FTPPort"):0},set:function(a){return i._resetErr(),!!i._isValid()&&(""!==a?i._innerFun("FTPPort",we(1*a)):void 0)}}),Kt(i,"JPEGQuality",{get:function(){return i._resetErr(),i._isValid()?i._innerFun("JPEGQuality"):0},set:function(a){var s=1*a;return s>=100?s=100:s<0&&(s=0),i._resetErr(),!!i._isValid()&&i._innerFun("JPEGQuality",we(s))}}),nl(i,"TIFFCompressionType",1,1),nl(i,"BufferMemoryLimit",1,1),Kt(i,"LogLevel",{get:function(){return i._resetErr(),i._isValid()?i._innerFun("LogLevel"):0},set:function(a){if(i._resetErr(),!i._isValid())return!1;var s=1*a;return i._logLevel=s,Qv.logLevel=i._logLevel,i._innerFun("LogLevel",we(s))}}),Kt(i,"HttpContentTypeFieldValue",{get:function(){return i._resetErr(),i._isValid()?i._strHttpContentTypeFieldValue:""},set:function(a){return i._resetErr(),!!i._isValid()&&(i._strHttpContentTypeFieldValue=a,a)}}),Kt(i,"BrokerProcessType",{get:function(){return i._resetErr(),i._isValid()?1:0},set:function(a){return i._resetErr(),!!i._isValid()}}),Kt(i,"BorderStyle",{get:function(){return i._resetErr(),!!i._isValid()&&0},set:function(a){return i._resetErr(),i._isValid(),!1}}),Kt(i,"HttpFieldNameOfUploadedImage",{get:function(){return i._resetErr(),i._isValid()?i.__remoteFilename:""},set:function(a){return i._resetErr(),i._isValid()?i.__remoteFilename=a:""}}),Kt(i,"style",{get:function(){return i._isValid()?i.__style:""}}),Kt(i,"ScaleDownThreshold",{get:function(){return i._resetErr(),i._isValid()?i._scaleDownThreshold:0},set:function(a){var s=1*a;return!v.isNumber(s)||isNaN(s)?(Tr(self),ve):(i._resetErr(),!!i._isValid()&&(i._scaleDownThreshold=a))}}),Kt(i,"CurrentImageIndexInBuffer",{get:function(){return i._isValid()?i._ImgManager.getCurrentImageIndex():0},set:function(a){var s=1*a;return i._resetErr(),!!i._isValid()&&(s>=0&&s<i._ImgManager.count()&&(i._ImgManager.setSelectedClientIndexArray([s]),i._isBindViewer()&&Vs.__innerRefreshFromUIView(i,i._ImgManager.getCurrentImageIndex())),!0)}}),Kt(i,"SelectedImagesIndices",{get:function(){return i._resetErr(),i._isValid()?i._ImgManager.count()<=0?[]:i._ImgManager.getSelectedClientIndexArray():[]}}),Kt(i,"MaxImagesInBuffer",{get:function(){return i._resetErr(),i._isValid()?i.__maxImagesInBuffer:0},set:function(a){var s=1*a;return i._resetErr(),!!i._isValid()&&(s>0&&s<32768?i.__maxImagesInBuffer=s:Ee(i,-1010,"Data parameter out of supported range."),i.__maxImagesInBuffer)}}),Kt(i,"IfSSL",{get:function(){return i._bSSL},set:function(a){return i._bSSL=a,i._innerFun("IfSSL",we(a)),!0}}),nl(i,"IfAllowLocalCache",1,2),Kt(i,"UseLocalService",{get:function(){return!0}}),Kt(i,"PDFCompressionType",{get:function(){return i._resetErr(),!!i._isValid()&&i._innerFun("PDFCompressionType")},set:function(a){var s=1*a;return s==F.DWT.EnumDWT_PDFCompressionType.PDF_FAX3&&(s=F.DWT.EnumDWT_PDFCompressionType.PDF_FAX4),i._resetErr(),!!i._isValid()&&i._innerFun("PDFCompressionType",we(s))}}),i._setProductKey=function(a,s,u,l){var d=!0,f=a,g=function(T){T||(i.__licenseInfo=void 0);var S=!0;return l||(S=Ye.checkProductKey(i,{Core:!0})),v.isFunction(u)&&u(),S};if(i._resetErr(),!i._isValid())return!1;if(f=v.isString(f)?v.trim(f):"",F.DWT.ProductKey=f,""==f)d=!1,g();else{Ye.reparseProductKey();var _=F.DWT.licenseException;if(0!=_.code)return i.__licenseInfo=void 0,i._errorCode=_.code,i._errorString=_.message,v.isFunction(u)&&u(),!1;i._innerFunRaw("ProductKey",we(f),s,!1,!1,function(T){var S;S=v.isArray(T)?T[0]:T,v.isArray(T)&&T.length>=3&&"1"===T[1]&&v.isFunction(F.DWT.ShowMessage)&&F.DWT.ShowMessage(T[2],{width:510,height:272,headerStyle:1,seconds:10}),s||(d=S),i.__licenseInfo=void 0,i.GetLicenseInfo(function(){i._setConvertMode(i._pdfConvertMode),g(!0)},g)},function(){s||(d=!1),g()})}return d},nH(i,["ProxyServer"]),nH(i,["CapValueString","CapDescription","FTPPassword","FTPUserName","Manufacturer","ProductFamily","PDFAuthor","PDFCreationDate","PDFCreator","PDFKeywords","PDFModifiedDate","PDFProducer","PDFSubject","PDFTitle","PDFVersion"]),tH(i,["ImageBitsPerPixel","ImageLength","ImageWidth","ImageXResolution","ImageYResolution"]),tH(i,["BlankImageCurrentStdDev","CapDefaultIndex","CapDefaultValue","DataSourceStatus","Duplex","PendingXfers","ImageLayoutDocumentNumber","ImageLayoutFrameBottom","ImageLayoutFrameLeft","ImageLayoutFrameNumber","ImageLayoutFrameRight","ImageLayoutFrameTop","ImageLayoutPageNumber","ImagePixelType","MagData","MagType","IfFeederLoaded","IfPaperDetectable","IfUIControllable"]),Z3(i,["AllowPluginAuthentication","IfModalUI","IfScanInNewThread","_AutoCropMethod"]),Z3(i,["IfDisableSourceAfterAcquire","IfDuplexEnabled","IfFeederEnabled","IfPASVMode","IfAutoBright","IfAutoDiscardBlankpages","IfAutoFeed","IfAutomaticBorderDetection","IfAutomaticDeskew","IfAutoScan","IfShowIndicator","IfUseTwainDSM","IfTiffMultiPage"]),eH(i,["MaxInternetTransferThreads"]),eH(i,["BlankImageMaxStdDev","BlankImageThreshold","BitDepth","Brightness","PageSize","PixelType","Resolution","Capability","CapCurrentIndex","CapCurrentValue","CapMaxValue","CapMinValue","CapNumItems","CapStepSize","CapType","CapValue","CapValueType","Contrast","PixelFlavor","TransferMode","Unit","XferCount"]),X3(i,["AsyncMode","EnableInteractiveZoom","IfThrowException","ImageEditorIfEnableEnumerator","ImageEditorIfReadonly","ImageEditorIfModal","ImageEditorWindowTitle","IfShowPrintUI","VScrollBar"],2),X3(i,["IfOpenImageWithGDIPlus"]))}(pt(d)),Kt(f=pt(d),"Width",{get:function(){return f._resetErr(),f._isValid()?f._isNoViewer()?(f._nouiNotSupport("Width"),""):f._UIView.GetWidth():""},set:function(_){return f._resetErr(),!!f._isValid()&&(f._isNoViewer()?f._nouiNotSupport("Width"):f._UIView.SetWidth(_))}}),Kt(f,"Height",{get:function(){return f._resetErr(),f._isValid()?f._isNoViewer()?(f._nouiNotSupport("Height"),""):f._UIView.GetHeight():""},set:function(_){return f._resetErr(),!!f._isValid()&&(f._isNoViewer()?f._nouiNotSupport("Height"):f._UIView.SetHeight(_))}}),Kt(f,"AllowMultiSelect",{get:function(){return f._resetErr(),f._isValid()?f._isNoViewer()?f._nouiNotSupport("AllowMultiSelect"):f._UIView.GetAllowMultiSelect():""},set:function(_){return f._resetErr(),!!f._isValid()&&(f._isNoViewer()?f._nouiNotSupport("AllowMultiSelect"):void f._UIView.SetAllowMultiSelect(_))}}),Kt(f,"BackgroundColor",{get:function(){return f._resetErr(),f._isValid()?f._isNoViewer()?(f._nouiNotSupport("BackgroundColor"),""):f._UIView.GetBackgroundColor():""},set:function(_){return f._resetErr(),!!f._isValid()&&(f._isNoViewer()?f._nouiNotSupport("BackgroundColor"):f._UIView.SetBackgroundColor(_))}}),Kt(f,"BackgroundFillColor",{get:function(){if(f._resetErr(),!f._isValid())return"";if(f._isNoViewer())return f._nouiNotSupport("BackgroundFillColor"),"";var _=f._innerFun("BackgroundFillColor");return Go.BGR2RGB(_)},set:function(_){if(f._resetErr(),!f._isValid())return!1;if(f._isNoViewer())return f._nouiNotSupport("BackgroundFillColor");var T,S=1*_;return!v.isNumber(S)||v.isNaN(S)?(Tr(f),ve):(T=Go.RGB2BGR(S),f._innerFun("BackgroundFillColor",we(T)))}}),Kt(f,"FitWindowType",{get:function(){return f._resetErr(),!!f._isValid()&&(f._isNoViewer()?(f._nouiNotSupport("FitWindowType"),0):f._UIView.GetFitWindowType())},set:function(_){return f._resetErr(),!!f._isValid()&&(f._isNoViewer()?f._nouiNotSupport("FitWindowType"):f._UIView.SetFitWindowType(1*_))}}),Kt(f,"IfFitWindow",{get:function(){return f._resetErr(),!!f._isValid()&&(f._isNoViewer()?f._nouiNotSupport("IfFitWindow"):f._UIView.GetIfFitWindow())},set:function(_){return f._resetErr(),!!f._isValid()&&(f._isNoViewer()?f._nouiNotSupport("IfFitWindow"):f._UIView.SetIfFitWindow(!!_))}}),Kt(f,"ImageMargin",{get:function(){return f._resetErr(),f._isValid()?f._isNoViewer()?(f._nouiNotSupport("ImageMargin"),0):f._UIView.GetImageMargin():0},set:function(_){if(f._resetErr(),!f._isValid())return!1;if(f._isNoViewer())return f._nouiNotSupport("ImageMargin");var T=parseInt(_);return!isNaN(T)&&f._UIView.SetImageMargin(T)}}),Kt(f,"MouseX",{get:function(){return f._resetErr(),f._isValid()?f._isNoViewer()?(f._nouiNotSupport("MouseX"),0):f.__MouseX:0}}),Kt(f,"MouseY",{get:function(){return f._resetErr(),f._isValid()?f._isNoViewer()?(f._nouiNotSupport("MouseY"),0):f.__MouseY:0}}),Kt(f,"SelectionImageBorderColor",{get:function(){return f._resetErr(),f._isValid()?f._isNoViewer()?(f._nouiNotSupport("SelectionImageBorderColor"),""):f._UIView.GetSelectionImageBorderColor():""},set:function(_){return f._resetErr(),!!f._isValid()&&(f._isNoViewer()?f._nouiNotSupport("SelectionImageBorderColor"):f._UIView.SetSelectionImageBorderColor(_))}}),Kt(f,"Zoom",{get:function(){return f._resetErr(),f._isValid()?f._isNoViewer()?(f._nouiNotSupport("Zoom"),0):f._UIView.GetZoom():0},set:function(_){return f._resetErr(),!!f._isValid()&&(f._isNoViewer()?f._nouiNotSupport("Zoom"):f._UIView.SetZoom(_))}}),Kt(f,"MouseShape",{get:function(){return f._resetErr(),!!f._isValid()&&(f._isNoViewer()?f._nouiNotSupport("MouseShape"):f._UIView.GetMouseShape())},set:function(_){return f._resetErr(),!!f._isValid()&&(f._isNoViewer()?f._nouiNotSupport("MouseShape"):f._UIView.SetMouseShape(_))}}),Kt(f,"SelectionRectAspectRatio",{get:function(){return f._resetErr(),f._isValid()?f._isNoViewer()?(f._nouiNotSupport("SelectionRectAspectRatio"),0):f._UIView.GetSelectionRectAspectRatio():0},set:function(_){if(f._resetErr(),!f._isValid())return!1;if(f._isNoViewer())return f._nouiNotSupport("SelectionRectAspectRatio");var T=parseFloat(_);return T>=0&&(f._UIView.SetSelectionRectAspectRatio(T),!0)}}),Kt(f,"ShowPageNumber",{get:function(){return f._resetErr(),!!f._isValid()&&(f._isNoViewer()?f._nouiNotSupport("ShowPageNumber"):f._UIView.GetShowPageNumber())},set:function(_){return f._resetErr(),!!f._isValid()&&(f._isNoViewer()?f._nouiNotSupport("ShowPageNumber"):f._UIView.SetShowPageNumber(_))}}),Kt(f,"IfAutoScroll",{get:function(){return f._resetErr(),!!f._isValid()&&(f._isNoViewer()?f._nouiNotSupport("IfAutoScroll"):f._UIView.GetIfAutoScroll())},set:function(_){return f._resetErr(),!!f._isValid()&&(f._isNoViewer()?f._nouiNotSupport("IfAutoScroll"):f._UIView.SetIfAutoScroll(_))}}),d._innerInitEvents(g),d}return c(u,[{key:"GetImageDataAsync",value:function(l){return this._ImgManager.getImageData(l)}},{key:"SetCustomDataAsync",value:function(l,d){return this._ImgManager.setCustomData(l,d)}},{key:"style",get:function(){return this.__style}},{key:"GetSourceNamesAsync",value:(a=Ae(A.mark(function l(d){var f;return A.wrap(function(g){for(;;)switch(g.prev=g.next){case 0:if((f=this)._resetErr(),f._isValid()){g.next=4;break}throw{code:f._errorCode,message:f._errorString};case 4:return nr("GetSourceNamesAsync",f),g.prev=5,g.next=8,f._getSourceCountAsync(f._driverType);case 8:g.next=13;break;case 10:throw g.prev=10,g.t0=g.catch(5),g.t0;case 13:return g.prev=13,Cn("GetSourceNamesAsync"),g.finish(13);case 16:if(!d){g.next=20;break}return g.abrupt("return",wr(f,BE,aH).call(f));case 20:return g.abrupt("return",wr(f,UE,uH).call(f));case 21:case"end":return g.stop()}},l,this,[[5,10,13,16]])})),function(l){return a.apply(this,arguments)})},{key:"SelectSourceAsync",value:function(l){return this._selectSourceAsync("SelectSourceAsync",l)}},{key:"SelectSourceByIndexAsync",value:function(l){return this._selectSourceByIndexAsync("SelectSourceByIndex",l)}},{key:"OpenSourceAsync",value:function(){return this._openSourceAsync("OpenSourceAsync")}},{key:"CloseSourceAsync",value:function(){return this._closeSourceAsync("CloseSourceAsync")}},{key:"OpenSourceManagerAsync",value:function(){var l=this;return l._resetErr(),l._isValid()?l._innerFunV2("OpenSourceManager"):W.Promise.reject({code:l._errorCode,message:l._errorString})}},{key:"CloseSourceManagerAsync",value:function(){var l=this;return l._resetErr(),l._isValid()?l._innerFunV2("CloseSourceManager"):W.Promise.reject({code:l._errorCode,message:l._errorString})}},{key:"AcquireImage",value:function(l,d,f){var g,_=this,T=null,S=null;return _._resetErr(),!!_._isValid()&&(v.isUndefined(f)&&(v.isFunction(l)&&v.isFunction(d)||v.isFunction(l)&&v.isUndefined(d)||v.isFunction(l)&&null==d||null==l&&v.isFunction(d))?(g={},v.isFunction(l)&&(T=l),v.isFunction(d)&&(S=function(I){I&&I.code&&(_._errorCode=I.code,_._errorString=I.message),d(_._errorCode,_._errorString)})):(g=v.isUndefined(l)||null==l?{}:v.clone(l),v.isFunction(d)&&(T=function(){d(g)}),v.isFunction(f)&&(S=function(I){I&&I.code&&(_._errorCode=I.code,_._errorString=I.message),f(g,_._errorCode,_._errorString)})),T||(T=function(){}),S||(S=function(I){I&&I.code&&(_._errorCode=I.code,_._errorString=I.message)}),_.AcquireImageAsync(g).then(T,S),!uo.isServerInvalid(_))}},{key:"GetDevicesAsync",value:function(l,d,f){return this._getDevicesAsync("GetDevicesAsync",l,d,f)}},{key:"SelectDeviceAsync",value:function(l,d){var f=this;return f._resetErr(),f._isValid()?this._selectDeviceAsync("SelectDeviceAsync",l,d):W.Promise.reject({code:f._errorCode,message:f._errorString})}},{key:"AcquireImageAsync",value:function(l){return br(yt(u.prototype),"_acquireImage",this).call(this,this._curDevice,l)}},{key:"ImageIDToIndex",value:function(l){return this._imageIDToIndex(l)}},{key:"IndexToImageID",value:function(l){return this._indexToImageID(l)}},{key:"RemoveImage",value:function(l){return this._removeImage("RemoveImage",l)}},{key:"_innerGetSourceNamesSync",value:function(l){var d=this;return d._getSourceCountSync(),l?wr(d,BE,aH).call(d):wr(d,UE,uH).call(d)}},{key:"getCapabilities",value:function(l,d){return this._dwtGetCapabilities(l,d)}},{key:"setCapabilities",value:function(l,d,f){return this._dwtSetCapabilities(l,d,f)}},{key:"CancelAllPendingTransfers",value:function(){return this._resetErr(),!!this._isValid()&&this._innerFun("CancelAllPendingTransfers")}},{key:"CloseSource",value:function(){var l=this;if(l._resetErr(),!l._isValid())return!1;var d=l._innerFun("CloseSource");return d&&(l._curDevice=null),d}},{key:"CloseSourceManager",value:function(){var l=this;return l._resetErr(),!!l._isValid()&&l._innerFun("CloseSourceManager")}},{key:"SelectDevice",value:function(l,d){var f,g=this;if(g._resetErr(),F.DWT.ConnectWithSocket)return Ee(g,-2400,"SelectDevice doesn't work under current settings."),!1;var _,T=null===(f=this._dmService.attrs)||void 0===f?void 0:f.UUID;if(T&&(null===(_=l.serviceInfo.attrs)||void 0===_?void 0:_.UUID)!=T){var S,I=(null===(S=l.serviceInfo.attrs)||void 0===S?void 0:S.url)||l.serviceInfo.server;if(!(I&&I.indexOf(T)>-1))return uU(g),!1}var b=!1;try{(b=wr(this,iH,v_e).call(this,l.strDevice,d))&&(this._curDevice=l,this._bSelectedSourceByServer=!1)}catch(D){b=!1,this._errorCode=yn.CommonError,D&&D.message&&(this._errorString=D.message)}return b}},{key:"DisableSource",value:function(){var l=this;return l._resetErr(),!!l._isValid()&&l._innerFun("DisableSource")}},{key:"FeedPage",value:function(){var l=this;return l._resetErr(),!!l._isValid()&&l._innerFun("FeedPage")}},{key:"GetDeviceType",value:function(){var l=this;return l._resetErr(),!!l._isValid()&&l._innerFun("GetDeviceType")}},{key:"GetSourceNameItems",value:function(l){var d=this;return d._resetErr(),!!d._isValid()&&(d.__sourceCount<0&&(d.__sourceCount=0),l<d.__sourceCount&&l>=0?d._getSourceNameByIndex(l):"")}},{key:"SourceNameItems",value:function(l){var d=this;return d._resetErr(),!!d._isValid()&&d.GetSourceNameItems(l)}},{key:"GetSourceNames",value:function(l){return this._innerGetSourceNamesSync(l)}},{key:"getSourceCount",value:function(l){return this._getSourceCountAsync(l)}},{key:"GetSourceCountAsync",value:function(l){return this._getSourceCountAsync(l)}},{key:"GetSourceType",value:function(l){var _,T,d=this,f=parseInt(l);return d._resetErr(),isNaN(f)?(qn(d),!1):(null==d.__devices&&d.GetSourceNames(!1),f>=d.__devices.length||f<0?(We(d),!1):(_=Bt.TWAIN,(T=d.__devices[f].deviceType&Lfe)==ze.TWAINSCANNER||T==ze.WIATWAINSCANNER||(T==ze.TWAINX64SCANNER?_=Bt.TWAIN64:T==ze.ICASCANNER?_=Bt.ICA:T==ze.SANESCANNER?_=Bt.SANE:(T&ze.TWAINX64SCANNER)==ze.TWAINX64SCANNER?(T&ze.TWAINSCANNER)!=ze.TWAINSCANNER&&(T&ze.WIATWAINSCANNER)!=ze.WIATWAINSCANNER||(_=Bt.TWAIN_AND_TWAIN64):(T&ze.ICASCANNER)==ze.ICASCANNER&&((T&ze.TWAINSCANNER)!=ze.TWAINSCANNER&&(T&ze.WIATWAINSCANNER)!=ze.WIATWAINSCANNER||(_=Bt.TWAIN_AND_ICA))),_))}},{key:"OpenSource",value:function(){var l=this;return l._resetErr(),!!l._isValid()&&(l._bRemoteMode?(Ee(l,-2610,"OpenSource is not supported when Object is created by CreateRemoteScanObjectAsync. Please use OpenSourceAsync instead."),!1):l._innerFun("OpenSource"))}},{key:"OpenSourceManager",value:function(){var l=this;return l._resetErr(),!!l._isValid()&&l._innerFun("OpenSourceManager")}},{key:"ResetImageLayout",value:function(){var l=this;return l._resetErr(),!!l._isValid()&&l._innerFun("ResetImageLayout")}},{key:"RewindPage",value:function(){var l=this;return l._resetErr(),!!l._isValid()&&l._innerFun("RewindPage")}},{key:"SelectSource",value:function(l,d){var f=this;if(f._resetErr(),!f._isValid())return!1;var g=Bt.TWAIN;if(v.isUndefined(l)){if(f._bRemoteMode)return Ee(f,-2438,"SelectSource cannot be used synchronously when Object is created by CreateRemoteScanObjectAsync. Please use SelectSourceAsync instead."),!1;if(f._driverType==Bt.TWAIN_AND_TWAIN64)return Ee(f,-2429,"The method SelectSource() must be invoked asynchronously (i.e. with callback functions) when ImageCaptureDriverType is set to TWAIN_AND_ICA or TWAIN_AND_TWAIN64."),!1;f._driverType!=Bt.ICA&&f._driverType!=Bt.SANE&&f._driverType!=Bt.TWAIN64||(g=f._driverType);var S=dv(g,j.bWin,j.bLinux,j.bMac,j.bAndroid);return f._bSelectedSourceByServer=!0,f._curDevice=null,f._innerFun("SelectSource",we(S))}f._driverType!=Bt.ICA&&f._driverType!=Bt.SANE&&f._driverType!=Bt.TWAIN64&&f._driverType!=Bt.TWAIN_AND_TWAIN64||(g=f._driverType);var D=dv(g,j.bWin,j.bLinux,j.bMac,j.bAndroid);return f.SelectSourceAsync(D).then(function(){v.isFunction(l)&&l()},function(){v.isFunction(d)&&d(f._errorCode,f._getErrorString())}),!0}},{key:"GetSourceTypeAsync",value:function(l){var d=this,f=1*l;return d._resetErr(),d._isValid()?W.Promise.resolve(d.GetSourceType(f)):W.Promise.reject({code:d._errorCode,message:d._errorString})}},{key:"SetFileXferInfo",value:function(l,d){var f,g,_=this;return _._resetErr(),!!_._isValid()&&(f=j.bFileSystem?l.replace(/<%/g,"<%25"):l,g=mt.replaceLocalFilename(f),_._innerFun("SetFileXferInfo",we(g,d)))}},{key:"SetImageLayout",value:function(l,d,f,g){var _=this;return _._resetErr(),!!_._isValid()&&_._innerFun("SetImageLayout",we(l,d,f,g))}},{key:"CapGet",value:function(){return this._resetErr(),!!this._isValid()&&this._innerFun("CapGet")}},{key:"CapGetCurrent",value:function(){return this._resetErr(),!!this._isValid()&&this._innerFun("CapGetCurrent")}},{key:"CapGetDefault",value:function(){return this._resetErr(),!!this._isValid()&&this._innerFun("CapGetDefault")}},{key:"CapGetFrameBottom",value:function(l){return this._resetErr(),!!this._isValid()&&this._innerFun("CapGetFrameBottom",we(l))}},{key:"CapGetFrameLeft",value:function(l){return this._resetErr(),!!this._isValid()&&this._innerFun("CapGetFrameLeft",we(l))}},{key:"CapGetFrameRight",value:function(l){return this._resetErr(),!!this._isValid()&&this._innerFun("CapGetFrameRight",we(l))}},{key:"CapGetFrameTop",value:function(l){return this._resetErr(),!!this._isValid()&&this._innerFun("CapGetFrameTop",we(l))}},{key:"CapGetHelp",value:function(){return this._resetErr(),!!this._isValid()&&this._innerFun("CapGetHelp")}},{key:"CapGetLabel",value:function(){return this._resetErr(),!!this._isValid()&&this._innerFun("CapGetLabel")}},{key:"CapGetLabels",value:function(){return this._resetErr(),!!this._isValid()&&this._innerFun("CapGetLabels")}},{key:"CapIfSupported",value:function(l){return this._resetErr(),!!this._isValid()&&this._innerFun("CapIfSupported",we(l))}},{key:"CapReset",value:function(){return this._resetErr(),!!this._isValid()&&this._innerFun("CapReset")}},{key:"CapSet",value:function(){return this._resetErr(),!!this._isValid()&&this._innerFun("CapSet")}},{key:"CapSetFrame",value:function(l,d,f,g,_){return this._resetErr(),!!this._isValid()&&this._innerFun("CapSetFrame",we(l,d,f,g,_))}},{key:"GetCapItems",value:function(l){return this._resetErr(),!!this._isValid()&&this._innerFun("GetCapItems",we(l))}},{key:"GetCapItemsString",value:function(l){return this._resetErr(),!!this._isValid()&&this._innerFun("GetCapItemsString",we(l))}},{key:"SetCapItems",value:function(l,d){return this._resetErr(),!!this._isValid()&&this._innerFun("SetCapItems",we(l,d))}},{key:"SetCapItemsString",value:function(l,d){return this._resetErr(),!!this._isValid()&&this._innerFun("SetCapItemsString",we(l,d))}},{key:"GenerateURLForUploadData",value:function(l,d,f,g,_){var T=this,S=[];if(d==F.DWT.EnumDWT_ImageType.IT_BMP||d==F.DWT.EnumDWT_ImageType.IT_JPG||d==F.DWT.EnumDWT_ImageType.IT_PNG){if(!v.isArray(l))return Ha(T),v.isFunction(g)&&g(T._errorCode,T._getErrorString(),"",l,d),"";if(l.length>1)return xd(T),v.isFunction(g)&&g(T._errorCode,T._getErrorString(),"",l,d),"";if(!T._checkIndices(l))return g(T._errorCode,T._getErrorString(),"",l,d),!1;var I=T._ImgManager.convertClientIndexToServerId(l[0]);-1!=I&&S.push(I)}else{if(d!=F.DWT.EnumDWT_ImageType.IT_TIF&&d!=F.DWT.EnumDWT_ImageType.IT_PDF)return v.isArray(l)?zi(T):Ha(T),v.isFunction(g)&&g(T._errorCode,T._getErrorString(),T.__HTTPPostResponseString,l,d),"";var b,D;if(v.isArray(l)){if(!T._checkIndices(l))return g(T._errorCode,T._getErrorString(),"",l,d),!1;b=l}else{if(-1!=l)return Ha(T),v.isFunction(g)&&g(T._errorCode,T._getErrorString(),T.__HTTPPostResponseString,l,d),"";for(b=[],D=0;D<T._ImgManager.count();D++)b.push(D)}v.each(b,function(R){var L=T._ImgManager.convertClientIndexToServerId(R);-1!=L&&S.push(L)})}return v.isFunction(f)&&v.isFunction(g)?(T._asyncGenerateURLForUploadData(S,d,_,f,function(R){g(T._errorCode,T._getErrorString(),T.__HTTPPostResponseString,R,d)}),!0):this._syncGenerateURLForUploadData(S,d,_)}},{key:"_syncGenerateURLForUploadData",value:function(l,d,f){var g,_=this,T=!1,S=vt.managerVersion.join(""),I=f,b=",";v.isString(I)&&""!=I||(I="",b="");var D=["[",'"dcp","dwasm_'+S,'",',d,',"',l.join(","),'"',b,I,"]"].join("");return(g=this._innerFunRaw("GenerateURLForUploadData",D,!1,!1,!0))&&v.isArray(g.result)&&g.result.length>1&&1==g.result[0]&&(T=["dcp://dwasm_",S,"/file/",g.result[1]].join("")),v.isArray(l)&&v.each(l,function(x){_._ImgManager.convertServerIdToClientIndex(x)}),0==T?(nw(_),""):T}},{key:"_asyncGenerateURLForUploadData",value:function(l,d,f,g,_){var T=this,S=d,I=function(){if(v.isFunction(_)){var U=[];v.isArray(l)&&v.each(l,function(Y){var Z=T._ImgManager.convertServerIdToClientIndex(Y);Z>-1&&U.push(Z)}),_(U)}return""},b=",";if(S==F.DWT.EnumDWT_ImageType.IT_BMP||S==F.DWT.EnumDWT_ImageType.IT_JPG||S==F.DWT.EnumDWT_ImageType.IT_PNG){if(l.length>1)return xd(T),I(),""}else if(S!=F.DWT.EnumDWT_ImageType.IT_TIF&&S!=F.DWT.EnumDWT_ImageType.IT_PDF)return zi(T),I(),"";var D=!1,R=vt.managerVersion.join(""),L=f;v.isString(L)&&""!=L||(L="",b="");var x=["[",'"dcp","dwasm_'+R,'",',S,',"',l.join(","),'"',b,L,"]"].join("");return this._innerFunRaw("GenerateURLForUploadData",x,!0,!1,!0,function(U){if(U&&v.isArray(U.result)&&U.result.length>0?1==U.result[0]&&U.result.length>1?D=["dcp://dwasm_",R,"/file/",U.result[1]].join(""):void 0!==U.exception&&void 0!==U.description?(T._errorCode=U.exception,T._errorString=U.description):nw(T):nw(T),0==D)return I(),"";if(v.isFunction(g)){var Z=[];v.isArray(l)&&v.each(l,function(oe){var se=T._ImgManager.convertServerIdToClientIndex(oe);se>-1&&Z.push(se)}),g(D,Z,d)}return D},I)}},{key:"SelectSourceByIndex",value:function(l){var d=this,f=parseInt(l);return d._resetErr(),isNaN(f)?(qn(d),!1):(null==d.__devices&&d.GetSourceNames(!1),f>=d.__devices.length||f<0?(We(d),!1):d.SelectDevice(d.__devices[f]))}},{key:"EnableSource",value:function(l,d,f){var g=this;return g._resetErr(),!!g._isValid()&&g.AcquireImage(l,d,f)}},{key:"SourceCount",get:function(){return this._getSourceCountSync()}},{key:"CurrentSourceName",get:function(){return this._curDevice?this._curDevice.displayName:""}},{key:"checkStartScanParams",value:function(l,d){var f=this;if(!l)return Ee(f,-2381,"scanSetup is invalid."),!1;if(!v.isUndefined(d.transferMode)&&0!=l.transferMode&&1!=l.transferMode&&2!=l.transferMode)return Ee(f,-2382,"Scanner setup error: Invalid Transfer Mode."),!1;if(l.transferMode==F.DWT.EnumDWT_TransferMode.TWSX_FILE){if(!l.fileXfer)return Ee(f,-2383,"Scanner setup error: fileXfer is invalid."),!1;if(!v.isString(l.fileXfer.fileName)||""==l.fileXfer.fileName)return function(g){Ee(g,-2384,"Scanner setup error: Invalid fileName in fileXfer.")}(f),!1;if(!v.isNumber(l.fileXfer.fileFormat)||l.fileXfer.fileFormat<0||l.fileXfer.fileFormat>16)return function(g){Ee(g,-2385,"Scanner setup error: Invalid fileFormat in fileXfer.")}(f),!1}if(d){if(!v.isString(d.type)||""==d.type)return function(g){Ee(g,-2387,"Output setup error: Invalid type in outputSetup.")}(f),!1;if(!d.httpParams)return function(g){Ee(g,-2386,"Output setup error: Invalid httpParams in outputSetup.")}(f),!1;if(l.transferMode!=F.DWT.EnumDWT_TransferMode.TWSX_FILE&&v.isUndefined(d.format))return function(g){Ee(g,-2390,"Output setup error: Invalid format in outputSetup.")}(f),!1;if(!v.isString(d.httpParams.url)||""==d.httpParams.url)return function(g){Ee(g,-2388,"Output setup error: Invalid url in outputSetup.httpParams.")}(f),!1;if(!v.isString(d.httpParams.fileName)||""==d.httpParams.fileName)return function(g){Ee(g,-2389,"Output setup error: Invalid fileName in outputSetup.httpParams.")}(f),!1}return!0}},{key:"startScan",value:function(l){var d=this,f=l;if(d._resetErr(),!d._isValid())return!1;if(1==d._startScanFlag)return Ee(d,-2432,"Operation in progress, please try again when the current operation has finished."),W.Promise.reject({code:d._errorCode,message:d._getErrorString()});d._startScanFlag=!0,v.isObject(f)||(f={});var g,_,T,S=!1,I=!1,b=!0,D=!0,R=!0,L=!1,x=f.onFinally,U=[],Y=[],Z=0,oe=1,se=[],k={type:"http",format:F.DWT.EnumDWT_ImageType.IT_PDF,reTries:3,useUploader:!1,singlePost:!0,showProgressBar:!0,removeAfterOutput:!0,httpParams:{url:"",headers:{},formFields:{},remoteName:"RemoteFile",fileName:""}},E=v.clone(f),M=f;if(T=E.funcScanStatus,delete E.funcScanStatus,E.bfuncScanStatus=!!v.isFunction(T),E.outputSetup){var G={pdfSetup:{},tiffSetup:{}};S_e(E.outputSetup,k),_=E.outputSetup,delete E.outputSetup,_.pdfSetup&&(_.format!=F.DWT.EnumDWT_ImageType.IT_MULTIPAGE_PDF&&_.format!=F.DWT.EnumDWT_ImageType.IT_PDF||v.mix(G.pdfSetup,_.pdfSetup)),_.tiffSetup&&(_.format!=F.DWT.EnumDWT_ImageType.IT_MULTIPAGE_TIF&&_.format!=F.DWT.EnumDWT_ImageType.IT_TIF||v.mix(G.tiffSetup,_.tiffSetup)),_.format!=F.DWT.EnumDWT_ImageType.IT_MULTIPAGE_PDF&&_.format!=F.DWT.EnumDWT_ImageType.IT_MULTIPAGE_TIF||(_.singlePost=!0),v.isNumber(_.httpParams.threads)&&(oe=_.httpParams.threads),S=v.stringify(G),I=d.checkStartScanParams(E,_)}else(_=k).type="",I=d.checkStartScanParams(E,!1);if(!I)return new W.Promise(function(St,tt){b&&(tt({code:d._errorCode,message:d._getErrorString(),response:""}),b=!1,d._startScanFlag=!1)});_.funcHttpUploadStatus&&(L=_.funcHttpUploadStatus);var V,J,Q,te,X,ae=d.__remoteFilename,he=d.MaxUploadImageSize,ye=d.IfShowProgressBar,Ce=d.__OnPostTransferAsync,Ke=d.__OnPostAllTransfers,Ze=d.__OnHttpUploadStatus,dt=d.__insertingIndex,ft=d.__IfAppendImage,ke=d.httpFormFields,Te=d._tiffCompressionType,Oe=!1,Me=_.showProgressBar;if(V=function(St){var tt=!0;v.each(se,function(it,Or){-1==it.st&&(tt=!1)}),tt?J(St):setTimeout(function(){V(St)},200)},J=function(St){St.__OnPostTransferAsync=Ce,St.__OnPostAllTransfers=Ke,St.__OnHttpUploadStatus=Ze,St.__remoteFilename=ae,St.__maxUploadImageSize=he,St.IfShowProgressBar=ye,St.__insertingIndex=dt,St.__IfAppendImage=ft,St.httpFormFields=ke,St._tiffCompressionType=Te,F.FileUploader&&(F.FileUploader.nextLoopTime=600),St._startScanFlag=!1},Q=function(St,tt,it){D?(tt(it),V(St)):setTimeout(function(){Q(St,tt,it)},200)},te=function(St,tt){Oe=!0,b&&(b=!1,D||d._innerSendCmd("CancelAllPendingTransfers"),Q(d,St,tt))},X=function(St,tt,it,Or){if(v.isFunction(L)){var _i,Vt=tt,Nn=0;v.isNumber(Or)&&Or>0&&(Nn=Or),_i={fileName:Vt,percentage:it,statusCode:Nn,responseString:St.__HTTPPostResponseString},setTimeout(function(){L(_i)},10)}},d.__HTTPPostResponseString="",d.IfShowProgressBar=Me,v.isNumber(E.insertingIndex)&&E.insertingIndex>-1&&(d.__insertingIndex=E.insertingIndex,d.__IfAppendImage=!1),d.__OnHttpUploadStatus=!!v.isFunction(L)&&L,_.useUploader&&!F.FileUploader)return new W.Promise(function(St,tt){Ee(d,-2380,"Please make sure the Uploader Module has been installed.");var it={code:d._errorCode,message:d._getErrorString(),response:""};D=!0,te(tt,it)});if(g=_.reTries,_.useUploader){var et=_.httpParams.url;if(!v.startsWith(et,"http://")&&!v.startsWith(et,"https://")){var qe=window.location.href,ln=qe.lastIndexOf("/");qe=qe.substring(0,ln+1),_.httpParams.url=qe+et}}else v.each(_.httpParams.headers,function(St,tt){d.SetHTTPHeader(tt,St)}),v.each(_.httpParams.formFields,function(St,tt){d.SetHTTPFormField(tt,St)});return""!==_.httpParams.remoteName&&(d.__remoteFilename=_.httpParams.remoteName),new W.Promise(function(St,tt){_.useUploader?F.FileUploader.Init(0,function(it){St({uploadManager:it})},function(it,Or){d._errorCode=it,d._errorString=Or,D=!0,te(tt,{code:it,message:Or,response:d.__HTTPPostResponseString})}):St({})}).then(function(St){return new W.Promise(function(tt,it){var Or=function Vt(){(E.transferMode==F.DWT.EnumDWT_TransferMode.TWSX_FILE?Z==Y.length:Z==U.length)?(W.closeProgress(null,"Scan Upload"),Oe=!0,tt(M),J(d)):setTimeout(Vt,100)};T&&v.isFunction(T)&&(d.__OnPreAllTransfersAsync=function(Vt){T(Vt)}),d.registerEvent("OnPostTransferAsync",function(Vt){var Nn,gr,Qu,vi,ri,ki,us=_.httpParams.url,zn=d._convertGuidToServerId(Vt.imageId),cs=_.singlePost,Nr=E.transferMode==F.DWT.EnumDWT_TransferMode.TWSX_FILE,Yu=_.removeAfterOutput,qr=0;if(R&&(D=!1,R=!1),Nr?(qr=Y.length,Y.push(Vt.path)):(qr=U.length,U.push(zn)),T&&v.isFunction(T)){var Vp={event:"postTransfer",bScanCompleted:!1,result:{currentPageNum:qr+1}};setTimeout(function(){T(Vp)},10)}if(Oe)return!1;if("http"==_.type)if(gr=co(_.httpParams.fileName,qr+1),Qu=co(_.httpParams.remoteName,qr+1),cs||"http"!=_.type);else if(v.isNumber(_.httpParams.maxSizeLimit)&&(d.__maxUploadImageSize=_.httpParams.maxSizeLimit),_.useUploader){Me?(F.FileUploader.nextLoopTime=300,W.showProgress(d,"Scan Upload",d.__IfShowCancelDialogWhenImageTransfer)):W.hideProgress(),vi=function(Jn,Lt){return d.__HTTPPostResponseString=Lt,X(d,Jn._fileName,100,200),d._OnPercentDone([0,100,"","http",Jn._fileName]),Me&&W.closeProgress(null,"Scan Upload"),!Nr&&_.removeAfterOutput?setTimeout(function(){d._ImgManager.convertServerIdToClientIndex(zn)>-1?wr(d,Po,as).call(d,zn,function(){Z++},function(){Z++}):Z++},100):Z++,!0};var Ju,Nt=St.uploadManager;if(ri=function(){var Jn,Lt;if(Me)for(Lt=Nr?Y.length:U.length,Jn=0;Jn<Lt;Jn++)W.closeProgress(null,"Scan Upload");!Nr&&_.removeAfterOutput&&setTimeout(function(){d._ImgManager.convertServerIdToClientIndex(zn)>-1&&wr(d,Po,as).call(d,zn)},100),Nt.CancelAllUpload();var Gs={code:d._errorCode,message:d._getErrorString(),response:d.__HTTPPostResponseString};return te(it,Gs),!1},ki=function(Jn,Lt,Gs,zs){var Qt=303;Lt==sf.TRANS_SERVICE_ERROR_404?Qt=404:Lt==sf.TRANS_SERVICE_ERROR_500?Qt=500:Lt==sf.TRANS_SERVICE_ERROR_503&&(Qt=503),d._errorCode=Lt,d._errorString=Gs,d.__HTTPPostResponseString=zs,X(d,gr,100,Qt),ri()},Ju=function(){d.__HTTPPostResponseString="",X(d,gr,100,303),ri()},Nr){var ii=Nt.CreateJob(),jp=ii.FormField;v.each(_.httpParams.headers,function(Jn,Lt){ii.HttpHeader[Lt]=Jn}),v.each(_.httpParams.formFields,function(Jn,Lt){jp.Add(Lt,Jn)}),ii.ServerUrl=us,ii.bDeleteFile=Yu,ii.reTries=g,v.isNumber(_.httpParams.maxSizeLimit)&&(ii.maxSizeLimit=_.httpParams.maxSizeLimit),ii._fileName=gr,ii.SourceValue.Add(Vt.path,gr,Qu),ii.ImageType=E.fileXfer.fileFormat,ii.ThreadNum=oe,ii.OnRunSuccess=vi,ii.OnRunFailure=ki,(Me||v.isFunction(L))&&(ii.OnUploadTransferPercentage=function(Jn,Lt){Lt>0&&Lt<=100&&(100==Lt&&(Lt=99),Me&&d._OnPercentDone([0,Lt,"","http",Jn._fileName]),v.isFunction(L)&&X(d,Jn._fileName,Lt,0))},W.cancelFrom=on.Scan,Me&&(wr(d,Yv,VE).call(d,ri),d._OnPercentDone([0,-1,Tn.Uploading,"http",gr])),X(d,gr,0,0)),Nt.Run(ii)}else(Nn=_.format)==F.DWT.EnumDWT_ImageType.IT_MULTIPAGE_PDF?Nn=F.DWT.EnumDWT_ImageType.IT_PDF:Nn==F.DWT.EnumDWT_ImageType.IT_MULTIPAGE_TIF&&(Nn=F.DWT.EnumDWT_ImageType.IT_TIF),Me&&(W.cancelFrom=on.Scan,wr(d,Yv,VE).call(d,ri),d._OnPercentDone([0,-1,Tn.Encoding,"http",gr])),d._asyncGenerateURLForUploadData([zn],Nn,S,function(Jn){var Lt=Nt.CreateJob(),Gs=Lt.FormField;v.each(_.httpParams.headers,function(zs,Qt){Lt.HttpHeader[Qt]=zs}),v.each(_.httpParams.formFields,function(zs,Qt){Gs.Add(Qt,zs)}),Lt.ServerUrl=us,Lt.bDeleteFile=Yu,Lt.reTries=g,v.isNumber(_.httpParams.maxSizeLimit)&&(Lt.maxSizeLimit=_.httpParams.maxSizeLimit),Lt._fileName=gr,Lt.SourceValue.Add(Jn,gr,Qu),Lt.ImageType=Nn,Lt.ThreadNum=oe,Lt.OnRunSuccess=vi,Lt.OnRunFailure=ki,(Me||v.isFunction(L))&&(Lt.OnUploadTransferPercentage=function(zs,Qt){Qt>0&&Qt<=100&&(100==Qt&&(Qt=99),Me&&d._OnPercentDone([0,Qt,"","http",zs._fileName]),v.isFunction(L)&&X(d,zs._fileName,Qt,0))},Me&&d._OnPercentDone([0,-1,Tn.Uploading,"http",gr]),X(d,gr,0,0)),Nt.Run(Lt)},Ju)}else{var Ro={id:zn,st:-1,bCancel:!1};if(se.push(Ro),0==qr&&(Me?W.showProgress(d,"Scan Upload",d.__IfShowCancelDialogWhenImageTransfer):W.hideProgress()),Nr)vi=function(Jn){return Ro.st=0,!Nr&&_.removeAfterOutput?setTimeout(function(){d._ImgManager.convertServerIdToClientIndex(zn)>-1?wr(d,Po,as).call(d,zn,function(){Z++},function(){Z++}):Z++},100):Z++,!0},ri=function(){!Nr&&_.removeAfterOutput&&setTimeout(function(){d._ImgManager.convertServerIdToClientIndex(zn)>-1&&wr(d,Po,as).call(d,zn)},100);var Jn={code:d._errorCode,message:d._getErrorString(),response:d.__HTTPPostResponseString};return W.closeProgress(null,"Scan Upload"),2==Ro.st||(Ro.st=1,v.each(se,function(Lt,Gs){-1==Lt.st&&(Lt.bCancel=!0)}),te(it,Jn)),!1},d._innerUploadDirectly(us,Vt.path,gr,Me,Yu,g,!1,Ro,vi,ri);else{if(vi=function(Jn,Lt){return Ro.st=0,!Nr&&_.removeAfterOutput?setTimeout(function(){d._ImgManager.convertServerIdToClientIndex(zn)>-1?wr(d,Po,as).call(d,zn,function(){Z++},function(){Z++}):Z++},100):Z++,!0},ri=function(Jn){!Nr&&_.removeAfterOutput&&setTimeout(function(){d._ImgManager.convertServerIdToClientIndex(zn)>-1&&wr(d,Po,as).call(d,zn)},100);var Lt={code:d._errorCode,message:d._getErrorString(),response:d.__HTTPPostResponseString};return W.closeProgress(null,"Scan Upload"),2==Ro.st||(Ro.st=1,v.each(se,function(Gs,zs){-1==Gs.st&&(Gs.bCancel=!0)}),te(it,Lt)),!1},v.isUndefined(Nn=_.format)){var ey=d._ImgManager.convertServerIdToClientIndex(zn);return zi(d),ri([ey]),!1}Nn==F.DWT.EnumDWT_ImageType.IT_MULTIPAGE_PDF?Nn=F.DWT.EnumDWT_ImageType.IT_PDF:Nn==F.DWT.EnumDWT_ImageType.IT_MULTIPAGE_TIF&&(Nn=F.DWT.EnumDWT_ImageType.IT_TIF);var ty={method:"startScan",url:us,serverIds:[zn],headers:d._GetHttpHeadersAndClear(),formData:Ku(d.httpFormFields),enumImageType:Nn,saveSetup:S,fileName:gr,dataFormat:Fp.Binary,retry:g,bOnlyResponseEmptyIsOK:!1,objUploadFileStatus:Ro,asyncSuccessFunc:vi,asyncFailureFunc:ri};d._asyncUploadCmd(ty)}}}),d.__OnPostAllTransfers=function(){var Vt,Nn,gr=-1,Qu=Fp.Binary,vi=_.httpParams.url,ri=_.singlePost,ki=E.transferMode==F.DWT.EnumDWT_TransferMode.TWSX_FILE,us=_.removeAfterOutput;if(T&&v.isFunction(T)&&(Nn={event:"postTransfer",bScanCompleted:!0,result:{currentPageNum:gr=ki?Y.length:U.length}},setTimeout(function(){T(Nn)},10)),0==gr)return Ee(d,-1029,"Source has nothing to capture."),void setTimeout(function(){D=!0,x&&v.isFunction(x)&&x();var Qt={code:d._errorCode,message:d._getErrorString(),response:d.__HTTPPostResponseString};te(it,Qt)},1e3);if(gr>0&&-1029==d._errorCode)d._errorCode=0;else if(0!=d._errorCode){D=!0,x&&v.isFunction(x)&&x();var zn={code:d._errorCode,message:d._getErrorString(),response:d.__HTTPPostResponseString};return void te(it,zn)}if("http"==_.type&&ri&&"http"==_.type){var cs,Nr,Yu,qr=U;if(v.isNumber(_.httpParams.maxSizeLimit)&&(d.__maxUploadImageSize=_.httpParams.maxSizeLimit),_.useUploader){var Vp,Ju=St.uploadManager,Nt=Ju.CreateJob(),ii=Nt.FormField;if(Me?(F.FileUploader.nextLoopTime=300,W.showProgress(d,"Scan Upload",d.__IfShowCancelDialogWhenImageTransfer)):W.hideProgress(),cs=function(Qt,jt){var Lr=Qt._fileName;return Lr||(Lr=""),d._bServerPercentDone=!0,d.__HTTPPostResponseString=jt,X(d,Lr,100,200),d._OnPercentDone([0,100,"","http"]),Me&&W.closeProgress(null,"Scan Upload"),!ki&&_.removeAfterOutput?setTimeout(function(){Z=0,v.each(qr,function(xo){d._ImgManager.convertServerIdToClientIndex(xo)>-1?wr(d,Po,as).call(d,xo,function(){Z++},function(){Z++}):Z++}),setTimeout(Or,100)},100):(Oe=!0,tt(M),J(d)),!0},Nr=function(){d._OnPercentDone([0,100,"","http"]),Me&&W.closeProgress(null,"Scan Upload"),Ju.CancelAllUpload(),d._bServerPercentDone=!0;var Qt={code:d._errorCode,message:d._getErrorString(),response:d.__HTTPPostResponseString};return te(it,Qt),!ki&&_.removeAfterOutput&&setTimeout(function(){v.each(qr,function(jt){d._ImgManager.convertServerIdToClientIndex(jt)>-1&&wr(d,Po,as).call(d,jt)})},100),!1},Yu=function(Qt,jt,Lr,xo){var yi=303;jt==sf.TRANS_SERVICE_ERROR_404?yi=404:jt==sf.TRANS_SERVICE_ERROR_500?yi=500:jt==sf.TRANS_SERVICE_ERROR_503&&(yi=503),d._errorCode=jt,d._errorString=Lr,d.__HTTPPostResponseString=xo,X(d,"",100,yi),Nr()},Vp=function(){d.__HTTPPostResponseString="",X(d,"",100,303),Nr()},Me&&(W.cancelFrom=on.Scan,wr(d,Yv,VE).call(d,Nr)),ki)v.each(_.httpParams.headers,function(Qt,jt){Nt.HttpHeader[jt]=Qt}),v.each(_.httpParams.formFields,function(Qt,jt){ii.Add(jt,Qt)}),Nt.ServerUrl=vi,Nt.bDeleteFile=us,Nt.reTries=g,v.isNumber(_.httpParams.maxSizeLimit)&&(Nt.maxSizeLimit=_.httpParams.maxSizeLimit),v.each(Y,function(Qt,jt){var Lr=co(_.httpParams.fileName,jt+1),xo=co(_.httpParams.remoteName,jt+1);Nt.SourceValue.Add(Qt,Lr,xo)}),Nt.ImageType=E.fileXfer.fileFormat,Nt.ThreadNum=oe,Nt.OnRunSuccess=cs,Nt.OnRunFailure=Yu,(Me||v.isFunction(L))&&(Nt.OnUploadTransferPercentage=function(Qt,jt){jt>0&&jt<=100&&(100==jt&&(jt=99),Me&&d._OnPercentDone([0,jt,"","http"]),v.isFunction(L)&&(jt>99&&(jt=99),X(d,"",jt,0)))},Me&&d._OnPercentDone([0,-1,Tn.Uploading,"http"]),X(d,"",0,0)),Ju.Run(Nt);else if((Vt=_.format)==F.DWT.EnumDWT_ImageType.IT_MULTIPAGE_PDF||Vt==F.DWT.EnumDWT_ImageType.IT_MULTIPAGE_TIF)Vt==F.DWT.EnumDWT_ImageType.IT_MULTIPAGE_PDF?Vt=F.DWT.EnumDWT_ImageType.IT_PDF:Vt==F.DWT.EnumDWT_ImageType.IT_MULTIPAGE_TIF&&(Vt=F.DWT.EnumDWT_ImageType.IT_TIF),Me&&d._OnPercentDone([0,-1,Tn.Encoding,"http"]),d._asyncGenerateURLForUploadData(qr,Vt,S,function(Qt){v.each(_.httpParams.headers,function(xo,yi){Nt.HttpHeader[yi]=xo}),v.each(_.httpParams.formFields,function(xo,yi){ii.Add(yi,xo)}),Nt.ServerUrl=vi,Nt.bDeleteFile=us,Nt.reTries=g,v.isNumber(_.httpParams.maxSizeLimit)&&(Nt.maxSizeLimit=_.httpParams.maxSizeLimit);var jt=co(_.httpParams.fileName,1),Lr=co(_.httpParams.remoteName,1);Nt._fileName=jt,Nt.SourceValue.Add(Qt,jt,Lr),Nt.ImageType=Vt,Nt.ThreadNum=oe,Nt.OnRunSuccess=cs,Nt.OnRunFailure=Yu,(Me||v.isFunction(L))&&(Nt.OnUploadTransferPercentage=function(xo,yi){yi>0&&yi<=100&&(100==yi&&(yi=99),Me&&d._OnPercentDone([0,yi,"","http",jt]),v.isFunction(L)&&X(d,jt,yi,0))},Me&&d._OnPercentDone([0,-1,Tn.Uploading,"http",jt])),Ju.Run(Nt)},Vp);else{var jp=qr.length,Ro=0,ey=0,ty="";Me&&(d._bServerPercentDone=!1,d._OnPercentDone([0,-1,Tn.Encoding,"http"])),v.each(qr,function(Qt,jt){var Lr=co(_.httpParams.fileName,jt+1),xo=co(_.httpParams.remoteName,jt+1);d._asyncGenerateURLForUploadData([Qt],Vt,S,function(yi){ey=(Ro+1)/jp*100,ty=[Ro+1,"/",jp].join(""),d._OnPercentDone([0,ey,ty,"http"]),Nt.SourceValue.Add(yi,Lr,xo),++Ro>=jp&&(Me&&(d._bServerPercentDone=!0),v.each(_.httpParams.headers,function(ny,ls){Nt.HttpHeader[ls]=ny}),v.each(_.httpParams.formFields,function(ny,ls){ii.Add(ls,ny)}),Nt.ServerUrl=vi,Nt.bDeleteFile=us,Nt.reTries=g,v.isNumber(_.httpParams.maxSizeLimit)&&(Nt.maxSizeLimit=_.httpParams.maxSizeLimit),Nt.ImageType=Vt,Nt.ThreadNum=oe,Nt.OnRunSuccess=cs,Nt.OnRunFailure=Yu,(Me||v.isFunction(L))&&(Nt.OnUploadTransferPercentage=function(ny,ls){ls>0&&ls<=100&&(100==ls&&(ls=99),Me&&d._OnPercentDone([0,ls,"","http"]),v.isFunction(L)&&(ls>99&&(ls=99),X(d,"",ls,0)))},Me&&d._OnPercentDone([0,-1,Tn.Uploading,"http"])),Ju.Run(Nt))},Vp)})}}else if(ki)cs=function(Qt){return d._bServerPercentDone=!0,!ki&&_.removeAfterOutput?setTimeout(function(){Z=0,v.each(qr,function(jt){d._ImgManager.convertServerIdToClientIndex(jt)>-1?wr(d,Po,as).call(d,jt,function(){Z++},function(){Z++}):Z++}),setTimeout(Or,100)},100):(Oe=!0,tt(M),J(d)),!0},Nr=function(Qt){d._bServerPercentDone=!0;var jt={code:d._errorCode,message:d._getErrorString(),response:d.__HTTPPostResponseString};return te(it,jt),!ki&&_.removeAfterOutput&&setTimeout(function(){v.each(qr,function(Lr){d._ImgManager.convertServerIdToClientIndex(Lr)>-1&&wr(d,Po,as).call(d,Lr)})},100),!1},d._innerUploadFilesDirectly(vi,Y,_.httpParams.fileName,Me,us,g,!1,cs,Nr);else{cs=function(Qt,jt){return d._bServerPercentDone=!0,!ki&&_.removeAfterOutput?setTimeout(function(){Z=0,v.each(qr,function(Lr){d._ImgManager.convertServerIdToClientIndex(Lr)>-1?wr(d,Po,as).call(d,Lr,function(){Z++},function(){Z++}):Z++}),setTimeout(Or,100)},100):(Oe=!0,tt(M),J(d)),!0},Nr=function(Qt){d._bServerPercentDone=!0;var jt={code:d._errorCode,message:d._getErrorString(),response:d.__HTTPPostResponseString};return te(it,jt),!ki&&_.removeAfterOutput&&setTimeout(function(){v.each(qr,function(Lr){d._ImgManager.convertServerIdToClientIndex(Lr)>-1&&wr(d,Po,as).call(d,Lr)})},100),!1},Vt=_.format;var Jn=d._GetHttpHeadersAndClear(),Lt=Ku(d.httpFormFields);if(Vt==F.DWT.EnumDWT_ImageType.IT_MULTIPAGE_PDF||Vt==F.DWT.EnumDWT_ImageType.IT_MULTIPAGE_TIF){Vt==F.DWT.EnumDWT_ImageType.IT_MULTIPAGE_PDF?Vt=F.DWT.EnumDWT_ImageType.IT_PDF:Vt==F.DWT.EnumDWT_ImageType.IT_MULTIPAGE_TIF&&(Vt=F.DWT.EnumDWT_ImageType.IT_TIF);var Gs=co(_.httpParams.fileName,1);co(_.httpParams.remoteName,1),d._asyncUploadCmd({method:"startScan",url:vi,headers:Jn,formData:Lt,serverIds:qr,enumImageType:Vt,saveSetup:S,fileName:Gs,dataFormat:Qu,retry:g,bOnlyResponseEmptyIsOK:!1,objUploadFileStatus:!1,asyncSuccessFunc:cs,asyncFailureFunc:Nr})}else qr.length>0&&d._asyncUploadFilesCmd(vi,qr,Jn,Lt,Vt,_.httpParams.fileName,S,Me,g,!1,cs,Nr)}}D=!0,x&&v.isFunction(x)&&x()};var _i=function(){"http"!=_.type?(Oe=!0,tt(M),J(d)):_.singlePost||setTimeout(Or,100)};wr(d,oH,y_e).call(d,E,_i,function(Vt){if(-1029==d._errorCode&&(E.transferMode==F.DWT.EnumDWT_TransferMode.TWSX_FILE?Y.length>0:U.length>0))return d._errorCode=0,_i();var Nn={code:d._errorCode,message:d._getErrorString(),response:d.__HTTPPostResponseString};te(it,Nn)})})})}},{key:"_innerInitEvents",value:function(l){this.__OnWSReconnect=l.onWSReconnect||null,this.__OnWSClose=l.onWSClose||null,this.__OnWSMessage=l.onWSMessage||null,this.__OnWSError=l.onWSError||null,this.__OnPercentDone=l.onPercentDone||"",this.__OnPrintMsg=l.onPrintMsg||"",this.__OnResult=l.onResult||"",this.__OnAfterOperate=l.onAfterOperate||"",this.__OnBeforeOperate=l.onBeforeOperate||"",this.__OnOperateStatus=l.onOperateStatus||"",this.__OnBitmapChanged=l.onBitmapChanged||"",this.__OnGetFilePath=l.onGetFilePath||"",this.__OnPreAllTransfers=l.onPreAllTransfers||"",this.__OnPreTransfer=l.onPreTransfer||"",this.__OnPostLoad=l.onPostLoad||"",this.__OnPostTransfer=l.onPostTransfer||"",this.__OnPostAllTransfers=l.onPostAllTransfers||"",this.__OnSourceUIClose=l.onSourceUIClose||"",this.__OnTransferCancelled=l.onTransferCancelled||"",this.__OnTransferError=l.onTransferError||"",this.__OnInternetTransferPercentage=l.onInternetTransferPercentage||"",this.__OnInternetTransferPercentageEx=l.onInternetTransferPercentageEx||"",this.__OnRemoteScanStatusAsync=l.onRemoteScanStatusAsync||""}}],[{key:"create",value:(i=Ae(A.mark(function l(d){var f;return A.wrap(function(g){for(;;)switch(g.prev=g.next){case 0:return f=new u(d),g.next=3,uo.STwainConnectToServer(f);case 3:return g.abrupt("return",f);case 4:case"end":return g.stop()}},l)})),function(l){return i.apply(this,arguments)})}]),u}(i_e);function aH(){var r,i,a=[],s=this.__devices.length;for(r=0;r<s;r++){var u=this.__devices[r],l=u.deviceType,d={ProductName:"",DeviceInfo:{},DriverType:"",IsCurrentSource:!1,IsDefaultSource:!1,Manufacturer:"",ProductFamily:"",ProtocolMajor:0,ProtocolMinor:0,SupportedGroups:0,Version:{Country:0,Info:"",Language:0,MajorNum:0,MinorNum:0}},f=void 0,g=v.clone(u.deviceInfo);(i=l)==ze.TWAINSCANNER||i==ze.WIATWAINSCANNER||i==ze.TWAINX64SCANNER?(l==ze.TWAINSCANNER?f="TWAIN":l==ze.WIATWAINSCANNER?f="WIATWAIN":l==ze.TWAINX64SCANNER&&(f="TWAIN64"),d.Manufacturer=g.Manufacturer,d.ProductFamily=g.ProductFamily,d.ProtocolMajor=g.ProtocolMajor,d.ProtocolMinor=g.ProtocolMinor,d.SupportedGroups=g.SupportedGroups,d.Version=g.Version):l==ze.SANESCANNER?(f="SANE",d.DeviceInfo=g):l==ze.ICASCANNER?(f="ICA",d.DeviceInfo=g):l==ze.ESCLSCANNER?(f="eSCL",d.DeviceInfo=g):l==ze.WIFIDIRECTSCANNER?(f="WiFiScanner",d.DeviceInfo=g):l==ze.WIASCANNER&&(f="WIA",d.DeviceInfo=g),d.ProductName=u.displayName,d.DriverType=f,a.push(d)}return a}function uH(){var r,i=[],a=this.__devices.length;for(r=0;r<a;r++)i.push(this.__devices[r].displayName);return i}function v_e(r,i){var a=["[",r,",",i??zc.SMF_NAME,"]"].join("");return this._innerFun("SelectSourceEx",a)}function y_e(r,i,a){var s,u,l=this,d=null,f=null;if(u=v.isUndefined(r)||null==r?{}:r,l._resetErr(),!l._isValid())return!1;if(v.isFunction(i)&&(d=function(){i(u)}),v.isFunction(a)&&(f=function(S,I){a(S,I,u)}),!Ye.checkProductKey(l,{Core:!0}))return v.isFunction(f)&&f(l._errorCode,l._errorString),!1;for(var g=0,_=0;_<lv.length;_++){var T=["__",lv[_]].join("");v.isFunction(l[T])&&(g|=1<<_)}return u.EnableEvents=g,s=["[",v.stringify(u),"]"].join(""),l.__bAcquireImageNow=!0,l.__innerAcquireOrLoadImageAsync("StartScan",s,!1,!0).then(d,f),!0}function as(r,i,a){var s=this;return s._innerFunRaw("RemoveImage",we(r),!0,!1,!0,function(){s._OnBitmapChanged(["0",""+r,3,s._ImgManager.getCurrentImageIndex(),s._ImgManager.count()]),v.isFunction(i)&&i()},a)}function VE(r){var i=this;i.IfShowCancelDialogWhenImageTransfer?(W.progressContext&&W.progressContext.on("cancel",function(){Ko(i),r()}),Xa(!0)):Xa(!1)}var sf={TRANS_SERVICE_ERROR_404:12,TRANS_SERVICE_ERROR_500:13,TRANS_SERVICE_ERROR_503:14},S_e=function r(i,a){if(!v.isUndefined(i)&&!v.isUndefined(a)&&null!=i&&null!=a){for(var s in a)i.hasOwnProperty(s)?"object"===e(i[s])&&r(i[s],a[s]):i[s]=a[s];return i}};function cH(r,i,a){if(r){var s=i??270,u=a??350;s<=0&&(s=270),u<=0&&(u=350),_e.one(r).before(W.install._strNonInstallDIV);var l=v.get(W.install._divDWTNonInstallContainerID);l&&(l.style.width=s,l.style.height=u),v.show(W.install._divDWTNonInstallContainerID)}}function Jv(r,i){return jE.apply(this,arguments)}function jE(){return jE=Ae(A.mark(function r(i,a){var s,u,l;return A.wrap(function(f){for(;;)switch(f.prev=f.next){case 0:if(!oo(i)){f.next=14;break}return s=j.bSSL?F.DWT.SSLPort:F.DWT.Port,f.next=4,OE(i,s);case 4:if(!(u=f.sent)){f.next=9;break}$u(u.upgrade,u.socket),f.next=12;break;case 9:throw $o(l={}),$t(l);case 12:f.next=15;break;case 14:v.isFunction(F.OnRemoteWebTwainNotFoundCallback)&&F.OnRemoteWebTwainNotFoundCallback(be.name,i,a,j.bSSL,Mn.bMobile);case 15:case"end":return f.stop()}},r)})),jE.apply(this,arguments)}function $u(r,i){var a=ro.getDSPath();if(""!=W.install._divDWTemessageContainer&&v.hide(W.install._divDWTemessageContainer),j.bMac)r?v.isFunction(F.OnWebTwainNeedUpgradeCallback)&&F.OnWebTwainNeedUpgradeCallback(be.name,{default:a},be.bHTML5Edition,lt.enumMac,j.bIE,j.bSafari,W.detect.ssl,Mn.strIEVersion):v.isFunction(F.OnWebTwainNotFoundOnMacCallback)&&F.OnWebTwainNotFoundOnMacCallback(be.name,a,be.bHTML5Edition,j.bIE,j.bSafari,W.detect.ssl,Mn.strIEVersion,i);else if(j.bLinux||F.navInfo.bEmbed||j.bChromeOS||Mn.bMobile){var s,u,l=ro.getEnumPlatform();if(F.navInfo.bEmbed||j.bAndroid||j.bChromeOS||j.bHarmonyOS?s=a:(s=ro.getLinuxHTML5DebPath(),u=ro.getLinuxHTML5RpmPath()),r){if(j.bAndroid)v.isFunction(F.OnWebTwainNeedUpgradeOnAndroidCallback)&&F.OnWebTwainNeedUpgradeOnAndroidCallback(be.name,a,W.detect.ssl);else if(v.isFunction(F.OnWebTwainNeedUpgradeCallback)){var d={default:s};j.bLinux&&(d.deb=s,d.rpm=u),F.OnWebTwainNeedUpgradeCallback(be.name,d,be.bHTML5Edition,l,j.bIE,j.bSafari,W.detect.ssl,Mn.strIEVersion)}}else j.bAndroid?v.isFunction(F.OnWebTwainNotFoundOnAndroidCallback)&&F.OnWebTwainNotFoundOnAndroidCallback(be.name,a,W.detect.ssl,!1):v.isFunction(F.OnWebTwainNotFoundOnLinuxCallback)&&F.OnWebTwainNotFoundOnLinuxCallback(be.name,s,u,be.bHTML5Edition,j.bIE,j.bSafari,W.detect.ssl,Mn.strIEVersion,l,i)}else(j.bChrome||j.bSafari||j.bFirefox||j.bOpera||F.DWT.IfUseActiveXForIE10Plus==ut||!F.DWT.ActiveXInstallWithCAB&&j.bIE)&&(r?v.isFunction(F.OnWebTwainNeedUpgradeCallback)&&F.OnWebTwainNeedUpgradeCallback(be.name,{default:a},be.bHTML5Edition,lt.enumWindow,j.bIE,j.bSafari,W.detect.ssl,Mn.strIEVersion):v.isFunction(F.OnWebTwainNotFoundOnWindowsCallback)&&F.OnWebTwainNotFoundOnWindowsCallback(be.name,a,be.bHTML5Edition,j.bIE,j.bSafari,W.detect.ssl,Mn.strIEVersion,i))}function I_e(r){return HE.apply(this,arguments)}function HE(){return HE=Ae(A.mark(function r(i){var a,s,u,d,f,g,_,T,S,I;return A.wrap(function(b){for(;;)switch(b.prev=b.next){case 0:if(d=i.host,f=i.port,g=null===(a=i.Container)||void 0===a?void 0:a.id,_=window,!(s=F.DWT.GetWebTwain(i.id))&&g&&(u=F.DWT.GetWebTwain(g)),!s&&!u){b.next=8;break}throw T={},s?Ode(T):Lde(T),{code:T._errorCode,message:T._errorString};case 8:return F.DWT.UseDefaultViewer||(i.container=null),i.bNoViewer=!((D=i.container)&&!v.isString(D)?Ne:ve),b.prev=10,b.next=13,sH.create(i);case 13:S=b.sent,b.next=22;break;case 16:throw b.prev=16,b.t0=b.catch(10),(I=b.t0&&b.t0.code)==yn.ResponseDataTypeError||I==yn.HTSTError||I==yn.CORSError||(I==yn.MustUpgrade?$u(!0,!1):I==yn.ModuleNotExists&&C_e(d,f,S)),S&&S.dispose(),b.t0;case 22:return b.prev=22,_.DCP_DWT_OnClickCloseInstall&&_.DCP_DWT_OnClickCloseInstall(!1,!0),b.finish(22);case 25:return lH(S),b.abrupt("return",S);case 27:case"end":return b.stop()}var D},r,null,[[10,16,22,25]])})),HE.apply(this,arguments)}function T_e(r,i){if(v.isFunction(F.OnWebTwainNeedUpgradeCallback)){var a,s,u={};if(s=ro.getDSPath(),j.bWin)a=lt.enumWindow;else if(F.navInfo.bEmbed||j.bAndroid||j.bChromeOS||j.bHarmonyOS||j.biPhone||j.biPad)j.bAndroid?a=lt.enumAndroid:(u.deb=s,a=j.biPhone||j.biPad?lt.enumiOS:j.bChromeOS?lt.enumChromeOS:j.bHarmonyOS?lt.enumHarmonyOS:lt.enumEmbed);else if(j.bLinux){var l=ro.getLinuxHTML5DebPath(),d=ro.getLinuxHTML5RpmPath();s=l,u.deb=l,u.rpm=d,a=lt.enumLinux}else a=lt.enumMac;u.default=s;var f=_e.one(".dynamsoft-dialog-license");f&&f.getEL()&&(f.getEL().style.display="none"),W.detect.needUpgrade=Ne,F.OnWebTwainNeedUpgradeCallback(be.name,u,be.bHTML5Edition,a,j.bIE,j.bSafari,W.detect.ssl,Mn.strIEVersion,W.detect.bPromptJSOrServerOutdated,r,i)}}function lH(r){return GE.apply(this,arguments)}function GE(){return GE=Ae(A.mark(function r(i){var a,u;return A.wrap(function(l){for(;;)switch(l.prev=l.next){case 0:if(i&&!i._blts){l.next=2;break}return l.abrupt("return");case 2:if(-2207==i.ErrorCode&&(W.detect.bPromptJSOrServerOutdated=Ne,v.isFunction(F.DWT.OnWebTwainNeedUpgradeWebJavascript)&&F.DWT.OnWebTwainNeedUpgradeWebJavascript(i.ErrorString)),!kn.versionInfoFromServer){l.next=7;break}a=kn.versionInfoFromServer,l.next=10;break;case 7:return l.next=9,i._getVersionInfoAsync();case 9:a=l.sent;case 10:if(W.detect.bNeedUpgradeEvent||Zme(a)){l.next=19;break}if(W.detect.bNeedUpgradeEvent=Ne,!v.isFunction(F.DWT.OnWebTwainNeedUpgrade)){l.next=15;break}if(!F.DWT.OnWebTwainNeedUpgrade()){l.next=15;break}return l.abrupt("return");case 15:if(!i._bRemoteMode){l.next=18;break}return v.isFunction(F.OnRemoteWebTwainNeedUpgradeCallback)&&F.OnRemoteWebTwainNeedUpgradeCallback(be.name,i._serverInfo.server,i._serverInfo.port,i._serverInfo.ssl),l.abrupt("return");case 18:(be.bHTML5Edition&&i._isBindViewer()||!be.bHTML5Edition)&&((u=i._containerElement)&&(_e.one(u).before(W.install._strNonInstallDIV),v.show(W.install._divDWTNonInstallContainerID)),""!=W.install._divDWTemessageContainer&&v.hide(W.install._divDWTemessageContainer),T_e());case 19:case"end":return l.stop()}},r)})),GE.apply(this,arguments)}function C_e(r,i,a){if(!W.detect.bNoControlEvent){var s,u=0,l=0;a&&(u=a._width,l=a._height,s=a._containerElement),a&&a._bRemoteMode?a._bNotShowMessage||v.isFunction(F.OnRemoteWebTwainNotFoundCallback)&&F.OnRemoteWebTwainNotFoundCallback(be.name,a._serverInfo.server,a._serverInfo.port,a._serverInfo.ssl,Mn.bMobile):OE(r,i).then(function(d){var f;if(cH(s,u,l),!d)throw $o(f={}),$t(f);$u(d.upgrade,d.socket)},function(d){mn(d)}),W.detect.bNoControlEvent=!0}}W.detect.onNoControl=function(r,i,a,s){s&&s._bRemoteMode&&!s._bNotShowMessage?v.isFunction(F.OnRemoteWebTwainNotFoundCallback)&&F.OnRemoteWebTwainNotFoundCallback(be.name,s._serverInfo.server,s._serverInfo.port,s._serverInfo.ssl,Mn.bMobile):(cH(r,i,a),$u(!1,!1))};var Xv,nu=function(r){di(S,r);var i,a,s,u,l,d,f,g,_,T=function b_e(r){var i=function(){if(typeof Reflect>"u"||!Reflect.construct||Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch{return!1}}();return function(){var a,s=yt(r);if(i){var u=yt(this).constructor;a=Reflect.construct(s,arguments,u)}else a=s.apply(this,arguments);return fi(this,a)}}(S);function S(I){var b;return n(this,S),(b=T.call(this,I))._bServerPercentDone=!0,b}return c(S,[{key:"getDevices",value:function(I,b,D){return this._getDevices(I,b,D)}},{key:"acquireImage",value:function(I,b){return br(yt(S.prototype),"_acquireImage",this).call(this,I,b)}},{key:"_acquireImageForSendTo",value:function(I,b,D,R){return br(yt(S.prototype),"_acquireImageForSendTo",this).call(this,I,b,D,R)}},{key:"getCapabilities",value:function(I,b){return this._getCapabilities(I,b)}},{key:"setCapabilities",value:function(I,b,D){return this._setCapabilities(I,b,D)}},{key:"closeSource",value:function(){return this._closeSource()}},{key:"setBufferMemoryLimit",value:(_=Ae(A.mark(function I(b){var D;return A.wrap(function(L){for(;;)switch(L.prev=L.next){case 0:if(D=this,v.isNumber(b)&&!isNaN(b)){L.next=4;break}throw Tr(D),{code:D._errorCode,message:D._errorString};case 4:if(D._resetErr(),D._isValid()){L.next=7;break}throw{code:D._errorCode,message:D._errorString};case 7:return L.next=9,D._innerFunV2("BufferMemoryLimit",we(b));case 9:return L.abrupt("return",L.sent);case 11:case"end":return L.stop()}},I,this)})),function(I){return _.apply(this,arguments)})},{key:"setIfAllowLocalCache",value:(g=Ae(A.mark(function I(b){var D;return A.wrap(function(L){for(;;)switch(L.prev=L.next){case 0:if(D=this,v.isBoolean(b)){L.next=4;break}throw Tr(self),{code:D._errorCode,message:D._errorString};case 4:if(D._resetErr(),D._isValid()){L.next=7;break}throw{code:D._errorCode,message:D._errorString};case 7:return L.next=9,D._innerFunV2("IfAllowLocalCache",we(b));case 9:return L.abrupt("return",L.sent);case 11:case"end":return L.stop()}},I,this)})),function(I){return g.apply(this,arguments)})},{key:"howManyImagesInBuffer",get:function(){return this._imageBufferWrapper.count()}},{key:"currentImageIndexInBuffer",get:function(){return this._imageBufferWrapper.getCurrentImageIndex()},set:function(I){this._imageBufferWrapper.setCurrentImageIndex(I)}},{key:"saveImages",value:(f=Ae(A.mark(function I(b,D,R,L){var x;return A.wrap(function(U){for(;;)switch(U.prev=U.next){case 0:if(x="saveImages",this._checkIndices(D)){U.next=3;break}throw{code:this._errorCode,message:this._getErrorString()};case 3:return this._containerElement=L,U.next=6,this._saveImages(x,b,D,R);case 6:case"end":return U.stop()}},I,this)})),function(I,b,D,R){return f.apply(this,arguments)})},{key:"getImages",value:function(I,b,D,R){if(!this._checkIndices(I))throw{code:this._errorCode,message:this._getErrorString()};return this._containerElement=R,this._getImages("getImages",I,b,D)}},{key:"removeImages",value:(d=Ae(A.mark(function I(b){var D,R,L,U;return A.wrap(function(Y){for(;;)switch(Y.prev=Y.next){case 0:if(this._checkIndices(b)){Y.next=2;break}throw{code:this._errorCode,message:this._getErrorString()};case 2:for(D=b.sort(function(Z,oe){return oe-Z}),R=[],L=0;L<D.length;L++)(U=this._imageBufferWrapper.convertClientIndexToServerId(D[L]))>0&&R.push(U);if(0!=R.length){Y.next=7;break}return Y.abrupt("return");case 7:return Y.next=9,this._innerFunV2("RemoveAllImages",we(R.join(",")));case 9:if(!Y.sent&&-1033!=this._errorCode){Y.next=16;break}if(this._imageBufferWrapper.removeImages(D)){Y.next=14;break}throw this._imageBufferWrapper.getError();case 14:Y.next=17;break;case 16:throw{code:this._errorCode,message:this._errorString};case 17:case"end":return Y.stop()}},I,this)})),function(I){return d.apply(this,arguments)})},{key:"updateImage",value:function(I,b,D){var R=this._imageBufferWrapper.getIndexByUid(I),L=this._imageBufferWrapper.convertClientIndexToServerId(R);return br(yt(S.prototype),"_updateImage",this).call(this,L,b,D)}},{key:"getSkewAngleFromBinaryAsync",value:function(I,b,D,R){var L=this;if(L._resetErr(),!L._isValid())return W.Promise.reject({code:L._errorCode,message:L._errorString});var x=this._imageBufferWrapper.getMetadataByIndex(I),U={imageId:this._imageBufferWrapper.convertClientIndexToServerId(I),bufferLen:b.size,imageType:Xt.IT_BMP,width:x.width,height:x.height,bit:x.bitDepth,xres:x.resolutionX,yres:x.resolutionY},Y=v.stringify([v.stringify(U)]);return this._innerSendBlob("GetSkewAngleFromBinary",Y,b,!0,!0,D,R)}},{key:"httpUpload",value:(l=Ae(A.mark(function I(b,D,R,L,x,U,Y){var Z,oe;return A.wrap(function(se){for(;;)switch(se.prev=se.next){case 0:if((Z=this)._resetErr(),Z._isValid()){se.next=4;break}throw{code:Z._errorCode,message:Z._errorString};case 4:if(!v.isUndefined(b)&&""!==b){se.next=9;break}throw xi(Z),{code:Z._errorCode,message:Z._errorString};case 9:if(v.isString(b)){se.next=12;break}throw q_(Z),{code:Z._errorCode,message:Z._errorString};case 12:if(Z._checkIndices(D)){se.next=14;break}throw{code:Z._errorCode,message:Z._errorString};case 14:if(oe=[],v.isArray(D)&&v.each(D,function(k){var E=Z._imageBufferWrapper.convertClientIndexToServerId(k);-1!=E&&oe.push(E)}),0!=oe.length){se.next=19;break}throw Dt(Z),{code:Z._errorCode,message:Z._errorString};case 19:if(!v.isUndefined(R)){se.next=22;break}throw zi(Z),{code:Z._errorCode,message:Z._errorString};case 22:if(R!=F.DWT.EnumDWT_ImageType.IT_BMP&&R!=F.DWT.EnumDWT_ImageType.IT_JPG&&R!=F.DWT.EnumDWT_ImageType.IT_PNG){se.next=28;break}if(!(oe.length>1)){se.next=26;break}throw xd(Z),{code:Z._errorCode,message:Z._errorString};case 26:se.next=33;break;case 28:if(R!=F.DWT.EnumDWT_ImageType.IT_TIF&&R!=F.DWT.EnumDWT_ImageType.IT_PDF){se.next=31;break}se.next=33;break;case 31:throw zi(Z),{code:Z._errorCode,message:Z._errorString};case 33:if(!(v.isUndefined(L)||L!=F.DWT.EnumDWT_UploadDataFormat.Binary&&L!=F.DWT.EnumDWT_UploadDataFormat.Base64)){se.next=36;break}throw tU(Z),{code:Z._errorCode,message:Z._errorString};case 36:return se.next=38,new W.Promise(function(k,E){var M,G,V=parseInt(R),J=parseInt(L);null!=U&&U.formFields&&(M=new FormData,v.each(U?.formFields,function(Q,te){var X=Q.name,ae=Q.value;v.isString(X)&&(ae instanceof Blob?M.append(X,ae,Q.fileName):M.append(X,ae))})),null!=U&&U.headers&&(G={},v.each(U?.headers,function(Q,te){v.isString(Q.name)&&(G[Q.name]=Q.value)})),Z._containerElement=Y,S._innerHTTPUpload(Z,"httpUpload",b,U?.responseType,G,M,oe,V,J,x,void 0,0,!1,void 0,function(Q){if(v.isFunction(k)){var te=[];v.isArray(oe)&&v.each(oe,function(X){var ae=Z._imageBufferWrapper.convertServerIdToClientIndex(X);ae>-1&&te.push(ae)});try{hr(k,Q,te)}catch{}}return Q=null,!0},function(Q){if(v.isFunction(E))try{E(Q)}catch{}return!1})});case 38:return se.abrupt("return",se.sent);case 39:case"end":return se.stop()}},I,this)})),function(I,b,D,R,L,x,U){return l.apply(this,arguments)})},{key:"getCustomDataByIndex",value:function(I){return this._imageBufferWrapper.getCustomDataByIndex(I)}},{key:"getIndexByUid",value:function(I){return this._imageBufferWrapper.getIndexByUid(I)}},{key:"getProfile",value:function(I){return br(yt(S.prototype),"_getProfile",this).call(this,I)}},{key:"setProfile",value:function(I,b){return br(yt(S.prototype),"_setProfile",this).call(this,I,b)}},{key:"imageIDToIndex",value:function(I){return this._imageIDToIndex(I)}},{key:"indexToImageID",value:function(I){return this._indexToImageID(I)}},{key:"rotate",value:function(I,b,D,R){var L=this;if(L._resetErr(),!L._isValid())return W.Promise.reject({code:L._errorCode,message:L._errorString});var x=parseInt(I);if(isNaN(x))return Dt(L),W.Promise.reject({code:L._errorCode,message:L._errorString});if(x<0||x>=L.howManyImagesInBuffer)return We(L),W.Promise.reject({code:L._errorCode,message:L._errorString});var U=L._imageBufferWrapper.convertClientIndexToServerId(x);return-1==U?(We(L),W.Promise.reject({code:L._errorCode,message:L._errorString})):L._innerFunV2("RotateEx",we(U,b,D,R),!0).then(function(Y){})}},{key:"crop",value:function(I,b){var D=this;if(D._resetErr(),!D._isValid())return W.Promise.reject({code:D._errorCode,message:D._errorString});var R=parseInt(I);if(isNaN(R))return Dt(D),W.Promise.reject({code:D._errorCode,message:D._errorString});if(R<0||R>=D.howManyImagesInBuffer)return We(D),W.Promise.reject({code:D._errorCode,message:D._errorString});var L=D._imageBufferWrapper.convertClientIndexToServerId(R);return-1==L?(We(D),W.Promise.reject({code:D._errorCode,message:D._errorString})):D._innerFunV2("Crop",we(L,b.x,b.y,b.x+b.width,b.y+b.height),!0).then(function(oe){})}},{key:"_createHttpUploaderConfig",value:function(){var I=this,b=new Q4;return b.IfShowProgressBar=I.IfShowProgressBar,b.IfShowCancelDialogWhenImageTransfer=I.IfShowCancelDialogWhenImageTransfer,b.MaxUploadImageSize=I.MaxUploadImageSize,b.HTTPRequestswithCredentials=I.HTTPRequestswithCredentials,b.onPercent=function(D){I._OnPercentDone(D)},b.onHttpUploadStatus=function(D){},b}},{key:"_OnReady",value:(u=Ae(A.mark(function I(){var b,D,R;return A.wrap(function(L){for(;;)switch(L.prev=L.next){case 0:return oo((b=this)._serverInfo.server)&&(Zo.item("DWT_port",b._serverInfo.port),Zo.item("DWT_ssl",b._serverInfo.ssl?"true":"false")),b._bNoMask||nr("OnReady",b),L.prev=3,L.next=6,br(yt(S.prototype),"_OnReady",this).call(this);case 6:return L.next=8,b._innerActiveUI(b._uuidForActiveUI);case 8:return D=L.sent,L.next=11,b._OnActiveUI(D);case 11:(R=b._id)&&!F.DWT.WebTwainIdMap[R]&&(F.DWT.WebTwainIdMap[R]=b),L.next=20;break;case 15:throw L.prev=15,L.t0=L.catch(3),L.t0&&(b._errorCode=L.t0.code,b._errorString=L.t0.message),b.dispose(),L.t0;case 20:return L.prev=20,b._bNoMask||Cn("OnReady"),L.finish(20);case 23:case"end":return L.stop()}},I,this,[[3,15,20,23]])})),function(){return u.apply(this,arguments)})},{key:"_isBindViewer",value:function(){return this._bBindViewer}},{key:"_isNoViewer",value:function(){return!this._isBindViewer()}},{key:"getServiceInfo",value:function(){return br(yt(S.prototype),"getServiceInfo",this).call(this)}},{key:"setViewerInfo",value:function(I){this._bBindViewer=I}},{key:"setViewerControlInfo",value:function(I){this._controlWidth=I.width,this._controlHeight=I.height}}],[{key:"create",value:(s=Ae(A.mark(function I(b){var D;return A.wrap(function(R){for(;;)switch(R.prev=R.next){case 0:return D=new S(b),R.next=3,uo.STwainConnectToServer(D);case 3:return R.abrupt("return",D);case 4:case"end":return R.stop()}},I)})),function(I){return s.apply(this,arguments)})},{key:"_getBuffer",value:function(I){return Pp._getBuffer(I._imageBufferWrapper)}},{key:"_setError",value:function(I,b,D){I._errorCode=b,I._errorString=D}},{key:"createByServiceInfo",value:(a=Ae(A.mark(function I(b,D,R){var L,x,U;return A.wrap(function(Y){for(;;)switch(Y.prev=Y.next){case 0:return x={id:v.guid(),dmService:D,bNoViewer:!0,bNoMask:null==D||null===(L=D.attrs)||void 0===L?void 0:L.bNoMask,bNotShowMessage:!0},(U=new S(x))._uuidForActiveUI=b,U._bLicenseErrorDispose=!1,R&&(U._containerElement=R),Y.next=7,U._connnect();case 7:return Y.next=9,uo.STwainConnectToServer(U);case 9:return Y.abrupt("return",U);case 10:case"end":return Y.stop()}},I)})),function(I,b,D){return a.apply(this,arguments)})},{key:"checkOnlineByServiceInfo",value:(i=Ae(A.mark(function I(b){var D,R;return A.wrap(function(L){for(;;)switch(L.prev=L.next){case 0:return D={id:v.guid(),dmService:b,bNoViewer:!0,bNoMask:!0,bNotShowMessage:!0},L.prev=1,R=new S(D),L.next=5,R._connnect();case 5:return R.dispose(),L.abrupt("return",!0);case 9:return L.prev=9,L.t0=L.catch(1),v.warn(L.t0),L.abrupt("return",!1);case 13:case"end":return L.stop()}},I,null,[[1,9]])})),function(I){return i.apply(this,arguments)})},{key:"_isReady",value:function(I){return I._bReady}},{key:"_innerHTTPUpload",value:function(I,b,D,R,L,x,U,Y,Z,oe,se,k,E,M,G,V){var J=oe,Q=D,te=!1;if(v.isUndefined(Y))return zi(I),v.isFunction(V)&&V({code:I._errorCode,message:I._errorString}),!1;W.cancelFrom=on.HTTPUpload;var X,ae=function(ye,Ce,Ke){return W.needShowTwiceShowDialog=!1,I.IfShowProgressBar&&W.closeProgress(null,b),v.isFunction(V)&&V({code:ye,message:Ce,response:Ke}),!1},he=I._createHttpUploaderConfig();if(he.objUploadStatus=M,J=Lv(J,Y),W.needShowTwiceShowDialog=!0,I.IfShowProgressBar?(W.showProgress(I,b,!1),W.progressContext&&(W.progressContext._onPercent=function(ye){var Ce=0;ye&&(Ce=Math.floor(ye.loaded/ye.total*100))>100&&(Ce=100),W.progressBarOnPercentDone(-1,"Transferring","",Ce,"")})):W.hideProgress(),Z==F.DWT.EnumDWT_UploadDataFormat.Binary){if(M&&M.bCancel)return M.st=2,Ko(I),ae(I._errorCode,I._errorString);he.onPercent([0,-1,Tn.Encoding,"http"]),I._convertToBlobForUpload(Y,U,se,4,function(ye,Ce,Ke){if(X=function(ke){return W.needShowTwiceShowDialog=!1,I.IfShowProgressBar&&W.closeProgress(null,b),v.isFunction(G)&&hr(G,ke),ke=null,!0},M&&M.bCancel)return M.st=2,Ko(I),ae(I._errorCode,I._errorString);if(!ye||ye.size<=0)return er(I),ae(I._errorCode,I._errorString);var Ze=I.__maxUploadImageSize;if(ye.size>Ze&&-1!=Ze)return ca(I),ae(I._errorCode,I._errorString);if(0!=I._errorCode)return ae(I._errorCode,I._errorString);F.DWT.IfAddMD5InUploadHeader&&Ce&&""!=Ce&&(L["dwt-md5"]=Ce);var dt=new Za,ft=new Us;ft.url=Q,ft.method=b,ft.content=ye,ye=null,ft.contentType=I._strHttpContentTypeFieldValue,ft.headers=L,ft.fileName=J,ft.httpFormData=x,ft.retry=k,ft.bOnlyResponseEmptyIsOK=E,ft.responseType=R,he.objUploadStatus=M,te=dt.httpPostUpload(he,ft,X,ae)},ae),te=!0}else Z==F.DWT.EnumDWT_UploadDataFormat.Base64&&I._convertToBase64ByServerIdsWithUI(b,U,Y,se,4,function(ye){var Ce,Ke;if(!ye||ye.getLength()<=0||(X=function(dt){return W.needShowTwiceShowDialog=!1,I.IfShowProgressBar&&W.closeProgress(null,b),v.isFunction(G)&&hr(G,dt),!0},Ce=ye.getMD5(),F.DWT.IfAddMD5InUploadHeader&&(L["dwt-md5"]=Ce),!(Ke=ye.getData(0,ye.getLength()))||""==Ke))return er(I),ae(I._errorCode,I._errorString);var Ze=new Us;Ze.url=Q,Ze.method=b,Ze.content=Ke,Ke=null,Ze.headers=L,Ze.fileName=J,Ze.httpFormData=x,Ze.retry=k,Ze.bOnlyResponseEmptyIsOK=E,Ze.responseType=R,(new Za).httpPostUpload(he,Ze,X,ae)},ae);return te}}]),S}(X4),zE=tn,w_e=function(){function r(k){var E=this;n(this,r),this._serverUrl=k,this._defaultDSScanClient=null,this._dsScanClientsMap={},this._serviceInfos=null,this._id=v.guid(),this.onBufferChanged=null,this.onPostTransferAsync=null,this._errorCode=0,this._errorString="",this._bDispose=!1,this._needSetLogLevel=!1,this._logLevel=-1,this._showProgressBar=!0,this._checkServerUrl(),this._id&&!F.DWT.RemoteScanIdMap[this._id]&&(F.DWT.RemoteScanIdMap[this._id]=this),this._uuidForRemoteScanObject="",W.dlgProgress||W.initProgress(null),this._viewer=F.DWT.UseDefaultViewer?new F.DWTViewerEx(null,{viewerEvents:{bufferChanged:function(G,V){E.__bufferChanged(E,G,V)},save:function(G,V,J,Q){return E.__save(G,V,J,Q)},rotate:function(G,V,J){return E.__rotate(G,V,J)},crop:function(G,V,J,Q,te){return E.__crop(G,{x:V,y:J,width:Q,height:te})}},viewerError:{setError:function(G,V){E._defaultDSScanClient?nu._setError(E._defaultDSScanClient,G,V):0==G&&""==V||(E._errorCode=G,E._errorString=V)}},imageEditorEvents:{deskew:function(G,V){E.__deskew(E,G,V)},removeImage:function(){E.__remove(E)},removeAllImage:function(){E.__removeAll(E)},close:function(){E.__close(E)}},imageEditorUiConfig:{buttons:{visibility:{scan:!1,load:!1}}}}):null}var i,a,s,u,l,d,f,g,_,T,S,I,b,D,R,L,x,U,Y,Z,oe,se;return c(r,[{key:"Viewer",get:function(){return this._viewer}},{key:"_disposeDSClientByKey",value:function(k){var E=this._dsScanClientsMap[k];E&&(E.isDestroy||E.dispose(),delete this._dsScanClientsMap[k])}},{key:"_checkServerUrl",value:function(){var k=this._serverUrl;if(k&&v.isString(k)&&v.startsWith(location.href,"https://")&&v.startsWith(k,"http://")){var E={};throw Ee(E,-2436,'Mixed Content: The page at "'+location.href+'" was loaded over HTTPS, but requested an insecure resource "'+k+'/ddm/18625/ddm/SearchScanner". This request has been blocked; the content must be served over HTTPS.'),$t(E)}if(!v.isString(k)||""==k){var M={};throw Ee(M,-2545,"The  proxy server URL is invalid."),$t(M)}}},{key:"getDynamsoftService",value:(se=Ae(A.mark(function k(E){var M,G,V,J,Q,te,X,ae,he,ye,Ce,Ke,Ze,dt,ft,ke,Te,Oe,Me,et;return A.wrap(function(qe){for(;;)switch(qe.prev=qe.next){case 0:if(!this._bDispose){qe.next=4;break}throw so(M={}),$t(M);case 4:if(G=this._serverUrl,this._checkServerUrl(),V=new Qv(G,!0),nr("getDynamsoftService",this.getViewerElement()),qe.prev=8,!E&&this._serviceInfos){qe.next=68;break}if(J=null,Q=this._serviceInfos,this._serviceInfos=[],te="",X="",!li()){qe.next=30;break}return qe.next=16,this._setRemoteUuid();case 16:return qe.prev=16,qe.next=19,uv(F.DWT.EnumInstance.dwt_desktop,"");case 19:(ae=qe.sent)&&(te=ae.ar,X=this._uuidForRemoteScanObject),qe.next=28;break;case 23:throw qe.prev=23,qe.t0=qe.catch(16),NV(he={},qe.t0),{code:he._errorCode,message:he._errorString};case 28:qe.next=31;break;case 30:te=be.refProductKey;case 31:return qe.next=33,V.getDynamsoftService(te,X,E);case 33:if(!(J=qe.sent)){qe.next=68;break}Ce=[],ye=0;case 37:if(!(ye<J.length)){qe.next=65;break}return dt=$w(J[ye]),ft=null!==(Ke=null==dt||null===(Ze=dt.attrs)||void 0===Ze?void 0:Ze.ty)&&void 0!==Ke?Ke:"",qe.next=42,nu.checkOnlineByServiceInfo(dt);case 42:if(!qe.sent){qe.next=60;break}if(dt.attrs=dt.attrs||{},dt.attrs.bNoMask=!0,dt.attrs.bNotShowMessage=!0,!Q){qe.next=57;break}ke=void 0,ke=0;case 50:if(!(ke<Q.length)){qe.next=57;break}if(!this.isSameService(dt,Q[ke])){qe.next=54;break}return Q.splice(ke,1),qe.abrupt("break",57);case 54:ke++,qe.next=50;break;case 57:this._serviceInfos.push(dt),qe.next=61;break;case 60:ft+="(x)";case 61:Ce.push(ft);case 62:ye++,qe.next=37;break;case 65:if(v.log("Find Dynamsoft Services:"),v.log(Ce.join(", ")),Q)for(Te=0;Te<Q.length;Te++)(et=null===(Oe=Q[Te])||void 0===Oe||null===(Me=Oe.attrs)||void 0===Me?void 0:Me.UUID)&&this._disposeDSClientByKey(et);case 68:this._needSetLogLevel&&-1!=this._logLevel&&this.setLogLevel(this._logLevel),qe.next=74;break;case 71:throw qe.prev=71,qe.t1=qe.catch(8),qe.t1;case 74:qe.prev=74,Cn("getDynamsoftService");try{V._bInited&&V.dispose()}catch{}return qe.finish(74);case 78:return qe.abrupt("return",this._serviceInfos);case 79:case"end":return qe.stop()}},k,this,[[8,71,74,78],[16,23]])})),function(k){return se.apply(this,arguments)})},{key:"getDefaultDynamsoftService",value:function(){if(this._bDispose){var k={};throw so(k),$t(k)}return this._defaultDSScanClient?this._defaultDSScanClient.getServiceInfo():null}},{key:"setDefaultDynamsoftService",value:(oe=Ae(A.mark(function k(E){var M,G,V,J;return A.wrap(function(Q){for(;;)switch(Q.prev=Q.next){case 0:if(!this._bDispose){Q.next=4;break}throw so(M={}),$t(M);case 4:if(null!==E){Q.next=7;break}return this._defaultDSScanClient=null,Q.abrupt("return");case 7:if(E&&E instanceof Kw){Q.next=11;break}throw qn(G={}),{code:G._errorCode,message:G._errorString};case 11:return V=this.getViewerElement(),Q.next=14,this._createDSClientByServiceInfo(E,!0,V._containerElement);case 14:if(!(J=Q.sent)){Q.next=18;break}return Q.next=18,this._innerSetDefault(J);case 18:case"end":return Q.stop()}},k,this)})),function(k){return oe.apply(this,arguments)})},{key:"_innerSetDefault",value:(Z=Ae(A.mark(function k(E){var M,G,V,J;return A.wrap(function(Q){for(;;)switch(Q.prev=Q.next){case 0:if(!E){Q.next=11;break}if(nu._isReady(E)){Q.next=5;break}throw J=null!==(M=null===(G=E.getServiceInfo())||void 0===G||null===(V=G.attrs)||void 0===V?void 0:V.name)&&void 0!==M?M:"",Lc(E,J),{code:E._getErrorCode(),message:E._getErrorString()};case 5:this._defaultDSScanClient=E,this._defaultDSScanClient.IfShowProgressBar=this._showProgressBar,this.Viewer&&this.Viewer.webViewer&&this.Viewer.webViewer.bindViewUI&&this._defaultDSScanClient.setViewerInfo(this.Viewer.webViewer.bindViewUI),this.__setViewerControlInfo(),this._registEventToDefaultDS(),this._viewer&&this._viewer.webViewer.setBufferService(nu._getBuffer(this._defaultDSScanClient));case 11:case"end":return Q.stop()}},k,this)})),function(k){return Z.apply(this,arguments)})},{key:"__setViewerControlInfo",value:function(){this.Viewer.webViewer.bindViewUI&&this.Viewer.width&&this.Viewer.width>0&&this.Viewer.height&&this.Viewer.height>0&&this._defaultDSScanClient.setViewerControlInfo({width:this.Viewer.width,height:this.Viewer.height})}},{key:"__bufferChanged",value:function(k,E,M){var G,V=k,J=[],Q=-1,te=[];E.operation&&(E.action=E.operation);for(var X=0;X<V.howManyImagesInBuffer;X++)(G=V._defaultDSScanClient.getCustomDataByIndex(X))&&G.imageId&&J.push(zu(G.imageId));if(E.imageIds=J,E.curIndex>=0&&(G=V._defaultDSScanClient.getCustomDataByIndex(E.curIndex))&&G.imageId&&(Q=zu(G.imageId)),E.currentId=Q,E.afterStatus.selectedUids)for(var ae=0;ae<E.afterStatus.selectedUids.length;ae++)if(E.afterStatus.selectedUids[ae]){var he=V._defaultDSScanClient.getIndexByUid(E.afterStatus.selectedUids[ae]);he>=0&&(G=V._defaultDSScanClient.getCustomDataByIndex(he))&&G.imageId&&te.push(zu(G.imageId))}E.selectedIds=te,v.mix(E,{}),delete E.uids,delete E.currentUid,delete E.selectedUids,delete E.afterStatus,delete E.beforeStatus,delete E.operation,delete E.curIndex,delete E.docUid,V.__fireEvent("onBufferChanged",E)}},{key:"__acquire",value:function(k){var E=k;E._stwain.SelectSource(function(){E._stwain.CloseSource(),E._stwain.OpenSource(),E._stwain.IfShowUI=!0,1==F.DWT.IfConfineMaskWithinTheViewer?(F.DWT.IfConfineMaskWithinTheViewer=!1,E._stwain.AcquireImage({},function(){F.DWT.IfConfineMaskWithinTheViewer=!0},function(){})):E._stwain.AcquireImage()},function(){v.log("User did not select a source")})}},{key:"__remove",value:(Y=Ae(A.mark(function k(E){var M,G;return A.wrap(function(V){for(;;)switch(V.prev=V.next){case 0:if(M=this,!this._defaultDSScanClient){V.next=10;break}if(tr(this._defaultDSScanClient),!(M.howManyImagesInBuffer<=0||M.currentImageIndexInBuffer<0)){V.next=6;break}return zE.output(M,"No image in Buffer"),V.abrupt("return",!0);case 6:return G=nu._getBuffer(this._defaultDSScanClient),V.next=9,this._defaultDSScanClient.removeImages(G.getSelectedImagesIndices());case 9:return V.abrupt("return",V.sent);case 10:return V.abrupt("return",!1);case 11:case"end":return V.stop()}},k,this)})),function(k){return Y.apply(this,arguments)})},{key:"__removeAll",value:(U=Ae(A.mark(function k(E){return A.wrap(function(M){for(;;)switch(M.prev=M.next){case 0:if(!this._defaultDSScanClient){M.next=4;break}return tr(this._defaultDSScanClient),M.next=4,this._defaultDSScanClient._removeAllImagesAsync("removeAllImages",!0);case 4:return M.abrupt("return",!1);case 5:case"end":return M.stop()}},k,this)})),function(k){return U.apply(this,arguments)})},{key:"__save",value:(x=Ae(A.mark(function k(E,M,G,V){var J,Q,te;return A.wrap(function(X){for(;;)switch(X.prev=X.next){case 0:if(Q="save",te=(J=this).__getViewerElementForViewer(J,V),nr(Q,te),X.prev=3,tr(J._defaultDSScanClient),!(J.howManyImagesInBuffer<=0||J.currentImageIndexInBuffer<0)){X.next=8;break}return zE.output(J,"No image in Buffer"),X.abrupt("return");case 8:return X.next=10,J._defaultDSScanClient.updateImage(E,M,G);case 10:return X.next=13,J._defaultDSScanClient.__saveToViewerAfterUpdate(E,G);case 13:X.next=17;break;case 15:X.prev=15,X.t0=X.catch(3);case 17:return X.prev=17,Cn(Q),X.finish(17);case 20:case"end":return X.stop()}},k,this,[[3,15,17,20]])})),function(k,E,M,G){return x.apply(this,arguments)})},{key:"__getViewerElementForViewer",value:function(k,E){var M,G=k;if(E)if(G._viewer.webViewer.imageEditor){var V=G._viewer.createImageEditor();M="dwt-viewer-imageEditor-fullScreen"==V.inner.containerElement.className?{_containerElement:document.body}:{_containerElement:V.inner.containerElement}}else M=G.getViewerElement();else M=G.getViewerElement();return M}},{key:"__close",value:function(k){var E=k;if(v.isFunction(E.__CloseImageEditorUI))try{E.__CloseImageEditorUI()}catch(M){mn(M)}}},{key:"__deskew",value:function(k,E,M){var G=this,V="deskew";if(tr(G._defaultDSScanClient),G.howManyImagesInBuffer<=0||G.currentImageIndexInBuffer<0)zE.output(G,"No image in Buffer");else{var J=G.__getViewerElementForViewer(G,!0);nr(V,J),G._defaultDSScanClient.getSkewAngleFromBinaryAsync(G.currentImageIndexInBuffer,E,function(Q){M(Q[0]),Cn(V)},function(){Cn(V)})}}},{key:"__rotate",value:(L=Ae(A.mark(function k(E,M,G){return A.wrap(function(J){for(;;)switch(J.prev=J.next){case 0:return tr(this._defaultDSScanClient),J.next=4,this._makeSureDefaultServiceInfo();case 4:if(this._defaultDSScanClient){J.next=6;break}throw{code:-2825,message:"Failed to setup the Default Dynamsoft Service."};case 6:return J.next=8,this._defaultDSScanClient.rotate(E,M,G,-1);case 8:return J.abrupt("return",J.sent);case 10:case"end":return J.stop()}},k,this)})),function(k,E,M){return L.apply(this,arguments)})},{key:"__crop",value:(R=Ae(A.mark(function k(E,M){return A.wrap(function(V){for(;;)switch(V.prev=V.next){case 0:return tr(this._defaultDSScanClient),V.next=4,this._makeSureDefaultServiceInfo();case 4:if(this._defaultDSScanClient){V.next=6;break}throw{code:-2825,message:"Failed to setup the Default Dynamsoft Service."};case 6:return V.next=8,this._defaultDSScanClient.crop(E,M);case 8:return V.abrupt("return",V.sent);case 10:case"end":return V.stop()}},k,this)})),function(k,E){return R.apply(this,arguments)})},{key:"__fireEvent",value:function(k,E){return!v.isFunction(this[k])||this[k](E)}},{key:"getDevices",value:(D=Ae(A.mark(function k(E){var M,G,V,J,Q,te,X,ae,he,ye,Ce,Ke,Ze,dt,ft,ke,Te,Oe,Me,et,qe,ln,St,tt;return A.wrap(function(it){for(;;)switch(it.prev=it.next){case 0:if(!this._bDispose){it.next=4;break}throw so(G={}),$t(G);case 4:if(V=[],J="getDevices",Q=this.getViewerElement(),te=!1,ae=E?.serviceInfo,he=null!==(M=E?.deviceType)&&void 0!==M?M:hp,nr(J,Q),it.prev=6,Ce=!1,Ke=[],this._serviceInfos){it.next=12;break}return it.next=12,this.getDynamsoftService();case 12:if(!ae){it.next=25;break}return it.next=15,this._createDSClientByServiceInfo(ae,!0);case 15:if(!(dt=it.sent)){it.next=21;break}Ke.push(dt),Ce=!1,it.next=23;break;case 21:throw Wde(null==ae||null===(ft=ae.attrs)||void 0===ft?void 0:ft.ty);case 23:it.next=37;break;case 25:if(!this._serviceInfos){it.next=37;break}Ze=0;case 27:if(!(Ze<this._serviceInfos.length)){it.next=36;break}return ke=this._serviceInfos[Ze],it.next=31,this._createDSClientByServiceInfo(ke);case 31:(Te=it.sent)&&Ke.push(Te);case 33:Ze++,it.next=27;break;case 36:Ce=!0;case 37:Ze=0;case 38:if(!(Ze<Ke.length)){it.next=60;break}return Oe=void 0,it.prev=40,it.next=43,Ke[Ze].getDevices(he,E?.refresh,te);case 43:if(v.isArray(Oe=it.sent)&&Oe.length>0)for(X=0;X<Oe.length;X++)V.push(Oe[X]);it.next=52;break;case 47:if(it.prev=47,it.t0=it.catch(40),!te){it.next=51;break}throw it.t0;case 51:ye=it.t0;case 52:return it.prev=52,Me=null,this._defaultDSScanClient&&(Me=null===(et=this._defaultDSScanClient.getServiceInfo())||void 0===et||null===(qe=et.attrs)||void 0===qe?void 0:qe.UUID,this._defaultDSScanClient.isDestroy&&(this._disposeDSClientByKey(Me),this._defaultDSScanClient=null,Me=null)),Ce&&(St=Ke[Ze].getServiceInfo(),(tt=null==St||null===(ln=St.attrs)||void 0===ln?void 0:ln.UUID)&&tt!=Me&&this._disposeDSClientByKey(tt)),it.finish(52);case 57:Ze++,it.next=38;break;case 60:it.next=65;break;case 62:throw it.prev=62,it.t1=it.catch(6),it.t1;case 65:return it.prev=65,Cn(J),ye&&F.DWT.lsetException(ye.code,ye.message),it.finish(65);case 69:return it.abrupt("return",V);case 70:case"end":return it.stop()}},k,this,[[6,62,65,69],[40,47,52,57]])})),function(k){return D.apply(this,arguments)})},{key:"acquireImage",value:(b=Ae(A.mark(function k(E,M){var G,V,J,Q,te,X,ae,he,ye,Ce,Ke,Ze,dt,ft,ke;return A.wrap(function(Te){for(;;)switch(Te.prev=Te.next){case 0:if(!(G=this)._bDispose){Te.next=5;break}throw so(V={}),$t(V);case 5:if(E&&E instanceof Xo){Te.next=9;break}throw qn(J={}),{code:J._errorCode,message:J._errorString};case 9:return te="acquireImage",X=G.getViewerElement(),ae=[],nr(te,X),Te.prev=12,v.isUndefined(M)&&(M={}),v.isUndefined(M.IfShowUI)&&(M.IfShowUI=!1),v.isUndefined(M.IfCloseSourceAfterAcquire)&&(M.IfCloseSourceAfterAcquire=!0),he=E.serviceInfo,Te.next=19,this._createDSClientByServiceInfo(he,!0);case 19:if(!(Q=Te.sent)){Te.next=47;break}if(G._defaultDSScanClient){Te.next=24;break}return Te.next=24,G._innerSetDefault(Q);case 24:ae.push(Q),Q!=G._defaultDSScanClient&&ae.push(G._defaultDSScanClient),ye=0;case 27:if(!(ye<ae.length)){Te.next=36;break}if(nu._isReady(Ce=ae[ye])){Te.next=33;break}throw ft=null!==(Ke=null===(Ze=Ce.getServiceInfo())||void 0===Ze||null===(dt=Ze.attrs)||void 0===dt?void 0:dt.name)&&void 0!==Ke?Ke:"",Lc(Ce,ft),{code:Ce._getErrorCode(),message:Ce._getErrorString()};case 33:ye++,Te.next=27;break;case 36:if(G.onPostTransferAsync?Q.registerEvent("OnPostTransferAsync",G.onPostTransferAsync):Q.unregisterEvent("OnPostTransferAsync"),this.__setViewerControlInfo(),Q!=G._defaultDSScanClient){Te.next=43;break}return Te.next=41,Q.acquireImage(E,M);case 41:Te.next=45;break;case 43:return Te.next=45,Q._acquireImageForSendTo(te,E,M,G._defaultDSScanClient);case 45:Te.next=49;break;case 47:throw sU(null==he||null===(ke=he.attrs)||void 0===ke?void 0:ke.name);case 49:Te.next=54;break;case 51:throw Te.prev=51,Te.t0=Te.catch(12),Te.t0;case 54:return Te.prev=54,Q&&Q.__closeRemoteScanUI(!0),Cn(te),Te.finish(54);case 58:case"end":return Te.stop()}},k,this,[[12,51,54,58]])})),function(k,E){return b.apply(this,arguments)})},{key:"_waitForDSValid",value:function(k,E){for(var M=0,G=k.length,V=this;M<G;M++)if(!nu._isReady(k[M]))return void setTimeout(function(){V._waitForDSValid(k,E)},kn.RemoteReconnectTimeSpan);v.isFunction(V[E.command])&&V[E.command].apply(V,E.parmas)}},{key:"getCapabilities",value:(I=Ae(A.mark(function k(E){var M,G,V,J,Q,te,X;return A.wrap(function(ae){for(;;)switch(ae.prev=ae.next){case 0:if(!this._bDispose){ae.next=4;break}throw so(M={}),$t(M);case 4:if(E&&E instanceof Xo){ae.next=8;break}throw qn(G={}),$t(G);case 8:return J="getCapabilities",Q=[],te=this.getViewerElement(),nr(J,te),ae.prev=10,X=E.serviceInfo,ae.next=14,this._createDSClientByServiceInfo(X,!0);case 14:if(V=ae.sent,!(V=this._findDSClientByServiceInfo(X))){ae.next=20;break}return ae.next=19,V.getCapabilities(E);case 19:Q=ae.sent;case 20:ae.next=25;break;case 22:throw ae.prev=22,ae.t0=ae.catch(10),ae.t0;case 25:return ae.prev=25,V&&V.__closeRemoteScanUI(!0),Cn(J),ae.finish(25);case 29:return ae.abrupt("return",Q);case 30:case"end":return ae.stop()}},k,this,[[10,22,25,29]])})),function(k){return I.apply(this,arguments)})},{key:"setCapabilities",value:(S=Ae(A.mark(function k(E,M){var G,V,J,Q,te,X;return A.wrap(function(ae){for(;;)switch(ae.prev=ae.next){case 0:if(!this._bDispose){ae.next=4;break}throw so(G={}),$t(G);case 4:if(E&&E instanceof Xo){ae.next=8;break}throw qn(V={}),$t(V);case 8:return Q="setCapabilities",te=this.getViewerElement(),nr(Q,te),ae.prev=10,X=E.serviceInfo,ae.next=14,this._createDSClientByServiceInfo(X,!0);case 14:if(!(J=ae.sent)){ae.next=18;break}return ae.next=18,J.setCapabilities(E,M);case 18:ae.next=23;break;case 20:throw ae.prev=20,ae.t0=ae.catch(10),ae.t0;case 23:return ae.prev=23,J&&J.__closeRemoteScanUI(!0),Cn(Q),ae.finish(23);case 27:case"end":return ae.stop()}},k,this,[[10,20,23,27]])})),function(k,E){return S.apply(this,arguments)})},{key:"closeSource",value:(T=Ae(A.mark(function k(E){var M,G,V,J,te;return A.wrap(function(X){for(;;)switch(X.prev=X.next){case 0:if(!this._bDispose){X.next=4;break}throw so(M={}),$t(M);case 4:if(E&&E instanceof Xo){X.next=8;break}throw qn(G={}),$t(G);case 8:return V="closeSource",J=this.getViewerElement(),nr(V,J),X.prev=10,te=this._findDSClientByServiceInfo(E.serviceInfo),X.next=15,te.closeSource();case 15:X.next=20;break;case 17:throw X.prev=17,X.t0=X.catch(10),X.t0;case 20:return X.prev=20,Cn(V),X.finish(20);case 23:case"end":return X.stop()}},k,this,[[10,17,20,23]])})),function(k){return T.apply(this,arguments)})},{key:"_putDSClientToMap",value:function(k,E){var M,G=null==k||null===(M=k.attrs)||void 0===M?void 0:M.UUID;G&&(this._dsScanClientsMap[G]=E)}},{key:"_getDSClientFromMap",value:function(k){var E,M=null==k||null===(E=k.attrs)||void 0===E?void 0:E.UUID;return M?this._dsScanClientsMap[M]:null}},{key:"_createDSClientByServiceInfo",value:(_=Ae(A.mark(function k(E,M,G){var V,J,Q,te;return A.wrap(function(X){for(;;)switch(X.prev=X.next){case 0:if(this._serviceInfos){X.next=3;break}return X.next=3,this.getDynamsoftService();case 3:if(V=this._findDSClientByServiceInfo(E)){X.next=20;break}return X.next=7,this._setRemoteUuid();case 7:return X.prev=7,X.next=10,nu.createByServiceInfo(this._uuidForRemoteScanObject,E,G);case 10:(V=X.sent)&&this._putDSClientToMap(E,V),X.next=20;break;case 14:if(X.prev=14,X.t0=X.catch(7),X.t0.code==yn.MustUpgrade&&(Q=null==E||null===(J=E.attrs)||void 0===J?void 0:J.ty)&&(ip(te={},Q),X.t0.message=te._errorString),!M){X.next=19;break}throw X.t0;case 19:v.warn(X.t0);case 20:return X.abrupt("return",V);case 21:case"end":return X.stop()}},k,this,[[7,14]])})),function(k,E,M){return _.apply(this,arguments)})},{key:"_makeSureDefaultServiceInfo",value:(g=Ae(A.mark(function k(){var E;return A.wrap(function(M){for(;;)switch(M.prev=M.next){case 0:if(this._serviceInfos){M.next=3;break}return M.next=3,this.getDynamsoftService();case 3:if(!(this._serviceInfos&&this._serviceInfos.length>0)){M.next=8;break}return E=this._serviceInfos[0],M.next=7,this._createDSClientByServiceInfo(E);case 7:return M.abrupt("return",M.sent);case 8:return M.abrupt("return",null);case 9:case"end":return M.stop()}},k,this)})),function(){return g.apply(this,arguments)})},{key:"httpUpload",value:(f=Ae(A.mark(function k(E,M,G,V,J,Q){var te,ae,he;return A.wrap(function(ye){for(;;)switch(ye.prev=ye.next){case 0:if(!this._bDispose){ye.next=4;break}return so(te={}),ye.abrupt("return",W.Promise.reject($t(te)));case 4:return ae=this.getViewerElement(),he=ae._containerElement,ye.next=7,this._makeSureDefaultServiceInfo();case 7:if(this._defaultDSScanClient){ye.next=9;break}throw{code:-2825,message:"Failed to setup the Default Dynamsoft Service."};case 9:return ye.next=11,this._defaultDSScanClient.httpUpload(E,M,G,V,J,Q,he);case 11:return ye.abrupt("return",ye.sent);case 13:case"end":return ye.stop()}},k,this)})),function(k,E,M,G,V,J){return f.apply(this,arguments)})},{key:"removeImages",value:(d=Ae(A.mark(function k(E){var M,G,V,J,Q;return A.wrap(function(te){for(;;)switch(te.prev=te.next){case 0:if(!this._bDispose){te.next=4;break}return so(M={}),te.abrupt("return",W.Promise.reject($t(M)));case 4:return G="removeImages",J=this.getViewerElement(),nr(G,J),te.prev=6,te.next=9,this._makeSureDefaultServiceInfo();case 9:if(this._defaultDSScanClient){te.next=11;break}throw{code:-2825,message:"Failed to setup the Default Dynamsoft Service."};case 11:if(!this._defaultDSScanClient){te.next=17;break}return te.next=14,this._defaultDSScanClient.removeImages(E);case 14:V=te.sent,te.next=21;break;case 17:if(0!=this.howManyImagesInBuffer){te.next=21;break}if(this._checkIndices(E,Q={})){te.next=21;break}throw{code:Q._errorCode,message:Q._errorString};case 21:te.next=26;break;case 23:throw te.prev=23,te.t0=te.catch(6),te.t0;case 26:return te.prev=26,Cn(G),te.finish(26);case 29:return te.abrupt("return",V);case 30:case"end":return te.stop()}},k,this,[[6,23,26,29]])})),function(k){return d.apply(this,arguments)})},{key:"_checkIndices",value:function(k,E){var M,G;if(!v.isArray(k))return Ha(E),!1;if(0==k.length)return Zb(E),!1;if(F.DWT.ConnectWithSocket)return!0;for(M=this.howManyImagesInBuffer,G=0;G<k.length;G++){var V=k[G];if(v.isUndefined(V)||null===V)return tw(E),!1;if(V=parseInt(V),isNaN(V))return Dt(E),!1;if(V<0||V>=M)return ew(E),!1}return!0}},{key:"saveImages",value:(l=Ae(A.mark(function k(E,M,G){var V,Q,te;return A.wrap(function(X){for(;;)switch(X.prev=X.next){case 0:if(V={},!this._bDispose){X.next=4;break}return so(V),X.abrupt("return",W.Promise.reject($t(V)));case 4:if(0!=this.howManyImagesInBuffer){X.next=7;break}return Gi(V),X.abrupt("return",W.Promise.reject($t(V)));case 7:if(v.isNumber(G)){X.next=10;break}return qn(V),X.abrupt("return",W.Promise.reject($t(V)));case 10:if(G!=Xt.IT_BMP&&G!=Xt.IT_JPG&&G!=Xt.IT_PNG){X.next=16;break}if(!(M.length>1)){X.next=14;break}return Ee(V,-2623,"Saving multiple images is not allowable when the selected output format is BMP, JPG or PNG."),X.abrupt("return",W.Promise.reject($t(V)));case 14:X.next=26;break;case 16:if(G!=Xt.IT_TIF&&G!=Xt.IT_PDF){X.next=19;break}X.next=26;break;case 19:if(G!=Xt.IT_ALL&&G!=Xt.IT_MULTIPAGE_PDF&&G!=Xt.IT_MULTIPAGE_TIF){X.next=24;break}return lU(V),X.abrupt("return",W.Promise.reject($t(V)));case 24:return zi(V),X.abrupt("return",W.Promise.reject($t(V)));case 26:return Q=this.getViewerElement(),te=Q._containerElement,X.next=29,this._makeSureDefaultServiceInfo();case 29:if(this._defaultDSScanClient){X.next=31;break}throw{code:-2825,message:"Failed to setup the Default Dynamsoft Service."};case 31:return X.next=33,this._defaultDSScanClient.saveImages(E,M,G,te);case 33:return X.abrupt("return",X.sent);case 35:case"end":return X.stop()}},k,this)})),function(k,E,M){return l.apply(this,arguments)})},{key:"getImages",value:(u=Ae(A.mark(function k(E,M,G){var V,Q,te;return A.wrap(function(X){for(;;)switch(X.prev=X.next){case 0:if(V={},!this._bDispose){X.next=4;break}return so(V),X.abrupt("return",W.Promise.reject($t(V)));case 4:if(0!=this.howManyImagesInBuffer){X.next=7;break}return Gi(V),X.abrupt("return",W.Promise.reject($t(V)));case 7:if(v.isNumber(M)&&v.isNumber(G)){X.next=10;break}return qn(V),X.abrupt("return",W.Promise.reject($t(V)));case 10:return Q=this.getViewerElement(),te=Q._containerElement,X.next=13,this._makeSureDefaultServiceInfo();case 13:if(this._defaultDSScanClient){X.next=15;break}throw{code:-2825,message:"Failed to setup the Default Dynamsoft Service."};case 15:return X.next=17,this._defaultDSScanClient.getImages(E,M,G,te);case 17:return X.abrupt("return",X.sent);case 19:case"end":return X.stop()}},k,this)})),function(k,E,M){return u.apply(this,arguments)})},{key:"dispose",value:function(){if(this._viewer&&this._viewer.unbind(),this._dsScanClientsMap){var k,M=Object.keys(this._dsScanClientsMap);for(k=0;k<M.length;k++)this._disposeDSClientByKey(M[k])}return this._dsScanClientsMap=null,this._bDispose=!0,!0}},{key:"setLogLevel",value:function(k){var E,M=this._dsScanClientsMap;if(M){var G=Object.keys(M);for(E=0;E<G.length;E++)M[G[E]]._setLogLevel(k);this._needSetLogLevel=!1,this._logLevel=-1}else this._needSetLogLevel=!0,this._logLevel=k;return!0}},{key:"getProfile",value:(s=Ae(A.mark(function k(E){var M,G,V,J;return A.wrap(function(Q){for(;;)switch(Q.prev=Q.next){case 0:if(M="",E&&E instanceof Xo){Q.next=5;break}throw qn(G={}),{code:G._errorCode,message:G._errorString};case 5:return Q.prev=5,V=E.serviceInfo,Q.next=9,this._createDSClientByServiceInfo(V,!0);case 9:if(!(J=Q.sent)){Q.next=14;break}return Q.next=13,J.getProfile(E);case 13:M=Q.sent;case 14:Q.next=19;break;case 16:throw Q.prev=16,Q.t0=Q.catch(5),Q.t0;case 19:return Q.abrupt("return",M);case 20:case"end":return Q.stop()}},k,this,[[5,16]])})),function(k){return s.apply(this,arguments)})},{key:"setProfile",value:(a=Ae(A.mark(function k(E,M){var G,V,J,Q;return A.wrap(function(te){for(;;)switch(te.prev=te.next){case 0:if(G="",E&&E instanceof Xo){te.next=5;break}throw qn(V={}),{code:V._errorCode,message:V._errorString};case 5:return te.prev=5,J=E.serviceInfo,te.next=9,this._createDSClientByServiceInfo(J,!0);case 9:if(!(Q=te.sent)){te.next=14;break}return te.next=13,Q.setProfile(E,M);case 13:G=te.sent;case 14:te.next=19;break;case 16:throw te.prev=16,te.t0=te.catch(5),te.t0;case 19:return te.abrupt("return",G);case 20:case"end":return te.stop()}},k,this,[[5,16]])})),function(k,E){return a.apply(this,arguments)})},{key:"imageIDToIndex",value:function(k){return this._defaultDSScanClient?this._defaultDSScanClient.imageIDToIndex(k):0}},{key:"indexToImageID",value:function(k){return this._defaultDSScanClient?this._defaultDSScanClient.indexToImageID(k):0}},{key:"howManyImagesInBuffer",get:function(){return this._defaultDSScanClient?this._defaultDSScanClient.howManyImagesInBuffer:0}},{key:"currentImageIndexInBuffer",get:function(){return this._defaultDSScanClient?this._defaultDSScanClient.currentImageIndexInBuffer:-1},set:function(k){this._defaultDSScanClient&&(this._defaultDSScanClient.currentImageIndexInBuffer=k)}},{key:"showProgressBar",get:function(){return this._defaultDSScanClient?this._defaultDSScanClient.IfShowProgressBar:this._showProgressBar},set:function(k){this._defaultDSScanClient&&(this._showProgressBar=k,this._defaultDSScanClient.IfShowProgressBar=k)}},{key:"registerEvent",value:function(k,E){if(this._bDispose){var M={};return so(M),W.Promise.reject($t(M))}if(!v.isFunction(E)){var G={};return iU(G),W.Promise.reject($t(G))}if("onBufferChanged"==k||"OnBufferChanged"==k)this.onBufferChanged=E;else{if("onPostTransferAsync"!=k&&"OnPostTransferAsync"!=k){var V={};return nU(V),W.Promise.reject($t(V))}this.onPostTransferAsync=E}return this._registEventToDefaultDS(),!0}},{key:"unregisterEvent",value:function(k,E){if(this._bDispose){var M={};return so(M),W.Promise.reject($t(M))}if("onBufferChanged"==k||"OnBufferChanged"==k){if(this.onBufferChanged=null,this._defaultDSScanClient)return this._defaultDSScanClient.unregisterEvent("OnBufferChanged",E)}else{if("onPostTransferAsync"!=k&&"OnPostTransferAsync"!=k){var G={};return nU(G),W.Promise.reject($t(G))}if(this.onPostTransferAsync=null,this._defaultDSScanClient)return this._defaultDSScanClient.unregisterEvent("OnPostTransferAsync",E)}}},{key:"getViewerElement",value:function(){return this.Viewer&&this.Viewer.webViewer&&this.Viewer.webViewer.containerElement?{_containerElement:this.Viewer.webViewer.containerElement}:{_containerElement:document.body}}},{key:"isSameService",value:function(k,E){return!(!k||!E)&&k.server==E.server&&k.attrs.UUID==E.attrs.UUID&&k.attrs.accessmode==E.attrs.accessmode&&k.attrs.name==E.attrs.name&&k.attrs.os==E.attrs.os&&k.attrs.service_type==E.attrs.service_type&&k.attrs.tags==E.attrs.tags&&k.attrs.ty==E.attrs.ty&&k.attrs.type==E.attrs.type&&k.attrs.txtvers==E.attrs.txtvers}},{key:"_findDSClientByServiceInfo",value:function(k){var E,M=this._serviceInfos;if(M)for(E=0;E<M.length;E++){var G=M[E];if(this.isSameService(k,G)){var V=this._getDSClientFromMap(G);if(V){var J;if(nu._isReady(V))return V;V.isDestroy||V.dispose();var Q=null==G||null===(J=G.attrs)||void 0===J?void 0:J.UUID;Q&&delete this._dsScanClientsMap[Q]}break}}return null}},{key:"_setRemoteUuid",value:(i=Ae(A.mark(function k(){return A.wrap(function(M){for(;;)switch(M.prev=M.next){case 0:if(!li()){M.next=8;break}if(this._uuidForRemoteScanObject){M.next=6;break}return M.next=4,F.DWT.lgcuid(F.DWT.EnumInstance.dwt_desktop,"");case 4:this._uuidForRemoteScanObject=M.sent;case 6:M.next=8;break;case 8:case"end":return M.stop()}},k,this)})),function(){return i.apply(this,arguments)})},{key:"_registEventToDefaultDS",value:function(){this._defaultDSScanClient&&(this.onBufferChanged&&this._defaultDSScanClient.registerEvent("OnBufferChanged",this.onBufferChanged),this.onPostTransferAsync&&this._defaultDSScanClient.registerEvent("OnPostTransferAsync",this.onPostTransferAsync))}}]),r}(),dH=!1;function KE(r,i){return $E.apply(this,arguments)}function $E(){return $E=Ae(A.mark(function r(i,a){var s,u;return A.wrap(function(l){for(;;)switch(l.prev=l.next){case 0:if(a&&An(nfe),Ye.isLicenseMixed(null,!0)||Ye.reparseProductKey(a),0==(s=F.DWT.licenseException).code){l.next=6;break}throw i&&zw(s),{code:s.code,message:s.message};case 6:if(dH){l.next=11;break}if(u=!1,j.bIE&&(u=j.IEVersion<=7),u||!li()){l.next=11;break}return l.abrupt("return",new W.Promise(function(d,f){var _="";j.bFileSystem||(_=W.timestamp),v.addScript([F.DWT.ResourcesPath,"/src/dynamsoft.lts.js",_].join(""),!0,!1,function(){dH=!0,d()})}));case 11:case"end":return l.stop()}},r)})),$E.apply(this,arguments)}function hH(r,i){return qE.apply(this,arguments)}function qE(){return qE=Ae(A.mark(function r(i,a){var s,u,l;return A.wrap(function(d){for(;;)switch(d.prev=d.next){case 0:return An(rfe),d.next=3,gH(i,Ae(A.mark(function g(){return A.wrap(function(_){for(;;)switch(_.prev=_.next){case 0:return _.prev=0,_.next=3,Jv(i,a);case 3:_.next=8;break;case 5:_.prev=5,_.t0=_.catch(0),Xv=_.t0;case 8:case"end":return _.stop()}},g,null,[[0,5]])})));case 3:if(!vt.bEnhancedMode){d.next=12;break}return An(ife),l=500,(u=W.install._dlgInstall)&&u.open||(l=0),d.next=9,new W.Promise(function(g,_){setTimeout(function(){QE=0,An(ofe),pH(i,g,_)},l)});case 9:s=d.sent,d.next=13;break;case 12:s={host:i,port:a};case 13:return f=s.port,W.detect.urls.splice(0),W.detect.urls.push({port:f,ssl:j.bSSL}),W.detect.ports=[{port:f,ssl:j.bSSL}],W.detect.cUrlIndex=0,j.bSSL?F.DWT.SSLPort=f:F.DWT.Port=f,d.abrupt("return",s);case 15:case"end":return d.stop()}var f},r)})),qE.apply(this,arguments)}var QE=0;function pH(r,i,a){var u,l;QE>10?(W.detect.dcpStatus=3,a({code:yn.EnhancedPortNotReady,message:"The Dynamsoft Service is not ready, please try again later."})):(u=function(d){if(v.isArray(d)&&d.length>1){var f,g,_=d[1];if(_&&(vt.currentUserPorts=_,_.dwt)){if(g=_.dwt.sslPort,0==(f=_.dwt.port)||0==g){var T=1500;return++QE<3&&(T=3e3),setTimeout(function(){pH(r,i,a)},T),!0}return i({host:r,port:j.bSSL?g:f}),!0}}var S;return $o(S={}),l($t(S))},l=function(d){var f;W.detect.dcpStatus=3,f=d,OE(r,j.bSSL?F.DWT.SSLPort:F.DWT.Port).then(function(_){_&&$u(_.upgrade,_.socket)},function(_){mn(_)}),a(f)},F.dcp.getPorts(r,vt.strSID).then(u,l))}function gH(r,i){return YE.apply(this,arguments)}function YE(){return YE=Ae(A.mark(function r(i,a){var s,u,l,d,f,g;return A.wrap(function(_){for(;;)switch(_.prev=_.next){case 0:s=be.refProductKey,Xv=null,u=0,(l=vt.detect).bConnected=!1;case 4:if(!(u<l.MaxManagerModuleConnectCount)){_.next=32;break}return d=0==u,_.prev=6,_.next=9,D_e(i,s,d);case 9:return E_e(_.sent),l.bConnected=!0,_.abrupt("return");case 15:if(_.prev=15,_.t0=_.catch(6),!_.t0){_.next=26;break}if((f=_.t0.code)!=yn.ResponseDataTypeError&&f!=yn.HTSTError&&f!=yn.CORSError){_.next=23;break}throw _.t0;case 23:if(f!=yn.MustUpgrade){_.next=26;break}throw $u(!0,!1),_.t0;case 26:if(!d){_.next=29;break}return _.next=29,a();case 29:++u,_.next=4;break;case 32:if(l.bConnected=!1,l.dcpStatus=l.EnumDCP_DetectStatus.NotInstalled,F.dcp._sendStatusEvent(),!Xv){_.next=37;break}throw Xv;case 37:throw kde(g={}),{code:g._errorCode,message:g._errorString};case 40:case"end":return _.stop()}},r,null,[[6,15]])})),YE.apply(this,arguments)}function D_e(r,i,a){return mH.apply(this,arguments)}function mH(){return(mH=Ae(A.mark(function r(i,a,s){var u,l,d,f,g,_,T;return A.wrap(function(S){for(;;)switch(S.prev=S.next){case 0:if(!F.DWT.ConnectWithSocket||!j.bHTML5Edition){S.next=10;break}return l=Qa.getWsUrl(i,j.bSSL?vt.SSLPort:vt.Port),d={id:(new Date).getTime().toString(),method:"VersionInfo",version:"dwasm2_"+kn.getVersionStrForCheck(),parameter:[]},Ye.isLongKey(a)&&(d.productKey=a),S.next=6,Qa.postStringDataByWSUrl(l,v.stringify(d));case 6:f=S.sent;try{(g=v.parse(f))&&"result"in g&&(u=g.result)}catch{}S.next=16;break;case 10:if(vt.detect.dcpStatus=vt.detect.EnumDCP_DetectStatus.CheckingManagerVer,!vt.detect.bConnected||""==vt.detect.connectedResult){S.next=13;break}return S.abrupt("return",vt.detect.connectedResult);case 13:return S.next=15,zv(i,"VersionInfo",a,!0);case 15:u=S.sent;case 16:if(_={},!(v.isArray(u)&&u.length>0&&u[0])){S.next=32;break}if(!v.isString(T=u[0])||""==T){S.next=32;break}if(s&&An(VU),!F3(T,be.getServerVersionInfo(!0))){S.next=27;break}return vt.detect.dcpStatus=vt.detect.EnumDCP_DetectStatus.UpdateSkipped,F.dcp._sendStatusEvent(),S.abrupt("return",u);case 27:throw An(jU),ip(_),$t(_);case 30:S.next=32;break;case 32:throw $o(_),$t(_);case 34:case"end":return S.stop()}},r)}))).apply(this,arguments)}function E_e(r){var i="",a=!1,s=!1,u={};if(r.length>4&&(i=v.isString(r[2])?r[2]:"",a=v.isString(r[3])&&"true"===r[3],s=v.isString(r[4])&&"64"===r[4]),r.length>5&&(u=r[5]),vt.detect.connectedResult=r,vt.strSID=i,vt.bEnhancedMode=a,vt.b64bit=s,vt.objEnhancedPorts=u,a&&u){if(u.dcp){var l=u.dcp;vt.SSLPort=l.sslPort,vt.Port=l.port}if(u.ddm){var d=u.ddm;vt.detect.ddmPort=d?j.bSSL?d.sslPort:d.port:0}if(u.dwt){var f=u.dwt;vt.detect.dwtPort=f?j.bSSL?f.sslPort:f.port:0}}}function A_e(r,i){return JE.apply(this,arguments)}function JE(){return JE=Ae(A.mark(function r(i,a){var s,u,l,d,f,g,_,T,S,I;return A.wrap(function(b){for(;;)switch(b.prev=b.next){case 0:s=F.DWT.Containers,u=0;case 2:if(!(u<s.length)){b.next=42;break}if(!(l=v.clone(s[u])).ContainerId){b.next=8;break}if(!F.DWT.ContainerMap[l.ContainerId]){b.next=8;break}return b.abrupt("continue",39);case 8:if(!l.WebTwainId){b.next=12;break}if(!F.DWT.WebTwainIdMap[l.WebTwainId]){b.next=12;break}return b.abrupt("continue",39);case 12:if(l.Host=i,j.bSSL?l.PortSSL=a:l.Port=a,v.isDOM(l.Container)||l.ContainerId&&(l.Container=v.get(l.ContainerId)),!oE(l.Container)){b.next=22;break}return g=document.createElement("div"),l.Container.appendChild(g),l.Container=g,_=iE(g),b.next=22,AV(_);case 22:return Hfe(T=P3(l)),S=void 0,b.prev=25,b.next=28,sH.create(T);case 28:S=b.sent,b.next=35;break;case 31:throw b.prev=31,b.t0=b.catch(25),S&&S.dispose(),b.t0;case 35:if(0===(f=F.DWT.licenseException).code){b.next=38;break}throw{code:f.code,message:f.message};case 38:d=S;case 39:u++,b.next=2;break;case 42:I=window,d&&(I.DCP_DWT_OnClickCloseInstall&&I.DCP_DWT_OnClickCloseInstall(!1,!0),lH(d),e3(d)),setTimeout(function(){try{v.isFunction(F.DWT.OnWebTwainReady)?F.DWT.OnWebTwainReady():v.isFunction(I.Dynamsoft_OnReady)&&I.Dynamsoft_OnReady()}catch(D){mn(D)}},100);case 45:case"end":return b.stop()}},r,null,[[25,31]])})),JE.apply(this,arguments)}function _H(){return XE.apply(this,arguments)}function XE(){return XE=Ae(A.mark(function r(){var i,a,s,u,l,d,f,g;return A.wrap(function(_){for(;;)switch(_.prev=_.next){case 0:if(W.page.bUnload=ve,be.bHTML5Edition){_.next=3;break}return _.abrupt("return",F.DWT._innerLoad());case 3:return _.next=5,KE(!0,!0);case 5:if((i=F.DWT.Containers)&&0!==i.length){_.next=10;break}throw cU(a={}),{code:a._errorCode,message:a._errorString};case 10:if(s=F.DWT.Host,u=F.DWT.Port,u=j.bSSL?F.DWT.SSLPort:F.DWT.Port,!F.DWT.IfCheckDCP){_.next=25;break}return _.next=16,hH(s,u);case 16:if(!(l=_.sent)){_.next=22;break}s=l.host,u=l.port,_.next=25;break;case 22:throw $o(d={}),$t(d);case 25:return _.prev=25,_.next=28,N3(s,u,ve);case 28:f=_.sent,_.next=44;break;case 31:if(_.prev=31,_.t0=_.catch(25),(g=_.t0.code)!=yn.ResponseDataTypeError&&g!=yn.HTSTError&&g!=yn.CORSError){_.next=37;break}_.next=43;break;case 37:if(g!=yn.MustUpgrade){_.next=41;break}$u(!0,!1),_.next=43;break;case 41:return _.next=43,Jv(s,u);case 43:throw _.t0;case 44:if(!f){_.next=48;break}return An(cfe),_.next=48,A_e(f.host,f.port);case 48:case"end":return _.stop()}},r,null,[[25,31]])})),XE.apply(this,arguments)}F.DWT.NetManager.checkModuleManager=function(r,i){Ye.isLicenseMixed(null,!0)||Ye.reparseProductKey();var a=F.DWT.licenseException;if(0!=a.code)return zw(a),!!v.isFunction(i)&&i(a);gH(Ri(),Ae(A.mark(function s(){return A.wrap(function(u){for(;;)switch(u.prev=u.next){case 0:return u.prev=0,u.next=3,Jv(Ri(),W.detect.ssl?F.DWT.SSLPort:F.DWT.Port);case 3:u.next=7;break;case 5:u.prev=5,u.t0=u.catch(0);case 7:case"end":return u.stop()}},s,null,[[0,5]])}))).then(r,i)};var P_e=new(function(){function r(){n(this,r)}return c(r,[{key:"InvalidValue",value:function(i){Tr(i)}},{key:"ParameterCannotEmpty",value:function(i){xi(i)}},{key:"Webcam_InvalidIndex",value:function(i,a){Ee(i,-2315,"The index is out of range.")}},{key:"Webcam_InvalidRemoteFilename",value:function(i){Ee(i,-2316,"The RemoteFile field is empty in the Webcam Download Function.")}},{key:"InvalidDestination",value:function(i){Ee(i,-2318,"Invalid destination file.")}},{key:"InvalidSourceFile",value:function(i){Ee(i,-2319,"Invalid source file.")}},{key:"InvalidFile",value:function(i){Nc(i)}},{key:"OCR_InvalidIndex",value:function(i,a){Ee(i,-2321,"The index is out of range.")}},{key:"OCR_InvalidLeftOrTopOrRightOrBottom",value:function(i){Ee(i,-2322,"The left or top or right or bottom you entered is invalid.")}},{key:"OCR_InvalidOutputFormat",value:function(i){Ee(i,-2323,"The OCR output format is not supported.")}},{key:"OCR_InvalidPageSetMode",value:function(i){Ee(i,-2324,"The OCR page set mode is not supported.")}},{key:"IndexOutOfRange",value:function(i){We(i)}},{key:"OCR_InvalidRemoteFilename",value:function(i){Ee(i,-2379,"The RemoteFile field is empty in the OCR Download Function.")}},{key:"ImageEditorOpenCannotPlayVideo",value:function(i){Ee(i,-2437,"The video can not be played while the Image Editor is open.")}},{key:"EventNotExist",value:function(i){Ee(i,-2509,"The specified event doesn't exist.")}},{key:"CallbackNotAFunction",value:function(i){iU(i)}},{key:"WasmNotLoaded",value:function(i){Ee(i,-2537,"The wasm not loaded.")}},{key:"WasmNotLoaded_UseWasmFalse",value:function(i){Ee(i,-2538,"The wasm not loaded when Dynamsoft.DWT.UseCameraAddonWasm is set to false.")}},{key:"CannotDoWhenNoViewerJS",value:function(i){Y_(i)}},{key:"LicenseNoDbr",value:function(i){Ee(i,-2611,"The license for the Barcode module is invalid."),Hn(i)}}]),r}());if(be.bHTML5Edition){var R_e=function(){var r=Ae(A.mark(function i(a){var s,u,l,d,f,g;return A.wrap(function(T){for(;;)switch(T.prev=T.next){case 0:return v3(),T.next=3,KE(!0,!1);case 3:if(F.DWT.UseDefaultViewer||(a.Container=null),!oE(a.Container)){T.next=11;break}return u=document.createElement("div"),a.Container.appendChild(u),a.Container=u,l=iE(u),T.next=11,AV(l);case 11:return s=P3(a),T.next=14,nf();case 14:return T.next=16,$v();case 16:if(!F.DWT.IfCheckDCP){T.next=28;break}return T.next=19,hH(s.host,s.port);case 19:if(!(d=T.sent)){T.next=25;break}s.host=d.host,s.port=d.port,T.next=28;break;case 25:throw $o(f={}),$t(f);case 28:return T.prev=28,T.next=31,N3(s.host,s.port,ve);case 31:T.next=47;break;case 33:if(T.prev=33,T.t0=T.catch(28),v.log(["check DWT Version failed",T.t0]),(g=T.t0.code)!=yn.ResponseDataTypeError&&g!=yn.HTSTError&&g!=yn.CORSError){T.next=40;break}T.next=46;break;case 40:if(g!=yn.MustUpgrade){T.next=44;break}$u(!0,!1),T.next=46;break;case 44:return T.next=46,Jv(s.host,s.port);case 46:throw T.t0;case 47:return An("Creating a WebTwain instance..."),T.next=50,I_e(s);case 50:return T.abrupt("return",T.sent);case 52:case"end":return T.stop()}},i,null,[[28,33]])}));return function(i){return r.apply(this,arguments)}}(),vH=window;vH.addEventListener("beforeunload",function(){W.page.bUnload=!0,F.DWT.Unload(),W.page.OnUnload&&W.page.OnUnload()}),vH.addEventListener("unload",function(){F.DWT.Unload()}),F.DWT.Unload=function(){Zv(!1,!0);try{qu(),F.DWT.CloseDialog(),W._zdgb_xkz_dhk(),W.closeProgress(null,""),W.hideMask(),function(){for(var r,i,a,s=["dynamsoft.webtwain.install.js","dynamsoft.webtwain.viewer.js","dynamsoft.lts.js","dynamsoft.webtwain.viewer.css","dynamsoft.webtwain.css"],u=document.head.childNodes,l=u.length-1;l>=0;l--)if("LINK"==(i=u[l]).tagName?a=i.href:"SCRIPT"==i.tagName&&(a=i.src),a)for(r=0;r<s.length;r++)a.indexOf(s[r])>=0&&i.remove();W.detect.cssLoaded=!1}()}catch{}be.bDWTLoading=!1},F.DWT.Load=Ae(A.mark(function r(){return A.wrap(function(i){for(;;)switch(i.prev=i.next){case 0:if(!be.bDWTLoading){i.next=2;break}return i.abrupt("return");case 2:return be.bDWTLoading=!0,Up(),i.prev=4,i.next=7,Kv();case 7:return i.next=9,nf();case 9:return i.next=11,$v();case 11:return i.next=13,Zv(!0,!0);case 13:return F.DWT.CloseDialog(),i.next=16,_H();case 16:i.next=30;break;case 18:return i.prev=18,i.t0=i.catch(4),Gw(i.t0.code)||W.detect.bOK||v.asyncQueue.pushToDo(null,F.DWT.Load),Hw(i.t0),i.prev=23,i.next=26,Zv();case 26:i.next=30;break;case 28:i.prev=28,i.t1=i.catch(23);case 30:return i.prev=30,be.bDWTLoading=!1,qu(),i.finish(30);case 34:case"end":return i.stop()}},r,null,[[4,18,30,34],[23,28]])})),F.DWT.CheckConnectToTheService=function(r,i,a,s){var u=0,l=r,d=i,f=a,g=s;if(v.isFunction(l)&&v.isFunction(d))for(f=l,g=d,l=Ri(),u=0;u<W.detect.ports.length;u++)if(j.bSSL&&W.detect.ports[u].ssl||!j.bSSL&&!W.detect.ports[u].ssl){d=W.detect.ports[u].port;break}l||(l=Ri()),M3(l,d,Oc).then(function(_){var T=_.host,S=_.port;v.isFunction(f)&&f(T,S)},function(_){v.isFunction(g)&&g(_)})},F.DWT.ConnectToTheService=function(){v.asyncQueue.start()},F.DWT.CreateDWTObject=function(r,i,a,s,u,l){var d,f=u,g=l;v.isFunction(i)&&v.isFunction(a)?(f=i,g=a,d={}):d={Host:i,Port:a,PortSSL:s};var _,T=r;if(v.isString(T)&&!(T=v.get(T)))return Ee(_={},-2813,"Error: The ID of the target DIV for the new DWT object is invalid."),g&&g({code:_._errorCode,message:_._errorString}),ve;if(v.isDOM(T))d.Container=T;else{if(!v.isString(r))return v.isFunction(g)&&g({code:-2806,message:'Error: The argument passed to the parameter "conatinerId" is not a string.'}),ve;if(!v.get(r)){var I={code:-2807,message:'Error: The element specified by the id "'+r+"\" doesn't exist."};return v.isFunction(g)&&g(I),ve}}return d.WebTwainId=_V(),F.DWT.CreateDWTObjectEx(d,f,g)},F.DWT.CreateDWTObjectEx=function(r,i,a){var s=arguments;return be.loadResourcePath?v.isString(r.WebTwainId)?(Up(),R_e(r).then(function(u){qu(),e3(u),v.isFunction(i)&&i(u)},function(u){if(qu(),!W.detect.bOK){var l=u&&u.code,d=F.DWT.licenseException;(l&&!Gw(l)||0==d.code)&&(v.asyncQueue.stop(),v.asyncQueue.pushToDo(null,F.DWT.CreateDWTObjectEx,s))}v.isFunction(a)&&a(u)}),!0):(a&&a({code:-2805,message:'Error: The "WebTwainId" is not a string.'}),ve):(Up(),void Kv().then(nf).then(function(){qu(),setTimeout(function(){F.DWT.CreateDWTObjectEx(r,i,a)},100)},function(u){qu(),a(u)}))},F.DWT.CreateRemoteScanObjectAsync=function(){var r=Ae(A.mark(function i(a){var s,u;return A.wrap(function(l){for(;;)switch(l.prev=l.next){case 0:if(s=null,a){l.next=5;break}throw qn(u={}),{code:u._errorCode,message:u._errorString};case 5:return be.bDWTLoading=!0,Up(),l.prev=7,l.next=10,nf();case 10:return l.next=12,$v();case 12:return l.next=14,KE(!1,!1);case 14:s=new w_e(a),Object.preventExtensions(s);case 16:return l.prev=16,be.bDWTLoading=!1,qu(),l.finish(16);case 20:return l.abrupt("return",s);case 21:case"end":return l.stop()}},i,null,[[7,,16,20]])}));return function(i){return r.apply(this,arguments)}}(),F.DWT.DeleteDWTObject=function(r){var i,a=r;return be.bHTML5Edition&&a?!!(i=v.isString(a)?F.DWT.GetWebTwain(a):a)&&(i.dispose(),!0):ve}}function Zv(r,i){var a,s,u,l,d;if(r&&An("Unload..."),i&&F.DWT.lunload(),W.dlgProgress=!1,W.detect.bOK=!1,W.detect.bFirst=!0,l=F.DWT.WebTwainIdMap)for(d=Object.keys(l),a=0;a<d.length;a++)(u=d[a])&&u in l&&(s=l[u])&&s.dispose();if(l=F.DWT.ContainerMap)for(d=Object.keys(l),a=0;a<d.length;a++)(u=d[a])&&u in l&&(s=l[u])&&s.dispose();if(l=F.DWT.RemoteScanIdMap)for(d=Object.keys(l),a=0;a<d.length;a++)(u=d[a])&&u in l&&(s=l[u])&&s.dispose();for(a=0;a<be.unloadQueue.length;a++){var f=be.unloadQueue[a];v.isFunction(f)&&f()}return be.unloadQueue.splice(0),_e.Promise.resolve()}function Up(){be.bHTML5Edition&&r3()}function qu(){be.bHTML5Edition&&Cn("closeLoadingMsg:")}function He(r,i){var a,s=this,u=0;a=v.isString(r)?document.getElementById(r):r,s.isLoaded=!1,s.displayType=0,s.progress=0,s.progressPosition=0,s.borderWidth={left:0,right:0,top:0,bottom:0},s.orientation=i.orientation||He.Orientation.Horizontal,s.direction=i.direction||He.Direction.LeftToRight,s.creationType=i.creationType||He.CreationType.Replace,s.value=0,s.initialValue=i.value||0,s.minValue=i.minValue||0,s.maxValue=i.maxValue||100,s.showLabel=typeof i.showLabel>"u"||i.showLabel,s.labelText=i.labelText||"",s.width=i.width||280,s.height=i.height||20,s.borderRadius=i.borderRadius||10,s.orientation==He.Orientation.Horizontal&&s.borderRadius>s.height/2&&(s.borderRadius=Math.round(s.height/2)),s.orientation==He.Orientation.Vertical&&s.borderRadius>s.width/2&&(s.borderRadius=Math.round(s.width/2)),s.backColor=i.backColor||"",s.color=i.color||"#50a8e1",s.animationStyle=0,s.animationInterval=i.animationInterval||100;var l=["parent","background","wrapper","left","middle","right","horizontalText","verticalText","marker"];for(s.extraClassName={},u=0;u<l.length;u++)s.extraClassName[l[u]]=i.extraClassName?"string"==typeof i.extraClassName?i.extraClassName:i.extraClassName[l[u]]||"":"";s.onLoad=i.onLoad||null,s.onValueChanged=i.onValueChanged||null,s.onAnimate=i.onAnimate||null,s.creationType==He.CreationType.Replace?s.parentElement=a:(s.parentElement=document.createElement("DIV"),a.appendChild(s.parentElement)),s.finishLoading()}W.Errors=P_e,Od(Ae(A.mark(function r(){var i,a;return A.wrap(function(s){for(;;)switch(s.prev=s.next){case 0:if(i=window,j.bIE&&i.addEventListener&&i.addEventListener("unload",F.DWT.Unload,!1),i&&(v.addEventListener(i,"focus",function(){var u;(u=F.DWT.WebTwainIdMap)&&v.each(u,function(l,d){l&&l._OnPageFocus&&l._OnPageFocus()})}),v.addEventListener(i,"blur",function(){j.bWin&&C3()}),v.addEventListener(a=i.document,"visibilitychange",function(){j.bWin&&"hidden"==a.visibilityState&&C3()})),F.navInfo){s.next=12;break}return s.prev=4,s.next=7,yw();case 7:F.navInfo=s.sent,s.next=12;break;case 10:s.prev=10,s.t0=s.catch(4);case 12:if(!1!==F.DWT.AutoLoad&&!be.bDWTLoading){s.next=14;break}return s.abrupt("return");case 14:return s.prev=14,s.next=17,Kv();case 17:if(!(F.DWT.Containers&&F.DWT.Containers.length>0&&F.DWT.AutoLoad)||be.bDWTLoading){s.next=32;break}return be.bDWTLoading=!0,Up(),s.prev=21,s.next=24,nf();case 24:return s.next=26,$v();case 26:return s.next=28,_H();case 28:return s.prev=28,be.bDWTLoading=!1,qu(),s.finish(28);case 32:s.next=46;break;case 34:return s.prev=34,s.t1=s.catch(14),Gw(s.t1.code)||W.detect.bOK||v.asyncQueue.pushToDo(null,F.DWT.Load),Hw(s.t1),s.prev=39,s.next=42,Zv();case 42:s.next=46;break;case 44:s.prev=44,s.t2=s.catch(39);case 46:case"end":return s.stop()}},r,null,[[4,10],[14,34],[21,,28,32],[39,44]])}))),He.Orientation={Horizontal:0,Vertical:1},He.Direction={LeftToRight:0,RightToLeft:1,TopToBottom:0,BottomToTop:1},He.CreationType={Replace:0,AppendChild:1},He.AnimationStyle={None:0,Static:1,StaticFull:2,Custom:3,CustomFull:4,Flickering1:10,Flickering2:11,Flickering3:12,LeftToRight1:20,LeftToRight2:21,RightToLeft1:22,RightToLeft2:23,TwoWay:24},He.prototype.finishLoading=function(){var r,i=this;i.wrapperElement=null,i.backgroundElement=null,i.valueElement=null,i.leftElement=null,i.middleElement=null,i.rightElement=null,i.backgroundElement=document.createElement("DIV"),i.backgroundElement.className="progressbar_background"+(i.extraClassName.background?" ":"")+i.extraClassName.background,i.backgroundElement.style.cssText=i.backgroundElement.style.cssText+He._createBorderRadiusCss(i.borderRadius),i.parentElement.appendChild(i.backgroundElement);var a=["border-radius","border-bottom-right-radius","-moz-border-radius-bottomright","-webkit-border-bottom-right-radius","-khtml-border-radius-bottomright","-khtml-border-bottom-right-radius"],s=0,u="";for(s=0;s<a.length&&!(u=He._elementCurrentStyle(i.backgroundElement,a[s]))&&"string"!=typeof u;s++);""!=u&&He._parseInt(u)!=i.borderRadius&&(i.borderRadius=He._parseInt(u)),i.displayType=i.orientation==He.Orientation.Horizontal||i.orientation==He.Orientation.Vertical?0:1,i.parentElement.className=(""!=i.parentElement.className?" ":"")+"progressbar_parent dynamsoft-progressBar"+(i.extraClassName.parent?" ":"")+i.extraClassName.parent,0==i.displayType?((r=i.wrapperElement=document.createElement("DIV")).style.border="1px solid #A0A0A0",r.style.cssFloat="left",r.style.display="inline-block",r.style.width=i.width+"px",r.style.height=i.height+"px",r.style.left="0px",r.style.top=-i.height+"px",r.style.backgroundColor=i.backColor,r.style.backgroundRepeat="no-repeat",r.style.position="relative",r.style.cssText=r.style.cssText+He._createBorderRadiusCss(i.borderRadius),i.parentElement.appendChild(r),i.borderWidth={left:He._parseInt(He._elementCurrentStyle(r,"border-left-width")),right:He._parseInt(He._elementCurrentStyle(r,"border-right-width")),top:He._parseInt(He._elementCurrentStyle(r,"border-top-width")),bottom:He._parseInt(He._elementCurrentStyle(r,"border-bottom-width"))}):1==i.displayType&&(i.orientation==He.Orientation.Horizontal?i.borderRadius>i.width/2&&(i.borderRadius=i.width):i.orientation==He.Orientation.Vertical&&i.borderRadius>i.height/2&&(i.borderRadius=i.height),i.valueElement=document.createElement("DIV"),i.valueElement.className="",i.leftElement=document.createElement("DIV"),i.middleElement=document.createElement("DIV"),i.rightElement=document.createElement("DIV"),i.leftElement.style.border="1px solid #A0A0A0",i.leftElement.style.cssFloat="left",i.leftElement.style.display="inline-block",i.leftElement.style.backgroundColor=i.backColor,i.leftElement.style.backgroundRepeat="no-repeat",i.leftElement.style.position="relative",i.rightElement.style.border="1px solid #A0A0A0",i.rightElement.style.cssFloat="left",i.rightElement.style.display="inline-block",i.rightElement.style.backgroundColor=i.backColor,i.rightElement.style.backgroundRepeat="no-repeat",i.rightElement.style.position="relative",i.middleElement.style.border="1px solid #A0A0A0",i.middleElement.style.cssFloat="left",i.middleElement.style.display="inline-block",i.middleElement.style.overflow="hidden",i.middleElement.style.position="relative",i.valueElement.style.backgroundColor=i.backColor,i.valueElement.style.position="relative",i.orientation==He.Orientation.Horizontal?(i.leftElement.style.width=i.borderRadius+"px",i.leftElement.style.height=i.height+"px",i.leftElement.style.top=-i.height+"px",i.leftElement.style.left="0px",i.leftElement.style.borderRight="none",i.leftElement.style.cssText=i.leftElement.style.cssText+He._createBorderRadiusCss(i.borderRadius,0,0,i.borderRadius),i.rightElement.style.width=i.borderRadius+"px",i.rightElement.style.height=i.height+"px",i.rightElement.style.top=-i.height+"px",i.rightElement.style.borderLeft="none",i.rightElement.style.cssText=i.rightElement.style.cssText+He._createBorderRadiusCss(0,i.borderRadius,i.borderRadius,0),i.middleElement.style.width=i.width-2*i.borderRadius+"px",i.middleElement.style.height=i.height+"px",i.middleElement.style.top=-i.height+"px",i.middleElement.style.borderLeft="none",i.middleElement.style.borderRight="none",i.valueElement.style.width="0px",i.valueElement.style.height=i.height+"px"):i.orientation==He.Orientation.Vertical&&(i.leftElement.style.width=i.width+"px",i.leftElement.style.height=i.borderRadius+"px",i.leftElement.style.top=-i.height+"px",i.leftElement.style.left="0px",i.leftElement.style.borderBottom="none",i.leftElement.style.cssText=i.leftElement.style.cssText+He._createBorderRadiusCss(i.borderRadius,i.borderRadius,0,0),i.rightElement.style.width=i.width+"px",i.rightElement.style.height=i.borderRadius+"px",i.rightElement.style.top=-i.height+"px",i.rightElement.style.left="0px",i.rightElement.style.borderTop="none",i.rightElement.style.cssText=i.rightElement.style.cssText+He._createBorderRadiusCss(0,0,i.borderRadius,i.borderRadius),i.middleElement.style.width=i.width+"px",i.middleElement.style.height=i.height-2*i.borderRadius+"px",i.middleElement.style.top=-i.height+"px",i.middleElement.style.left="0px",i.middleElement.style.borderTop="none",i.middleElement.style.borderBottom="none",i.valueElement.style.width=i.width+"px",i.valueElement.style.height="0px"),i.middleElement.appendChild(i.valueElement),i.parentElement.appendChild(i.leftElement),i.parentElement.appendChild(i.middleElement),i.parentElement.appendChild(i.rightElement),i.orientation==He.Orientation.Horizontal?i.borderWidth={left:He._parseInt(He._elementCurrentStyle(i.leftElement,"border-left-width")),right:He._parseInt(He._elementCurrentStyle(i.rightElement,"border-right-width")),top:He._parseInt(He._elementCurrentStyle(i.middleElement,"border-top-width")),bottom:He._parseInt(He._elementCurrentStyle(i.middleElement,"border-bottom-width"))}:i.orientation==He.Orientation.Vertical&&(i.borderWidth={left:He._parseInt(He._elementCurrentStyle(i.middleElement,"border-left-width")),right:He._parseInt(He._elementCurrentStyle(i.middleElement,"border-right-width")),top:He._parseInt(He._elementCurrentStyle(i.leftElement,"border-top-width")),bottom:He._parseInt(He._elementCurrentStyle(i.rightElement,"border-bottom-width"))})),i.parentElement.style.width=i.width+i.borderWidth.left+i.borderWidth.right+"px",i.parentElement.style.height=i.height+i.borderWidth.top+i.borderWidth.bottom+"px",i.backgroundElement.style.cssFloat="left",i.backgroundElement.style.display="inline-block",i.backgroundElement.style.width=i.width+i.borderWidth.left+i.borderWidth.right+"px",i.backgroundElement.style.height=i.height+"px",i.backgroundElement.style.backgroundColor="#FFFFFF",i.backgroundElement.style.position="relative",0==i.displayType&&(i.backgroundElement.style.width=i.width+i.borderWidth.left+i.borderWidth.right+"px"),i.backgroundElement.style.top=i.borderWidth.top+"px",i.markerElement=document.createElement("DIV"),i.markerElement.style.display="inline-block",i.markerElement.style.zoom="1.0",i.markerElement.style.width=i.width+"px",i.markerElement.style.height=i.height+"px",i.markerElement.style.top=2*-i.height-i.borderWidth.top+"px",i.markerElement.style.left=i.borderWidth.left+"px",i.markerElement.style.backgroundColor=i.color,i.markerElement.style.lineHeight=i.height+"px",i.markerElement.style.position="relative",i.parentElement.appendChild(i.markerElement),i.isLoaded=!0,i.setValue(i.initialValue),null!=i.onLoad&&i.onLoad()},He.prototype.setValue=function(r){var i=this;if(null!==r&&r<i.minValue&&(r=i.minValue),null!==r&&r>i.maxValue&&(r=i.maxValue),null===r||(i.value=r),i.isLoaded){var a,s=0;if(i.orientation==He.Orientation.Horizontal){i.progressPosition=s=i.value/i.maxValue*i.width,0==i.displayType||1==i.displayType&&(i.direction==He.Direction.LeftToRight?i.valueElement.style.width=s<=i.borderRadius?"0px":s>=i.width-i.borderRadius?i.middleElement.style.width:s-i.borderRadius+"px":s<=i.borderRadius?i.valueElement.style.width="0px":s>=i.width-i.borderRadius?(i.valueElement.style.left="0px",i.valueElement.style.width=i.middleElement.style.width):(i.valueElement.style.left=i.width-s-i.borderRadius+"px",i.valueElement.style.width=s-i.borderRadius+"px")),s>0?(i.markerElement.style.width=i.animationStyle!=He.AnimationStyle.StaticFull&&i.animationStyle!=He.AnimationStyle.CustomFull?s+"px":i.width+"px",i.markerElement.style.visibility="visible"):(i.markerElement.style.width=i.width+"px",i.animationStyle!=He.AnimationStyle.StaticFull&&i.animationStyle!=He.AnimationStyle.CustomFull&&(i.markerElement.style.visibility="hidden")),i.markerElement.style.left=i.animationStyle!=He.AnimationStyle.StaticFull&&i.animationStyle!=He.AnimationStyle.CustomFull?i.direction==He.Direction.LeftToRight?i.borderWidth.left+"px":i.width-s+i.borderWidth.left+"px":i.borderWidth.left+"px";var u=2*-i.height-i.borderWidth.top;if(0==s||i.width==s)i.markerElement.style.top=u+"px",i.markerElement.style.height=i.height+"px",i.markerElement.style.cssText=i.markerElement.style.cssText+He._createBorderRadiusCss(i.borderRadius);else if(s<i.borderRadius){var l=i.height-2.25*(i.borderRadius-Math.sqrt(Math.pow(i.borderRadius,2)-Math.pow(i.borderRadius-s,2)));i.markerElement.style.top=u+i.height/2-l/2+"px",i.markerElement.style.height=l+"px",i.markerElement.style.cssText=i.direction==He.Direction.LeftToRight?i.markerElement.style.cssText+He._createBorderRadiusCss(i.borderRadius,0,0,i.borderRadius):i.markerElement.style.cssText+He._createBorderRadiusCss(0,i.borderRadius,i.borderRadius,0)}else i.width-s<i.borderRadius?(a=(2*(i.borderRadius-(i.width-s))+(i.borderRadius-Math.sqrt(Math.pow(i.borderRadius,2)-Math.pow(i.borderRadius-(i.width-s),2))))/3,i.markerElement.style.cssText=i.direction==He.Direction.LeftToRight?i.markerElement.style.cssText+He._createBorderRadiusCss(i.borderRadius,a,a,i.borderRadius):i.markerElement.style.cssText+He._createBorderRadiusCss(a,i.borderRadius,i.borderRadius,a)):(i.markerElement.style.top=u+"px",i.markerElement.style.height=i.height+"px",i.markerElement.style.cssText=i.direction==He.Direction.LeftToRight?i.markerElement.style.cssText+He._createBorderRadiusCss(i.borderRadius,0,0,i.borderRadius):i.markerElement.style.cssText+He._createBorderRadiusCss(0,i.borderRadius,i.borderRadius,0))}else if(i.orientation==He.Orientation.Vertical){i.progressPosition=s=i.value/i.maxValue*i.height,0==i.displayType||1==i.displayType&&(i.direction==He.Direction.TopToBottom?i.valueElement.style.height=s<=i.borderRadius?"0px":s>=i.height-i.borderRadius?i.middleElement.style.height:s-i.borderRadius+"px":s<=i.borderRadius?i.valueElement.style.height="0px":s>=i.height-i.borderRadius?(i.valueElement.style.top="0px",i.valueElement.style.height=i.middleElement.style.height):(i.valueElement.style.top=i.height-s-i.borderRadius+"px",i.valueElement.style.height=s+2*i.borderRadius+"px")),s>0?(i.animationStyle!=He.AnimationStyle.StaticFull&&i.animationStyle!=He.AnimationStyle.CustomFull?i.markerElement.style.height=s+"px":(i.markerElement.style.height=i.height+"px",i.markerElement.style.cssText=i.markerElement.style.cssText+He._createBorderRadiusCss(i.borderRadius)),i.markerElement.style.visibility="visible"):(i.markerElement.style.height="0px",i.animationStyle!=He.AnimationStyle.StaticFull&&i.animationStyle!=He.AnimationStyle.CustomFull&&(i.markerElement.style.visibility="hidden"));var f=i.borderWidth.left;if(0==s||i.height==s)i.markerElement.style.left=f+"px",i.markerElement.style.width=i.width+"px",i.markerElement.style.cssText=i.markerElement.style.cssText+He._createBorderRadiusCss(i.borderRadius);else if(s<i.borderRadius){var g=2.5*s;g>i.width&&(g=i.width),i.markerElement.style.left=f+i.width/2-g/2+"px",i.markerElement.style.width=g+"px",i.markerElement.style.cssText=i.direction==He.Direction.BottomToTop?i.markerElement.style.cssText+He._createBorderRadiusCss(0,0,i.borderRadius,i.borderRadius):i.markerElement.style.cssText+He._createBorderRadiusCss(i.borderRadius,i.borderRadius,0,0)}else i.height-s<i.borderRadius?(a=(2*(i.borderRadius-(i.height-s))+(i.borderRadius-Math.sqrt(Math.pow(i.borderRadius,2)-Math.pow(i.borderRadius-(i.height-s),2))))/3,i.markerElement.style.cssText=i.direction==He.Direction.BottomToTop?i.markerElement.style.cssText+He._createBorderRadiusCss(a,a,i.borderRadius,i.borderRadius):i.markerElement.style.cssText+He._createBorderRadiusCss(i.borderRadius,i.borderRadius,a,a)):(i.markerElement.style.left=f+"px",i.markerElement.style.width=i.width+"px",i.markerElement.style.cssText=i.direction==He.Direction.BottomToTop?i.markerElement.style.cssText+He._createBorderRadiusCss(0,0,i.borderRadius,i.borderRadius):i.markerElement.style.cssText+He._createBorderRadiusCss(i.borderRadius,i.borderRadius,0,0));i.markerElement.style.top=i.animationStyle!=He.AnimationStyle.StaticFull&&i.animationStyle!=He.AnimationStyle.CustomFull?i.direction==He.Direction.TopToBottom?2*-i.height-i.borderWidth.top+"px":-i.height-s-i.borderWidth.top+"px":2*-i.height-i.borderWidth.top+"px"}i.progress=i.value/i.maxValue}null!=i.onValueChanged&&i.onValueChanged()},He._elementCurrentStyle=function(r,i){if(r.currentStyle){var a=0,s="",u=!1;for(a=0;a<i.length;a++)"-"!=i[a].toString()?(s+=u?i[a].toString().toUpperCase():i[a].toString(),u=!1):u=!0;return r.currentStyle[i=s]}return getComputedStyle(r,null).getPropertyValue(i)},He._parseInt=function(r){var i=parseInt(r);return isNaN(i)&&(i=0),i},He._createBorderRadiusCss=function(r,i,a,s){return null!=r&&null==i&&null==a&&null==s?"; -moz-border-radius: "+r+"px; -ms-border-radius: "+r+"px; -o-border-radius: "+r+"px; -webkit-border-radius: "+r+"px; -khtml-border-radius: "+r+"px; border-radius: "+r+"px;":"; -moz-border-radius: "+(r=r||0)+"px "+(i=i||0)+"px "+(a=a||0)+"px "+(s=s||0)+"px; -ms-border-radius: "+r+"px "+i+"px "+a+"px "+s+"px; -o-border-radius: "+r+"px "+i+"px "+a+"px "+s+"px; -webkit-border-radius: "+r+"px "+i+"px "+a+"px "+s+"px; -khtml-border-radius: "+r+"px "+i+"px "+a+"px "+s+"px; border-radius: "+r+"px "+i+"px "+a+"px "+s+"px;"};var x_e=function(){function r(){n(this,r),at(this,"handlers",{})}return c(r,[{key:"on",value:function(i,a){var s=v.guid();return this.handlers[i]||(this.handlers[i]=[]),this.handlers[i].push({id:s,handler:a}),s}},{key:"off",value:function(i,a){if(this.handlers[i]){var s,u=this.handlers[i];if(a){for(s=0;s<u.length;s++)if(u[s].id==a){u.splice(s,1);break}}else u.splice(0)}}},{key:"fire",value:function(i){if(this.handlers[i]){var a,s=this.handlers[i];for(a=0;a<s.length;a++)s[a].handler();return s.length}return 0}},{key:"clear",value:function(){this.handlers={}}}]),r}(),k_e=F.DWT;W.ProgressBar=He,W.progressMessage="",W.dialogShowStatus=!1,W.needShowTwiceShowDialog=!1,W.dlgProgress=!1,W.cancelFrom=on.Other,W.dlgRef=0,W.initProgress=function(r){var i,a;if(!W.dlgProgress){(a=[]).push('<dialog class="dynamsoft-dwt-dialogProgress" closed="closed" style="top:30%"><div class="ds-dwt-progressWrap">'),a.push('<h3 class="dynamsoft-finalMessage"> </h3>'),a.push('<p class="dynamsoft-desc"> </p><p class="dynamsoft-status">0%</p>'),a.push(j.bIE?'<div class="dynamsoft-progressBar" value="" max="100"></div>':'<progress class="dynamsoft-progressBar" value="" max="100"></progress>'),a.push('<br /><div style="width:100%;text-align:center"><button class="dynamsoft-btnCancel" value="cancel" autofcus>cancel</button></div>'),a.push("</div></dialog>"),(i=_e.one(".dynamsoft-dwt-dialogProgress"))&&i.getEL()&&i.remove();var s=W.parseHTML(a.join(""));if(s&&s.length>0&&document.body.appendChild(s[0]),j.bIE){var u=_e.one(".dynamsoft-progressBar"),l=u&&u.getEL();l&&(l.objProgressBar=new He(l,{width:280,height:20}))}(i=_e.one(".dynamsoft-dwt-dialogProgress"))&&i.getEL()&&(W.dlgProgress=i[0],_e.dialog.setup(W.dlgProgress)),W.dlgRef=0,W.dialogShowStatus=!1,W.cancelFrom=on.Other}},W.showProgressMsg=function(){};var M_e=function(r){di(a,r);var i=function F_e(r){var i=function(){if(typeof Reflect>"u"||!Reflect.construct||Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch{return!1}}();return function(){var a,s=yt(r);if(i){var u=yt(this).constructor;a=Reflect.construct(s,arguments,u)}else a=s.apply(this,arguments);return fi(this,a)}}(a);function a(){return n(this,a),i.apply(this,arguments)}return c(a)}(x_e);W.progressContext=new M_e;var yH=function(){var r=W.progressContext;if(r){var i,a=r.fire("cancel");for(i=0;i<a;i++)W.closeProgress(null,"")}};W.hideProgress=function(){var r=W.progressContext;r&&(r.IfShowProgressBar=!1,r.IfShowCancelDialogWhenImageTransfer=!1,r.off("cancel"),r._onPercent=null)},W.showProgress=function(r,i,a){var s,u=r;if(u.IfShowProgressBar)if(W.progressContext&&(W.progressContext.IfShowProgressBar=!0,W.progressContext.IfShowCancelDialogWhenImageTransfer=u.IfShowCancelDialogWhenImageTransfer),W.dlgRef>0)W.dlgRef++;else{var l;if((s=F.DWT.IfConfineMaskWithinTheViewer)?u._isNoViewer&&u._isNoViewer()?l=document.body:u._containerElement?l=u._containerElement:F.DWT.Containers&&F.DWT.Containers.length>0&&F.DWT.Containers[0].ContainerId&&(l=v.get(F.DWT.Containers[0].ContainerId))||(l=document.body):l=document.body,l&&l!==document.body){var d=!1,f=l.firstElementChild;if(f&&f!==W.dlgProgress&&"dvs-root dvs-web-viewer"==f.className&&(l=f,d=!0),0==d)for(var g=0;g<l.children.length;g++)if((f=l.children[g])&&f!==W.dlgProgress&&"dvs-root dvs-web-viewer"==f.className){l=f;break}var _=W.progressContext;""!==l.style.position&&"static"!==l.style.position||(l.style.position="relative",_.progressContainer={el:l})}v.log("showProgress:"+i+",bCancel:"+a),W.dlgProgress&&l.appendChild(W.dlgProgress),Bc(a);var T=_e.one(".dynamsoft-btnCancel");if(T&&T.getEL()&&(v.removeEventListener(T[0],"click",yH),v.addEventListener(T[0],"click",yH)),0==W.dialogShowStatus){W.dlgProgress&&(s&&l&&l!==document.body?_e.dialog.setup(W.dlgProgress,!0):_e.dialog.setup(W.dlgProgress),W.dlgProgress.showModal()),W.dialogShowStatus=!0;var S=_e.one(".dynamsoft-finalMessage"),I=_e.one(".dynamsoft-progressBar"),b=I&&I.getEL(),D=_e.one(".dynamsoft-status");S&&S.getEL()&&S.html(""),D&&D.getEL()&&D.html("0%"),b&&(j.bIE&&b.objProgressBar?b.objProgressBar.setValue(0):b.value=0)}W.dlgRef++}else W.hideProgress()},W.closeProgress=function(r,i){var a=W.progressContext;v.log("closeProgress:"+i),a&&a.IfShowProgressBar?(W.dlgRef--,W.dlgRef<=0&&(W.dlgRef=0)):W.dlgRef=0,0==W.dlgRef&&(a.off("cancel"),a._onPercent=null,1==W.dialogShowStatus&&(W.dlgProgress&&(W.dlgProgress.close(),W.dlgProgress&&document.body.appendChild(W.dlgProgress),a&&a.progressContainer&&a.progressContainer.el&&(a.progressContainer.el.style.position="",a.progressContainer=null)),W.dialogShowStatus=!1),W.cancelFrom=on.Other)},k_e.RemoveAllAuthorizations=function(){var r=Zo.item("DWT_port"),i="http://";return"true"==Zo.item("DWT_ssl")&&(i="https://"),Os({method:"GET",xhrFields:{withCredentials:!0},url:[i,Ri(),":",r,"/dwt/",be.getDWTPrefix(),be.getServerVersionInfo(),"/RemoveAllAuthorizations?t=",v.now()].join(""),async:!0}),!0};var O_e={upload:"Uploading...",download:"Downloading...",load:"Processing...",decode:"Processing...",decodeTIFF:"Processing tiff...",decodePDF:"Processing pdf...",encodeTIFF:"Processing tiff...",encodePDF:"Processing pdf...",encode:"Processing...",transfer:"Transferring..."};W.progressBarOnPercentDone=function(r,i,a,s,u,l){var d,f=_e.one(".dynamsoft-progressBar"),g=_e.one(".dynamsoft-status"),_=_e.one(".dynamsoft-finalMessage"),T=_e.one(".dynamsoft-desc");if(F.DWT.UseDefaultViewer&&F.DWT.IfConfineMaskWithinTheViewer&&l&&(f=_e.one(".dynamsoft-progressBar",l),g=_e.one(".dynamsoft-status",l),_=_e.one(".dynamsoft-finalMessage",l),T=_e.one(".dynamsoft-desc",l)),W.cancelFrom==on.FTPUpload||W.cancelFrom==on.FTPDownload){var S=a;0==S?W.setBtnCancelVisibleForProgress(!1):1==S&&W.setBtnCancelVisibleForProgress(!0)}if(r<0?(W.progressMessage=i,d=W.progressMessage):d=""!=i&&"1/1"!=i?W.progressMessage+"("+i+")":W.progressMessage,_&&_.getEL()){var I="",b="";d.indexOf(" ...")&&(d=d.replace(" ...","...")),-1!=d.indexOf("(")?(I=d.substr(0,d.indexOf("(")),b=d.substr(d.indexOf("("))):I=d,v.each(O_e,function(D,R){-1!=D.indexOf(I)&&(d=pr.customProgressText[R]+b)}),""==d&&(d="&nbsp;"),_.html(d)}u?(""==u||v.isUndefined(u)?u="&nbsp;":v.isString(u)&&u.length>30&&(u=u.substring(0,30)+"..."),T.html(u)):T.html("&nbsp;"),(s||0===s)&&(g&&g.getEL()&&g.html(s+"%"),f&&f.getEL()&&(j.bIE?f[0].objProgressBar?f[0].objProgressBar.setValue(s):f[0].value=s:(j.bEdge&&(f[0].style.display=""),f[0].value=s))),W.dlgRef<=0&&setTimeout(function(){f&&f.getEL()&&(j.bIE?f[0].objProgressBar?f[0].objProgressBar.setValue(0):f[0].value=0:(j.bEdge&&(f[0].style.display="none"),f[0].value=0))},1e3)};var ya=F.DWT;ya.CloseDialog=function(){var r=W.install._dlgInstall;if(r){var i=v.sizzle(".dynamsoft-dialog-close");v.each(i,function(a,s){v.removeEventListener(a,"click",ya.CloseDialog)}),r.open&&r.close(),document.body.removeChild(r),W.install._dlgInstall=!1}},ya.ShowDialog=function(r,i,a,s,u){if(!1!==a){var l,d={width:r,height:i,position:"absolute"};s?(l=['<div class="dynamsoft-dwt-dialog-body">',a,"</div>"].join(""),d.closeButton=!1):l=['<div class="ds-dwt-ui-showdlg">','<div class="dynamsoft-dwt-dialog-body">','<div class="dynamsoft-dwt-dlg-header">',u?"":'<div class="dynamsoft-dialog-close"></div>',"</div>",a,"</div>","</div>"].join(""),u&&(d.closeButton=!1),ya.ShowMessage(l,d)}},ya.ShowMessage=function(r,i){var a,s,u,l,d,f=W.install,g="ds-dwt-ui-dlg",_="ds-dwt-ui-dlg-wrap",T=screen.width,S=!0,I=0,b=!0,D=!0,R=0,L="fixed",x="Error",U=be.bActiveXEdition,Y=!1,Z=null;if(i&&(a=i.width,s=i.height,i.seconds&&(I=i.seconds),i.headerStyle&&(R=i.headerStyle),1==i.backgroundStyle&&(Y=!0),!1===i.closeButton&&(b=!1),i.bAutoClose&&(u=i.bAutoClose,b=!0),0==i.bReadyClosed&&(S=!1),i.position&&(L=i.position),i.caption&&(x=i.caption),v.isFunction(i.onClose)&&(Z=i.onClose)),a?a>T-10&&(a=T-10):a=T>600?600:T-10,s||(s="100%"),1==R?r=['<div class="dynamsoft-dialog">','<div class="dynamsoft-dwt-dialog-body">','<div class="dynamsoft-dwt-dlg-header">',b?'<div class="dynamsoft-dialog-close"></div>':"","</div>",r,"</div></div>"].join(""):2==R&&(r=['<div class="dynamsoft-dialog">','<div class="dynamsoft-dwt-ltsdlg-header"><span style="color:#FFF;line-height:35px;margin-left:15px">',x,"</span>",b?'<div class="dynamsoft-dialog-close"></div>':"","</div>",'<div class="dynamsoft-dwt-ltsdlg-body" style="padding:25px 50px 20px 50px;">',r,"</div></div>"].join("")),0==v.sizzle("."+g).length){var oe=document.createElement("div"),se=document.createElement("div"),k=document.createElement("div");if(oe.className=g,se.className=_,se.style.margin="auto",se.style.zIndex="9999",se.style.position="relative",se.style.border="0",u&&((l=document.createElement("div")).className="dynamsoft-dialog-close",se.insertBefore(l,se.firstElementChild),(d=document.createElement("div")).className="dynamsoft-dialog-closeTimer",d.style.width="100%",d.style.height="2px",d.style.marginTop="-2px",d.style.backgroundColor="#fe8e14",se.insertBefore(d,se.firstElementChild)),se.appendChild(k),k.innerHTML=r,oe.appendChild(se),document.body.appendChild(oe),Z){var E=_e.one(".dynamsoft-dialog-close",_e.one(oe));E&&((E=E[0]).onClose=function(){v.removeEventListener(E,"click",E.onClose),E.onClose=null,Z()},v.addEventListener(E,"click",E.onClose))}if(_e.setBackOpacity(Y?{opacity:.4,grayHex:0}:{}),f._dlgInstall=oe,_e.dialog.setup(f._dlgInstall,!1),j.bIE){var M=document.createElement("iframe");M.frameborder="0",M.marginheight="0",M.marginwidth="0",M.style.border="0",M.style.backgroundColor="transparent",M.style.position="absolute",M.style.left=0,M.style.top=0,M.style.width="100%",M.style.height=document.body.clientHeight+"px",M.style.margin="0 auto",M.style.zIndex="10000",M.src=["javas","cript:",'""'].join("");var G=_e.one(".dynamsoft-backdrop");G&&G.length>0&&(G[0].innerHTML="",G[0].appendChild(M))}}else D=!1;var V=_e.one("."+_);if(V&&V.getEL()&&(V[0].style.width=a+"px",V[0].style.height=v.isNumber(s)&&s>0?s+"px":"100%",D||v.each(V[0].childNodes,function(te){if("DIV"==te.tagName&&"dynamsoft-dialog-close"!=te.className&&"dynamsoft-dialog-closeTimer"!=te.className)return te.innerHTML=r,!1})),U){var J=_e.one(".dynamsoft-dialog");J&&J.getEL()&&(J.getEL().style.border="1px solid #999")}if(f._dlgInstall.open&&f._dlgInstall.close(),f._dlgInstall.showModal({position:L}),f._dlgInstall.bReadyClosed=S,Y&&_e.setBackOpacity({}),b){var Q=v.sizzle(".dynamsoft-dialog-close");v.each(Q,function(te,X){v.addEventListener(te,"click",ya.CloseDialog)}),Q.length>0&&u&&I>0&&setTimeout(W._zdgb_xkz_dhk,100)}},ya.OnWebTwainPreExecute||(ya.OnWebTwainPreExecute=function(r,i){var a,s,u=F.DWT.IfConfineMaskWithinTheViewer;if(u&&(r&&(s=r._containerElement),s||F.DWT.Containers&&F.DWT.Containers.length>0&&F.DWT.Containers[0].ContainerId&&(s=v.get(F.DWT.Containers[0].ContainerId)),s)){a=s.getBoundingClientRect();for(var l=0;l<s.children.length;l++){var d=s.children[l];if(d&&"dvs-root dvs-web-viewer"==d.className){for(d=d.firstElementChild;d;){if(v.isFunction(d.getBoundingClientRect)){a=d.getBoundingClientRect();break}d=d.nextSibling}s=d;break}}}(s===document.body||null==a||F.DWT.Containers&&F.DWT.Containers.length>1||F.DWT.Containers&&1==F.DWT.Containers.length&&(0==a.width||0==a.height))&&(u=!1,s=null);var f=i??{};u&&(f={confined:u,wrapperEl:s}),W.showMask(f)}),ya.OnWebTwainPostExecute||(ya.OnWebTwainPostExecute=function(){_e.hideMask()}),window.DCP_DWT_OnClickCloseInstall=function(r,i){i||F.DWT.CloseDialog();var a=v.get(W.install._divDWTNonInstallContainerID);if(a&&a.parentNode&&a.parentNode.removeChild(a),r&&v.isDOM(r)&&v.show(r),r&&v.isString(r))v.show(r);else{var s=F.DWT.WebTwainIdMap;if(s){var u,l,d=Object.keys(s);for(u=0;u<d.length;u++)s[l=d[u]]._containerElement&&v.show(s[l]._containerElement)}}""!=W.install._divDWTemessageContainer&&v.show(W.install._divDWTemessageContainer)},(W.__ver||0)<20230515&&(v.mix(W,_e),W.__ver=20230515),W.bNode=wO,W._defaultAgent="Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/103.0.0.0 Safari/537.36",W._defaultPlatform="Win64",W.timestamp="?t=20230612091812",v.mix(W,Go),W.ajax=Os,W.fetch=Wc,W.detect.showMask=Mw,W.detect.hideMask=Ow,W.env=Mn,W.product=be,W.scannerInfo=kn,W.License=Ye,W.BIO=pi,W.UI.ImageUIView=$me,W.UI.ImageManager=h3,F.MSG=Tn,F.navInfoSync=j,W.domReady=Od,function(){var r=document;if(r&&r.readyState!==BU)if(Cw(window,"load",Md),Tw)Cw(r,NU,function u(){bw(r,NU,u),Md()});else{var i,a,s;Cw(r,LU,function u(){r.readyState===BU&&(bw(r,LU,u),Md())}),s=(a=r&&r.documentElement)&&a.doScroll;try{i=null===window.frameElement}catch{i=!1}s&&i&&function u(){try{s("left"),setTimeout(Md,30)}catch{setTimeout(u,40)}}()}else Md()}(),Od(function(){if(F.DWT.CustomizableDisplayInfo||(F.DWT.CustomizableDisplayInfo=pr),j.bIE){F.DWT.CustomizableDisplayInfo.loaderBarSourceIE||(F.DWT.CustomizableDisplayInfo.loaderBarSourceIE=_a.loaderBarSourceIE);try{document.execCommand("BackgroundImageCache",!1,!0)}catch{}}}),F.Ready=function(r){if(!F.navInfo)return yw().then(function(i){F.navInfo=i;try{r()}catch(a){throw v.log(a.stack||a,"error"),a}});try{r()}catch(i){throw v.log(i.stack||i,"error"),i}}}(),B.navInfoSync.bIE&&(function(e){if("object"==typeof exports&&typeof module<"u")module.exports=e();else if("function"==typeof define&&define.amd)define([],e);else{var n;typeof window<"u"?n=window:typeof global<"u"?n=global:typeof self<"u"&&(n=self),n.Promise=e()}}(function(){return function o(c,h,p){function m(w,P){if(!h[w]){if(!c[w]){var O="function"==typeof _dereq_&&_dereq_;if(!P&&O)return O(w,!0);if(y)return y(w,!0);var z=new Error("Cannot find module '"+w+"'");throw z.code="MODULE_NOT_FOUND",z}var A=h[w]={exports:{}};c[w][0].call(A.exports,function(ne){return m(c[w][1][ne]||ne)},A,A.exports,o,c,h,p)}return h[w].exports}for(var y="function"==typeof _dereq_&&_dereq_,C=0;C<p.length;C++)m(p[C]);return m}({1:[function(o,c,h){c.exports=function(p){function m(C){var w=new y(C),P=w.promise();return w.setHowMany(1),w.setUnwrap(),w.init(),P}var y=p._SomePromiseArray;p.any=function(C){return m(C)},p.prototype.any=function(){return m(this)}}},{}],2:[function(o,c,h){function p(){this._customScheduler=!1,this._isTickUsed=!1,this._lateQueue=new A(16),this._normalQueue=new A(16),this._haveDrainedQueues=!1;var ne=this;this.drainQueues=function(){ne._drainQueues()},this._schedule=z}function w(ne){for(;ne.length()>0;)P(ne)}function P(ne){var $=ne.shift();if("function"!=typeof $)$._settlePromises();else{var K=ne.shift(),q=ne.shift();$.call(K,q)}}var O;try{throw new Error}catch(ne){O=ne}var z=o("./schedule"),A=o("./queue");p.prototype.setScheduler=function(ne){var $=this._schedule;return this._schedule=ne,this._customScheduler=!0,$},p.prototype.hasCustomScheduler=function(){return this._customScheduler},p.prototype.haveItemsQueued=function(){return this._isTickUsed||this._haveDrainedQueues},p.prototype.fatalError=function(ne,$){$?(process.stderr.write("Fatal "+(ne instanceof Error?ne.stack:ne)+"\n"),process.exit(2)):this.throwLater(ne)},p.prototype.throwLater=function(ne,$){if(1===arguments.length&&($=ne,ne=function(){throw $}),typeof setTimeout<"u")setTimeout(function(){ne($)},0);else try{this._schedule(function(){ne($)})}catch{throw new Error("No async scheduler available\n\n    See http://goo.gl/MqrFmX\n")}},p.prototype.invokeLater=function m(ne,$,K){this._lateQueue.push(ne,$,K),this._queueTick()},p.prototype.invoke=function y(ne,$,K){this._normalQueue.push(ne,$,K),this._queueTick()},p.prototype.settlePromises=function C(ne){this._normalQueue._pushOne(ne),this._queueTick()},p.prototype._drainQueues=function(){w(this._normalQueue),this._reset(),this._haveDrainedQueues=!0,w(this._lateQueue)},p.prototype._queueTick=function(){this._isTickUsed||(this._isTickUsed=!0,this._schedule(this.drainQueues))},p.prototype._reset=function(){this._isTickUsed=!1},c.exports=p,c.exports.firstLineError=O},{"./queue":26,"./schedule":29}],3:[function(o,c,h){c.exports=function(p,m,y,C){var w=!1,P=function(ne,$){this._reject($)},O=function(ne,$){$.promiseRejectionQueued=!0,$.bindingPromise._then(P,P,null,this,ne)},z=function(ne,$){0==(50397184&this._bitField)&&this._resolveCallback($.target)},A=function(ne,$){$.promiseRejectionQueued||this._reject(ne)};p.prototype.bind=function(ne){w||(w=!0,p.prototype._propagateFrom=C.propagateFromFunction(),p.prototype._boundValue=C.boundValueFunction());var $=y(ne),K=new p(m);K._propagateFrom(this,1);var q=this._target();if(K._setBoundTo($),$ instanceof p){var N={promiseRejectionQueued:!1,promise:K,target:q,bindingPromise:$};q._then(m,O,void 0,K,N),$._then(z,A,void 0,K,N),K._setOnCancel($)}else K._resolveCallback(q);return K},p.prototype._setBoundTo=function(ne){void 0!==ne?(this._bitField=2097152|this._bitField,this._boundTo=ne):this._bitField=-2097153&this._bitField},p.prototype._isBound=function(){return 2097152==(2097152&this._bitField)},p.bind=function(ne,$){return p.resolve($).bind(ne)}}},{}],4:[function(o,c,h){var m;typeof Promise<"u"&&(m=Promise);var y=o("./promise")();y.noConflict=function p(){try{Promise===y&&(Promise=m)}catch{}return y},c.exports=y},{"./promise":22}],5:[function(o,c,h){var p=Object.create;if(p){var m=p(null),y=p(null);m[" size"]=y[" size"]=0}c.exports=function(C){function P(K){var N=function w(K,q){var N;if(null!=K&&(N=K[q]),"function"!=typeof N){var H="Object "+ne.classString(K)+" has no method '"+ne.toString(q)+"'";throw new C.TypeError(H)}return N}(K,this.pop());return N.apply(K,this)}function O(K){return K[this]}function z(K){var q=+this;return 0>q&&(q=Math.max(0,q+K.length)),K[q]}var ne=o("./util"),$=ne.canEvaluate;C.prototype.call=function(K){var q=[].slice.call(arguments,1);return q.push(K),this._then(P,void 0,void 0,q,void 0)},C.prototype.get=function(K){var q;if("number"==typeof K)q=z;else if($){var H=(void 0)(K);q=null!==H?H:O}else q=O;return this._then(q,void 0,void 0,K,void 0)}}},{"./util":36}],6:[function(o,c,h){c.exports=function(p,m,y,C){var w=o("./util"),P=w.tryCatch,O=w.errorObj,z=p._async;p.prototype.break=p.prototype.cancel=function(){if(!C.cancellation())return this._warn("cancellation is disabled");for(var A=this,ne=A;A._isCancellable();){if(!A._cancelBy(ne)){ne._isFollowing()?ne._followee().cancel():ne._cancelBranched();break}var $=A._cancellationParent;if(null==$||!$._isCancellable()){A._isFollowing()?A._followee().cancel():A._cancelBranched();break}A._isFollowing()&&A._followee().cancel(),A._setWillBeCancelled(),ne=A,A=$}},p.prototype._branchHasCancelled=function(){this._branchesRemainingToCancel--},p.prototype._enoughBranchesHaveCancelled=function(){return void 0===this._branchesRemainingToCancel||this._branchesRemainingToCancel<=0},p.prototype._cancelBy=function(A){return A===this?(this._branchesRemainingToCancel=0,this._invokeOnCancel(),!0):(this._branchHasCancelled(),!!this._enoughBranchesHaveCancelled()&&(this._invokeOnCancel(),!0))},p.prototype._cancelBranched=function(){this._enoughBranchesHaveCancelled()&&this._cancel()},p.prototype._cancel=function(){this._isCancellable()&&(this._setCancelled(),z.invoke(this._cancelPromises,this,void 0))},p.prototype._cancelPromises=function(){this._length()>0&&this._settlePromises()},p.prototype._unsetOnCancel=function(){this._onCancelField=void 0},p.prototype._isCancellable=function(){return this.isPending()&&!this._isCancelled()},p.prototype.isCancellable=function(){return this.isPending()&&!this.isCancelled()},p.prototype._doInvokeOnCancel=function(A,ne){if(w.isArray(A))for(var $=0;$<A.length;++$)this._doInvokeOnCancel(A[$],ne);else if(void 0!==A)if("function"==typeof A){if(!ne){var K=P(A).call(this._boundValue());K===O&&(this._attachExtraTrace(K.e),z.throwLater(K.e))}}else A._resultCancelled(this)},p.prototype._invokeOnCancel=function(){var A=this._onCancel();this._unsetOnCancel(),z.invoke(this._doInvokeOnCancel,this,A)},p.prototype._invokeInternalOnCancel=function(){this._isCancellable()&&(this._doInvokeOnCancel(this._onCancel(),!0),this._unsetOnCancel())},p.prototype._resultCancelled=function(){this.cancel()}}},{"./util":36}],7:[function(o,c,h){c.exports=function(p){var y=o("./util"),C=o("./es5").keys,w=y.tryCatch,P=y.errorObj;return function m(O,z,A){return function(ne){var $=A._boundValue();e:for(var K=0;K<O.length;++K){var q=O[K];if(q===Error||null!=q&&q.prototype instanceof Error){if(ne instanceof q)return w(z).call($,ne)}else if("function"==typeof q){var N=w(q).call($,ne);if(N===P)return N;if(N)return w(z).call($,ne)}else if(y.isObject(ne)){for(var H=C(q),re=0;re<H.length;++re){var ie=H[re];if(q[ie]!=ne[ie])continue e}return w(z).call($,ne)}}return p}}}},{"./es5":13,"./util":36}],8:[function(o,c,h){c.exports=function(p){function m(){this._trace=new m.CapturedTrace(C())}function C(){var O=P.length-1;return O>=0?P[O]:void 0}var w=!1,P=[];return p.prototype._promiseCreated=function(){},p.prototype._pushContext=function(){},p.prototype._popContext=function(){return null},p._peekContext=p.prototype._peekContext=function(){},m.prototype._pushContext=function(){void 0!==this._trace&&(this._trace._promiseCreated=null,P.push(this._trace))},m.prototype._popContext=function(){if(void 0!==this._trace){var O=P.pop(),z=O._promiseCreated;return O._promiseCreated=null,z}return null},m.CapturedTrace=null,m.create=function y(){return w?new m:void 0},m.deactivateLongStackTraces=function(){},m.activateLongStackTraces=function(){var O=p.prototype._pushContext,z=p.prototype._popContext,A=p._peekContext,ne=p.prototype._peekContext,$=p.prototype._promiseCreated;m.deactivateLongStackTraces=function(){p.prototype._pushContext=O,p.prototype._popContext=z,p._peekContext=A,p.prototype._peekContext=ne,p.prototype._promiseCreated=$,w=!1},w=!0,p.prototype._pushContext=m.prototype._pushContext,p.prototype._popContext=m.prototype._popContext,p._peekContext=p.prototype._peekContext=C,p.prototype._promiseCreated=function(){var K=this._peekContext();K&&null==K._promiseCreated&&(K._promiseCreated=this)}},m}},{}],9:[function(o,c,h){c.exports=function(p,m,y,C){function w(Ie,Se){return{promise:Se}}function P(){return!1}function O(Ie,Se,Ve){var je=this;try{Ie(Se,Ve,function(ht){if("function"!=typeof ht)throw new TypeError("onCancel must be a function, got: "+j.toString(ht));je._attachCancellationCallback(ht)})}catch(ht){return ht}}function z(Ie){if(!this._isCancellable())return this;var Se=this._onCancel();void 0!==Se?j.isArray(Se)?Se.push(Ie):this._setOnCancel([Se,Ie]):this._setOnCancel(Ie)}function A(){return this._onCancelField}function ne(Ie){this._onCancelField=Ie}function $(){this._cancellationParent=void 0,this._onCancelField=void 0}function K(Ie,Se){if(0!=(1&Se)){this._cancellationParent=Ie;var Ve=Ie._branchesRemainingToCancel;void 0===Ve&&(Ve=0),Ie._branchesRemainingToCancel=Ve+1}0!=(2&Se)&&Ie._isBound()&&this._setBoundTo(Ie._boundTo)}function N(){var Ie=this._boundTo;return void 0!==Ie&&Ie instanceof p?Ie.isFulfilled()?Ie.value():void 0:Ie}function H(){this._trace=new ut(this._peekContext())}function re(Ie,Se){if(Je(Ie)){var Ve=this._trace;if(void 0!==Ve&&Se&&(Ve=Ve._parent),void 0!==Ve)Ve.attachExtraTrace(Ie);else if(!Ie.__stackCleaned__){var je=pe(Ie);j.notEnumerableProp(Ie,"stack",je.message+"\n"+je.stack.join("\n")),j.notEnumerableProp(Ie,"__stackCleaned__",!0)}}}function ie(){this._trace=void 0}function ue(Ie,Se,Ve){if(Fn.warnings){var je,ht=new de(Ie);if(Se)Ve._attachExtraTrace(ht);else if(Fn.longStackTraces&&(je=p._peekContext()))je.attachExtraTrace(ht);else{var Ft=pe(ht);ht.stack=Ft.message+"\n"+Ft.stack.join("\n")}ra("warning",ht)||Re(ht,"",!0)}}function me(Ie){for(var Se=[],Ve=0;Ve<Ie.length;++Ve){var je=Ie[Ve],ht="    (No stack trace)"===je||pn.test(je),Ft=ht&&wc(je);ht&&!Ft&&(zr&&" "!==je.charAt(0)&&(je="    "+je),Se.push(je))}return Se}function pe(Ie){var Se=Ie.stack,Ve=Ie.toString();return Se="string"==typeof Se&&Se.length>0?function Pe(Ie){for(var Se=Ie.stack.replace(/\s+$/g,"").split("\n"),Ve=0;Ve<Se.length;++Ve){var je=Se[Ve];if("    (No stack trace)"===je||pn.test(je))break}return Ve>0&&"SyntaxError"!=Ie.name&&(Se=Se.slice(Ve)),Se}(Ie):["    (No stack trace)"],{message:Ve,stack:"SyntaxError"==Ie.name?Se:me(Se)}}function Re(Ie,Se,Ve){var je;typeof console<"u"&&(je=j.isObject(Ie)?Se+ui(Ie.stack,Ie):Se+String(Ie),"function"==typeof hn?hn(je,Ve):("function"==typeof console.log||"object"==typeof console.log)&&console.log(je))}function xe(Ie,Se,Ve,je){var ht=!1;try{"function"==typeof Se&&(ht=!0,"rejectionHandled"===Ie?Se(je):Se(Ve,je))}catch(Ft){ge.throwLater(Ft)}"unhandledRejection"===Ie?ra(Ie,Ve,je)||ht||Re(Ve,"Unhandled rejection "):ra(Ie,je)}function Fe(Ie){var Se;if("function"==typeof Ie)Se="[function "+(Ie.name||"anonymous")+"]";else{if(Se=Ie&&"function"==typeof Ie.toString?Ie.toString():j.toString(Ie),/\[object [a-zA-Z0-9$_]+\]/.test(Se))try{Se=JSON.stringify(Ie)}catch{}0===Se.length&&(Se="(empty array)")}return"(<"+function Xe(Ie){return Ie.length<41?Ie:Ie.substr(0,38)+"..."}(Se)+">, no stack trace)"}function st(){return"function"==typeof Hm}function Ge(Ie){var Se=Ie.match(oT);return Se?{fileName:Se[1],line:parseInt(Se[2],10)}:void 0}function ut(Ie){this._parent=Ie,this._promisesCreated=0;var Se=this._length=1+(void 0===Ie?0:Ie._length);Hm(this,ut),Se>32&&this.uncycle()}var en,nn,hn,Wn,ge=p._async,de=o("./errors").Warning,j=o("./util"),Be=o("./es5"),Je=j.canAttachTrace,Qe=/[\\\/]bluebird[\\\/]js[\\\/](release|debug|instrumented)/,xt=/\((?:timers\.js):\d+:\d+\)/,Dn=/[\/<\(](.+?):(\d+):(\d+)\)?\s*$/,pn=null,ui=null,zr=!1,ji=!(0==j.env("BLUEBIRD_DEBUG")||!j.env("BLUEBIRD_DEBUG")&&"development"!==j.env("NODE_ENV")),Su=!(0==j.env("BLUEBIRD_WARNINGS")||!ji&&!j.env("BLUEBIRD_WARNINGS")),iT=!(0==j.env("BLUEBIRD_LONG_STACK_TRACES")||!ji&&!j.env("BLUEBIRD_LONG_STACK_TRACES")),Ih=0!=j.env("BLUEBIRD_W_FORGOTTEN_RETURN")&&(Su||!!j.env("BLUEBIRD_W_FORGOTTEN_RETURN"));(function(){function Ie(){for(var je=0;je<Ve.length;++je)Ve[je]._notifyUnhandledRejection();Se()}function Se(){Ve.length=0}var Ve=[];Wn=function(je){Ve.push(je),setTimeout(Ie,1)},Be.defineProperty(p,"_unhandledRejectionCheck",{value:Ie}),Be.defineProperty(p,"_unhandledRejectionClear",{value:Se})})(),p.prototype.suppressUnhandledRejections=function(){var Ie=this._target();Ie._bitField=-1048577&Ie._bitField|524288},p.prototype._ensurePossibleRejectionHandled=function(){0==(524288&this._bitField)&&(this._setRejectionIsUnhandled(),Wn(this))},p.prototype._notifyUnhandledRejectionIsHandled=function(){xe("rejectionHandled",en,void 0,this)},p.prototype._setReturnedNonUndefined=function(){this._bitField=268435456|this._bitField},p.prototype._returnedNonUndefined=function(){return 0!=(268435456&this._bitField)},p.prototype._notifyUnhandledRejection=function(){if(this._isRejectionUnhandled()){var Ie=this._settledValue();this._setUnhandledRejectionIsNotified(),xe("unhandledRejection",nn,Ie,this)}},p.prototype._setUnhandledRejectionIsNotified=function(){this._bitField=262144|this._bitField},p.prototype._unsetUnhandledRejectionIsNotified=function(){this._bitField=-262145&this._bitField},p.prototype._isUnhandledRejectionNotified=function(){return(262144&this._bitField)>0},p.prototype._setRejectionIsUnhandled=function(){this._bitField=1048576|this._bitField},p.prototype._unsetRejectionIsUnhandled=function(){this._bitField=-1048577&this._bitField,this._isUnhandledRejectionNotified()&&(this._unsetUnhandledRejectionIsNotified(),this._notifyUnhandledRejectionIsHandled())},p.prototype._isRejectionUnhandled=function(){return(1048576&this._bitField)>0},p.prototype._warn=function(Ie,Se,Ve){return ue(Ie,Se,Ve||this)},p.onPossiblyUnhandledRejection=function(Ie){var Se=p._getContext();nn=j.contextBind(Se,Ie)},p.onUnhandledRejectionHandled=function(Ie){var Se=p._getContext();en=j.contextBind(Se,Ie)};var jm=function(){};p.longStackTraces=function(){if(ge.haveItemsQueued()&&!Fn.longStackTraces)throw new Error("cannot enable long stack traces after promises have been created\n\n    See http://goo.gl/MqrFmX\n");if(!Fn.longStackTraces&&st()){var Ie=p.prototype._captureStackTrace,Se=p.prototype._attachExtraTrace,Ve=p.prototype._dereferenceTrace;Fn.longStackTraces=!0,jm=function(){if(ge.haveItemsQueued()&&!Fn.longStackTraces)throw new Error("cannot enable long stack traces after promises have been created\n\n    See http://goo.gl/MqrFmX\n");p.prototype._captureStackTrace=Ie,p.prototype._attachExtraTrace=Se,p.prototype._dereferenceTrace=Ve,m.deactivateLongStackTraces(),Fn.longStackTraces=!1},p.prototype._captureStackTrace=H,p.prototype._attachExtraTrace=re,p.prototype._dereferenceTrace=ie,m.activateLongStackTraces()}},p.hasLongStackTraces=function(){return Fn.longStackTraces&&st()};var bc={unhandledrejection:{before:function(){var Ie=j.global.onunhandledrejection;return j.global.onunhandledrejection=null,Ie},after:function(Ie){j.global.onunhandledrejection=Ie}},rejectionhandled:{before:function(){var Ie=j.global.onrejectionhandled;return j.global.onrejectionhandled=null,Ie},after:function(Ie){j.global.onrejectionhandled=Ie}}},Iu=function(){var Ie=function(Ve,je){if(!Ve)return!j.global.dispatchEvent(je);var ht;try{return ht=Ve.before(),!j.global.dispatchEvent(je)}finally{Ve.after(ht)}};try{if("function"==typeof CustomEvent){var Se=new CustomEvent("CustomEvent");return j.global.dispatchEvent(Se),function(je,ht){je=je.toLowerCase();var an=new CustomEvent(je,{detail:ht,cancelable:!0});return Be.defineProperty(an,"promise",{value:ht.promise}),Be.defineProperty(an,"reason",{value:ht.reason}),Ie(bc[je],an)}}return"function"==typeof Event?(Se=new Event("CustomEvent"),j.global.dispatchEvent(Se),function(je,ht){je=je.toLowerCase();var Ft=new Event(je,{cancelable:!0});return Ft.detail=ht,Be.defineProperty(Ft,"promise",{value:ht.promise}),Be.defineProperty(Ft,"reason",{value:ht.reason}),Ie(bc[je],Ft)}):((Se=document.createEvent("CustomEvent")).initCustomEvent("testingtheevent",!1,!0,{}),j.global.dispatchEvent(Se),function(Ve,je){Ve=Ve.toLowerCase();var ht=document.createEvent("CustomEvent");return ht.initCustomEvent(Ve,!1,!0,je),Ie(bc[Ve],ht)})}catch{}return function(){return!1}}(),Ds=j.isNode?function(){return process.emit.apply(process,arguments)}:j.global?function(Ie){var Se="on"+Ie.toLowerCase(),Ve=j.global[Se];return!!Ve&&(Ve.apply(j.global,[].slice.call(arguments,1)),!0)}:function(){return!1},Th={promiseCreated:w,promiseFulfilled:w,promiseRejected:w,promiseResolved:w,promiseCancelled:w,promiseChained:function(Ie,Se,Ve){return{promise:Se,child:Ve}},warning:function(Ie,Se){return{warning:Se}},unhandledRejection:function(Ie,Se,Ve){return{reason:Se,promise:Ve}},rejectionHandled:w},ra=function(Ie){var Se=!1;try{Se=Ds.apply(null,arguments)}catch(je){ge.throwLater(je),Se=!0}var Ve=!1;try{Ve=Iu(Ie,Th[Ie].apply(null,arguments))}catch(je){ge.throwLater(je),Ve=!0}return Ve||Se};p.config=function(Ie){if("longStackTraces"in(Ie=Object(Ie))&&(Ie.longStackTraces?p.longStackTraces():!Ie.longStackTraces&&p.hasLongStackTraces()&&jm()),"warnings"in Ie){var Se=Ie.warnings;Fn.warnings=!!Se,Ih=Fn.warnings,j.isObject(Se)&&"wForgottenReturn"in Se&&(Ih=!!Se.wForgottenReturn)}if("cancellation"in Ie&&Ie.cancellation&&!Fn.cancellation){if(ge.haveItemsQueued())throw new Error("cannot enable cancellation after promises are in use");p.prototype._clearCancellationData=$,p.prototype._propagateFrom=K,p.prototype._onCancel=A,p.prototype._setOnCancel=ne,p.prototype._attachCancellationCallback=z,p.prototype._execute=O,Ch=K,Fn.cancellation=!0}if("monitoring"in Ie&&(Ie.monitoring&&!Fn.monitoring?(Fn.monitoring=!0,p.prototype._fireEvent=ra):!Ie.monitoring&&Fn.monitoring&&(Fn.monitoring=!1,p.prototype._fireEvent=P)),"asyncHooks"in Ie&&j.nodeSupportsAsyncResource){var je=!!Ie.asyncHooks;Fn.asyncHooks!==je&&(Fn.asyncHooks=je,je?y():C())}return p},p.prototype._fireEvent=P,p.prototype._execute=function(Ie,Se,Ve){try{Ie(Se,Ve)}catch(je){return je}},p.prototype._onCancel=function(){},p.prototype._setOnCancel=function(Ie){},p.prototype._attachCancellationCallback=function(Ie){},p.prototype._captureStackTrace=function(){},p.prototype._attachExtraTrace=function(){},p.prototype._dereferenceTrace=function(){},p.prototype._clearCancellationData=function(){},p.prototype._propagateFrom=function(Ie,Se){};var Ch=function q(Ie,Se){0!=(2&Se)&&Ie._isBound()&&this._setBoundTo(Ie._boundTo)},wc=function(){return!1},oT=/[\/<\(]([^:\/]+):(\d+):(?:\d+)\)?\s*$/;j.inherits(ut,Error),m.CapturedTrace=ut,ut.prototype.uncycle=function(){var Ie=this._length;if(!(2>Ie)){for(var Se=[],Ve={},je=0,ht=this;void 0!==ht;++je)Se.push(ht),ht=ht._parent;for(je=(Ie=this._length=je)-1;je>=0;--je){var Ft=Se[je].stack;void 0===Ve[Ft]&&(Ve[Ft]=je)}for(je=0;Ie>je;++je){var In=Ve[Se[je].stack];if(void 0!==In&&In!==je){In>0&&(Se[In-1]._parent=void 0,Se[In-1]._length=1),Se[je]._parent=void 0,Se[je]._length=1;var $n=je>0?Se[je-1]:this;Ie-1>In?($n._parent=Se[In+1],$n._parent.uncycle(),$n._length=$n._parent._length+1):($n._parent=void 0,$n._length=1);for(var ar=$n._length+1,Es=je-2;Es>=0;--Es)Se[Es]._length=ar,ar++;return}}}},ut.prototype.attachExtraTrace=function(Ie){if(!Ie.__stackCleaned__){this.uncycle();for(var Se=pe(Ie),Ve=Se.message,je=[Se.stack],ht=this;void 0!==ht;)je.push(me(ht.stack.split("\n"))),ht=ht._parent;(function le(Ie){for(var Se=Ie[0],Ve=1;Ve<Ie.length;++Ve){for(var je=Ie[Ve],ht=Se.length-1,Ft=Se[ht],an=-1,In=je.length-1;In>=0;--In)if(je[In]===Ft){an=In;break}for(In=an;In>=0&&Se[ht]===je[In];--In)Se.pop(),ht--;Se=je}})(je),function fe(Ie){for(var Se=0;Se<Ie.length;++Se)(0===Ie[Se].length||Se+1<Ie.length&&Ie[Se][0]===Ie[Se+1][0])&&(Ie.splice(Se,1),Se--)}(je),j.notEnumerableProp(Ie,"stack",function ce(Ie,Se){for(var Ve=0;Ve<Se.length-1;++Ve)Se[Ve].push("From previous event:"),Se[Ve]=Se[Ve].join("\n");return Ve<Se.length&&(Se[Ve]=Se[Ve].join("\n")),Ie+"\n"+Se.join("\n")}(Ve,je)),j.notEnumerableProp(Ie,"__stackCleaned__",!0)}};var Hm=function(){var Ie=/^\s*at\s*/,Se=function(Ft,an){return"string"==typeof Ft?Ft:void 0!==an.name&&void 0!==an.message?an.toString():Fe(an)};if("number"==typeof Error.stackTraceLimit&&"function"==typeof Error.captureStackTrace){Error.stackTraceLimit+=6,pn=Ie,ui=Se;var Ve=Error.captureStackTrace;return wc=function(Ft){return Qe.test(Ft)},function(Ft,an){Error.stackTraceLimit+=6,Ve(Ft,an),Error.stackTraceLimit-=6}}var ht,je=new Error;if("string"==typeof je.stack&&je.stack.split("\n")[0].indexOf("stackDetection@")>=0)return pn=/@/,ui=Se,zr=!0,function(Ft){Ft.stack=(new Error).stack};try{throw new Error}catch(Ft){ht="stack"in Ft}return"stack"in je||!ht||"number"!=typeof Error.stackTraceLimit?(ui=function(Ft,an){return"string"==typeof Ft?Ft:"object"!=typeof an&&"function"!=typeof an||void 0===an.name||void 0===an.message?Fe(an):an.toString()},null):(pn=Ie,ui=Se,function(Ft){Error.stackTraceLimit+=6;try{throw new Error}catch(an){Ft.stack=an.stack}Error.stackTraceLimit-=6})}();typeof console<"u"&&typeof console.warn<"u"&&(hn=function(Ie){console.warn(Ie)},j.isNode&&process.stderr.isTTY?hn=function(Ie,Se){console.warn((Se?"\x1b[33m":"\x1b[31m")+Ie+"\x1b[0m\n")}:j.isNode||"string"!=typeof(new Error).stack||(hn=function(Ie,Se){console.warn("%c"+Ie,Se?"color: darkorange":"color: red")}));var Fn={warnings:Su,longStackTraces:!1,cancellation:!1,monitoring:!1,asyncHooks:!1};return iT&&p.longStackTraces(),{asyncHooks:function(){return Fn.asyncHooks},longStackTraces:function(){return Fn.longStackTraces},warnings:function(){return Fn.warnings},cancellation:function(){return Fn.cancellation},monitoring:function(){return Fn.monitoring},propagateFromFunction:function(){return Ch},boundValueFunction:function(){return N},checkForgottenReturns:function De(Ie,Se,Ve,je,ht){if(void 0===Ie&&null!==Se&&Ih){if(void 0!==ht&&ht._returnedNonUndefined()||0==(65535&je._bitField))return;Ve&&(Ve+=" ");var Ft="",an="";if(Se._trace){for(var In=Se._trace.stack.split("\n"),$n=me(In),ar=$n.length-1;ar>=0;--ar){var Es=$n[ar];if(!xt.test(Es)){var As=Es.match(Dn);As&&(Ft="at "+As[1]+":"+As[2]+":"+As[3]+" ");break}}if($n.length>0){var Gm=$n[0];for(ar=0;ar<In.length;++ar)if(In[ar]===Gm){ar>0&&(an="\n"+In[ar-1]);break}}}je._warn("a promise was created in a "+Ve+"handler "+Ft+"but was not returned from it, see http://goo.gl/rRqMUw"+an,!0,Se)}},setBounds:function nt(Ie,Se){if(st()){for(var Ve,je,ht=(Ie.stack||"").split("\n"),Ft=(Se.stack||"").split("\n"),an=-1,In=-1,$n=0;$n<ht.length;++$n)if(ar=Ge(ht[$n])){Ve=ar.fileName,an=ar.line;break}for($n=0;$n<Ft.length;++$n){var ar;if(ar=Ge(Ft[$n])){je=ar.fileName,In=ar.line;break}}0>an||0>In||!Ve||!je||Ve!==je||an>=In||(wc=function(Es){if(Qe.test(Es))return!0;var As=Ge(Es);return!!(As&&As.fileName===Ve&&an<=As.line&&As.line<=In)})}},warn:ue,deprecated:function ee(Ie,Se){var Ve=Ie+" is deprecated and will be removed in a future version.";return Se&&(Ve+=" Use "+Se+" instead."),ue(Ve)},CapturedTrace:ut,fireDomEvent:Iu,fireGlobalEvent:Ds}}},{"./errors":12,"./es5":13,"./util":36}],10:[function(o,c,h){c.exports=function(p){function m(){return this.value}function y(){throw this.reason}p.prototype.return=p.prototype.thenReturn=function(C){return C instanceof p&&C.suppressUnhandledRejections(),this._then(m,void 0,void 0,{value:C},void 0)},p.prototype.throw=p.prototype.thenThrow=function(C){return this._then(y,void 0,void 0,{reason:C},void 0)},p.prototype.catchThrow=function(C){if(arguments.length<=1)return this._then(void 0,y,void 0,{reason:C},void 0);var w=arguments[1],P=function(){throw w};return this.caught(C,P)},p.prototype.catchReturn=function(C){if(arguments.length<=1)return C instanceof p&&C.suppressUnhandledRejections(),this._then(void 0,m,void 0,{value:C},void 0);var w=arguments[1];w instanceof p&&w.suppressUnhandledRejections();var P=function(){return w};return this.caught(C,P)}}},{}],11:[function(o,c,h){c.exports=function(p,m){function y(){return P(this)}var w=p.reduce,P=p.all;p.prototype.each=function(O){return w(this,O,m,0)._then(y,void 0,void 0,this,void 0)},p.prototype.mapSeries=function(O){return w(this,O,m,m)},p.each=function(O,z){return w(O,z,m,0)._then(y,void 0,void 0,O,void 0)},p.mapSeries=function C(O,z){return w(O,z,m,m)}}},{}],12:[function(o,c,h){function p(De,ee){function ue(ce){return this instanceof ue?(A(this,"message","string"==typeof ce?ce:ee),A(this,"name",De),void(Error.captureStackTrace?Error.captureStackTrace(this,this.constructor):Error.call(this))):new ue(ce)}return z(ue,Error),ue}function m(De){return this instanceof m?(A(this,"name","OperationalError"),A(this,"message",De),this.cause=De,this.isOperational=!0,void(De instanceof Error?(A(this,"message",De.message),A(this,"stack",De.stack)):Error.captureStackTrace&&Error.captureStackTrace(this,this.constructor))):new m(De)}var y,C,w=o("./es5"),P=w.freeze,O=o("./util"),z=O.inherits,A=O.notEnumerableProp,ne=p("Warning","warning"),$=p("CancellationError","cancellation error"),K=p("TimeoutError","timeout error"),q=p("AggregateError","aggregate error");try{y=TypeError,C=RangeError}catch{y=p("TypeError","type error"),C=p("RangeError","range error")}for(var N="join pop push shift unshift slice filter forEach some every map indexOf lastIndexOf reduce reduceRight sort reverse".split(" "),H=0;H<N.length;++H)"function"==typeof Array.prototype[N[H]]&&(q.prototype[N[H]]=Array.prototype[N[H]]);w.defineProperty(q.prototype,"length",{value:0,configurable:!1,writable:!0,enumerable:!0}),q.prototype.isOperational=!0;var re=0;q.prototype.toString=function(){var De=Array(4*re+1).join(" "),ee="\n"+De+"AggregateError of:\n";re++,De=Array(4*re+1).join(" ");for(var ue=0;ue<this.length;++ue){for(var ce=this[ue]===this?"[Circular AggregateError]":this[ue]+"",fe=ce.split("\n"),le=0;le<fe.length;++le)fe[le]=De+fe[le];ee+=(ce=fe.join("\n"))+"\n"}return re--,ee},z(m,Error);var ie=Error.__BluebirdErrorTypes__;ie||(ie=P({CancellationError:$,TimeoutError:K,OperationalError:m,RejectionError:m,AggregateError:q}),w.defineProperty(Error,"__BluebirdErrorTypes__",{value:ie,writable:!1,enumerable:!1,configurable:!1})),c.exports={Error,TypeError:y,RangeError:C,CancellationError:ie.CancellationError,OperationalError:ie.OperationalError,TimeoutError:ie.TimeoutError,AggregateError:ie.AggregateError,Warning:ne}},{"./es5":13,"./util":36}],13:[function(o,c,h){var p=function(){return void 0===this}();if(p)c.exports={freeze:Object.freeze,defineProperty:Object.defineProperty,getDescriptor:Object.getOwnPropertyDescriptor,keys:Object.keys,names:Object.getOwnPropertyNames,getPrototypeOf:Object.getPrototypeOf,isArray:Array.isArray,isES5:p,propertyIsWritable:function($,K){var q=Object.getOwnPropertyDescriptor($,K);return!(q&&!q.writable&&!q.set)}};else{var m={}.hasOwnProperty,y={}.toString,C={}.constructor.prototype,w=function($){var K=[];for(var q in $)m.call($,q)&&K.push(q);return K};c.exports={isArray:function($){try{return"[object Array]"===y.call($)}catch{return!1}},keys:w,names:w,defineProperty:function($,K,q){return $[K]=q.value,$},getDescriptor:function($,K){return{value:$[K]}},freeze:function($){return $},getPrototypeOf:function($){try{return Object($).constructor.prototype}catch{return C}},isES5:p,propertyIsWritable:function(){return!0}}}},{}],14:[function(o,c,h){c.exports=function(p,m){var y=p.map;p.prototype.filter=function(C,w){return y(this,C,w,m)},p.filter=function(C,w,P){return y(C,w,P,m)}}},{}],15:[function(o,c,h){c.exports=function(p,m,y){function C(N,H,re){this.promise=N,this.type=H,this.handler=re,this.called=!1,this.cancelPromise=null}function w(N){this.finallyHandler=N}function P(N,H){return null!=N.cancelPromise&&(arguments.length>1?N.cancelPromise._reject(H):N.cancelPromise._cancel(),N.cancelPromise=null,!0)}function O(){return A.call(this,this.promise._target()._settledValue())}function z(N){return P(this,N)?void 0:(K.e=N,K)}function A(N){var H=this.promise,re=this.handler;if(!this.called){this.called=!0;var ie=this.isFinallyHandler()?re.call(H._boundValue()):re.call(H._boundValue(),N);if(ie===y)return ie;if(void 0!==ie){H._setReturnedNonUndefined();var De=m(ie,H);if(De instanceof p){if(null!=this.cancelPromise){if(De._isCancelled()){var ee=new $("late cancellation observer");return H._attachExtraTrace(ee),K.e=ee,K}De.isPending()&&De._attachCancellationCallback(new w(this))}return De._then(O,z,void 0,this,void 0)}}}return H.isRejected()?(P(this),K.e=N,K):(P(this),N)}var ne=o("./util"),$=p.CancellationError,K=ne.errorObj,q=o("./catch_filter")(y);return C.prototype.isFinallyHandler=function(){return 0===this.type},w.prototype._resultCancelled=function(){P(this.finallyHandler)},p.prototype._passThrough=function(N,H,re,ie){return"function"!=typeof N?this.then():this._then(re,ie,void 0,new C(this,H,N),void 0)},p.prototype.lastly=p.prototype.finally=function(N){return this._passThrough(N,0,A,A)},p.prototype.tap=function(N){return this._passThrough(N,1,A)},p.prototype.tapCatch=function(N){var H=arguments.length;if(1===H)return this._passThrough(N,1,void 0,A);var re,ie=new Array(H-1),De=0;for(re=0;H-1>re;++re){var ee=arguments[re];if(!ne.isObject(ee))return p.reject(new TypeError("tapCatch statement predicate: expecting an object but got "+ne.classString(ee)));ie[De++]=ee}ie.length=De;var ue=arguments[re];return this._passThrough(q(ie,ue,this),1,void 0,A)},C}},{"./catch_filter":7,"./util":36}],16:[function(o,c,h){c.exports=function(p,m,y,C,w,P){function z(H,re,ie,De){if(P.cancellation()){var ee=new p(y),ue=this._finallyPromise=new p(y);this._promise=ee.lastly(function(){return ue}),ee._captureStackTrace(),ee._setOnCancel(this)}else(this._promise=new p(y))._captureStackTrace();this._stack=De,this._generatorFunction=H,this._receiver=re,this._generator=void 0,this._yieldHandlers="function"==typeof ie?[ie].concat(N):N,this._yieldedPromise=null,this._cancellationPhase=!1}var ne=o("./errors").TypeError,$=o("./util"),K=$.errorObj,q=$.tryCatch,N=[];$.inherits(z,w),z.prototype._isResolved=function(){return null===this._promise},z.prototype._cleanup=function(){this._promise=this._generator=null,P.cancellation()&&null!==this._finallyPromise&&(this._finallyPromise._fulfill(),this._finallyPromise=null)},z.prototype._promiseCancelled=function(){if(!this._isResolved()){var H;if(typeof this._generator.return<"u")this._promise._pushContext(),H=q(this._generator.return).call(this._generator,void 0),this._promise._popContext();else{var ie=new p.CancellationError("generator .return() sentinel");p.coroutine.returnSentinel=ie,this._promise._attachExtraTrace(ie),this._promise._pushContext(),H=q(this._generator.throw).call(this._generator,ie),this._promise._popContext()}this._cancellationPhase=!0,this._yieldedPromise=null,this._continue(H)}},z.prototype._promiseFulfilled=function(H){this._yieldedPromise=null,this._promise._pushContext();var re=q(this._generator.next).call(this._generator,H);this._promise._popContext(),this._continue(re)},z.prototype._promiseRejected=function(H){this._yieldedPromise=null,this._promise._attachExtraTrace(H),this._promise._pushContext();var re=q(this._generator.throw).call(this._generator,H);this._promise._popContext(),this._continue(re)},z.prototype._resultCancelled=function(){if(this._yieldedPromise instanceof p){var H=this._yieldedPromise;this._yieldedPromise=null,H.cancel()}},z.prototype.promise=function(){return this._promise},z.prototype._run=function(){this._generator=this._generatorFunction.call(this._receiver),this._receiver=this._generatorFunction=void 0,this._promiseFulfilled(void 0)},z.prototype._continue=function(H){var re=this._promise;if(H===K)return this._cleanup(),this._cancellationPhase?re.cancel():re._rejectCallback(H.e,!1);var ie=H.value;if(!0===H.done)return this._cleanup(),this._cancellationPhase?re.cancel():re._resolveCallback(ie);var De=C(ie,this._promise);if(De instanceof p||(De=function O(H,re,ie){for(var De=0;De<re.length;++De){ie._pushContext();var ee=q(re[De])(H);if(ie._popContext(),ee===K){ie._pushContext();var ue=p.reject(K.e);return ie._popContext(),ue}var ce=C(ee,ie);if(ce instanceof p)return ce}return null}(De,this._yieldHandlers,this._promise),null!==De)){var ee=(De=De._target())._bitField;0==(50397184&ee)?(this._yieldedPromise=De,De._proxy(this,null)):0!=(33554432&ee)?p._async.invoke(this._promiseFulfilled,this,De._value()):0!=(16777216&ee)?p._async.invoke(this._promiseRejected,this,De._reason()):this._promiseCancelled()}else this._promiseRejected(new ne("A value %s was yielded that could not be treated as a promise\n\n    See http://goo.gl/MqrFmX\n\n".replace("%s",String(ie))+"From coroutine:\n"+this._stack.split("\n").slice(1,-7).join("\n")))},p.coroutine=function(H,re){if("function"!=typeof H)throw new ne("generatorFunction must be a function\n\n    See http://goo.gl/MqrFmX\n");var ie=Object(re).yieldHandler,De=z,ee=(new Error).stack;return function(){var ue=H.apply(this,arguments),ce=new De(void 0,void 0,ie,ee),fe=ce.promise();return ce._generator=ue,ce._promiseFulfilled(void 0),fe}},p.coroutine.addYieldHandler=function(H){if("function"!=typeof H)throw new ne("expecting a function but got "+$.classString(H));N.push(H)},p.spawn=function(H){if(P.deprecated("Promise.spawn()","Promise.coroutine()"),"function"!=typeof H)return m("generatorFunction must be a function\n\n    See http://goo.gl/MqrFmX\n");var re=new z(H,this),ie=re.promise();return re._run(p.spawn),ie}}},{"./errors":12,"./util":36}],17:[function(o,c,h){c.exports=function(p,m,y,C,w){o("./util"),p.join=function(){var O,z=arguments.length-1;z>0&&"function"==typeof arguments[z]&&(O=arguments[z]);var A=[].slice.call(arguments);O&&A.pop();var ne=new m(A).promise();return void 0!==O?ne.spread(O):ne}}},{"./util":36}],18:[function(o,c,h){c.exports=function(p,m,y,C,w,P){function O(q,N,H,re){this.constructor$(q),this._promise._captureStackTrace();var ie=p._getContext();if(this._callback=A.contextBind(ie,N),this._preservedValues=re===w?new Array(this.length()):null,this._limit=H,this._inFlight=0,this._queue=[],K.invoke(this._asyncInit,this,void 0),A.isArray(q))for(var De=0;De<q.length;++De){var ee=q[De];ee instanceof p&&ee.suppressUnhandledRejections()}}function z(q,N,H,re){if("function"!=typeof N)return y("expecting a function but got "+A.classString(N));var ie=0;if(void 0!==H){if("object"!=typeof H||null===H)return p.reject(new TypeError("options argument must be an object but it is "+A.classString(H)));if("number"!=typeof H.concurrency)return p.reject(new TypeError("'concurrency' must be a number but it is "+A.classString(H.concurrency)));ie=H.concurrency}return new O(q,N,ie="number"==typeof ie&&isFinite(ie)&&ie>=1?ie:0,re).promise()}var A=o("./util"),ne=A.tryCatch,$=A.errorObj,K=p._async;A.inherits(O,m),O.prototype._asyncInit=function(){this._init$(void 0,-2)},O.prototype._init=function(){},O.prototype._promiseFulfilled=function(q,N){var H=this._values,re=this.length(),ie=this._preservedValues,De=this._limit;if(0>N){if(H[N=-1*N-1]=q,De>=1&&(this._inFlight--,this._drainQueue(),this._isResolved()))return!0}else{if(De>=1&&this._inFlight>=De)return H[N]=q,this._queue.push(N),!1;null!==ie&&(ie[N]=q);var ee=this._promise,ue=this._callback,ce=ee._boundValue();ee._pushContext();var fe=ne(ue).call(ce,q,N,re),le=ee._popContext();if(P.checkForgottenReturns(fe,le,null!==ie?"Promise.filter":"Promise.map",ee),fe===$)return this._reject(fe.e),!0;var me=C(fe,this._promise);if(me instanceof p){var Pe=(me=me._target())._bitField;if(0==(50397184&Pe))return De>=1&&this._inFlight++,H[N]=me,me._proxy(this,-1*(N+1)),!1;if(0==(33554432&Pe))return 0!=(16777216&Pe)?(this._reject(me._reason()),!0):(this._cancel(),!0);fe=me._value()}H[N]=fe}return++this._totalResolved>=re&&(null!==ie?this._filter(H,ie):this._resolve(H),!0)},O.prototype._drainQueue=function(){for(var q=this._queue,N=this._limit,H=this._values;q.length>0&&this._inFlight<N;){if(this._isResolved())return;var re=q.pop();this._promiseFulfilled(H[re],re)}},O.prototype._filter=function(q,N){for(var H=N.length,re=new Array(H),ie=0,De=0;H>De;++De)q[De]&&(re[ie++]=N[De]);re.length=ie,this._resolve(re)},O.prototype.preservedValues=function(){return this._preservedValues},p.prototype.map=function(q,N){return z(this,q,N,null)},p.map=function(q,N,H,re){return z(q,N,H,re)}}},{"./util":36}],19:[function(o,c,h){c.exports=function(p,m,y,C,w){var P=o("./util"),O=P.tryCatch;p.method=function(z){if("function"!=typeof z)throw new p.TypeError("expecting a function but got "+P.classString(z));return function(){var A=new p(m);A._captureStackTrace(),A._pushContext();var ne=O(z).apply(this,arguments),$=A._popContext();return w.checkForgottenReturns(ne,$,"Promise.method",A),A._resolveFromSyncValue(ne),A}},p.attempt=p.try=function(z){if("function"!=typeof z)return C("expecting a function but got "+P.classString(z));var ne,A=new p(m);if(A._captureStackTrace(),A._pushContext(),arguments.length>1){w.deprecated("calling Promise.try with more than 1 argument");var $=arguments[1],K=arguments[2];ne=P.isArray($)?O(z).apply(K,$):O(z).call(K,$)}else ne=O(z)();var q=A._popContext();return w.checkForgottenReturns(ne,q,"Promise.try",A),A._resolveFromSyncValue(ne),A},p.prototype._resolveFromSyncValue=function(z){z===P.errorObj?this._rejectCallback(z.e,!1):this._resolveCallback(z,!0)}}},{"./util":36}],20:[function(o,c,h){function m(ne){var $;if(function p(ne){return ne instanceof Error&&z.getPrototypeOf(ne)===Error.prototype}(ne)){($=new O(ne)).name=ne.name,$.message=ne.message,$.stack=ne.stack;for(var K=z.keys(ne),q=0;q<K.length;++q){var N=K[q];A.test(N)||($[N]=ne[N])}return $}return C.markAsOriginatingFromRejection(ne),ne}var C=o("./util"),w=C.maybeWrapAsError,O=o("./errors").OperationalError,z=o("./es5"),A=/^(?:name|message|stack|cause)$/;c.exports=function y(ne,$){return function(K,q){if(null!==ne){if(K){var N=m(w(K));ne._attachExtraTrace(N),ne._reject(N)}else if($){var H=[].slice.call(arguments,1);ne._fulfill(H)}else ne._fulfill(q);ne=null}}}},{"./errors":12,"./es5":13,"./util":36}],21:[function(o,c,h){c.exports=function(p){function m(A,ne){if(!w.isArray(A))return y.call(this,A,ne);var K=O(ne).apply(this._boundValue(),[null].concat(A));K===z&&P.throwLater(K.e)}function y(A,ne){var K=this._boundValue(),q=void 0===A?O(ne).call(K,null):O(ne).call(K,null,A);q===z&&P.throwLater(q.e)}function C(A,ne){if(!A){var K=new Error(A+"");K.cause=A,A=K}var q=O(ne).call(this._boundValue(),A);q===z&&P.throwLater(q.e)}var w=o("./util"),P=p._async,O=w.tryCatch,z=w.errorObj;p.prototype.asCallback=p.prototype.nodeify=function(A,ne){if("function"==typeof A){var $=y;void 0!==ne&&Object(ne).spread&&($=m),this._then($,C,void 0,this,A)}return this}}},{"./util":36}],22:[function(o,c,h){c.exports=function(){function p(){}function y(ge){ge!==pe&&function m(ge,de){if(null==ge||ge.constructor!==y&&typeof Promise<"u"&&ge.constructor!==Promise)throw new me("the promise constructor cannot be invoked directly\n\n    See http://goo.gl/MqrFmX\n");if("function"!=typeof de)throw new me("expecting a function but got "+$.classString(de))}(this,ge),this._bitField=0,this._fulfillmentHandler0=void 0,this._rejectionHandler0=void 0,this._promise0=void 0,this._receiver0=void 0,this._resolveFromExecutor(ge),this._promiseCreated(),this._fireEvent("promiseCreated",this)}function C(ge){this.promise._resolveCallback(ge)}function w(ge){this.promise._rejectCallback(ge,!1)}function P(ge){var de=new y(pe);de._fulfillmentHandler0=ge,de._rejectionHandler0=ge,de._promise0=ge,de._receiver0=ge}var O=function(){return new me("circular promise resolution chain\n\n    See http://goo.gl/MqrFmX\n")},z=function(){return new y.PromiseInspection(this._target())},A=function(ge){return y.reject(new me(ge))},ne={},$=o("./util");$.setReflectHandler(z);var K=function(){var ge=process.domain;return void 0===ge?null:ge},N=function(){return{domain:K(),async:null}},H=$.isNode&&$.nodeSupportsAsyncResource?o("async_hooks").AsyncResource:null,re=function(){return{domain:K(),async:new H("Bluebird::Promise")}},ie=$.isNode?N:function(){return null};$.notEnumerableProp(y,"_getContext",ie);var ue=o("./es5"),ce=o("./async"),fe=new ce;ue.defineProperty(y,"_async",{value:fe});var le=o("./errors"),me=y.TypeError=le.TypeError;y.RangeError=le.RangeError;var Pe=y.CancellationError=le.CancellationError;y.TimeoutError=le.TimeoutError,y.OperationalError=le.OperationalError,y.RejectionError=le.OperationalError,y.AggregateError=le.AggregateError;var pe=function(){},Re={},xe={},Fe=o("./thenables")(y,pe),Xe=o("./promise_array")(y,pe,Fe,A,p),st=o("./context")(y),Ge=st.create,nt=o("./debuggability")(y,st,function(){ie=re,$.notEnumerableProp(y,"_getContext",re)},function(){ie=N,$.notEnumerableProp(y,"_getContext",N)}),ut=o("./finally")(y,Fe,xe),en=o("./catch_filter")(xe),nn=o("./nodeback"),hn=$.errorObj,Wn=$.tryCatch;return y.prototype.toString=function(){return"[object Promise]"},y.prototype.caught=y.prototype.catch=function(ge){var de=arguments.length;if(de>1){var j,Be=new Array(de-1),Je=0;for(j=0;de-1>j;++j){var Qe=arguments[j];if(!$.isObject(Qe))return A("Catch statement predicate: expecting an object but got "+$.classString(Qe));Be[Je++]=Qe}if(Be.length=Je,"function"!=typeof(ge=arguments[j]))throw new me("The last argument to .catch() must be a function, got "+$.toString(ge));return this.then(void 0,en(Be,ge,this))}return this.then(void 0,ge)},y.prototype.reflect=function(){return this._then(z,z,void 0,this,void 0)},y.prototype.then=function(ge,de){if(nt.warnings()&&arguments.length>0&&"function"!=typeof ge&&"function"!=typeof de){var j=".then() only accepts functions but was passed: "+$.classString(ge);arguments.length>1&&(j+=", "+$.classString(de)),this._warn(j)}return this._then(ge,de,void 0,void 0,void 0)},y.prototype.done=function(ge,de){this._then(ge,de,void 0,void 0,void 0)._setIsFinal()},y.prototype.spread=function(ge){return"function"!=typeof ge?A("expecting a function but got "+$.classString(ge)):this.all()._then(ge,void 0,void 0,Re,void 0)},y.prototype.toJSON=function(){var ge={isFulfilled:!1,isRejected:!1,fulfillmentValue:void 0,rejectionReason:void 0};return this.isFulfilled()?(ge.fulfillmentValue=this.value(),ge.isFulfilled=!0):this.isRejected()&&(ge.rejectionReason=this.reason(),ge.isRejected=!0),ge},y.prototype.all=function(){return arguments.length>0&&this._warn(".all() was passed arguments but it does not take any"),new Xe(this).promise()},y.prototype.error=function(ge){return this.caught($.originatesFromRejection,ge)},y.getNewLibraryCopy=c.exports,y.is=function(ge){return ge instanceof y},y.fromNode=y.fromCallback=function(ge){var de=new y(pe);de._captureStackTrace();var j=arguments.length>1&&!!Object(arguments[1]).multiArgs,Be=Wn(ge)(nn(de,j));return Be===hn&&de._rejectCallback(Be.e,!0),de._isFateSealed()||de._setAsyncGuaranteed(),de},y.all=function(ge){return new Xe(ge).promise()},y.cast=function(ge){var de=Fe(ge);return de instanceof y||((de=new y(pe))._captureStackTrace(),de._setFulfilled(),de._rejectionHandler0=ge),de},y.resolve=y.fulfilled=y.cast,y.reject=y.rejected=function(ge){var de=new y(pe);return de._captureStackTrace(),de._rejectCallback(ge,!0),de},y.setScheduler=function(ge){if("function"!=typeof ge)throw new me("expecting a function but got "+$.classString(ge));return fe.setScheduler(ge)},y.prototype._then=function(ge,de,j,Be,Je){var Qe=void 0!==Je,xt=Qe?Je:new y(pe),Dn=this._target(),pn=Dn._bitField;Qe||(xt._propagateFrom(this,3),xt._captureStackTrace(),void 0===Be&&0!=(2097152&this._bitField)&&(Be=0!=(50397184&pn)?this._boundValue():Dn===this?void 0:this._boundTo),this._fireEvent("promiseChained",this,xt));var ui=ie();if(0!=(50397184&pn)){var zr,ji,Su=Dn._settlePromiseCtx;0!=(33554432&pn)?(ji=Dn._rejectionHandler0,zr=ge):0!=(16777216&pn)?(ji=Dn._fulfillmentHandler0,zr=de,Dn._unsetRejectionIsUnhandled()):(Su=Dn._settlePromiseLateCancellationObserver,ji=new Pe("late cancellation observer"),Dn._attachExtraTrace(ji),zr=de),fe.invoke(Su,Dn,{handler:$.contextBind(ui,zr),promise:xt,receiver:Be,value:ji})}else Dn._addCallbacks(ge,de,xt,Be,ui);return xt},y.prototype._length=function(){return 65535&this._bitField},y.prototype._isFateSealed=function(){return 0!=(117506048&this._bitField)},y.prototype._isFollowing=function(){return 67108864==(67108864&this._bitField)},y.prototype._setLength=function(ge){this._bitField=-65536&this._bitField|65535&ge},y.prototype._setFulfilled=function(){this._bitField=33554432|this._bitField,this._fireEvent("promiseFulfilled",this)},y.prototype._setRejected=function(){this._bitField=16777216|this._bitField,this._fireEvent("promiseRejected",this)},y.prototype._setFollowing=function(){this._bitField=67108864|this._bitField,this._fireEvent("promiseResolved",this)},y.prototype._setIsFinal=function(){this._bitField=4194304|this._bitField},y.prototype._isFinal=function(){return(4194304&this._bitField)>0},y.prototype._unsetCancelled=function(){this._bitField=-65537&this._bitField},y.prototype._setCancelled=function(){this._bitField=65536|this._bitField,this._fireEvent("promiseCancelled",this)},y.prototype._setWillBeCancelled=function(){this._bitField=8388608|this._bitField},y.prototype._setAsyncGuaranteed=function(){if(!fe.hasCustomScheduler()){var ge=this._bitField;this._bitField=ge|(536870912&ge)>>2^134217728}},y.prototype._setNoAsyncGuarantee=function(){this._bitField=-134217729&(536870912|this._bitField)},y.prototype._receiverAt=function(ge){var de=0===ge?this._receiver0:this[4*ge-4+3];return de===ne?void 0:void 0===de&&this._isBound()?this._boundValue():de},y.prototype._promiseAt=function(ge){return this[4*ge-4+2]},y.prototype._fulfillmentHandlerAt=function(ge){return this[4*ge-4+0]},y.prototype._rejectionHandlerAt=function(ge){return this[4*ge-4+1]},y.prototype._boundValue=function(){},y.prototype._migrateCallback0=function(ge){var de=ge._fulfillmentHandler0,j=ge._rejectionHandler0,Be=ge._promise0,Je=ge._receiverAt(0);void 0===Je&&(Je=ne),this._addCallbacks(de,j,Be,Je,null)},y.prototype._migrateCallbackAt=function(ge,de){var j=ge._fulfillmentHandlerAt(de),Be=ge._rejectionHandlerAt(de),Je=ge._promiseAt(de),Qe=ge._receiverAt(de);void 0===Qe&&(Qe=ne),this._addCallbacks(j,Be,Je,Qe,null)},y.prototype._addCallbacks=function(ge,de,j,Be,Je){var Qe=this._length();if(Qe>=65531&&(Qe=0,this._setLength(0)),0===Qe)this._promise0=j,this._receiver0=Be,"function"==typeof ge&&(this._fulfillmentHandler0=$.contextBind(Je,ge)),"function"==typeof de&&(this._rejectionHandler0=$.contextBind(Je,de));else{var xt=4*Qe-4;this[xt+2]=j,this[xt+3]=Be,"function"==typeof ge&&(this[xt+0]=$.contextBind(Je,ge)),"function"==typeof de&&(this[xt+1]=$.contextBind(Je,de))}return this._setLength(Qe+1),Qe},y.prototype._proxy=function(ge,de){this._addCallbacks(void 0,void 0,de,ge,null)},y.prototype._resolveCallback=function(ge,de){if(0==(117506048&this._bitField)){if(ge===this)return this._rejectCallback(O(),!1);var j=Fe(ge,this);if(!(j instanceof y))return this._fulfill(ge);de&&this._propagateFrom(j,2);var Be=j._target();if(Be===this)return void this._reject(O());var Je=Be._bitField;if(0==(50397184&Je)){var Qe=this._length();Qe>0&&Be._migrateCallback0(this);for(var xt=1;Qe>xt;++xt)Be._migrateCallbackAt(this,xt);this._setFollowing(),this._setLength(0),this._setFollowee(j)}else if(0!=(33554432&Je))this._fulfill(Be._value());else if(0!=(16777216&Je))this._reject(Be._reason());else{var Dn=new Pe("late cancellation observer");Be._attachExtraTrace(Dn),this._reject(Dn)}}},y.prototype._rejectCallback=function(ge,de,j){var Be=$.ensureErrorObject(ge),Je=Be===ge;if(!Je&&!j&&nt.warnings()){var Qe="a promise was rejected with a non-error: "+$.classString(ge);this._warn(Qe,!0)}this._attachExtraTrace(Be,!!de&&Je),this._reject(ge)},y.prototype._resolveFromExecutor=function(ge){if(ge!==pe){var de=this;this._captureStackTrace(),this._pushContext();var j=!0,Be=this._execute(ge,function(Je){de._resolveCallback(Je)},function(Je){de._rejectCallback(Je,j)});j=!1,this._popContext(),void 0!==Be&&de._rejectCallback(Be,!0)}},y.prototype._settlePromiseFromHandler=function(ge,de,j,Be){var Je=Be._bitField;if(0==(65536&Je)){var Qe;Be._pushContext(),de===Re?j&&"number"==typeof j.length?Qe=Wn(ge).apply(this._boundValue(),j):(Qe=hn).e=new me("cannot .spread() a non-array: "+$.classString(j)):Qe=Wn(ge).call(de,j);var xt=Be._popContext();0==(65536&(Je=Be._bitField))&&(Qe===xe?Be._reject(j):Qe===hn?Be._rejectCallback(Qe.e,!1):(nt.checkForgottenReturns(Qe,xt,"",Be,this),Be._resolveCallback(Qe)))}},y.prototype._target=function(){for(var ge=this;ge._isFollowing();)ge=ge._followee();return ge},y.prototype._followee=function(){return this._rejectionHandler0},y.prototype._setFollowee=function(ge){this._rejectionHandler0=ge},y.prototype._settlePromise=function(ge,de,j,Be){var Je=ge instanceof y,Qe=this._bitField,xt=0!=(134217728&Qe);0!=(65536&Qe)?(Je&&ge._invokeInternalOnCancel(),j instanceof ut&&j.isFinallyHandler()?(j.cancelPromise=ge,Wn(de).call(j,Be)===hn&&ge._reject(hn.e)):de===z?ge._fulfill(z.call(j)):j instanceof p?j._promiseCancelled(ge):Je||ge instanceof Xe?ge._cancel():j.cancel()):"function"==typeof de?Je?(xt&&ge._setAsyncGuaranteed(),this._settlePromiseFromHandler(de,j,Be,ge)):de.call(j,Be,ge):j instanceof p?j._isResolved()||(0!=(33554432&Qe)?j._promiseFulfilled(Be,ge):j._promiseRejected(Be,ge)):Je&&(xt&&ge._setAsyncGuaranteed(),0!=(33554432&Qe)?ge._fulfill(Be):ge._reject(Be))},y.prototype._settlePromiseLateCancellationObserver=function(ge){var de=ge.handler,j=ge.promise,Be=ge.receiver,Je=ge.value;"function"==typeof de?j instanceof y?this._settlePromiseFromHandler(de,Be,Je,j):de.call(Be,Je,j):j instanceof y&&j._reject(Je)},y.prototype._settlePromiseCtx=function(ge){this._settlePromise(ge.promise,ge.handler,ge.receiver,ge.value)},y.prototype._settlePromise0=function(ge,de,j){var Be=this._promise0,Je=this._receiverAt(0);this._promise0=void 0,this._receiver0=void 0,this._settlePromise(Be,ge,Je,de)},y.prototype._clearCallbackDataAtIndex=function(ge){var de=4*ge-4;this[de+2]=this[de+3]=this[de+0]=this[de+1]=void 0},y.prototype._fulfill=function(ge){var de=this._bitField;if(!((117506048&de)>>>16)){if(ge===this){var j=O();return this._attachExtraTrace(j),this._reject(j)}this._setFulfilled(),this._rejectionHandler0=ge,(65535&de)>0&&(0!=(134217728&de)?this._settlePromises():fe.settlePromises(this),this._dereferenceTrace())}},y.prototype._reject=function(ge){var de=this._bitField;if(!((117506048&de)>>>16))return this._setRejected(),this._fulfillmentHandler0=ge,this._isFinal()?fe.fatalError(ge,$.isNode):void((65535&de)>0?fe.settlePromises(this):this._ensurePossibleRejectionHandled())},y.prototype._fulfillPromises=function(ge,de){for(var j=1;ge>j;j++){var Be=this._fulfillmentHandlerAt(j),Je=this._promiseAt(j),Qe=this._receiverAt(j);this._clearCallbackDataAtIndex(j),this._settlePromise(Je,Be,Qe,de)}},y.prototype._rejectPromises=function(ge,de){for(var j=1;ge>j;j++){var Be=this._rejectionHandlerAt(j),Je=this._promiseAt(j),Qe=this._receiverAt(j);this._clearCallbackDataAtIndex(j),this._settlePromise(Je,Be,Qe,de)}},y.prototype._settlePromises=function(){var ge=this._bitField,de=65535&ge;if(de>0){if(0!=(16842752&ge)){var j=this._fulfillmentHandler0;this._settlePromise0(this._rejectionHandler0,j,ge),this._rejectPromises(de,j)}else{var Be=this._rejectionHandler0;this._settlePromise0(this._fulfillmentHandler0,Be,ge),this._fulfillPromises(de,Be)}this._setLength(0)}this._clearCancellationData()},y.prototype._settledValue=function(){var ge=this._bitField;return 0!=(33554432&ge)?this._rejectionHandler0:0!=(16777216&ge)?this._fulfillmentHandler0:void 0},typeof Symbol<"u"&&Symbol.toStringTag&&ue.defineProperty(y.prototype,Symbol.toStringTag,{get:function(){return"Object"}}),y.defer=y.pending=function(){return nt.deprecated("Promise.defer","new Promise"),{promise:new y(pe),resolve:C,reject:w}},$.notEnumerableProp(y,"_makeSelfResolutionError",O),o("./method")(y,pe,Fe,A,nt),o("./bind")(y,pe,Fe,nt),o("./cancel")(y,Xe,A,nt),o("./direct_resolve")(y),o("./synchronous_inspection")(y),o("./join")(y,Xe,Fe,pe,fe),y.Promise=y,y.version="3.7.2",o("./call_get.js")(y),o("./generators.js")(y,A,pe,Fe,p,nt),o("./map.js")(y,Xe,A,Fe,pe,nt),o("./nodeify.js")(y),o("./promisify.js")(y,pe),o("./props.js")(y,Xe,Fe,A),o("./race.js")(y,pe,Fe,A),o("./reduce.js")(y,Xe,A,Fe,pe,nt),o("./settle.js")(y,Xe,nt),o("./some.js")(y,Xe,A),o("./timers.js")(y,pe,nt),o("./using.js")(y,A,Fe,Ge,pe,nt),o("./any.js")(y),o("./each.js")(y,pe),o("./filter.js")(y,pe),$.toFastProperties(y),$.toFastProperties(y.prototype),P({a:1}),P({b:2}),P({c:3}),P(1),P(function(){}),P(void 0),P(!1),P(new y(pe)),nt.setBounds(ce.firstLineError,$.lastLineError),y}},{"./any.js":1,"./async":2,"./bind":3,"./call_get.js":5,"./cancel":6,"./catch_filter":7,"./context":8,"./debuggability":9,"./direct_resolve":10,"./each.js":11,"./errors":12,"./es5":13,"./filter.js":14,"./finally":15,"./generators.js":16,"./join":17,"./map.js":18,"./method":19,"./nodeback":20,"./nodeify.js":21,"./promise_array":23,"./promisify.js":24,"./props.js":25,"./race.js":27,"./reduce.js":28,"./settle.js":30,"./some.js":31,"./synchronous_inspection":32,"./thenables":33,"./timers.js":34,"./using.js":35,"./util":36,async_hooks:void 0}],23:[function(o,c,h){c.exports=function(p,m,y,C,w){function O(A){var ne=this._promise=new p(m);A instanceof p&&(ne._propagateFrom(A,3),A.suppressUnhandledRejections()),ne._setOnCancel(this),this._values=A,this._length=0,this._totalResolved=0,this._init(void 0,-2)}var z=o("./util");return z.inherits(O,w),O.prototype.length=function(){return this._length},O.prototype.promise=function(){return this._promise},O.prototype._init=function A(ne,$){var K=y(this._values,this._promise);if(K instanceof p){var q=(K=K._target())._bitField;if(this._values=K,0==(50397184&q))return this._promise._setAsyncGuaranteed(),K._then(A,this._reject,void 0,this,$);if(0==(33554432&q))return 0!=(16777216&q)?this._reject(K._reason()):this._cancel();K=K._value()}if(null!==(K=z.asArray(K)))return 0===K.length?void(-5===$?this._resolveEmptyArray():this._resolve(function P(A){switch(A){case-2:return[];case-3:return{};case-6:return new Map}}($))):void this._iterate(K);var N=C("expecting an array or an iterable object but got "+z.classString(K)).reason();this._promise._rejectCallback(N,!1)},O.prototype._iterate=function(A){var ne=this.getActualLength(A.length);this._length=ne,this._values=this.shouldCopyValues()?new Array(ne):this._values;for(var $=this._promise,K=!1,q=null,N=0;ne>N;++N){var H=y(A[N],$);q=H instanceof p?(H=H._target())._bitField:null,K?null!==q&&H.suppressUnhandledRejections():null!==q?0==(50397184&q)?(H._proxy(this,N),this._values[N]=H):K=0!=(33554432&q)?this._promiseFulfilled(H._value(),N):0!=(16777216&q)?this._promiseRejected(H._reason(),N):this._promiseCancelled(N):K=this._promiseFulfilled(H,N)}K||$._setAsyncGuaranteed()},O.prototype._isResolved=function(){return null===this._values},O.prototype._resolve=function(A){this._values=null,this._promise._fulfill(A)},O.prototype._cancel=function(){!this._isResolved()&&this._promise._isCancellable()&&(this._values=null,this._promise._cancel())},O.prototype._reject=function(A){this._values=null,this._promise._rejectCallback(A,!1)},O.prototype._promiseFulfilled=function(A,ne){return this._values[ne]=A,++this._totalResolved>=this._length&&(this._resolve(this._values),!0)},O.prototype._promiseCancelled=function(){return this._cancel(),!0},O.prototype._promiseRejected=function(A){return this._totalResolved++,this._reject(A),!0},O.prototype._resultCancelled=function(){if(!this._isResolved()){var A=this._values;if(this._cancel(),A instanceof p)A.cancel();else for(var ne=0;ne<A.length;++ne)A[ne]instanceof p&&A[ne].cancel()}},O.prototype.shouldCopyValues=function(){return!0},O.prototype.getActualLength=function(A){return A},O}},{"./util":36}],24:[function(o,c,h){c.exports=function(p,m){function y(pe){return!fe.test(pe)}function C(pe){try{return!0===pe.__isPromisified__}catch{return!1}}function w(pe,Re,xe){var Fe=q.getDataPropertyOrDefault(pe,Re+xe,ue);return!!Fe&&C(Fe)}function A(pe,Re,xe,Fe,Xe){for(var st=new RegExp(me(Re)+"$"),Ge=function O(pe,Re,xe,Fe){for(var Xe=q.inheritedDataKeys(pe),st=[],Ge=0;Ge<Xe.length;++Ge){var nt=Xe[Ge],ut=pe[nt],en=Fe===le||le(nt,ut,pe);"function"!=typeof ut||C(ut)||w(pe,nt,Re)||!Fe(nt,ut,pe,en)||st.push(nt,ut)}return function P(pe,Re,xe){for(var Fe=0;Fe<pe.length;Fe+=2){var Xe=pe[Fe];if(xe.test(Xe))for(var st=Xe.replace(xe,""),Ge=0;Ge<pe.length;Ge+=2)if(pe[Ge]===st)throw new De("Cannot promisify an API that has normal methods with '%s'-suffix\n\n    See http://goo.gl/MqrFmX\n".replace("%s",Re))}}(st,Re,xe),st}(pe,Re,st,xe),nt=0,ut=Ge.length;ut>nt;nt+=2){var en=Ge[nt],nn=Ge[nt+1],hn=en+Re;if(Fe===Pe)pe[hn]=Pe(en,K,en,nn,Re,Xe);else{var Wn=Fe(nn,function(){return Pe(en,K,en,nn,Re,Xe)});q.notEnumerableProp(Wn,"__isPromisified__",!0),pe[hn]=Wn}}return q.toFastProperties(pe),pe}var K={},q=o("./util"),N=o("./nodeback"),H=q.withAppended,re=q.maybeWrapAsError,ie=q.canEvaluate,De=o("./errors").TypeError,ue={__isPromisified__:!0},fe=new RegExp("^(?:"+["arity","length","name","arguments","caller","callee","prototype","__isPromisified__"].join("|")+")$"),le=function(pe){return q.isIdentifier(pe)&&"_"!==pe.charAt(0)&&"constructor"!==pe},me=function(pe){return pe.replace(/([$])/,"\\$")},Pe=ie?void 0:function z(pe,Re,xe,Fe,Xe,st){function Ge(){var en=Re;Re===K&&(en=this);var nn=new p(m);nn._captureStackTrace();var hn="string"==typeof ut&&this!==nt?this[ut]:pe,Wn=N(nn,st);try{hn.apply(en,H(arguments,Wn))}catch(ge){nn._rejectCallback(re(ge),!0,!0)}return nn._isFateSealed()||nn._setAsyncGuaranteed(),nn}var nt=function(){return this}(),ut=pe;return"string"==typeof ut&&(pe=Fe),q.notEnumerableProp(Ge,"__isPromisified__",!0),Ge};p.promisify=function(pe,Re){if("function"!=typeof pe)throw new De("expecting a function but got "+q.classString(pe));if(C(pe))return pe;var Xe=function ne(pe,Re,xe){return Pe(pe,Re,void 0,pe,null,xe)}(pe,void 0===(Re=Object(Re)).context?K:Re.context,!!Re.multiArgs);return q.copyDescriptors(pe,Xe,y),Xe},p.promisifyAll=function(pe,Re){if("function"!=typeof pe&&"object"!=typeof pe)throw new De("the target of promisifyAll must be an object or a function\n\n    See http://goo.gl/MqrFmX\n");var xe=!!(Re=Object(Re)).multiArgs,Fe=Re.suffix;"string"!=typeof Fe&&(Fe="Async");var Xe=Re.filter;"function"!=typeof Xe&&(Xe=le);var st=Re.promisifier;if("function"!=typeof st&&(st=Pe),!q.isIdentifier(Fe))throw new RangeError("suffix must be a valid identifier\n\n    See http://goo.gl/MqrFmX\n");for(var Ge=q.inheritedDataKeys(pe),nt=0;nt<Ge.length;++nt){var ut=pe[Ge[nt]];"constructor"!==Ge[nt]&&q.isClass(ut)&&(A(ut.prototype,Fe,Xe,st,xe),A(ut,Fe,Xe,st,xe))}return A(pe,Fe,Xe,st,xe)}}},{"./errors":12,"./nodeback":20,"./util":36}],25:[function(o,c,h){c.exports=function(p,m,y,C){function w(q){var N,H=!1;if(void 0!==O&&q instanceof O)N=$(q),H=!0;else{var re=ne.keys(q),ie=re.length;N=new Array(2*ie);for(var De=0;ie>De;++De){var ee=re[De];N[De]=q[ee],N[De+ie]=ee}}this.constructor$(N),this._isMap=H,this._init$(void 0,H?-6:-3)}function P(q){var N,H=y(q);return A(H)?(N=H instanceof p?H._then(p.props,void 0,void 0,void 0,void 0):new w(H).promise(),H instanceof p&&N._propagateFrom(H,2),N):C("cannot await properties of a non-object\n\n    See http://goo.gl/MqrFmX\n")}var O,z=o("./util"),A=z.isObject,ne=o("./es5");"function"==typeof Map&&(O=Map);var $=function(){function q(re,ie){this[N]=re,this[N+H]=ie,N++}var N=0,H=0;return function(re){H=re.size,N=0;var ie=new Array(2*re.size);return re.forEach(q,ie),ie}}();z.inherits(w,m),w.prototype._init=function(){},w.prototype._promiseFulfilled=function(q,N){if(this._values[N]=q,++this._totalResolved>=this._length){var re;if(this._isMap)re=function(q){for(var N=new O,H=q.length/2|0,re=0;H>re;++re)N.set(q[H+re],q[re]);return N}(this._values);else{re={};for(var ie=this.length(),De=0,ee=this.length();ee>De;++De)re[this._values[De+ie]]=this._values[De]}return this._resolve(re),!0}return!1},w.prototype.shouldCopyValues=function(){return!1},w.prototype.getActualLength=function(q){return q>>1},p.prototype.props=function(){return P(this)},p.props=function(q){return P(q)}}},{"./es5":13,"./util":36}],26:[function(o,c,h){function m(y){this._capacity=y,this._length=0,this._front=0}m.prototype._willBeOverCapacity=function(y){return this._capacity<y},m.prototype._pushOne=function(y){var C=this.length();this._checkCapacity(C+1),this[this._front+C&this._capacity-1]=y,this._length=C+1},m.prototype.push=function(y,C,w){var P=this.length()+3;if(this._willBeOverCapacity(P))return this._pushOne(y),this._pushOne(C),void this._pushOne(w);var O=this._front+P-3;this._checkCapacity(P);var z=this._capacity-1;this[O+0&z]=y,this[O+1&z]=C,this[O+2&z]=w,this._length=P},m.prototype.shift=function(){var y=this._front,C=this[y];return this[y]=void 0,this._front=y+1&this._capacity-1,this._length--,C},m.prototype.length=function(){return this._length},m.prototype._checkCapacity=function(y){this._capacity<y&&this._resizeTo(this._capacity<<1)},m.prototype._resizeTo=function(y){var C=this._capacity;this._capacity=y,function p(y,C,w,P,O){for(var z=0;O>z;++z)w[z+P]=y[z+C],y[z+C]=void 0}(this,0,this,C,this._front+this._length&C-1)},c.exports=m},{}],27:[function(o,c,h){c.exports=function(p,m,y,C){function w(z,A){var ne=y(z);if(ne instanceof p)return O(ne);if(null===(z=P.asArray(z)))return C("expecting an array or an iterable object but got "+P.classString(z));var $=new p(m);void 0!==A&&$._propagateFrom(A,3);for(var K=$._fulfill,q=$._reject,N=0,H=z.length;H>N;++N){var re=z[N];(void 0!==re||N in z)&&p.cast(re)._then(K,q,void 0,$,null)}return $}var P=o("./util"),O=function(z){return z.then(function(A){return w(A,z)})};p.race=function(z){return w(z,void 0)},p.prototype.race=function(){return w(this,void 0)}}},{"./util":36}],28:[function(o,c,h){c.exports=function(p,m,y,C,w,P){function O(N,H,re,ie){this.constructor$(N);var De=p._getContext();this._fn=K.contextBind(De,H),void 0!==re&&(re=p.resolve(re))._attachCancellationCallback(this),this._initialValue=re,this._currentCancellable=null,this._eachValues=ie===w?Array(this._length):0===ie?null:void 0,this._promise._captureStackTrace(),this._init$(void 0,-5)}function z(N,H){this.isFulfilled()?H._resolve(N):H._reject(N)}function A(N,H,re,ie){return"function"!=typeof H?y("expecting a function but got "+K.classString(H)):new O(N,H,re,ie).promise()}function ne(N){this.accum=N,this.array._gotAccum(N);var H=C(this.value,this.array._promise);return H instanceof p?(this.array._currentCancellable=H,H._then($,void 0,void 0,this,void 0)):$.call(this,H)}function $(N){var De,H=this.array,re=H._promise,ie=q(H._fn);re._pushContext(),(De=void 0!==H._eachValues?ie.call(re._boundValue(),N,this.index,this.length):ie.call(re._boundValue(),this.accum,N,this.index,this.length))instanceof p&&(H._currentCancellable=De);var ee=re._popContext();return P.checkForgottenReturns(De,ee,void 0!==H._eachValues?"Promise.each":"Promise.reduce",re),De}var K=o("./util"),q=K.tryCatch;K.inherits(O,m),O.prototype._gotAccum=function(N){null!=this._eachValues&&N!==w&&this._eachValues.push(N)},O.prototype._eachComplete=function(N){return null!==this._eachValues&&this._eachValues.push(N),this._eachValues},O.prototype._init=function(){},O.prototype._resolveEmptyArray=function(){this._resolve(void 0!==this._eachValues?this._eachValues:this._initialValue)},O.prototype.shouldCopyValues=function(){return!1},O.prototype._resolve=function(N){this._promise._resolveCallback(N),this._values=null},O.prototype._resultCancelled=function(N){return N===this._initialValue?this._cancel():void(this._isResolved()||(this._resultCancelled$(),this._currentCancellable instanceof p&&this._currentCancellable.cancel(),this._initialValue instanceof p&&this._initialValue.cancel()))},O.prototype._iterate=function(N){this._values=N;var H,re,ie=N.length;void 0!==this._initialValue?(H=this._initialValue,re=0):(H=p.resolve(N[0]),re=1),this._currentCancellable=H;for(var De=re;ie>De;++De){var ee=N[De];ee instanceof p&&ee.suppressUnhandledRejections()}if(!H.isRejected())for(;ie>re;++re)H=H._then(ne,void 0,void 0,{accum:null,value:N[re],index:re,length:ie,array:this},void 0),0==(127&re)&&H._setNoAsyncGuarantee();void 0!==this._eachValues&&(H=H._then(this._eachComplete,void 0,void 0,this,void 0)),H._then(z,z,void 0,H,this)},p.prototype.reduce=function(N,H){return A(this,N,H,null)},p.reduce=function(N,H,re,ie){return A(N,H,re,ie)}}},{"./util":36}],29:[function(o,c,h){var p,z,A,ne,$,m=o("./util"),C=m.getNativePromise();if(m.isNode&&typeof MutationObserver>"u"){var w=global.setImmediate,P=process.nextTick;p=m.isRecentNode?function(z){w.call(global,z)}:function(z){P.call(process,z)}}else if("function"==typeof C&&"function"==typeof C.resolve){var O=C.resolve();p=function(z){O.then(z)}}else p=typeof MutationObserver<"u"&&(typeof window>"u"||!window.navigator||!window.navigator.standalone&&!window.cordova)&&"classList"in document.documentElement?(z=document.createElement("div"),A={attributes:!0},ne=!1,$=document.createElement("div"),new MutationObserver(function(){z.classList.toggle("foo"),ne=!1}).observe($,A),function(N){var H=new MutationObserver(function(){H.disconnect(),N()});H.observe(z,A),ne||(ne=!0,$.classList.toggle("foo"))}):typeof setImmediate<"u"?function(z){setImmediate(z)}:typeof setTimeout<"u"?function(z){setTimeout(z,0)}:function(){throw new Error("No async scheduler available\n\n    See http://goo.gl/MqrFmX\n")};c.exports=p},{"./util":36}],30:[function(o,c,h){c.exports=function(p,m,y){function C(O){this.constructor$(O)}var w=p.PromiseInspection;o("./util").inherits(C,m),C.prototype._promiseResolved=function(O,z){return this._values[O]=z,++this._totalResolved>=this._length&&(this._resolve(this._values),!0)},C.prototype._promiseFulfilled=function(O,z){var A=new w;return A._bitField=33554432,A._settledValueField=O,this._promiseResolved(z,A)},C.prototype._promiseRejected=function(O,z){var A=new w;return A._bitField=16777216,A._settledValueField=O,this._promiseResolved(z,A)},p.settle=function(O){return y.deprecated(".settle()",".reflect()"),new C(O).promise()},p.allSettled=function(O){return new C(O).promise()},p.prototype.settle=function(){return p.settle(this)}}},{"./util":36}],31:[function(o,c,h){c.exports=function(p,m,y){function C($){this.constructor$($),this._howMany=0,this._unwrap=!1,this._initialized=!1}function w($,K){if((0|K)!==K||0>K)return y("expecting a positive integer\n\n    See http://goo.gl/MqrFmX\n");var q=new C($),N=q.promise();return q.setHowMany(K),q.init(),N}var P=o("./util"),O=o("./errors").RangeError,z=o("./errors").AggregateError,A=P.isArray,ne={};P.inherits(C,m),C.prototype._init=function(){if(this._initialized){if(0===this._howMany)return void this._resolve([]);this._init$(void 0,-5);var $=A(this._values);!this._isResolved()&&$&&this._howMany>this._canPossiblyFulfill()&&this._reject(this._getRangeError(this.length()))}},C.prototype.init=function(){this._initialized=!0,this._init()},C.prototype.setUnwrap=function(){this._unwrap=!0},C.prototype.howMany=function(){return this._howMany},C.prototype.setHowMany=function($){this._howMany=$},C.prototype._promiseFulfilled=function($){return this._addFulfilled($),this._fulfilled()===this.howMany()&&(this._values.length=this.howMany(),1===this.howMany()&&this._unwrap?this._resolve(this._values[0]):this._resolve(this._values),!0)},C.prototype._promiseRejected=function($){return this._addRejected($),this._checkOutcome()},C.prototype._promiseCancelled=function(){return this._values instanceof p||null==this._values?this._cancel():(this._addRejected(ne),this._checkOutcome())},C.prototype._checkOutcome=function(){if(this.howMany()>this._canPossiblyFulfill()){for(var $=new z,K=this.length();K<this._values.length;++K)this._values[K]!==ne&&$.push(this._values[K]);return $.length>0?this._reject($):this._cancel(),!0}return!1},C.prototype._fulfilled=function(){return this._totalResolved},C.prototype._rejected=function(){return this._values.length-this.length()},C.prototype._addRejected=function($){this._values.push($)},C.prototype._addFulfilled=function($){this._values[this._totalResolved++]=$},C.prototype._canPossiblyFulfill=function(){return this.length()-this._rejected()},C.prototype._getRangeError=function($){return new O("Input array must contain at least "+this._howMany+" items but contains only "+$+" items")},C.prototype._resolveEmptyArray=function(){this._reject(this._getRangeError(0))},p.some=function($,K){return w($,K)},p.prototype.some=function($){return w(this,$)},p._SomePromiseArray=C}},{"./errors":12,"./util":36}],32:[function(o,c,h){c.exports=function(p){function m(A){void 0!==A?(A=A._target(),this._bitField=A._bitField,this._settledValueField=A._isFateSealed()?A._settledValue():void 0):(this._bitField=0,this._settledValueField=void 0)}m.prototype._settledValue=function(){return this._settledValueField};var y=m.prototype.value=function(){if(!this.isFulfilled())throw new TypeError("cannot get fulfillment value of a non-fulfilled promise\n\n    See http://goo.gl/MqrFmX\n");return this._settledValue()},C=m.prototype.error=m.prototype.reason=function(){if(!this.isRejected())throw new TypeError("cannot get rejection reason of a non-rejected promise\n\n    See http://goo.gl/MqrFmX\n");return this._settledValue()},w=m.prototype.isFulfilled=function(){return 0!=(33554432&this._bitField)},P=m.prototype.isRejected=function(){return 0!=(16777216&this._bitField)},O=m.prototype.isPending=function(){return 0==(50397184&this._bitField)},z=m.prototype.isResolved=function(){return 0!=(50331648&this._bitField)};m.prototype.isCancelled=function(){return 0!=(8454144&this._bitField)},p.prototype.__isCancelled=function(){return 65536==(65536&this._bitField)},p.prototype._isCancelled=function(){return this._target().__isCancelled()},p.prototype.isCancelled=function(){return 0!=(8454144&this._target()._bitField)},p.prototype.isPending=function(){return O.call(this._target())},p.prototype.isRejected=function(){return P.call(this._target())},p.prototype.isFulfilled=function(){return w.call(this._target())},p.prototype.isResolved=function(){return z.call(this._target())},p.prototype.value=function(){return y.call(this._target())},p.prototype.reason=function(){var A=this._target();return A._unsetRejectionIsUnhandled(),C.call(A)},p.prototype._value=function(){return this._settledValue()},p.prototype._reason=function(){return this._unsetRejectionIsUnhandled(),this._settledValue()},p.PromiseInspection=m}},{}],33:[function(o,c,h){c.exports=function(p,m){var z=o("./util"),A=z.errorObj,ne=z.isObject,$={}.hasOwnProperty;return function y(K,q){if(ne(K)){if(K instanceof p)return K;var N=function w(K){try{return function C(K){return K.then}(K)}catch(q){return A.e=q,A}}(K);if(N===A){q&&q._pushContext();var H=p.reject(N.e);return q&&q._popContext(),H}if("function"==typeof N)return function P(K){try{return $.call(K,"_promise0")}catch{return!1}}(K)?(H=new p(m),K._then(H._fulfill,H._reject,void 0,H,null),H):function O(K,q,N){var ie=new p(m),De=ie;N&&N._pushContext(),ie._captureStackTrace(),N&&N._popContext();var ee=!0,ue=z.tryCatch(q).call(K,function H(ce){ie&&(ie._resolveCallback(ce),ie=null)},function re(ce){ie&&(ie._rejectCallback(ce,ee,!0),ie=null)});return ee=!1,ie&&ue===A&&(ie._rejectCallback(ue.e,!0,!0),ie=null),De}(K,N,q)}return K}}},{"./util":36}],34:[function(o,c,h){c.exports=function(p,m,y){function C(K){this.handle=K}function w(K){return clearTimeout(this.handle),K}function P(K){throw clearTimeout(this.handle),K}var O=o("./util"),z=p.TimeoutError;C.prototype._resultCancelled=function(){clearTimeout(this.handle)};var A=function(K){return ne(+this).thenReturn(K)},ne=p.delay=function(K,q){var N,H;return void 0!==q?(N=p.resolve(q)._then(A,null,null,K,void 0),y.cancellation()&&q instanceof p&&N._setOnCancel(q)):(N=new p(m),H=setTimeout(function(){N._fulfill()},+K),y.cancellation()&&N._setOnCancel(new C(H)),N._captureStackTrace()),N._setAsyncGuaranteed(),N};p.prototype.delay=function(K){return ne(K,this)},p.prototype.timeout=function(K,q){K=+K;var N,H,re=new C(setTimeout(function(){N.isPending()&&function(K,q,N){var H;H="string"!=typeof q?q instanceof Error?q:new z("operation timed out"):new z(q),O.markAsOriginatingFromRejection(H),K._attachExtraTrace(H),K._reject(H),N?.cancel()}(N,q,H)},K));return y.cancellation()?(H=this.then(),(N=H._then(w,P,void 0,re,void 0))._setOnCancel(re)):N=this._then(w,P,void 0,re,void 0),N}}},{"./util":36}],35:[function(o,c,h){c.exports=function(p,m,y,C,w,P){function O(ue){setTimeout(function(){throw ue},0)}function A(ue,ce){var le=0,me=ue.length,Pe=new p(w);return function fe(){if(le>=me)return Pe._fulfill();var pe=function z(ue){var ce=y(ue);return ce!==ue&&"function"==typeof ue._isDisposable&&"function"==typeof ue._getDisposer&&ue._isDisposable()&&ce._setDisposable(ue._getDisposer()),ce}(ue[le++]);if(pe instanceof p&&pe._isDisposable()){try{pe=y(pe._getDisposer().tryDispose(ce),ue.promise)}catch(Re){return O(Re)}if(pe instanceof p)return pe._then(fe,O,null,null,null)}fe()}(),Pe}function ne(ue,ce,fe){this._data=ue,this._promise=ce,this._context=fe}function $(ue,ce,fe){this.constructor$(ue,ce,fe)}function K(ue){return ne.isDisposer(ue)?(this.resources[this.index]._setDisposable(ue),ue.promise()):ue}function q(ue){this.length=ue,this.promise=null,this[ue-1]=null}var N=o("./util"),H=o("./errors").TypeError,re=o("./util").inherits,ie=N.errorObj,De=N.tryCatch,ee={};ne.prototype.data=function(){return this._data},ne.prototype.promise=function(){return this._promise},ne.prototype.resource=function(){return this.promise().isFulfilled()?this.promise().value():ee},ne.prototype.tryDispose=function(ue){var ce=this.resource(),fe=this._context;void 0!==fe&&fe._pushContext();var le=ce!==ee?this.doDispose(ce,ue):null;return void 0!==fe&&fe._popContext(),this._promise._unsetDisposable(),this._data=null,le},ne.isDisposer=function(ue){return null!=ue&&"function"==typeof ue.resource&&"function"==typeof ue.tryDispose},re($,ne),$.prototype.doDispose=function(ue,ce){return this.data().call(ue,ue,ce)},q.prototype._resultCancelled=function(){for(var ue=this.length,ce=0;ue>ce;++ce){var fe=this[ce];fe instanceof p&&fe.cancel()}},p.using=function(){var ue=arguments.length;if(2>ue)return m("you must pass at least 2 arguments to Promise.using");var ce=arguments[ue-1];if("function"!=typeof ce)return m("expecting a function but got "+N.classString(ce));var fe,le=!0;2===ue&&Array.isArray(arguments[0])?(ue=(fe=arguments[0]).length,le=!1):(fe=arguments,ue--);for(var me=new q(ue),Pe=0;ue>Pe;++Pe){var pe=fe[Pe];if(ne.isDisposer(pe)){var Re=pe;(pe=pe.promise())._setDisposable(Re)}else{var xe=y(pe);xe instanceof p&&(pe=xe._then(K,null,null,{resources:me,index:Pe},void 0))}me[Pe]=pe}var Fe=new Array(me.length);for(Pe=0;Pe<Fe.length;++Pe)Fe[Pe]=p.resolve(me[Pe]).reflect();var Xe=p.all(Fe).then(function(Ge){for(var nt=0;nt<Ge.length;++nt){var ut=Ge[nt];if(ut.isRejected())return ie.e=ut.error(),ie;if(!ut.isFulfilled())return void Xe.cancel();Ge[nt]=ut.value()}st._pushContext(),ce=De(ce);var en=le?ce.apply(void 0,Ge):ce(Ge),nn=st._popContext();return P.checkForgottenReturns(en,nn,"Promise.using",st),en}),st=Xe.lastly(function(){var Ge=new p.PromiseInspection(Xe);return A(me,Ge)});return me.promise=st,st._setOnCancel(me),st},p.prototype._setDisposable=function(ue){this._bitField=131072|this._bitField,this._disposer=ue},p.prototype._isDisposable=function(){return(131072&this._bitField)>0},p.prototype._getDisposer=function(){return this._disposer},p.prototype._unsetDisposable=function(){this._bitField=-131073&this._bitField,this._disposer=void 0},p.prototype.disposer=function(ue){if("function"==typeof ue)return new $(ue,this,C());throw new H}}},{"./errors":12,"./util":36}],36:[function(o,c,h){function p(){try{var de=Re;return Re=null,de.apply(this,arguments)}catch(j){return pe.e=j,pe}}function y(de){return null==de||!0===de||!1===de||"string"==typeof de||"number"==typeof de}function z(de,j,Be){return y(de)||me.defineProperty(de,j,{value:Be,configurable:!0,enumerable:!1,writable:!0}),de}function N(de){try{return de+""}catch{return"[no string representation]"}}function H(de){return de instanceof Error||null!==de&&"object"==typeof de&&"string"==typeof de.message&&"string"==typeof de.name}function De(de){return H(de)&&me.propertyIsWritable(de,"stack")}function ee(de){return{}.toString.call(de)}var Re,me=o("./es5"),Pe=typeof navigator>"u",pe={e:{}},xe=typeof self<"u"?self:typeof window<"u"?window:typeof global<"u"?global:void 0!==this?this:null,Xe=function(){var de=[Array.prototype,Object.prototype,Function.prototype],j=function(Qe){for(var xt=0;xt<de.length;++xt)if(de[xt]===Qe)return!0;return!1};if(me.isES5){var Be=Object.getOwnPropertyNames;return function(Qe){for(var xt=[],Dn=Object.create(null);null!=Qe&&!j(Qe);){var pn;try{pn=Be(Qe)}catch{return xt}for(var ui=0;ui<pn.length;++ui){var zr=pn[ui];if(!Dn[zr]){Dn[zr]=!0;var ji=Object.getOwnPropertyDescriptor(Qe,zr);null!=ji&&null==ji.get&&null==ji.set&&xt.push(zr)}}Qe=me.getPrototypeOf(Qe)}return xt}}var Je={}.hasOwnProperty;return function(Qe){if(j(Qe))return[];var xt=[];e:for(var Dn in Qe)if(Je.call(Qe,Dn))xt.push(Dn);else{for(var pn=0;pn<de.length;++pn)if(Je.call(de[pn],Dn))continue e;xt.push(Dn)}return xt}}(),st=/this\s*\.\s*\S+\s*=/,Ge=/^[a-z$_][a-z$_0-9]*$/i,nt="stack"in new Error?function(de){return De(de)?de:new Error(N(de))}:function(de){if(De(de))return de;try{throw new Error(N(de))}catch(j){return j}},ut=function(de){return me.isArray(de)?de:null};if(typeof Symbol<"u"&&Symbol.iterator){var en="function"==typeof Array.from?function(de){return Array.from(de)}:function(de){for(var j,Be=[],Je=de[Symbol.iterator]();!(j=Je.next()).done;)Be.push(j.value);return Be};ut=function(de){return me.isArray(de)?de:null!=de&&"function"==typeof de[Symbol.iterator]?en(de):null}}var Wn,de,nn=typeof process<"u"&&"[object process]"===ee(process).toLowerCase(),hn=typeof process<"u"&&typeof process.env<"u",ge={setReflectHandler:function(de){Wn=de},isClass:function ne(de){try{if("function"==typeof de){var j=me.names(de.prototype),Be=me.isES5&&j.length>1,Je=j.length>0&&!(1===j.length&&"constructor"===j[0]),Qe=st.test(de+"")&&me.names(de).length>0;if(Be||Je||Qe)return!0}return!1}catch{return!1}},isIdentifier:function K(de){return Ge.test(de)},inheritedDataKeys:Xe,getDataPropertyOrDefault:function O(de,j,Be){if(!me.isES5)return{}.hasOwnProperty.call(de,j)?de[j]:void 0;var Je=Object.getOwnPropertyDescriptor(de,j);return null!=Je?null==Je.get&&null==Je.set?Je.value:Be:void 0},thrower:function A(de){throw de},isArray:me.isArray,asArray:ut,notEnumerableProp:z,isPrimitive:y,isObject:function C(de){return"function"==typeof de||"object"==typeof de&&null!==de},isError:H,canEvaluate:Pe,errorObj:pe,tryCatch:function m(de){return Re=de,p},inherits:function(de,j){function Be(){for(var Qe in this.constructor=de,this.constructor$=j,j.prototype)Je.call(j.prototype,Qe)&&"$"!==Qe.charAt(Qe.length-1)&&(this[Qe+"$"]=j.prototype[Qe])}var Je={}.hasOwnProperty;return Be.prototype=j.prototype,de.prototype=new Be,de.prototype},withAppended:function P(de,j){var Be,Je=de.length,Qe=new Array(Je+1);for(Be=0;Je>Be;++Be)Qe[Be]=de[Be];return Qe[Be]=j,Qe},maybeWrapAsError:function w(de){return y(de)?new Error(N(de)):de},toFastProperties:function $(de){function j(){}function Be(){return typeof Je.foo}j.prototype=de;var Je=new j;return Be(),Be(),de},filledRange:function q(de,j,Be){for(var Je=new Array(de),Qe=0;de>Qe;++Qe)Je[Qe]=j+Qe+Be;return Je},toString:N,canAttachTrace:De,ensureErrorObject:nt,originatesFromRejection:function ie(de){return null!=de&&(de instanceof Error.__BluebirdErrorTypes__.OperationalError||!0===de.isOperational)},markAsOriginatingFromRejection:function re(de){try{z(de,"isOperational",!0)}catch{}},classString:ee,copyDescriptors:function ue(de,j,Be){for(var Je=me.names(de),Qe=0;Qe<Je.length;++Qe){var xt=Je[Qe];if(Be(xt))try{me.defineProperty(j,xt,me.getDescriptor(de,xt))}catch{}}},isNode:nn,hasEnvVariables:hn,env:function ce(de){return hn?process.env[de]:void 0},global:xe,getNativePromise:function fe(){if("function"==typeof Promise)try{if("[object Promise]"===ee(new Promise(function(){})))return Promise}catch{}},contextBind:function le(de,j){if(null===de||"function"!=typeof j||j===Wn)return j;null!==de.domain&&(j=de.domain.bind(j));var Be=de.async;if(null!==Be){var Je=j;j=function(){var Qe=new Array(2).concat([].slice.call(arguments));return Qe[0]=Je,Qe[1]=this,Be.runInAsyncScope.apply(Be,Qe)}}return j}};ge.isRecentNode=ge.isNode&&(process.versions&&process.versions.node?de=process.versions.node.split(".").map(Number):process.version&&(de=process.version.split(".").map(Number)),0===de[0]&&de[1]>10||de[0]>0),ge.nodeSupportsAsyncResource=ge.isNode&&function(){var de=!1;try{de="function"==typeof o("async_hooks").AsyncResource.prototype.runInAsyncScope}catch{de=!1}return de}(),ge.isNode&&ge.toFastProperties(process);try{throw new Error}catch(de){ge.lastLineError=de}c.exports=ge},{"./es5":13,async_hooks:void 0}]},{},[4])(4)}),typeof window<"u"&&null!==window?window.P=window.Promise:typeof self<"u"&&null!==self&&(self.P=self.Promise)),B.DWT.bNpm=!0,B.DWT.dbrCanvasMaxWH=4096,B.aryAddonReadyFun=[],B.AddonReady=function(e){B.aryAddonReadyFun.push(e)},(B=self.Dynamsoft||{}).DWT=B.DWT||{},B.DBR=B.DBR||{},B.aryAddonReadyFun=B.aryAddonReadyFun||[],B.AddonReady=B.AddonReady||function(e){B.aryAddonReadyFun.push(e)},function(){B.BarcodeReaderAddon=B.BarcodeReaderAddon||{};var e=B.BarcodeReaderAddon;e.Version="9.4.0.1025",e._decoding=!1,e._decodeQueue=[],e._decodeNext=function(){var n,t;0==e._decodeQueue.length?e._decoding=!1:(n=(t=e._decodeQueue[0]).method,t=t.args,e._decodeQueue.splice(0,1),n.apply(null,t))},e._defaultRuntimeSettingsStr="",e._defaultTemplateStr="",e._activeXInstance=!1,e.BarcodeReaderException=function(){var t,n=B.DBR.EnumErrorCode.DBR_UNKNOWN;return(t="number"==typeof(t=arguments[0])?(n=t,new Error(arguments[1])):new Error(t)).code=n,t},e.RemoveNonPrintableChar=function(n){return B.Lib.isString(n)?n.replace(/[^\x20-\x7E]|(\\")/g,""):n},e.errors={webcamNotInstalled:"The Webcam add-on not installed.",nonServiceNotSupportWebcamDecode:"The BarcodeReader add-on does not support reading barcodes from video streams.",decodeResultEmpty:"decode result is empty.",ServiceEditionNotSupportDbr:"The BarcodeReader add-on does not support your Operating System.",ServiceEditionNotSupportWasmMode:"You cannot call this method on this WebTwain instance."},e._activeXMaxIEVersion=9,e.logLevel=3,B.DBR.EnumAccompanyingTextRecognitionMode={ATRM_GENERAL:1,ATRM_SKIP:0},B.DBR.EnumBarcodeColourMode={BICM_DARK_ON_LIGHT:1,BICM_LIGHT_ON_DARK:2,BICM_DARK_ON_DARK:4,BICM_LIGHT_ON_LIGHT:8,BICM_DARK_LIGHT_MIXED:16,BICM_DARK_ON_LIGHT_DARK_SURROUNDING:32,BICM_SKIP:0},B.DBR.EnumBarcodeComplementMode={BCM_AUTO:1,BCM_GENERAL:2,BCM_SKIP:0},B.DBR.EnumBarcodeFormat={BF_ALL:-32505857,BF_ONED:2047,BF_GS1_DATABAR:260096,BF_CODE_39:1,BF_CODE_128:2,BF_CODE_93:4,BF_CODABAR:8,BF_ITF:16,BF_EAN_13:32,BF_EAN_8:64,BF_UPC_A:128,BF_UPC_E:256,BF_INDUSTRIAL_25:512,BF_CODE_39_EXTENDED:1024,BF_GS1_DATABAR_OMNIDIRECTIONAL:2048,BF_GS1_DATABAR_TRUNCATED:4096,BF_GS1_DATABAR_STACKED:8192,BF_GS1_DATABAR_STACKED_OMNIDIRECTIONAL:16384,BF_GS1_DATABAR_EXPANDED:32768,BF_GS1_DATABAR_EXPANDED_STACKED:65536,BF_GS1_DATABAR_LIMITED:131072,BF_PATCHCODE:262144,BF_PDF417:33554432,BF_QR_CODE:67108864,BF_DATAMATRIX:134217728,BF_AZTEC:268435456,BF_MAXICODE:536870912,BF_MICRO_QR:1073741824,BF_MICRO_PDF417:524288,BF_GS1_COMPOSITE:-2147483648,BF_NULL:0},B.DBR.EnumBarcodeFormat_2={BF2_NULL:0,BF2_POSTALCODE:32505856,BF2_NONSTANDARD_BARCODE:1,BF2_USPSINTELLIGENTMAIL:1048576,BF2_POSTNET:2097152,BF2_PLANET:4194304,BF2_AUSTRALIANPOST:8388608,BF2_RM4SCC:16777216,BF2_DOTCODE:2},B.DBR.EnumBinarizationMode={BM_AUTO:1,BM_LOCAL_BLOCK:2,BM_SKIP:0},B.DBR.EnumClarityCalculationMethod={ECCM_CONTRAST:1},B.DBR.EnumClarityFilterMode={CFM_GENERAL:1},B.DBR.EnumColourClusteringMode={CCM_AUTO:1,CCM_GENERAL_HSV:2,CCM_SKIP:0},B.DBR.EnumColourConversionMode={CICM_GENERAL:1,CICM_SKIP:0},B.DBR.EnumConflictMode={CM_IGNORE:1,CM_OVERWRITE:2},B.DBR.EnumDeformationResistingMode={DRM_AUTO:1,DRM_GENERAL:2,DRM_SKIP:0},B.DBR.EnumDPMCodeReadingMode={DPMCRM_AUTO:1,DPMCRM_GENERAL:2,DPMCRM_SKIP:0},B.DBR.EnumErrorCode={DBR_SYSTEM_EXCEPTION:1,DBR_SUCCESS:0,DBR_UNKNOWN:-1e4,DBR_NO_MEMORY:-10001,DBR_NULL_REFERENCE:-10002,DBR_LICENSE_INVALID:-10003,DBR_LICENSE_EXPIRED:-10004,DBR_FILE_NOT_FOUND:-10005,DBR_FILETYPE_NOT_SUPPORTED:-10006,DBR_BPP_NOT_SUPPORTED:-10007,DBR_INDEX_INVALID:-10008,DBR_BARCODE_FORMAT_INVALID:-10009,DBR_CUSTOM_REGION_INVALID:-10010,DBR_MAX_BARCODE_NUMBER_INVALID:-10011,DBR_IMAGE_READ_FAILED:-10012,DBR_TIFF_READ_FAILED:-10013,DBR_QR_LICENSE_INVALID:-10016,DBR_1D_LICENSE_INVALID:-10017,DBR_DIB_BUFFER_INVALID:-10018,DBR_PDF417_LICENSE_INVALID:-10019,DBR_DATAMATRIX_LICENSE_INVALID:-10020,DBR_PDF_READ_FAILED:-10021,DBR_PDF_DLL_MISSING:-10022,DBR_PAGE_NUMBER_INVALID:-10023,DBR_CUSTOM_SIZE_INVALID:-10024,DBR_CUSTOM_MODULESIZE_INVALID:-10025,DBR_RECOGNITION_TIMEOUT:-10026,DBR_JSON_PARSE_FAILED:-10030,DBR_JSON_TYPE_INVALID:-10031,DBR_JSON_KEY_INVALID:-10032,DBR_JSON_VALUE_INVALID:-10033,DBR_JSON_NAME_KEY_MISSING:-10034,DBR_JSON_NAME_VALUE_DUPLICATED:-10035,DBR_TEMPLATE_NAME_INVALID:-10036,DBR_JSON_NAME_REFERENCE_INVALID:-10037,DBR_PARAMETER_VALUE_INVALID:-10038,DBR_DOMAIN_NOT_MATCHED:-10039,DBR_RESERVEDINFO_NOT_MATCHED:-10040,DBR_AZTEC_LICENSE_INVALID:-10041,DBR_LICENSE_DLL_MISSING:-10042,DBR_LICENSEKEY_NOT_MATCHED:-10043,DBR_REQUESTED_FAILED:-10044,DBR_LICENSE_INIT_FAILED:-10045,DBR_PATCHCODE_LICENSE_INVALID:-10046,DBR_POSTALCODE_LICENSE_INVALID:-10047,DBR_DPM_LICENSE_INVALID:-10048,DBR_FRAME_DECODING_THREAD_EXISTS:-10049,DBR_STOP_DECODING_THREAD_FAILED:-10050,DBR_SET_MODE_ARGUMENT_ERROR:-10051,DBR_LICENSE_CONTENT_INVALID:-10052,DBR_LICENSE_KEY_INVALID:-10053,DBR_LICENSE_DEVICE_RUNS_OUT:-10054,DBR_GET_MODE_ARGUMENT_ERROR:-10055,DBR_IRT_LICENSE_INVALID:-10056,DBR_MAXICODE_LICENSE_INVALID:-10057,DBR_GS1_DATABAR_LICENSE_INVALID:-10058,DBR_GS1_COMPOSITE_LICENSE_INVALID:-10059,DBR_DOTCODE_LICENSE_INVALID:-10061,DMERR_FAILED_TO_REACH_LTS:-20200},B.DBR.EnumGrayscaleTransformationMode={GTM_INVERTED:1,GTM_ORIGINAL:2,GTM_SKIP:0},B.DBR.EnumImagePixelFormat={IPF_Binary:0,IPF_BinaryInverted:1,IPF_GrayScaled:2,IPF_NV21:3,IPF_RGB_565:4,IPF_RGB_555:5,IPF_RGB_888:6,IPF_ARGB_8888:7,IPF_RGB_161616:8,IPF_ARGB_16161616:9,IPF_ABGR_8888:10,IPF_ABGR_16161616:11,IPF_BGR_888:12},B.DBR.EnumImagePreprocessingMode={IPM_AUTO:1,IPM_GENERAL:2,IPM_GRAY_EQUALIZE:4,IPM_GRAY_SMOOTH:8,IPM_SHARPEN_SMOOTH:16,IPM_MORPHOLOGY:32,IPM_SKIP:0},B.DBR.EnumIMResultDataType={IMRDT_IMAGE:1,IMRDT_CONTOUR:2,IMRDT_LINESEGMENT:4,IMRDT_LOCALIZATIONRESULT:8,IMRDT_REGIONOFINTEREST:16,IMRDT_QUADRILATERAL:32},B.DBR.EnumIntermediateResultSavingMode={IRSM_MEMORY:1,IRSM_FILESYSTEM:2,IRSM_BOTH:4},B.DBR.EnumIntermediateResultType={IRT_NO_RESULT:0,IRT_ORIGINAL_IMAGE:1,IRT_COLOUR_CLUSTERED_IMAGE:2,IRT_COLOUR_CONVERTED_GRAYSCALE_IMAGE:4,IRT_TRANSFORMED_GRAYSCALE_IMAGE:8,IRT_PREDETECTED_REGION:16,IRT_PREPROCESSED_IMAGE:32,IRT_BINARIZED_IMAGE:64,IRT_TEXT_ZONE:128,IRT_CONTOUR:256,IRT_LINE_SEGMENT:512,IRT_FORM:1024,IRT_SEGMENTATION_BLOCK:2048,IRT_TYPED_BARCODE_ZONE:4096,IRT_PREDETECTED_QUADRILATERAL:8192},B.DBR.EnumLocalizationMode={LM_SKIP:0,LM_AUTO:1,LM_CONNECTED_BLOCKS:2,LM_LINES:8,LM_STATISTICS:4,LM_SCAN_DIRECTLY:16,LM_STATISTICS_MARKS:32,LM_STATISTICS_POSTAL_CODE:64},B.DBR.EnumPDFReadingMode={PDFRM_RASTER:1,PDFRM_AUTO:2,PDFRM_VECTOR:4},B.DBR.EnumQRCodeErrorCorrectionLevel={QRECL_ERROR_CORRECTION_H:0,QRECL_ERROR_CORRECTION_L:1,QRECL_ERROR_CORRECTION_M:2,QRECL_ERROR_CORRECTION_Q:3},B.DBR.EnumRegionPredetectionMode={RPM_AUTO:1,RPM_GENERAL:2,RPM_GENERAL_RGB_CONTRAST:4,RPM_GENERAL_GRAY_CONTRAST:8,RPM_GENERAL_HSV_CONTRAST:16,RPM_SKIP:0},B.DBR.EnumResultCoordinateType={RCT_PIXEL:1,RCT_PERCENTAGE:2},B.DBR.EnumResultType={RT_STANDARD_TEXT:0,RT_RAW_TEXT:1,RT_CANDIDATE_TEXT:2,RT_PARTIAL_TEXT:3},B.DBR.EnumScaleUpMode={SUM_AUTO:1,SUM_LINEAR_INTERPOLATION:2,SUM_NEAREST_NEIGHBOUR_INTERPOLATION:4,SUM_SKIP:0},B.DBR.EnumTerminatePhase={TP_REGION_PREDETECTED:1,TP_IMAGE_PREPROCESSED:2,TP_IMAGE_BINARIZED:4,TP_BARCODE_LOCALIZED:8,TP_BARCODE_TYPE_DETERMINED:16,TP_BARCODE_RECOGNIZED:32},B.DBR.EnumTextAssistedCorrectionMode={TACM_AUTO:1,TACM_VERIFYING:2,TACM_VERIFYING_PATCHING:4,TACM_SKIP:0},B.DBR.EnumTextFilterMode={TFM_AUTO:1,TFM_GENERAL_CONTOUR:2,TFM_SKIP:0},B.DBR.EnumTextResultOrderMode={TROM_CONFIDENCE:1,TROM_POSITION:2,TROM_FORMAT:4,TROM_SKIP:0},B.DBR.EnumTextureDetectionMode={TDM_AUTO:1,TDM_GENERAL_WIDTH_CONCENTRATION:2,TDM_SKIP:0}}(),B.AddonReady(function(e,n){var t,o=B.BarcodeReaderAddon;function c(h){return h&&h instanceof ArrayBuffer}o.Class=function(){function h(m){this._runtimeSettings=null,this._initSettingsContent=null,this._tplContentArr=[],this._stwain=m}var p;return h.prototype._decodeBlob=function(m,y){var C=this;return new e.Promise(function(w){if(!(m instanceof Blob))throw TypeError("'_decodeBlob(blob, templateName)': Type of 'blob' should be 'Blob'.");w()}).then(function(){return C._innerDecode(0,m,y)})},h.prototype._decodeArrayBuffer=function(m,y){var C=this;return new e.Promise(function(w){if(!(m instanceof ArrayBuffer))throw TypeError("'_decodeBlob(arrayBuffer, templateName)': Type of 'arrayBuffer' should be 'ArrayBuffer'.");w()}).then(function(){return C._innerDecode(0,m,y)})},h.prototype._decodeUint8Array=function(m,y){var C=this;return new e.Promise(function(w){if(!(m instanceof Uint8Array||self.Uint8ClampedArray&&m instanceof Uint8ClampedArray))throw TypeError("'_decodeBlob(uint8Array, templateName)': Type of 'uint8Array' should be 'Uint8Array'.");w()}).then(function(){return C._innerDecode(0,m,y)})},h.prototype._decodeImage=function(m,y){var C=this;return new e.Promise(function(w){if(!(m instanceof HTMLImageElement))throw TypeError("'_decodeImage(image, templateName)': Type of 'image' should be 'HTMLImageElement'.");if(m.crossOrigin&&"anonymous"!=m.crossOrigin)throw"cors";y=y||"",w()}).then(function(){return"data:image/"==m.src.substring(0,11)?C._decodeBase64(m.src,y):C._decodeUrl(m.src,y).catch(function(w){return 3<=o.logLevel&&console&&console.warn&&(console.warn("'_decodeImage(image, templateName)': Image src not available. Use '_decodeCanvas' instead."),console.warn(w)),self.HTMLCanvasElement?((w=document.createElement("canvas")).width=m.naturalWidth,w.height=m.naturalHeight,w.getContext("2d").drawImage(m,0,0),C._decodeCanvas(w,y)):e.Promise.reject(Error("'_decodeImage(image, templateName)': Browser not support HTMLCanvasElement."))})})},h.prototype._decodeCanvas=function(m,y){var C=this;return new e.Promise(function(w){if(!(m instanceof HTMLCanvasElement))throw TypeError("'_decodeCanvas(canvas, templateName)': Type of 'canvas' should be 'HTMLCanvasElement'.");if(m.crossOrigin&&"anonymous"!=m.crossOrigin)throw"cors";y=y||"",m.toBlob?m.toBlob(function(P){w(P)}):m.msToBlob?m.msToBlob(function(P){w(P)}):w(m.toDataURL())}).then(function(w){return m.toBlob||m.msToBlob?C._decodeBlob(w,y):C._decodeBase64(w,y)})},h.prototype._decodeVideo=function(m){var y,C=this,w=arguments;return new e.Promise(function(P){if(!(m instanceof HTMLVideoElement))throw TypeError("'_decodeVideo(video [ [, sx, sy, sWidth, sHeight], dWidth, dHeight] [, templateName] )': Type of 'video' should be 'HTMLVideoElement'.");if(m.crossOrigin&&"anonymous"!=m.crossOrigin)throw"cors";w.length<=2?(O=z=0,A=$=m.videoWidth,ne=K=m.videoHeight):K=w.length<=4?(O=z=0,A=m.videoWidth,ne=m.videoHeight,$=w[1],w[2]):(O=w[1],z=w[2],A=w[3],ne=w[4],$=w[5],w[6]),y="string"==typeof w[w.length-1]?w[w.length-1]:"";var O,z,A,ne,$,K,q=document.createElement("canvas");q.width=$,q.height=K,q.getContext("2d").drawImage(m,O,z,A,ne,0,0,$,K),P(q)}).then(function(P){return C._decodeCanvas(P,y)})},h.prototype._decodeBase64=h.prototype.decodeBase64String=function(m,y){var C=this;return new e.Promise(function(w){if(!("string"==typeof m||"object"==typeof m&&m instanceof String))throw TypeError("'decodeBase64(base64Str, templateName)': Type of 'base64Str' should be 'String'.");"data:image/"==m.substring(0,11)&&(m=m.substring(m.indexOf(",")+1)),w()}).then(function(){return C._innerDecode(1,m,y)})},h.prototype._decodeUrl=function(m,y){var C=this;return m&&m.indexOf&&(0==m.indexOf("dwt://")||0==m.indexOf("dcs://"))?C._decodeDynamsoftServiceInnerUrl(m,y):new e.Promise(function(w,P){var O;if(!("string"==typeof m||"object"==typeof m&&m instanceof String))throw TypeError("'_decodeUrl(url, templateName)': Type of 'url' should be 'String'.");y=y||"",o._activeXInstance?((O=new ActiveXObject("MSXML2.XMLHTTP")).open("GET",m,!0),O.overrideMimeType?O.overrideMimeType("text/plain; charset=x-user-defined"):O.setRequestHeader("Accept-Charset","x-user-defined"),O.onreadystatechange=function(){4==O.readyState&&w(new VBArray(O.responseBody).toArray())},O.send("")):((O=new XMLHttpRequest).open("GET",m,!0),O.responseType="arraybuffer",O.send(),O.onloadend=function(){w(this.response)},O.onerror=function(){P(Error(O.error))})}).then(function(w){return o._activeXInstance?C._activeXDecodeArray(w,y):C._decodeArrayBuffer(w,y)})},h.prototype._decodeDynamsoftServiceInnerUrl=function(m,y){var C=this;return new e.Promise(function(w){if(!("string"==typeof m||"object"==typeof m&&m instanceof String))throw TypeError("'_decodeUrl(url, templateName)': Type of 'innerUrl' should be 'String'.");if(0!=m.indexOf("dwt://")&&0!=m.indexOf("dcs://"))throw TypeError("'_decodeDynamsoftServiceInnerUrl(innerUrl, templateName)': 'innerUrl' should start with 'dwt://' or 'dcs://'.");w()}).then(function(){return C._innerDecode(4e3,m,y)})},h.prototype._activeXDecodeArray=function(m,y){var C=this;return new e.Promise(function(w,P){if(!(m instanceof Array))throw TypeError("'_activeXDecodeArray(array, templateName)': Type of 'array' should be 'Array'.");y=y||"";try{w(B.Lib.btoa(String.fromCharCode.apply(String,m)))}catch(O){P(O)}}).then(function(w){return C._decodeBase64(w,y)})},h.prototype._activeXDecodeHandle=function(m,y){var C=this;return new e.Promise(function(w){y=y||"",w()}).then(function(){return C._innerDecode(4001,m,y)})},h.prototype._decode=h.prototype.decode=function(m,y){return o._activeXInstance?"string"==typeof m||m instanceof String?this._activeXDecodeHandle(m,y):e.Promise.reject(TypeError("'_decode(source, templateName)' in activeX: Type of 'source' should be 'String(partUrl)'.")):self.Blob&&m instanceof Blob?this._decodeBlob(m,y):self.ArrayBuffer&&m instanceof ArrayBuffer?this._decodeArrayBuffer(m,y):self.Uint8Array&&m instanceof Uint8Array||self.Uint8ClampedArray&&m instanceof Uint8ClampedArray?this._decodeUint8Array(m,y):m instanceof Array?this._activeXDecodeArray(m,y):self.HTMLImageElement&&m instanceof HTMLImageElement?this._decodeImage(m,y):self.HTMLCanvasElement&&m instanceof HTMLCanvasElement?this._decodeCanvas(m,y):self.HTMLVideoElement&&m instanceof HTMLVideoElement?this._decodeVideo(m,y):isNaN(m)?"string"==typeof m||m instanceof String?"data:image/"==m.substring(0,11)?this._decodeBase64(m,y):this._decodeUrl(m,y):e.Promise.reject(TypeError("'_decode(source, templateName)' in H5: Type of 'source' should be 'Blob', 'ArrayBuffer', 'Uint8Array', 'HTMLImageElement', 'HTMLCanvasElement', 'HTMLVideoElement', 'String(base64 with image mime)' or 'String(url)'.")):this._activeXDecodeHandle(m,y)},h.prototype._innerServiceCmd=function(m,y){var C=this._stwain;return new e.Promise(function(w,P){var O,z={method:"ReadBarcode",parameter:[B.Lib.product.refProductKey,4002,"",""],updateSettings:m,initSettingsContent:y};o._activeXInstance?w(o._activeXInstance.Process(e.stringify(z),location.protocol+"//"+location.host)):(C._blts?(O="",C&&C._bRemoteMode&&C._dmService&&C._dmService.attrs&&C._dmService.attrs.UUID&&(O=C._dmService.attrs.UUID),B.DWT.lglic(B.DWT.EnumInstance.dwt_desktop,O).then(function(A){return z.parameter.push(A.ar),z.parameter.push(A.cu),z.parameter.push(0),z.parameter.push(""),e.stringify(z)})):e.Promise.resolve(e.stringify(z))).then(function(A){return e.fetch(C._dbrUrlRoot+"ReadBarcode",{mode:"cors",method:"post",body:A,dataType:"arrayBuffer"})}).then(function(A){c(A)?w(String.fromCharCode.apply(null,new Uint8Array(A))):w(A)},function(A){var ne="Init template & runtimeSettings failed.";A&&(ne=[ne," Http info: ",A.errorString," (",A.httpCode,")"].join("")),P(ne)})})},h.prototype._innerDecode=function(m,y,C,w){var P=this;return P._runtimeSettings&&0==P._runtimeSettings.expectedBarcodesCount&&(P._runtimeSettings.expectedBarcodesCount=512),new e.Promise(function(O,z){function A(N,H,re){try{var ie,De,ee,ue,ce=p&&p(N);for(ce&&ce.textResults||z(new o.BarcodeReaderException(ce.exception,ce.description)),e.product.bHTML5Edition&&re&&re.config.data&&(ie=e.parse(re.config.data),e.isArray(ie.parameter))&&2<ie.parameter.length&&4e3==ie.parameter[1]&&(4<ie.parameter.length&&ie.parameter[4]?ce.textResults.imageid=ie.parameter[4]:0<=(ue=(ee=ie.parameter[2]).indexOf("&index="))&&(ce.textResults.imageid=ee.substring(ue+7,ee.indexOf("&t=")))),De=0;De<ce.textResults.length;De++){var fe=ce.textResults[De];fe.BarcodeText=fe.barcodeText,ce.exception!=B.DBR.EnumErrorCode.DBR_SUCCESS&&(fe.exception=ce.exception)}ce.exception!=B.DBR.EnumErrorCode.DBR_SUCCESS&&(ce.textResults.exception=ce.exception,ce.textResults.description=ce.description),o._activeXInstance&&ce.records&&(B.Lib.each(ce.records,function(le,me){B.DWT.lavrf(me,le,B.DWT.EnumInstance.dwt_desktop)}),B.DWT.lavrf_(1,B.DWT.EnumInstance.dwt_desktop)),O(ce.textResults)}catch(le){z(le)}}var ne,$,K={method:"ReadBarcode",parameter:[B.Lib.product.refProductKey,m,0!=m?y:null,C||""],updateSettings:P._runtimeSettings,conflictMode:1==P.conflictMode?"ignore":"overwrite",initSettingsContent:P._initSettingsContent,tplContent:function(){if(C)for(var N=0;N<P._tplContentArr.length;++N)if(C==P._tplContentArr[N].ImageParameter.Name)return e.stringify(P._tplContentArr[N]);return null}()},q=P._stwain;o._activeXInstance?q._blts?B.DWT.lglic(B.DWT.EnumInstance.dwt_desktop,"").then(function(N){K.parameter.push(N.ar),K.parameter.push(N.cu),K.parameter.push(0),K.parameter.push(""),A(o._activeXInstance.Process(e.stringify(K),location.protocol+"//"+location.host))}):A(o._activeXInstance.Process(e.stringify(K),location.protocol+"//"+location.host)):(ne=q._dbrUrlRoot+"ReadBarcode",0==m&&(ne+="/LoadZipFromBytes?cmd="+encodeURIComponent(e.stringify(K))),(0==m?e.Promise.resolve(y):q._blts?($="",q&&q._bRemoteMode&&q._dmService&&q._dmService.attrs&&q._dmService.attrs.UUID&&($=q._dmService.attrs.UUID),B.DWT.lglic(B.DWT.EnumInstance.dwt_desktop,$).then(function(N){return K.parameter.push(N.ar),K.parameter.push(N.cu),K.parameter.push(0),K.parameter.push([e.product.getDWTPrefix(),e.product.getServerVersionInfo(),"/verify?id=",w,"&t=",e.getRandom()].join("")),e.stringify(K)})):e.Promise.resolve(e.stringify(K))).then(function(N){return e.fetch(ne,{mode:"cors",method:"post",body:N,dataType:"arrayBuffer"})}).then(function(N,H,re){c(N)?A(String.fromCharCode.apply(null,new Uint8Array(N)),0,re):A(N,0,re)},function(N){var H="ReadBarcode request fail.";N&&(H=[H," Http info: ",N.errorString," (",N.httpCode,")"].join("")),z(Error(H))}))})},p=o._handleRetJsonString=function(m){var y;if("string"==typeof m||"object"==typeof m&&m instanceof String)try{y=e.parse(m)}catch{y=e.parse(o.RemoveNonPrintableChar(m))}else y=m;if(!y)throw o.BarcodeReaderException(B.DBR.EnumErrorCode.DBR_UNKNOWN,o.errors.decodeResultEmpty);if("textResults"in y&&e.isArray(y.textResults)||y.exception==B.DBR.EnumErrorCode.DBR_SUCCESS)return y;throw o.BarcodeReaderException(y.exception,y.description)},h.prototype.getAllParameterTemplateNames=function(){for(var m=[],y=0;y<this._tplContentArr.length;++y)m.push(this._tplContentArr[y].ImageParameter.Name);return m},h.prototype.getRuntimeSettings=function(){return this._runtimeSettings||(this._runtimeSettings=e.parse(o._defaultRuntimeSettingsStr)),e.Promise.resolve(this._runtimeSettings)},h.prototype.updateRuntimeSettings=function(m){var y,C=this;if("string"==typeof m||"object"==typeof m&&m instanceof String){if("speed"==m||"balance"==m||"coverage"==m||"default"==m)return C.initRuntimeSettingsWithString("speed"==m?'{"ImageParameter":{"AccompanyingTextRecognitionModes":[{"Mode":"ATRM_SKIP"}],"BarcodeColourModes":[{"LightReflection":1,"Mode":"BICM_DARK_ON_LIGHT"}],"BarcodeComplementModes":[{"Mode":"BCM_SKIP"}],"BarcodeFormatIds":["BF_ALL"],"BarcodeFormatIds_2":["BF2_POSTALCODE","BF2_DOTCODE"],"BinarizationModes":[{"BlockSizeX":0,"BlockSizeY":0,"EnableFillBinaryVacancy":1,"ImagePreprocessingModesIndex":-1,"Mode":"BM_LOCAL_BLOCK","ThreshValueCoefficient":10}],"ColourClusteringModes":[{"Mode":"CCM_SKIP"}],"ColourConversionModes":[{"BlueChannelWeight":-1,"GreenChannelWeight":-1,"Mode":"CICM_GENERAL","RedChannelWeight":-1}],"DPMCodeReadingModes":[{"Mode":"DPMCRM_SKIP"}],"DeblurLevel":3,"DeformationResistingModes":[{"Mode":"DRM_SKIP"}],"Description":"","ExpectedBarcodesCount":512,"FormatSpecificationNameArray":null,"GrayscaleTransformationModes":[{"Mode":"GTM_ORIGINAL"}],"ImagePreprocessingModes":[{"Mode":"IPM_GENERAL"}],"IntermediateResultSavingMode":{"Mode":"IRSM_MEMORY"},"IntermediateResultTypes":["IRT_NO_RESULT"],"LocalizationModes":[{"Mode":"LM_CONNECTED_BLOCKS"},{"Mode":"LM_STATISTICS_MARKS"},{"Mode":"LM_STATISTICS_POSTAL_CODE"}],"MaxAlgorithmThreadCount":4,"Name":"bestSpeed","PDFRasterDPI":300,"PDFReadingMode":{"Mode":"PDFRM_AUTO"},"Pages":"","RegionDefinitionNameArray":null,"RegionPredetectionModes":[{"Mode":"RPM_GENERAL"}],"ResultCoordinateType":"RCT_PIXEL","ReturnBarcodeZoneClarity":0,"ScaleDownThreshold":2300,"ScaleUpModes":[{"Mode":"SUM_AUTO"}],"TerminatePhase":"TP_BARCODE_RECOGNIZED","TextAssistedCorrectionMode":{"BottomTextPercentageSize":0,"LeftTextPercentageSize":0,"Mode":"TACM_VERIFYING","RightTextPercentageSize":0,"TopTextPercentageSize":0},"TextFilterModes":[{"Mode":"TFM_SKIP"}],"TextResultOrderModes":[{"Mode":"TROM_CONFIDENCE"},{"Mode":"TROM_POSITION"},{"Mode":"TROM_FORMAT"}],"TextureDetectionModes":[{"Mode":"TDM_GENERAL_WIDTH_CONCENTRATION","Sensitivity":5}],"Timeout":10000},"Version":"3.0"}':"balance"==m?'{"ImageParameter":{"AccompanyingTextRecognitionModes":[{"Mode":"ATRM_SKIP"}],"BarcodeColourModes":[{"LightReflection":1,"Mode":"BICM_DARK_ON_LIGHT"}],"BarcodeComplementModes":[{"Mode":"BCM_SKIP"}],"BarcodeFormatIds":["BF_ALL"],"BarcodeFormatIds_2":["BF2_POSTALCODE","BF2_DOTCODE"],"BinarizationModes":[{"BlockSizeX":0,"BlockSizeY":0,"EnableFillBinaryVacancy":1,"ImagePreprocessingModesIndex":-1,"Mode":"BM_LOCAL_BLOCK","ThreshValueCoefficient":10}],"ColourClusteringModes":[{"Mode":"CCM_SKIP"}],"ColourConversionModes":[{"BlueChannelWeight":-1,"GreenChannelWeight":-1,"Mode":"CICM_GENERAL","RedChannelWeight":-1}],"DPMCodeReadingModes":[{"Mode":"DPMCRM_SKIP"}],"DeblurLevel":5,"DeformationResistingModes":[{"Mode":"DRM_SKIP"}],"Description":"","ExpectedBarcodesCount":512,"FormatSpecificationNameArray":null,"GrayscaleTransformationModes":[{"Mode":"GTM_ORIGINAL"}],"ImagePreprocessingModes":[{"Mode":"IPM_GENERAL"}],"IntermediateResultSavingMode":{"Mode":"IRSM_MEMORY"},"IntermediateResultTypes":["IRT_NO_RESULT"],"LocalizationModes":[{"Mode":"LM_CONNECTED_BLOCKS"},{"Mode":"LM_STATISTICS"},{"Mode":"LM_STATISTICS_MARKS"},{"Mode":"LM_STATISTICS_POSTAL_CODE"}],"MaxAlgorithmThreadCount":4,"Name":"balance","PDFRasterDPI":300,"PDFReadingMode":{"Mode":"PDFRM_AUTO"},"Pages":"","RegionDefinitionNameArray":null,"RegionPredetectionModes":[{"Mode":"RPM_GENERAL"}],"ResultCoordinateType":"RCT_PIXEL","ReturnBarcodeZoneClarity":0,"ScaleDownThreshold":2300,"ScaleUpModes":[{"Mode":"SUM_AUTO"}],"TerminatePhase":"TP_BARCODE_RECOGNIZED","TextAssistedCorrectionMode":{"BottomTextPercentageSize":0,"LeftTextPercentageSize":0,"Mode":"TACM_VERIFYING","RightTextPercentageSize":0,"TopTextPercentageSize":0},"TextFilterModes":[{"MinImageDimension":65536,"Mode":"TFM_GENERAL_CONTOUR","Sensitivity":0}],"TextResultOrderModes":[{"Mode":"TROM_CONFIDENCE"},{"Mode":"TROM_POSITION"},{"Mode":"TROM_FORMAT"}],"TextureDetectionModes":[{"Mode":"TDM_GENERAL_WIDTH_CONCENTRATION","Sensitivity":5}],"Timeout":10000},"Version":"3.0"}':"coverage"==m?'{"ImageParameter":{"AccompanyingTextRecognitionModes":[{"Mode":"ATRM_SKIP"}],"BarcodeColourModes":[{"LightReflection":1,"Mode":"BICM_DARK_ON_LIGHT"}],"BarcodeComplementModes":[{"Mode":"BCM_SKIP"}],"BarcodeFormatIds":["BF_ALL"],"BarcodeFormatIds_2":["BF2_POSTALCODE","BF2_DOTCODE"],"BinarizationModes":[{"BlockSizeX":0,"BlockSizeY":0,"EnableFillBinaryVacancy":1,"ImagePreprocessingModesIndex":-1,"Mode":"BM_LOCAL_BLOCK","ThreshValueCoefficient":10}],"ColourClusteringModes":[{"Mode":"CCM_SKIP"}],"ColourConversionModes":[{"BlueChannelWeight":-1,"GreenChannelWeight":-1,"Mode":"CICM_GENERAL","RedChannelWeight":-1}],"DPMCodeReadingModes":[{"Mode":"DPMCRM_SKIP"}],"DeblurLevel":9,"DeformationResistingModes":[{"Mode":"DRM_SKIP"}],"Description":"","ExpectedBarcodesCount":512,"FormatSpecificationNameArray":null,"GrayscaleTransformationModes":[{"Mode":"GTM_ORIGINAL"},{"Mode":"GTM_INVERTED"}],"ImagePreprocessingModes":[{"Mode":"IPM_GENERAL"}],"IntermediateResultSavingMode":{"Mode":"IRSM_MEMORY"},"IntermediateResultTypes":["IRT_NO_RESULT"],"LocalizationModes":[{"Mode":"LM_CONNECTED_BLOCKS"},{"Mode":"LM_SCAN_DIRECTLY","ScanDirection":0,"ScanStride":0},{"Mode":"LM_STATISTICS"},{"Mode":"LM_LINES"},{"Mode":"LM_STATISTICS_MARKS"},{"Mode":"LM_STATISTICS_POSTAL_CODE"}],"MaxAlgorithmThreadCount":4,"Name":"coverage","PDFRasterDPI":300,"PDFReadingMode":{"Mode":"PDFRM_AUTO"},"Pages":"","RegionDefinitionNameArray":null,"RegionPredetectionModes":[{"Mode":"RPM_GENERAL"}],"ResultCoordinateType":"RCT_PIXEL","ReturnBarcodeZoneClarity":0,"ScaleDownThreshold":214748347,"ScaleUpModes":[{"Mode":"SUM_AUTO"}],"TerminatePhase":"TP_BARCODE_RECOGNIZED","TextAssistedCorrectionMode":{"BottomTextPercentageSize":0,"LeftTextPercentageSize":0,"Mode":"TACM_VERIFYING","RightTextPercentageSize":0,"TopTextPercentageSize":0},"TextFilterModes":[{"MinImageDimension":65536,"Mode":"TFM_GENERAL_CONTOUR","Sensitivity":0}],"TextResultOrderModes":[{"Mode":"TROM_CONFIDENCE"},{"Mode":"TROM_POSITION"},{"Mode":"TROM_FORMAT"}],"TextureDetectionModes":[{"Mode":"TDM_GENERAL_WIDTH_CONCENTRATION","Sensitivity":5}],"Timeout":10000},"Version":"3.0"}':'{"ImageParameter":{"AccompanyingTextRecognitionModes":[{"Mode":"ATRM_SKIP"}],"BarcodeColourModes":[{"LightReflection":1,"Mode":"BICM_DARK_ON_LIGHT"}],"BarcodeComplementModes":[{"Mode":"BCM_SKIP"}],"BarcodeFormatIds":["BF_ALL"],"BarcodeFormatIds_2":null,"BinarizationModes":[{"BlockSizeX":0,"BlockSizeY":0,"EnableFillBinaryVacancy":1,"ImagePreprocessingModesIndex":-1,"Mode":"BM_LOCAL_BLOCK","ThreshValueCoefficient":10}],"ColourClusteringModes":[{"Mode":"CCM_SKIP"}],"ColourConversionModes":[{"BlueChannelWeight":-1,"GreenChannelWeight":-1,"Mode":"CICM_GENERAL","RedChannelWeight":-1}],"DPMCodeReadingModes":[{"Mode":"DPMCRM_SKIP"}],"DeblurLevel":9,"DeformationResistingModes":[{"Mode":"DRM_SKIP"}],"Description":"","ExpectedBarcodesCount":512,"FormatSpecificationNameArray":null,"GrayscaleTransformationModes":[{"Mode":"GTM_ORIGINAL"}],"ImagePreprocessingModes":[{"Mode":"IPM_GENERAL"}],"IntermediateResultSavingMode":{"Mode":"IRSM_MEMORY"},"IntermediateResultTypes":["IRT_NO_RESULT"],"LocalizationModes":[{"Mode":"LM_CONNECTED_BLOCKS"},{"Mode":"LM_SCAN_DIRECTLY","ScanDirection":0,"ScanStride":0},{"Mode":"LM_STATISTICS"},{"Mode":"LM_LINES"}],"MaxAlgorithmThreadCount":4,"Name":"default","PDFRasterDPI":300,"PDFReadingMode":{"Mode":"PDFRM_AUTO"},"Pages":"","RegionDefinitionNameArray":null,"RegionPredetectionModes":[{"Mode":"RPM_GENERAL"}],"ResultCoordinateType":"RCT_PIXEL","ReturnBarcodeZoneClarity":0,"ScaleDownThreshold":2300,"ScaleUpModes":[{"Mode":"SUM_AUTO"}],"TerminatePhase":"TP_BARCODE_RECOGNIZED","TextAssistedCorrectionMode":{"BottomTextPercentageSize":0,"LeftTextPercentageSize":0,"Mode":"TACM_VERIFYING","RightTextPercentageSize":0,"TopTextPercentageSize":0},"TextFilterModes":[{"MinImageDimension":65536,"Mode":"TFM_GENERAL_CONTOUR","Sensitivity":0}],"TextResultOrderModes":[{"Mode":"TROM_CONFIDENCE"},{"Mode":"TROM_POSITION"},{"Mode":"TROM_FORMAT"}],"TextureDetectionModes":[{"Mode":"TDM_GENERAL_WIDTH_CONCENTRATION","Sensitivity":5}],"Timeout":10000},"Version":"3.0"}');y=m}else{if("object"!=typeof m)throw TypeError("'setTemplateSettings(settings)': Type of 'settings' should be 'String' or 'PlainObject'.");y=e.stringify(m)}return m=e.parse(y),C._runtimeSettings=m,C._initSettingsContent=null,C._innerServiceCmd(C._runtimeSettings,null).then(function(w){return w=o._handleRetJsonString(w),C._runtimeSettings=w.settings,C._runtimeSettings||(C._runtimeSettings=e.parse(o._defaultRuntimeSettingsStr)),w.settings})},h.prototype.resetRuntimeSettings=function(){var m=this;return m._runtimeSettings=e.parse(o._defaultRuntimeSettingsStr),m._initSettingsContent=null,m._innerServiceCmd(m._runtimeSettings,null).then(function(y){return y=o._handleRetJsonString(y),m._runtimeSettings=y.settings,m._runtimeSettings||(m._runtimeSettings=e.parse(o._defaultRuntimeSettingsStr)),y.settings})},h.prototype.outputSettingsToString=function(m){if(!m)return o._defaultTemplateStr;for(var y=0;y<this._tplContentArr.length;++y)if(m==this._tplContentArr[y].ImageParameter.Name)return e.stringify(this._tplContentArr[y])},h.prototype.initRuntimeSettingsWithString=function(m){var y=this;if(e.isString(m))return y._runtimeSettings=null,y._initSettingsContent=e.parse(m),y._innerServiceCmd(null,y._initSettingsContent).then(function(C){return C=o._handleRetJsonString(C),y._runtimeSettings=C.settings,y._runtimeSettings||(y._runtimeSettings=e.parse(o._defaultRuntimeSettingsStr)),C.settings});throw TypeError("'initRuntimeSettingsWithString(settings)': Type of 'settings' should be 'String'.")},h}(),o._dbr_ax=!1,o._dbr=!1,o._initH5=function(h,p,m){return new e.Promise(function(y,C){h._bRemoteMode&&h._dmService&&h._dmService.attrs&&h._dmService.attrs.url&&(h._dbrUrlRoot=h._dmService.attrs.url+"dcp/dbr_"+o.Version.replace(/\./g,"")+"/"),h._dbrUrlRoot||(h._dbrUrlRoot=B.DWT.NetManager.getModuleUrl("dcp/dbr_"+o.Version.replace(/\./g,"")+"/"));var w=5,P={method:"POST",url:h._dbrUrlRoot+"VersionInfo?t="+e.getRandom(),data:'{"method":"VersionInfo"}',onSuccess:function(){y()},onError:function(){if(--w<=0)return C("Failed to connect to the Barcode Reader Add-on, the library may be missing in the Dynamsoft Service directory.");setTimeout(function(){e.ajax(P)},300)},dataType:"json",async:!0,timeout:800};e.ajax(P)}).then(function(){return o._dbr=new o.Class(h),o._dbr._innerServiceCmd(null,null)}).then(function(y){try{var C=o._handleRetJsonString(y);o._dbr._runtimeSettings=C.settings,o._defaultRuntimeSettingsStr=e.stringify(C.settings),o._defaultTemplateStr=e.stringify(C.outputSettings),p(o._dbr)}catch(w){m(Error("Init template & runtimeSettings failed: "+w.message)||w)}},function(y){m(y)})},o.dbrInitPromiseFun=function(h){return new e.Promise(function(p,m){o.innerDbrInit(h,p,m)})},o.innerDbrInit=function(h,p,m){var y=!1,C=!1,w=(e.product.bHTML5Edition?y=!0:C=!0,B.BarcodeReaderAddon);if(y){if(w._dbr)return void p(w._dbr)}else if(C&&w._dbr_ax)return void p(w._dbr_ax);if(y&&w._initH5(h,p,m),C){if(C={method:"ReadBarcode",parameter:[B.Lib.product.refProductKey,4002,"",""]},!(y=B.navInfoSync).bIE)return m(Error("The DBR init error."));try{w._activeXInstance=new ActiveXObject("DBRModule.AtlDBR");var O=w._activeXInstance.Process(e.stringify(C),location.protocol+"//"+location.host),z=e.parse(O);return z?"settings"in z?(w._dbr_ax=new w.Class(h),w._dbr_ax._runtimeSettings=z.settings,w._defaultRuntimeSettingsStr=e.stringify(z.settings),"outputSettings"in z&&(w._defaultTemplateStr=e.stringify(z.outputSettings)),void p(w._dbr_ax)):m(Error(z.description||"The DBR init error.")):m(Error("The DBR init error."))}catch(A){return m(Error("The DBR .dll is missing or not accessible: "+(A.message||A)))}}},e.DynamicLoadAddonFuns&&e.DynamicLoadAddonFuns.push(function(h){if(t=h._b64bit?"dbrx64_"+B.BarcodeReaderAddon.Version+".dll":"dbr_"+B.BarcodeReaderAddon.Version+".dll",e.product.bHTML5Edition)try{h._innerSend("GetAddOnVersion",e.html5.Funs.makeParams("barcodereader",t),!0,!1,!1).catch(function(){})}catch{}function p(y){return!e.License.checkProductKey(y,{Core:!0})||!!(B.navInfoSync.bMac||B.navInfoSync.bLinux||B.Lib.env.bMobile)&&(y._errorCode=B.DBR.EnumErrorCode.DBR_UNKNOWN,y._errorString=o.errors.ServiceEditionNotSupportDbr,!0)}var m={BarcodeReader:{decode:function(y){return p(h)?e.Promise.reject(o.BarcodeReaderException(h._errorCode,h._errorString)):!e.isNumber(y)||y<0||y>=h.HowManyImagesInBuffer?(e.Errors.IndexOutOfRange(h),e.Promise.reject(o.BarcodeReaderException(h._errorCode,h._errorString))):new e.Promise(function(C){o._decoding?o._decodeQueue.push({method:C,args:[y]}):(o._decoding=!0,C(y))}).then(function(C){var w;if(e.product.bHTML5Edition){if(-1==(w=h._ImgManager.convertClientIndexToServerId(C)))throw e.Errors.IndexOutOfRange(h),setTimeout(o._decodeNext,0),o.BarcodeReaderException(h._errorCode,h._errorString)}else w=C;return new e.Promise(function(P,O){o.dbrInitPromiseFun(h).then(function(z){var A;if(!e.product.bHTML5Edition)return ne=h.GetImagePartURL(A=w,-1,-1),z._innerDecode(4001,ne,"").then(function($){$.imageid=h.IndexToImageID(A),setTimeout(o._decodeNext,0),P($)},function($){setTimeout(o._decodeNext,0),O($)});A=h._ImgManager.convertServerIdToClientIndex(w);var ne=h.GetImagePartURL(A,-1,-1);return z._innerDecode(4e3,ne,"",h._clientId).then(function($){$.imageid=h.IndexToImageID(A),setTimeout(o._decodeNext,0),P($),h._blts&&B.DWT.lcvrf(h)},function($){setTimeout(o._decodeNext,0),O($)})},function(z){setTimeout(o._decodeNext,0),O(z)})})})},resetRuntimeSettings:function(){return p(h)?e.Promise.reject(o.BarcodeReaderException(h._errorCode,h._errorString)):o.dbrInitPromiseFun(h).then(function(y){return y.resetRuntimeSettings()})},getRuntimeSettings:function(y){return p(h)?e.Promise.reject(o.BarcodeReaderException(h._errorCode,h._errorString)):!e.isString(y)||"speed"!=y&&"balance"!=y&&"coverage"!=y&&"default"!=y?o.dbrInitPromiseFun(h).then(function(C){return C.getRuntimeSettings()}):this.updateRuntimeSettings(y)},updateRuntimeSettings:function(y){return p(h)?e.Promise.reject(o.BarcodeReaderException(h._errorCode,h._errorString)):o.dbrInitPromiseFun(h).then(function(C){return C.updateRuntimeSettings(y)})},initRuntimeSettingsWithString:function(y){return p(h)?e.Promise.reject(o.BarcodeReaderException(h._errorCode,h._errorString)):o.dbrInitPromiseFun(h).then(function(C){return C.initRuntimeSettingsWithString(y)})}}};e.product.bHTML5Edition?(h.__addon=h.__addon||{},e.mix(h.__addon,m)):(h.Addon=h.Addon||{},e.mix(h.Addon,m))})}),(B=self.Dynamsoft||{}).DWT=B.DWT||{},B.aryAddonReadyFun=B.aryAddonReadyFun||[],B.AddonReady=B.AddonReady||function(e){B.aryAddonReadyFun.push(e)},function(){for(var e=[B.DWT],n=0;n<1;n++){var t=e[n];t.EnumDWT_ConvertMode={CM_RENDERALL:1,CM_IMAGEONLY:2,CM_AUTO:3,CM_RENDERALLWITHANNOTATION:4},t.EnumDWT_PDFCompressionType={PDF_AUTO:0,PDF_FAX3:1,PDF_FAX4:2,PDF_LZW:3,PDF_RLE:4,PDF_JPEG:5,PDF_JP2000:6,PDF_JBIG2:7}}}(),B.AddonReady(function(e,n){var t;e.product.bHTML5Edition&&e.DynamicLoadAddonFuns&&e.DynamicLoadAddonFuns.push(function(o){var c,h=e.html5.Funs;t=o.__serverPlatform==B.DWT.EnumDWT_PlatformType.enumMac?o._b64bit?"libDynamicPdfCorex64_"+B.DWT.PdfVersion+".dylib":"libDynamicPdfCore_"+B.DWT.PdfVersion+".dylib":o.__serverPlatform==B.DWT.EnumDWT_PlatformType.enumLinux||o.__serverPlatform==B.DWT.EnumDWT_PlatformType.enumEmbed||o.__serverPlatform==B.DWT.EnumDWT_PlatformType.enumChromeOS?"libDynamicPdfCore_"+B.DWT.PdfVersion+".so":o._b64bit?"DynamicPdfCorex64_"+B.DWT.PdfVersion+".dll":"DynamicPdfCore_"+B.DWT.PdfVersion+".dll";try{o._innerSend("GetAddOnVersion",h.makeParams("pdf",t),!0,!1,!1).catch(function(){})}catch{}c={PDF:{IsModuleInstalled:function(){var p=o;return p._resetErr(),""!=p._innerFun("GetAddOnVersion",h.makeParams("pdf",t))},IsModuleInstalledAsync:function(){var p=o;return p._resetErr(),p._innerFunV2("GetAddOnVersion",h.makeParams("pdf",t)).then(function(m){return""!=m})},ConvertToImage:function(w,m,y,C){w=h.replaceLocalFilename(w);var P="ConvertPDFToImage",O=o;return O._resetErr(),h.showMask(P),O._innerSend(P,h.makeParams(w,m),!0,function(z){return h.hideMask(P),y&&y(),!0},function(z){return h.hideMask(P),C&&C(),!1}),!0},SetPassword:function(p){var m=o;return m._resetErr(),m._innerFun("SetPDFPassword",h.makeParams(p))},SetConvertMode:function(p){return o._setConvertMode(p)},SetConvertModeAsync:function(p){return o._setConvertModeAsync(p)},GetConvertMode:function(){var p=o;return p._resetErr(),p._pdfConvertMode},SetResolution:function(p){return o._resetErr(),o._innerFun("SetPDFResolution",h.makeParams(p))},SetResolutionAsync:function(p){return o._resetErr(),o._innerFunV2("SetPDFResolution",h.makeParams(p))},IsTextBasedPDF:function(w,m,y){var C=o;return C._resetErr(),w=h.replaceLocalFilename(w),w=o._innerFun("IsTextBasedPDF",h.makeParams(w)),0==C.ErrorCode?e.isFunction(m)&&m(w):e.isFunction(y)&&y(C.ErrorCode,C.ErrorString),w},Write:{Setup:function(y){var m=(2<e.stringify(y=y||{version:15}).length&&(e.isNumber(y.version)?1<=y.version&&y.version<2&&(y.version=parseInt(10*y.version)):y.version=15),e.isNumber(y.compression)&&y.compression==B.DWT.EnumDWT_PDFCompressionType.PDF_FAX3&&(y.compression=B.DWT.EnumDWT_PDFCompressionType.PDF_FAX4),o);return m._resetErr(),y=e.stringify(y),y=e.replaceAll(y,'"','\\"'),m._innerFun("SetPDFSettings",['["',y,'"]'].join(""))}}}},o.__addon=o.__addon||{},e.mix(o.__addon,c)})}),B.AddonReady(function(e,n){e.product.bActiveXEdition&&e.DynamicLoadAddonFuns&&e.DynamicLoadAddonFuns.push(function(t){var o,c,h;if(!t.getSWebTwain()||!t.getSWebTwain().Addon)return!1;B.navInfoSync.bWin&&(h=!B.navInfo.bOSx64||B.navInfo.bWOW64?"DynamicPdfCore_"+B.DWT.PdfVersion+".dll":"DynamicPdfCorex64_"+B.DWT.PdfVersion+".dll"),c=t.getSWebTwain(),o={PDF:{IsModuleInstalled:function(){var p=c.GetAddOnVersion("pdf",h);return e.setErrorString(t),""!=p},IsModuleInstalledAsync:function(){var p=c.GetAddOnVersion("pdf",h);return e.setErrorString(t),e.Promise.resolve(""!=p)},ConvertToImage:function(p,m,y,C){return p=c.ConvertPDFToImage(p,m),e.wrapperRet(t,p,y,C)},SetPassword:function(p){return p=c.SetPDFPassword(p),e.wrapperRet(t,p)},SetConvertMode:function(p){return t._setConvertMode(p)},SetConvertModeAsync:function(p){return Promise.resolve(t._setConvertMode(p))},GetConvertMode:function(){return t._resetErr(),t._pdfConvertMode},SetResolution:function(p){return p=c.SetPDFResolution(p),e.wrapperRet(t,p)},SetResolutionAsync:function(p){return p=c.SetPDFResolution(p),e.Promise.resolve(e.wrapperRet(t,p))},IsTextBasedPDF:function(p){return p=c.IsTextBasedPDF(p),e.wrapperRet(t,p)}}},t.Addon=t.Addon||{},e.mix(t.Addon,o)})}),(B=self.Dynamsoft||{}).DWT=B.DWT||{},B.aryAddonReadyFun=B.aryAddonReadyFun||[],B.AddonReady=B.AddonReady||function(e){B.aryAddonReadyFun.push(e)},B.DWT.OCRVerInName="10.0.0.0618",function(){for(var e=[B.DWT],n=0;n<1;n++){var t=e[n];t.EnumDWT_OCRLanguage={OCRL_ENG:"eng",OCRL_ARA:"ara",OCRL_CHI_SIM:"chi_sim",OCRL_CHI_TRA:"chi_tra",OCRL_HIN:"hin",OCRL_URD:"urd",OCRL_SPA:"spa",OCRL_FRA:"fra",OCRL_MSA:"msa",OCRL_IND:"ind",OCRL_RUS:"rus",OCRL_BEN:"ben",OCRL_POR:"por",OCRL_PAN:"pan",OCRL_DEU:"deu",OCRL_JPN:"jpn",OCRL_FAS:"fas",OCRL_SWA:"swa",OCRL_JAV:"jav",OCRL_TEL:"tel",OCRL_TUR:"tur",OCRL_KOR:"kor",OCRL_MAR:"mar",OCRL_TAM:"tam",OCRL_VIE:"vie",OCRL_ITA:"ita",OCRL_THA:"tha"},t.EnumDWT_OCRPageSetMode={OCRPSM_OSD_ONLY:0,PSM_AUTO_OSD:1,PSM_AUTO_ONLY:2,PSM_AUTO:3,PSM_SINGLE_COLUMN:4,PSM_SINGLE_BLOCK_VERT_TEXT:5,PSM_SINGLE_BLOCK:6,PSM_SINGLE_LINE:7,PSM_SINGLE_WORD:8,PSM_CIRCLE_WORD:9,PSM_SINGLE_CHAR:10},t.EnumDWT_OCROutputFormat={OCROF_TEXT:0,OCROF_PDFPLAINTEXT:1,OCROF_PDFIMAGEOVERTEXT:2,OCROF_PDFPLAINTEXT_PDFX:3,OCROF_PDFIMAGEOVERTEXT_PDFX:4},t.EnumDWT_OCRDownloadType={OCRDT_Dll:0,OCRDT_LANGUAGE:1}}}(),B.DWT.OCRLanguageData_eng="4113088",B.DWT.OCRLanguageData_ara="1432056",B.DWT.OCRLanguageData_chi_sim="2469156",B.DWT.OCRLanguageData_chi_tra="2366642",B.DWT.OCRLanguageData_hin="1122751",B.DWT.OCRLanguageData_urd="1398718",B.DWT.OCRLanguageData_spa="2294433",B.DWT.OCRLanguageData_fra="1130365",B.DWT.OCRLanguageData_msa="1747801",B.DWT.OCRLanguageData_ind="1122661",B.DWT.OCRLanguageData_rus="3861738",B.DWT.OCRLanguageData_ben="855841",B.DWT.OCRLanguageData_por="1982756",B.DWT.OCRLanguageData_pan="497721",B.DWT.OCRLanguageData_deu="1525436",B.DWT.OCRLanguageData_jpn="2471260",B.DWT.OCRLanguageData_fas="431500",B.DWT.OCRLanguageData_swa="2167651",B.DWT.OCRLanguageData_jav="2982741",B.DWT.OCRLanguageData_tel="2769654",B.DWT.OCRLanguageData_tur="4550554",B.DWT.OCRLanguageData_kor="1677415",B.DWT.OCRLanguageData_mar="2118233",B.DWT.OCRLanguageData_tam="3237963",B.DWT.OCRLanguageData_vie="531275",B.DWT.OCRLanguageData_ita="2701314",B.DWT.OCRLanguageData_tha="1072600",B.DWT.OCRLanguageData={},B.DWT.OCRLanguageData[B.DWT.EnumDWT_OCRLanguage.OCRL_ENG]=B.DWT.OCRLanguageData_eng,B.DWT.OCRLanguageData[B.DWT.EnumDWT_OCRLanguage.OCRL_ARA]=B.DWT.OCRLanguageData_ara,B.DWT.OCRLanguageData[B.DWT.EnumDWT_OCRLanguage.OCRL_CHI_TRA]=B.DWT.OCRLanguageData_chi_tra,B.DWT.OCRLanguageData[B.DWT.EnumDWT_OCRLanguage.OCRL_CHI_SIM]=B.DWT.OCRLanguageData_chi_sim,B.DWT.OCRLanguageData[B.DWT.EnumDWT_OCRLanguage.OCRL_HIN]=B.DWT.OCRLanguageData_hin,B.DWT.OCRLanguageData[B.DWT.EnumDWT_OCRLanguage.OCRL_URD]=B.DWT.OCRLanguageData_urd,B.DWT.OCRLanguageData[B.DWT.EnumDWT_OCRLanguage.OCRL_SPA]=B.DWT.OCRLanguageData_spa,B.DWT.OCRLanguageData[B.DWT.EnumDWT_OCRLanguage.OCRL_FRA]=B.DWT.OCRLanguageData_fra,B.DWT.OCRLanguageData[B.DWT.EnumDWT_OCRLanguage.OCRL_MSA]=B.DWT.OCRLanguageData_msa,B.DWT.OCRLanguageData[B.DWT.EnumDWT_OCRLanguage.OCRL_IND]=B.DWT.OCRLanguageData_ind,B.DWT.OCRLanguageData[B.DWT.EnumDWT_OCRLanguage.OCRL_RUS]=B.DWT.OCRLanguageData_rus,B.DWT.OCRLanguageData[B.DWT.EnumDWT_OCRLanguage.OCRL_BEN]=B.DWT.OCRLanguageData_ben,B.DWT.OCRLanguageData[B.DWT.EnumDWT_OCRLanguage.OCRL_POR]=B.DWT.OCRLanguageData_por,B.DWT.OCRLanguageData[B.DWT.EnumDWT_OCRLanguage.OCRL_PAN]=B.DWT.OCRLanguageData_pan,B.DWT.OCRLanguageData[B.DWT.EnumDWT_OCRLanguage.OCRL_DEU]=B.DWT.OCRLanguageData_deu,B.DWT.OCRLanguageData[B.DWT.EnumDWT_OCRLanguage.OCRL_JPN]=B.DWT.OCRLanguageData_jpn,B.DWT.OCRLanguageData[B.DWT.EnumDWT_OCRLanguage.OCRL_FAS]=B.DWT.OCRLanguageData_fas,B.DWT.OCRLanguageData[B.DWT.EnumDWT_OCRLanguage.OCRL_SWA]=B.DWT.OCRLanguageData_swa,B.DWT.OCRLanguageData[B.DWT.EnumDWT_OCRLanguage.OCRL_JAV]=B.DWT.OCRLanguageData_jav,B.DWT.OCRLanguageData[B.DWT.EnumDWT_OCRLanguage.OCRL_TEL]=B.DWT.OCRLanguageData_tel,B.DWT.OCRLanguageData[B.DWT.EnumDWT_OCRLanguage.OCRL_TUR]=B.DWT.OCRLanguageData_tur,B.DWT.OCRLanguageData[B.DWT.EnumDWT_OCRLanguage.OCRL_KOR]=B.DWT.OCRLanguageData_kor,B.DWT.OCRLanguageData[B.DWT.EnumDWT_OCRLanguage.OCRL_MAR]=B.DWT.OCRLanguageData_mar,B.DWT.OCRLanguageData[B.DWT.EnumDWT_OCRLanguage.OCRL_TAM]=B.DWT.OCRLanguageData_tam,B.DWT.OCRLanguageData[B.DWT.EnumDWT_OCRLanguage.OCRL_VIE]=B.DWT.OCRLanguageData_vie,B.DWT.OCRLanguageData[B.DWT.EnumDWT_OCRLanguage.OCRL_ITA]=B.DWT.OCRLanguageData_ita,B.DWT.OCRLanguageData[B.DWT.EnumDWT_OCRLanguage.OCRL_THA]=B.DWT.OCRLanguageData_tha,function(e){function n(){var t=this;t._text="",t._fontName="",t._fontSize="",t._left=0,t._top=0,t._right=0,t._bottom=0}n.prototype.GetText=function(){return this._text},n.prototype.GetFontName=function(){return this._fontName},n.prototype.GetFontSize=function(){return this._fontSize},n.prototype.GetWordRect=function(){var t=this;return t._left+","+t._top+","+t._right+","+t._bottom},e.NewWordBasicResult=function(){return new n}}(B.Lib),function(e){function n(){var t=this;t._count=0,t._left=0,t._top=0,t._right=0,t._bottom=0,t._wordlist=[]}n.prototype.GetWordCount=function(){return this._count},n.prototype.GetLineRect=function(){var t=this;return t._left+","+t._top+","+t._right+","+t._bottom},n.prototype.GetWordContent=function(t){var o=this,c=o._wordlist.length;return o._errorCode<0?"":null==t||c<=t||t<0?(B.Lib.Errors.OCR_InvalidIndex(o,"GetWordContent"),""):((c=B.Lib.NewWordBasicResult())._text=o._wordlist[t].text,c._fontName=o._wordlist[t].fontname,c._fontSize=o._wordlist[t].fontsize,c._left=o._wordlist[t].rect[0],c._top=o._wordlist[t].rect[1],c._right=o._wordlist[t].rect[2],c._bottom=o._wordlist[t].rect[3],c)},e.NewLineBasicResult=function(){return new n}}(B.Lib),function(e){function n(){this._count=0,this._linelist=[]}n.prototype.GetLineCount=function(){return this._count},n.prototype.GetLineContent=function(t){var o=this,c=o._linelist.length;return o._errorCode<0?"":null==t||c<=t||t<0?(B.Lib.Errors.OCR_InvalidIndex(o,"GetLineContent"),""):((c=B.Lib.NewLineBasicResult())._count=o._linelist[t].words.length,c._left=o._linelist[t].rect[0],c._top=o._linelist[t].rect[1],c._right=o._linelist[t].rect[2],c._bottom=o._linelist[t].rect[3],c._wordlist=o._linelist[t].words,c)},e.NewPageBasicResult=function(){return new n}}(B.Lib),function(e){function n(){this._count=0,this._pagelist=[]}n.prototype.GetPageCount=function(){return this._count},n.prototype.GetPageContent=function(t){var o=this,c=o._pagelist.length;return o._errorCode<0?"":null==t||c<=t||t<0?(B.Lib.Errors.OCR_InvalidIndex(o,"GetPageContent"),""):((c=B.Lib.NewPageBasicResult())._count=o._pagelist[t].lines.length,c._linelist=o._pagelist[t].lines,c)},e.NewPageSetBasicResult=function(){return new n}}(B.Lib),function(e){function n(t){var o=this;o._errorCode=0,o._errorString="",o._resultlist=[],o._stwain=t}n.prototype.GetErrorCode=function(){return this._errorCode},n.prototype.GetErrorString=function(){return this._errorString},n.prototype.GetFormat=function(){return this._resultlist[0].format},n.prototype.GetInput=function(){var t=this._resultlist[0].input;if(t){var o=Number(t);if(!isNaN(o))return this._stwain._ImgManager.convertServerIdToClientIndex(o)}return t},n.prototype.GetPageSetCount=function(){return this._resultlist[0].pagesets.length},n.prototype.GetPageSetContent=function(t){var o=this,c=o._resultlist[0].pagesets.length;return o._errorCode<0?"":null==t||c<=t||t<0?(B.Lib.Errors.OCR_InvalidIndex(o,"GetPageSetContent"),""):((c=B.Lib.NewPageSetBasicResult())._count=o._resultlist[0].pagesets[t].pages.length,c._pagelist=o._resultlist[0].pagesets[t].pages,c)},n.prototype.Get=function(){return this._stwain._innerFun("GetOCRRestult")},n.prototype.Save=function(t){return t=e.html5.Funs.replaceLocalFilename(t),this._stwain._innerFun("SaveOCRRestult",e.html5.Funs.makeParams(t))},e.NewOCRBasicResult=function(t){return new n(t)}}(B.Lib),function(e){function n(){var t=this;t.UnicodeFontName="",t.UseDetectedFont=!0,t.MinFontSizeforMoreAccurateResult=0,t.OCRLanguage=B.DWT.EnumDWT_OCRLanguage.OCRL_ENG,t.PageSetMode=B.DWT.EnumDWT_OCRPageSetMode.PSM_AUTO,t.OutputFormat=B.DWT.EnumDWT_OCROutputFormat.OCROF_PDFIMAGEOVERTEXT}n.prototype.GetUnicodeFontName=function(){return this.UnicodeFontName},n.prototype.SetUnicodeFontName=function(t){return e.isString(t)||(t=""),this.UnicodeFontName=t,!0},n.prototype.GetUseDetectedFont=function(){return!!this.UseDetectedFont},n.prototype.SetUseDetectedFont=function(t){return this.UseDetectedFont=!!t,!0},n.prototype.GetMinFontSizeforMoreAccurateResult=function(){return this.MinFontSizeforMoreAccurateResult},n.prototype.SetMinFontSizeforMoreAccurateResult=function(t){return this.MinFontSizeforMoreAccurateResult=t=(t=+t)<0?0:t,!0},n.prototype.GetOCRLanguage=function(){return this.OCRLanguage},n.prototype.SetOCRLanguage=function(t){return e.isString(t)||(t=""),this.OCRLanguage=t,!0},n.prototype.GetPageSetMode=function(){return this.PageSetMode},n.prototype.SetPageSetMode=function(t){return((t=+t)<0||t>B.DWT.EnumDWT_OCRPageSetMode.PSM_SINGLE_CHAR)&&(t=B.DWT.EnumDWT_OCRPageSetMode.PSM_AUTO),this.PageSetMode=t,!0},n.prototype.GetOutputFormat=function(){return this.OutputFormat},n.prototype.SetOutputFormat=function(t){return((t=+t)<0||t>B.DWT.EnumDWT_OCROutputFormat.OCROF_PDFIMAGEOVERTEXT_PDFX)&&(t=B.DWT.EnumDWT_OCROutputFormat.OCROF_PDFIMAGEOVERTEXT),this.OutputFormat=t,!0},e.NewOptions=function(){return new n}}(B.Lib),B.AddonReady(function(e,n){var t;e.product.bHTML5Edition&&e.DynamicLoadAddonFuns&&e.DynamicLoadAddonFuns.push(function(o){var c,h,p,m=e.html5.Funs,y=e.NewOptions();p=e.html5.Funs,t=e.env.bMac?"DynamicOCR_"+B.DWT.OCRVerInName+".dylib":e.env.bLinux?"DynamicOCR_"+B.DWT.OCRVerInName+".so":B.dcp.b64bit?"DynamicOCRx64_"+B.DWT.OCRVerInName+".dll":"DynamicOCR_"+B.DWT.OCRVerInName+".dll",(h=o)._isMobileMode()||h._innerSend("GetAddOnVersion",p.makeParams("ocr",t),!0,!1,!1),h.__innerOCRBasicReadFunction=function(C,w,P,O,z,A,ne,$,K,q,N){return e.isFunction(q)?this.__innerOCRBasicAsyncReadFunction(C,w,P,O,z,A,ne,$,K,q,N):this.__innerOCRSyncReadFunction(C,K)},h.__innerGetOCRBasicResultAsyncFunction=function(C){var w=B.Lib.NewOCRBasicResult(this);return C&&(w._errorCode=C.exception,w._errorString=C.description,w._resultlist=C.result),w},h.__innerOCRBasicAsyncReadFunction=function(C,w,P,O,z,A,ne,$,K,q,N){var H=this;return p.showMask(C),H._innerSend(C,K,!0,function(re){var ie;0==re.exception?(e.isFunction(q)&&(-1!=w?(ie=H._convertServerIdToGuid(w),1==O?q(ie,z,A,ne,$,H.__innerGetOCRBasicResultAsyncFunction(re)):q(ie,H.__innerGetOCRBasicResultAsyncFunction(re))):""!=P?q(P,H.__innerGetOCRBasicResultAsyncFunction(re)):q(H.__innerGetOCRBasicResultAsyncFunction(re))),e.License.isLTS()&&B.DWT.lcvrf(h)):e.isFunction(N)&&N(re.exception,re.description),p.hideMask(C)},function(re){p.hideMask(C)}),!0},h.__innerOCRSyncReadFunction=function(C,w){return C=this._innerFunRaw(C,w,!1,!1),(w=e.NewOCRBasicResult())._errorCode=this._errorCode,w._errorString=this._errorString,C&&e.isArray(C)&&(w._resultlist=C,w._Count=C.length,e.License.isLTS())&&B.DWT.lcvrf(h),w},h.__IsOCRBasicModuleInstalled=function(){return""!=h._innerFun("GetAddOnVersion",p.makeParams("ocr",t)).split("|")[0]},h.__innerBasicDownload=function(C,w,P,O,z){function A(){return $.IfShowProgressBar&&e.closeProgress(null,"Download"),e.isFunction(O)&&O(),!0}function ne(){return $.IfShowProgressBar&&e.closeProgress(null,"Download"),e.isFunction(z)&&z($.ErrorCode,$.ErrorString),!1}var $=h;if(e.cancelFrome=2,C=C.toString(),!e.License.checkProductKey($,{Core:!0})||!e.License.checkProductKey($,{OCR:!0},!0))return ne();w!=B.DWT.EnumDWT_OCRDownloadType.OCRDT_Dll&&$._innerFun("SetOCRLanguage",p.makeParams(P));var K=$._innerFun("GetAddOnVersion",p.makeParams("ocr",t)).split("|");if(w==B.DWT.EnumDWT_OCRDownloadType.OCRDT_Dll){if(""!=K[0])return A(),!0}else if((P=B.DWT.OCRLanguageData[P])&&K[1]==P)return A(),!0;if(!C||""==C)return e.Errors.OCR_InvalidRemoteFilename($),ne(),!1;if(p.isServerInvalid($))return ne(),!1;$.IfShowProgressBar&&e.showProgress($,"Download",!0);var q=!0;$._OnPercentDone(w==B.DWT.EnumDWT_OCRDownloadType.OCRDT_Dll?[0,-1,"Downloading OCR Module...","http"]:[0,-1,"Downloading OCR Language Data...","http"]),e.isFunction(O)||(q=!1),p.loadHttpBlob($,"get",C,q,function(N){$._OnPercentDone([0,-1,"Loading..."]);var H=100;w==B.DWT.EnumDWT_OCRDownloadType.OCRDT_LANGUAGE&&(H=101),$.__LoadImageFromBytes(N,H,"",q,A,ne)},function(){$.IfShowProgressBar&&e.closeProgress(null,"Download"),ne()},function(N){var H=0===N.total?100:Math.round(100*N.loaded/N.total);[N.loaded," / ",N.total].join(""),$._OnPercentDone([0,H,"","http"])})},c={OCR:{SetUnicodeFontName:function(C){var w=o;return w._resetErr(),w._isMobileMode()?w._mobileNotSupport("Addon.OCR.SetUnicodeFontName"):y.SetUnicodeFontName(C)},GetUnicodeFontName:function(){var C=o;return C._resetErr(),C._isMobileMode()?C._mobileNotSupport("Addon.OCR.GetUnicodeFontName"):y.GetUnicodeFontName()},SetIfUseDetectedFont:function(C){var w=o;return w._resetErr(),w._isMobileMode()?w._mobileNotSupport("Addon.OCR.SetIfUseDetectedFont"):y.SetUseDetectedFont(C)},GetIfUseDetectedFont:function(){var C=o;return C._resetErr(),C._isMobileMode()?C._mobileNotSupport("Addon.OCR.GetIfUseDetectedFont"):y.GetUseDetectedFont()},SetMinFontSizeforMoreAccurateResult:function(C){var w=o;return w._resetErr(),w._isMobileMode()?w._mobileNotSupport("Addon.OCR.SetMinFontSizeforMoreAccurateResult"):y.SetMinFontSizeforMoreAccurateResult(C)},GetMinFontSizeforMoreAccurateResult:function(){var C=o;return C._resetErr(),C._isMobileMode()?C._mobileNotSupport("Addon.OCR.GetMinFontSizeforMoreAccurateResult"):y.GetMinFontSizeforMoreAccurateResult()},SetLanguage:function(C){var w=o;return w._resetErr(),w._isMobileMode()?w._mobileNotSupport("Addon.OCR.SetLanguage"):y.SetOCRLanguage(C)},IsModuleInstalled:function(){var C=o;return C._resetErr(),C._isMobileMode()?C._mobileNotSupport("Addon.OCR.IsModuleInstalled"):C.__IsOCRBasicModuleInstalled()},SetPageSetMode:function(C){var w=o;return w._resetErr(),w._isMobileMode()?w._mobileNotSupport("Addon.OCR.SetPageSetMode"):(C=+C)==B.DWT.EnumDWT_OCRPageSetMode.OCRPSM_OSD_ONLY||C==B.DWT.EnumDWT_OCRPageSetMode.PSM_AUTO_OSD||C==B.DWT.EnumDWT_OCRPageSetMode.PSM_AUTO_ONLY||C==B.DWT.EnumDWT_OCRPageSetMode.PSM_AUTO||C==B.DWT.EnumDWT_OCRPageSetMode.PSM_SINGLE_COLUMN||C==B.DWT.EnumDWT_OCRPageSetMode.PSM_SINGLE_BLOCK_VERT_TEXT||C==B.DWT.EnumDWT_OCRPageSetMode.PSM_SINGLE_BLOCK||C==B.DWT.EnumDWT_OCRPageSetMode.PSM_SINGLE_LINE||C==B.DWT.EnumDWT_OCRPageSetMode.PSM_SINGLE_WORD||C==B.DWT.EnumDWT_OCRPageSetMode.PSM_CIRCLE_WORD||C==B.DWT.EnumDWT_OCRPageSetMode.PSM_SINGLE_CHAR?y.SetPageSetMode(C):(B.Lib.Errors.OCR_InvalidPageSetMode(w),!1)},SetOutputFormat:function(C){var w=o;return w._resetErr(),w._isMobileMode()?w._mobileNotSupport("Addon.OCR.SetOutputFormat"):(C=+C)==B.DWT.EnumDWT_OCROutputFormat.OCROF_TEXT||C==B.DWT.EnumDWT_OCROutputFormat.OCROF_PDFPLAINTEXT||C==B.DWT.EnumDWT_OCROutputFormat.OCROF_PDFIMAGEOVERTEXT||C==B.DWT.EnumDWT_OCROutputFormat.OCROF_PDFPLAINTEXT_PDFX||C==B.DWT.EnumDWT_OCROutputFormat.OCROF_PDFIMAGEOVERTEXT_PDFX?y.SetOutputFormat(C):(B.Lib.Errors.OCR_InvalidOutputFormat(w),!1)},Recognize:function(C,w,P){var O=o;return O._resetErr(),O._isMobileMode()?O._mobileNotSupport("Addon.OCR.Recognize"):e.License.checkProductKey(O,{OCR:!0},!0)?(C=O._ImgManager.convertClientIndexToServerId(C),O.__innerOCRBasicReadFunction("OCRRecognize",C,"",0,0,0,0,0,m.makeParams(0,C,"",0,0,0,0,y.GetUnicodeFontName(),y.GetUseDetectedFont(),y.GetMinFontSizeforMoreAccurateResult(),y.GetOCRLanguage(),y.GetPageSetMode(),y.GetOutputFormat(),""),w,P)):(e.isFunction(P)&&P(O._errorCode,O._errorString),!1)},RecognizeRect:function(C,w,P,O,z,A,ne){var $,K=o;return K._resetErr(),K._isMobileMode()?K._mobileNotSupport("Addon.OCR.RecognizeRect"):!w&&0!=w||!P&&0!=P||!O&&0!=O||!z&&0!=z?($=B.Lib.NewOCRBasicResult(K),B.Lib.Errors.OCR_InvalidLeftOrTopOrRightOrBottom($,"RecognizeRect"),void ne($.GetErrorCode(),$.GetErrorString())):e.License.checkProductKey(K,{OCR:!0},!0)?($=K._ImgManager.convertClientIndexToServerId(C),K.__innerOCRBasicReadFunction("OCRRecognize",$,"",1,w,P,O,z,m.makeParams(0,$,"",w,P,O,z,y.GetUnicodeFontName(),y.GetUseDetectedFont(),y.GetMinFontSizeforMoreAccurateResult(),y.GetOCRLanguage(),y.GetPageSetMode(),y.GetOutputFormat(),""),A,ne)):(e.isFunction(ne)&&ne(K._errorCode,K._errorString),!1)},RecognizeFile:function(C,w,P){var O=o;return O._resetErr(),O._isMobileMode()?O._mobileNotSupport("Addon.OCR.RecognizeFile"):(C=m.replaceLocalFilename(C),e.License.checkProductKey(O,{OCR:!0},!0)?O.__innerOCRBasicReadFunction("OCRRecognize",-1,C,0,0,0,0,0,m.makeParams(1,-1,C,0,0,0,0,y.GetUnicodeFontName(),y.GetUseDetectedFont(),y.GetMinFontSizeforMoreAccurateResult(),y.GetOCRLanguage(),y.GetPageSetMode(),y.GetOutputFormat(),""),w,P):(e.isFunction(P)&&P(O._errorCode,O._errorString),!1))},RecognizeSelectedImages:function(C,w){var P,O,z,A=o;return A._resetErr(),A._isMobileMode()?A._mobileNotSupport("Addon.OCR.RecognizeSelectedImages"):e.License.checkProductKey(A,{OCR:!0},!0)?(z=[],(P=A)._ImgManager.count()<=0||(O=P._ImgManager.getCurrentImageIndex(),P._ImgManager.convertClientIndexToServerId(O),O=P._ImgManager.getSelectedClientIndexArray(),e.isArray(O)&&e.each(O,function(ne){ne=P._ImgManager.convertClientIndexToServerId(ne),z.push(ne)})),O=z,A.__innerOCRBasicReadFunction("OCRRecognize",-1,"",0,0,0,0,0,m.makeParams(2,-1,"",0,0,0,0,y.GetUnicodeFontName(),y.GetUseDetectedFont(),y.GetMinFontSizeforMoreAccurateResult(),y.GetOCRLanguage(),y.GetPageSetMode(),y.GetOutputFormat(),O.join(",")),C,w)):(e.isFunction(w)&&w(A._errorCode,A._errorString),!1)},Download:function(C,w,P){var O=o;return O._resetErr(),O._isMobileMode()?O._mobileNotSupport("Addon.OCR.Download"):O.__innerBasicDownload(C,B.DWT.EnumDWT_OCRDownloadType.OCRDT_Dll,y.GetOCRLanguage(),w,P)},DownloadLangData:function(C,w,P){var O=o;return O._resetErr(),O._isMobileMode()?O._mobileNotSupport("Addon.OCR.DownloadLangData"):O.__innerBasicDownload(C,B.DWT.EnumDWT_OCRDownloadType.OCRDT_LANGUAGE,y.GetOCRLanguage(),w,P)}}},o.__addon=o.__addon||{},e.mix(o.__addon,c)})}),(B=self.Dynamsoft||{}).DWT=B.DWT||{},B.aryAddonReadyFun=B.aryAddonReadyFun||[],B.AddonReady=B.AddonReady||function(e){B.aryAddonReadyFun.push(e)},B.ProOCRVerInName="1.2.0.0806",function(e){function n(){var t=this;t._text="",t._left=0,t._top=0,t._right=0,t._bottom=0}n.prototype.GetText=function(){return this._text},n.prototype.GetLetterRect=function(){var t=this;return t._left+","+t._top+","+t._right+","+t._bottom},e.NewLetterResult=function(){return new n}}(B.Lib),function(e){function n(){var t=this;t._count=0,t._letterlist=[],t._zoneCount=0,t._zoneWords=[]}n.prototype.GetLettersCount=function(){return this._count},n.prototype.GetZoneCount=function(){return this._zoneCount},n.prototype.GetLetterContent=function(t){var o=this;if(o._errorCode<0)return"";if(null==t||t>=o._count||t<0)return B.Lib.Errors.OCR_InvalidIndex(o,"GetLetterContent"),"";var h=B.Lib.NewLetterResult();return h._text=o._letterlist[t].letter,h._left=o._letterlist[t].boundary[0],h._top=o._letterlist[t].boundary[1],h._right=o._letterlist[t].boundary[2],h._bottom=o._letterlist[t].boundary[3],h},n.prototype.GetZoneContent=function(t){var o=this;return o._errorCode<0?"":null==t||t>=o._zoneCount||t<0?(B.Lib.Errors.OCR_InvalidIndex(o,"GetZoneContent"),""):o._zoneWords[t]},e.NewPageResult=function(){return new n}}(B.Lib),function(e){function n(){var t=this;t._input=0,t._message="",t._page=-1}n.prototype.GetInput=function(){return this._input},n.prototype.GetMessage=function(){return this._message},n.prototype.GetPage=function(){return this._page},e.NewErrorInfo=function(){return new n}}(B.Lib),function(e){function n(t){var o=this;o._errorCode=0,o._errorString="",o._errorlist=[],o._request="",o._ocrTotalCount=0,o._alreadyOCRCount=0,o._resultlist=[],o._resultZoneDetail=[],o._stwain=t}n.prototype.GetErrorCode=function(){return this._errorCode},n.prototype.GetErrorString=function(){return this._errorString},n.prototype.GetInput=function(){var t=this;if(t._request&&t._request.input){var o=t._request.input;if(o){var c=Number(o);if(!isNaN(c))return t._stwain._ImgManager.convertServerIdToClientIndex(c)}return o}return""},n.prototype.GetErrorDetailList=function(){var t=this,o=0;t._errorlist&&(o=t._errorlist.length);for(var c=[],h=0;h<o;h++){var p=B.Lib.NewErrorInfo();p._input=t._errorlist[h].input,p._message=t._errorlist[h].message,p._page=t._errorlist[h].page,c.push(p)}return c},n.prototype.GetOCRTotalCount=function(){return this._ocrTotalCount?this._ocrTotalCount:0},n.prototype.GetAlreadyOCRCount=function(){return this._alreadyOCRCount?this._alreadyOCRCount:0},n.prototype.GetPageCount=function(){var t=this;return t._resultlist&&t._resultlist.length?t._resultlist.length:0},n.prototype.GetPageContent=function(t){var o=this,c=0;if(o._resultlist&&(c=o._resultlist.length),null==t||t>=c||t<0)return B.Lib.Errors.OCR_InvalidIndex(o,"GetPageContent"),"";var h=B.Lib.NewPageResult();return o._resultlist?(h._count=o._resultlist[t].length,h._letterlist=o._resultlist[t]):h._count=0,o._resultZoneDetail?(h._zoneCount=o._resultZoneDetail[t].length,h._zoneWords=o._resultZoneDetail[t]):h._zoneCount=0,h},n.prototype.Get=function(){return this._stwain._innerFun("GetOCRRestult")},n.prototype.Save=function(t){var c=e.html5.Funs.replaceLocalFilename(t);return this._stwain._innerFun("SaveOCRRestult",e.html5.Funs.makeParams(c))},e.NewOCRProResult=function(t){return new n(t)}}(B.Lib),function(e){for(var n=[B.DWT],t=0;t<1;t++){var o=n[t];o.EnumDWT_OCRProRecognitionModule={OCRPM_AUTO:"AUTO",OCRPM_MOSTACCURATE:"MOSTACCURATE",OCRPM_BALANCED:"BALANCED",OCRPM_FASTEST:"FASTEST"},o.EnumDWT_OCRProOutputFormat={OCRPFT_TXTS:"TXTS",OCRPFT_TXTCSV:"TXTCSV",OCRPFT_TXTF:"TXTF",OCRPFT_XML:"XML",OCRPFT_IOTPDF:"IOTPDF",OCRPFT_IOTPDF_MRC:"IOTPDF_MRC"},o.EnumDWT_OCRProPDFVersion={OCRPPDFV_0:"1.0",OCRPPDFV_1:"1.1",OCRPPDFV_2:"1.2",OCRPPDFV_3:"1.3",OCRPPDFV_4:"1.4",OCRPPDFV_5:"1.5",OCRPPDFV_6:"1.6",OCRPPDFV_7:"1.7"},o.EnumDWT_OCRProPDFAVersion={OCRPPDFAV_1A:"pdf/a-1a",OCRPPDFAV_1B:"pdf/a-1b",OCRPPDFAV_2A:"pdf/a-2a",OCRPPDFAV_2B:"pdf/a-2b",OCRPPDFAV_2U:"pdf/a-2u",OCRPPDFAV_3A:"pdf/a-3a",OCRPPDFAV_3B:"pdf/a-3b",OCRPPDFAV_3U:"pdf/a-3u"},o.EnumDWT_OCRProType={OCRDT_File:0,OCRDT_Index:1},o.EnumDWT_OCRFindTextFlags={OCRFT_WHOLEWORD:1,OCRFT_MATCHCASE:2,OCRFT_FUZZYMATCH:4},o.EnumDWT_OCRFindTextAction={OCRFT_HIGHLIGHT:0,OCRFT_STRIKEOUT:1,OCRFT_MARKFORREDACT:2}}}(typeof window<"u"&&window),function(e){function n(){var t=this;t.FindText="",t.FindTextFlags=B.DWT.EnumDWT_OCRFindTextFlags.OCRFT_WHOLEWORD,t.FindTextAction=B.DWT.EnumDWT_OCRFindTextAction.OCRFT_MARKFORREDACT}e.NewRedaction=function(){return new n}}(B.Lib),B.WebTwain={Addon:{OCRPro:{}}},function(e){function n(){var t=this;t.RecognitionModule="",t.Languages="eng",t.OutputFormat="",t.PDFVersion="",t.PDFAVersion="",t.LicenseChecker="",t.Redaction=B.Lib.NewRedaction()}e.NewSettings=function(){return new n}}(B.WebTwain.Addon.OCRPro),function(){function e(n,t,o,c){var h=this;h.left=n,h.top=t,h.right=o,h.bottom=c}B.WebTwain.Addon.OCRPro.NewOCRZone=function(n,t,o,c){return new e(n,t,o,c)}}(),B.AddonReady(function(e,n){if(e.product.bHTML5Edition){var p=function(ee,ue,ce,fe){var le=e.NewOCRProResult(ee);le._errorCode=ue,le._errorString=ce;var me=e.NewErrorInfo();return me.input=fe,me.message=le._errorString,me.page=0,le._errorlist=[me],le};e.DynamicLoadAddonFuns&&e.DynamicLoadAddonFuns.push(function(ee){var ce,fe,ue=e.html5.Funs;fe=e.env.bMac?"DynamicOCRPro_"+B.ProOCRVerInName+".dylib":e.env.bLinux?"DynamicOCRPro_"+B.ProOCRVerInName+".so":B.dcp.b64bit?"DynamicOCRProx64_"+B.ProOCRVerInName+".dll":"DynamicOCRPro_"+B.ProOCRVerInName+".dll",function c(ee){var ue=e.html5.Funs;ee.__innerGetOCRProResultAsyncFunction=function(ce){var fe=B.Lib.NewOCRProResult(this);return ce&&(fe._errorCode=ce.code,fe._errorString=ce.message,fe._request=ce.request,fe._errorlist=ce.errorList,fe._ocrTotalCount=ce.ocrTotalCount,fe._alreadyOCRCount=ce.alreadyOCRCount,fe._resultlist=ce.resultDetail,fe._resultZoneDetail=ce.resultZoneDetail),fe},ee.__innerIsOCRTrial=function(ce,fe){var le=this,me=function(){var Pe=!1;if(le.__licenseInfo.Detail)for(var pe=0;pe<le.__licenseInfo.Detail.length;pe++)"10"==le.__licenseInfo.Detail[pe].EnumLicenseType&&"TRUE"==le.__licenseInfo.Detail[pe].Trial&&(Pe=!0);return ce(Pe)};return le.__licenseInfo&&le.__licenseInfo.Detail?me():le.GetLicenseInfo(me,fe)},ee.__innerOCRReadFunction=function(ce,fe,le,me,Pe,pe,Re,xe){return this.__innerOCRAsyncReadFunction(ce,fe,le,me,Pe,pe,Re,xe)},ee.__innerOCRAsyncReadFunction=function(ce,fe,le,me,Pe,pe,Re,xe){var Fe=this;return ue.showMask(ce),Fe._innerSend(ce,pe,!0,function(Ge){0==Ge.code?(e.isFunction(Re)&&(-1!=fe?1==me?Re(fe,Pe,Fe.__innerGetOCRProResultAsyncFunction(Ge)):Re(fe,Fe.__innerGetOCRProResultAsyncFunction(Ge)):""!=le?Re(le,Fe.__innerGetOCRProResultAsyncFunction(Ge)):Re(Fe.__innerGetOCRProResultAsyncFunction(Ge))),e.License.isLTS()&&B.DWT.lcvrf(ee)):e.isFunction(xe)&&xe(Ge.code,Ge.message,Fe.__innerGetOCRProResultAsyncFunction(Ge)),ue.hideMask(ce)},function(Ge){ue.hideMask(ce)}),!0},ee.__innerGetRequestJson=function(ce,fe,le,me,Pe){var Re,xe="[{";for(xe+='"id":"'+ee.clientId+'",',xe+='"method":"OCRProRecognize",',xe+='"dllName":"'+Pe+'",',xe+='"productkey":"'+B.DWT.ProductKey+'",',xe+=ce==B.DWT.EnumDWT_OCRProType.OCRDT_File?'"inputType":"file",':'"inputType":"index",',xe+='"input":[',Re=0;Re<fe.length;Re++)xe+=ce==B.DWT.EnumDWT_OCRProType.OCRDT_File?'"'+fe[Re]+'"':fe[Re],Re+1<fe.length&&(xe+="|");if(xe+="],",xe+='"settings":{',xe+='"recognitionMethod": "Page"',le&&(le.RecognitionModule&&le.RecognitionModule.length>0&&(xe+=',"recognitionModule":"'+le.RecognitionModule+'"'),le.Languages&&le.Languages.length>0&&(xe+=',"languages":"'+le.Languages+'"'),le.OutputFormat&&le.OutputFormat.length>0&&(xe+=',"outputFormat":"'+le.OutputFormat+'"'),le.PDFVersion&&le.PDFVersion.length>0&&(xe+=',"pdfVersion":"'+le.PDFVersion+'"'),le.PDFAVersion&&le.PDFAVersion.length>0&&(xe+=',"pdfAVersion":"'+le.PDFAVersion+'"'),le.Redaction&&le.Redaction.FindText&&le.Redaction.FindText.length>0)){var Fe=parseInt(le.Redaction.FindTextFlags),Xe=parseInt(le.Redaction.FindTextAction);if(!isNaN(Fe)&&!isNaN(Xe)){xe+=',"redaction":{';var st=le.Redaction.FindText;xe+='"findText":"'+(st=st.replace(/\"/g,'\\"'))+'"',xe+=',"findTextFlags":'+Fe,xe+=',"findTextAction":'+Xe,xe+="}"}}for(xe+="},",xe+='"zones":[',Re=0;Re<me.length;Re++)xe+="["+me[Re].left+","+me[Re].top+","+me[Re].right+","+me[Re].bottom+"]",Re+1<me.length&&(xe+=",");return xe+="],",(xe+='"outputFile":""')+"}]"},ee.__LoadImageFromBytesForDownloadInner=function(ce,fe,le,me,Pe,pe,Re,xe,Fe){var st,nt,Xe=ee;nt=ce>=me?fe.slice(st=pe*me,Pe):fe.slice(st=ce*pe,(ce+1)*pe),Xe.__LoadImageFromBytes(nt,le,"",Re,function(){ce>=me?B.Lib.isFunction(xe)&&xe():Xe.__LoadImageFromBytesForDownloadInner(ce+=1,fe,le,me,Pe,pe,Re,xe,Fe)},function(){B.Lib.isFunction(Fe)&&Fe()},st,Pe)},ee.__LoadImageFromBytesForDownload=function(ce,fe,le,me,Pe,pe){var Re=ee,xe=2e6,Fe=ce.size||ce.length,Xe=parseInt(Fe/xe);0==Fe%xe&&(Xe-=1),Re.__LoadImageFromBytesForDownloadInner(0,ce,fe,Xe,Fe,xe,me,Pe,pe)}}(ee),ce={OCRPro:{Settings:!1,Recognize:function(le,me,Pe){var Re,xe,pe=[],st=ee;if(st._resetErr(),st._isMobileMode())return st._mobileNotSupport("Addon.OCRPro.Recognize");if(Re=parseInt(le),e.isNaN(Re)||!e.isNumber(Re))return xe=p(ee,-2201,"Invalid parameter type.",le),e.isFunction(Pe)?Pe(xe._errorCode,xe._errorString,xe):e.Errors.WebviewerError(ee,xe._errorString,xe._errorCode),!1;var Ge=ee._ImgManager.convertClientIndexToServerId(Re);if(-1==Ge)return e.isFunction(Pe)&&(e.Errors.IndexOutOfRange(ee),xe=p(ee,ee._errorCode,ee._errorString,le),Pe(xe._errorCode,xe._errorString,xe)),!1;if(!e.License.checkProductKey(ee,{OCRPro:!0},!0))return e.isFunction(Pe)&&(xe=p(ee,ee._errorCode,ee._errorString,le),Pe(xe._errorCode,xe._errorString,xe)),!1;pe.push(Ge);var nt=[],ut=this.Settings,en=ee.__innerGetRequestJson(B.DWT.EnumDWT_OCRProType.OCRDT_Index,pe,ut,nt,fe);return ee.__innerIsOCRTrial(function(nn){return nn||e.License.isLTS()?ee.__innerOCRReadFunction("OCRProRecognize",le,"",0,nt,en,me,Pe):w(ut.LicenseChecker,ee,"OCRProRecognize",le,"",0,nt,en,me,Pe)},Pe)},RecognizeRect:function(le,me,Pe,pe){var xe,Fe,Re=[],Ge=ee;if(Ge._resetErr(),Ge._isMobileMode())return Ge._mobileNotSupport("Addon.OCRPro.RecognizeRect");if(xe=parseInt(le),e.isNaN(xe)||!e.isNumber(xe))return Fe=p(ee,-2201,"Invalid parameter type.",le),e.isFunction(pe)?pe(Fe._errorCode,Fe._errorString,Fe):e.Errors.WebviewerError(ee,Fe._errorString,Fe._errorCode),!1;var nt=ee._ImgManager.convertClientIndexToServerId(xe),ut=ee._ImgManager.GetImageWidth(xe),en=ee.GetImageHeight(xe);if(-1==nt)return e.isFunction(pe)&&(e.Errors.IndexOutOfRange(ee),Fe=p(ee,ee._errorCode,ee._errorString,le),pe(Fe._errorCode,Fe._errorString,Fe)),!1;if(!e.License.checkProductKey(ee,{OCRPro:!0},!0))return e.isFunction(pe)&&(Fe=p(ee,ee._errorCode,ee._errorString,le),pe(Fe._errorCode,Fe._errorString,Fe)),!1;if(ut>0&&en>0)for(var nn,hn,Wn,ge,de,j,Be=0;Be<me.length;Be++)(hn=(nn=me[Be]).left)<0&&(hn=0),(Wn=nn.top)<0&&(Wn=0),(ge=nn.right)<0&&(ge=0),(de=nn.bottom)<0&&(de=0),hn>ge&&(j=hn,hn=ge,ge=j),Wn>de&&(j=Wn,Wn=de,de=j),ge>ut&&(ge=ut),de>en&&(de=en),nn.left=hn,nn.top=Wn,nn.right=ge,nn.bottom=de;Re.push(nt);var Je=this.Settings,Qe=ee.__innerGetRequestJson(B.DWT.EnumDWT_OCRProType.OCRDT_Index,Re,Je,me,fe);return ee.__innerIsOCRTrial(function(xt){return xt||e.License.isLTS()?ee.__innerOCRReadFunction("OCRProRecognize",le,"",1,me,Qe,Pe,pe):w(Je.LicenseChecker,ee,"OCRProRecognize",le,"",1,me,Qe,Pe,pe)},pe)},RecognizeFile:function(le,me,Pe){var Re,xe,Fe,pe=ee;if(pe._resetErr(),pe._isMobileMode())return pe._mobileNotSupport("Addon.OCRPro.RecognizeFile");if(0==le.length)return e.isFunction(Pe)&&((Re=B.Lib.NewOCRProResult(ee))._errorCode=-2201,Re._errorString="File name cannot be empty.",Fe=[],(xe=B.Lib.NewErrorInfo()).input=le,xe.message=Re._errorString,xe.page=0,Fe.push(xe),Re._errorlist=Fe,Pe(Re._errorCode,Re._errorString,Re)),!1;if(!e.License.checkProductKey(ee,{OCRPro:!0},!0))return e.isFunction(Pe)&&((Re=B.Lib.NewOCRProResult(ee))._errorCode=ee._errorCode,Re._errorString=ee._errorString,Fe=[],(xe=B.Lib.NewErrorInfo()).input=le,xe.message=Re._errorString,xe.page=0,Fe.push(xe),Re._errorlist=Fe,Pe(Re._errorCode,Re._errorString,Re)),!1;var Xe=ue.replaceLocalFilename(le),st=[];Xe.indexOf("|")>0?st=Xe.split("|"):Xe.indexOf(";")>0?st=Xe.split(";"):Xe.indexOf(",")>0&&(st=Xe.split(","));var Ge=[];if(st.length>0)for(var nt=0;nt<st.length;nt++)Ge.push(st[nt]);else Ge.push(Xe);var ut=[],en=this.Settings,nn=ee.__innerGetRequestJson(B.DWT.EnumDWT_OCRProType.OCRDT_File,Ge,en,ut,fe);ee.__innerIsOCRTrial(function(hn){return hn||e.License.isLTS()?ee.__innerOCRReadFunction("OCRProRecognize",-1,le,0,ut,nn,me,Pe):w(en.LicenseChecker,ee,"OCRProRecognize",-1,le,0,ut,nn,me,Pe)},Pe)},RecognizeSelectedImages:function(le,me){var Pe,pe,Re,xe=ee;if(xe._resetErr(),xe._isMobileMode())return xe._mobileNotSupport("Addon.OCRPro.RecognizeSelectedImages");if(!e.License.checkProductKey(ee,{OCRPro:!0},!0)){if(e.isFunction(me)){var Fe=B.Lib.NewOCRProResult(ee);Fe._errorCode=ee._errorCode,Fe._errorString=ee._errorString,pe=[],(Re=B.Lib.NewErrorInfo()).input="",Re.message=Fe._errorString,Re.page=0,pe.push(Re),Fe._errorlist=pe,me(Fe._errorCode,Fe._errorString,Fe)}return!1}var Xe=[],st=this.Settings,Ge=function(ee){var fe,le,ue=[];return ee._ImgManager.count()<=0||(fe=ee._ImgManager.getCurrentImageIndex(),ee._ImgManager.convertClientIndexToServerId(fe),le=ee._ImgManager.getSelectedClientIndexArray(),e.isArray(le)&&e.each(le,function(me){var Pe=ee._ImgManager.convertClientIndexToServerId(me);ue.push(Pe)})),ue}(ee),nt=ee.__innerGetRequestJson(B.DWT.EnumDWT_OCRProType.OCRDT_Index,Ge,st,Xe,fe);return ee.__innerIsOCRTrial(function(ut){Pe=ut||e.License.isLTS()?ee.__innerOCRReadFunction("OCRProRecognize",-1,"",0,Xe,nt,le,me):w(st.LicenseChecker,ee,"OCRProRecognize",-1,"",0,Xe,nt,le,me)},me),Pe},IsModuleInstalled:function(){var le=ee;return le._resetErr(),le._isMobileMode()?le._mobileNotSupport("Addon.OCRPro.IsModuleInstalled"):""!=le._innerFun("GetAddOnVersion",ue.makeParams("proocr",fe))},Download:function(le,me,Pe){var pe=ee;if(pe._resetErr(),pe._isMobileMode())return pe._mobileNotSupport("Addon.OCRPro.Download");var xe=function(){return e.isFunction(me)&&me(),!0},Fe=function(){return e.isFunction(Pe)&&Pe(pe.ErrorCode,pe.ErrorString),!1};if(!e.License.checkProductKey(pe,{Core:!0})||!e.License.checkProductKey(pe,{OCRPro:!0},!0))return Fe();if(this.IsModuleInstalled())return xe(),!0;if(!le||""==le||!e.isString(le))return e.Errors.OCR_InvalidRemoteFilename(pe),Fe(),!1;if(ue.isServerInvalid(pe))return Fe(),!1;e.cancelFrome=2,e.showProgress(pe,"Download",!0);var st=!0;return pe._OnPercentDone([0,-1,"Downloading OCR Resources...","http"]),e.isFunction(me)||(st=!1),ue.loadHttpBlob(pe,"get",le,st,function(Ge){pe._OnPercentDone([0,-1,"Loading..."]),pe.__LoadImageFromBytesForDownload(Ge,102,"",st,xe,Fe)},function(){e.closeProgress("Download"),Fe()},function(Ge){var nt=0===Ge.total?100:Math.round(100*Ge.loaded/Ge.total);[Ge.loaded," / ",Ge.total].join(""),pe._OnPercentDone([0,nt,"","http"])})}}},ee.__addon=ee.__addon||{},e.mix(ee.__addon,ce)}),B.WebTwain.Addon.OCRPro.NewOCRReadPara=function(ee,ue,ce,fe,le,me,Pe,pe,Re,xe){return new y(ee,ue,ce,fe,le,me,Pe,pe,Re,xe)},B.WebTwain.Addon.OCRPro.NewOCRError=function(){return new z},B.Lib.mix(B.Lib.Errors,{OCR_LicenseCheckerEmpty:function(ee){var ce="LicenseChecker cannot be empty.";ee.errorString=ce,ee.responseText=ie("false;-2601;"+ce+";")},OCR_LicenseCheckerNotConnect:function(ee){var ce="Cannot connect to the LicenseChecker, please check and make sure it's set correctly.";ee.errorString=ce,ee.responseText=ie("false;-2602;"+ce+";")},OCR_AccessDenied:function(ee){var ce="Access denied.";ee.errorString=ce,ee.responseText=ie("false;-2603;"+ce+";")},OCR_LicenseCheckerError:function(ee,ue){var fe="Error occured in '"+ue+"'.";ee.errorString=fe,ee.responseText=ie("false;-2604;"+fe+";")},OCR_HTTPError:function(ee,ue){var fe="HTTP Error "+ue+".";ee.errorString=fe,ee.responseText=ie("false;-2605;"+fe+";")},OCR_LicenseCheckerUnauthorized:function(ee,ue){var fe="You do not have permission to view this directory or page using the credentials you supplied (access denied due to Access Control Lists). Ask the Web server's administrator to give you access to '"+ue+"'.";ee.errorString=fe,ee.responseText=ie("false;-2606;"+fe+";")},__last:!1});var $="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",K=new Array(-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,62,-1,-1,-1,63,52,53,54,55,56,57,58,59,60,61,-1,-1,-1,-1,-1,-1,-1,0,1,2,3,4,5,6,7,8,9,10,11,12,13,14,15,16,17,18,19,20,21,22,23,24,25,-1,-1,-1,-1,-1,-1,26,27,28,29,30,31,32,33,34,35,36,37,38,39,40,41,42,43,44,45,46,47,48,49,50,51,-1,-1,-1,-1,-1)}function y(ee,ue,ce,fe,le,me,Pe,pe,Re,xe){var Fe=this;Fe.STWAIN=ue,Fe.AjaxFunctionUrl=ee,Fe.FunctionName=ce,Fe.ImageIndex=fe,Fe.FileNames=le,Fe.Type=me,Fe.AryZone=Pe,Fe.JsonString=pe,Fe.OnSuccess=Re,Fe.OnFailure=xe}function C(ee,ue){var ce="",fe=ee.responseText;if(0==fe.length){var le=B.WebTwain.Addon.OCRPro.NewOCRError();B.Lib.Errors.OCR_LicenseCheckerError(le,ue.AjaxFunctionUrl),fe=le.responseText}ce=function De(ee){return function re(ee){var ue,ce,fe,le,me,Pe;for(ue="",fe=ee.length,ce=0;ce<fe;)switch(le=ee.charCodeAt(ce++),le>>4){case 0:case 1:case 2:case 3:case 4:case 5:case 6:case 7:ue+=ee.charAt(ce-1);break;case 12:case 13:me=ee.charCodeAt(ce++),ue+=String.fromCharCode((31&le)<<6|63&me);break;case 14:me=ee.charCodeAt(ce++),Pe=ee.charCodeAt(ce++),ue+=String.fromCharCode((15&le)<<12|(63&me)<<6|(63&Pe)<<0)}return ue}(function N(ee){var ue,ce,fe,le,me,Pe,pe;for(Pe=ee.length,me=0,pe="";me<Pe;){do{ue=K[255&ee.charCodeAt(me++)]}while(me<Pe&&-1==ue);if(-1==ue)break;do{ce=K[255&ee.charCodeAt(me++)]}while(me<Pe&&-1==ce);if(-1==ce)break;pe+=String.fromCharCode(ue<<2|(48&ce)>>4);do{if(61==(fe=255&ee.charCodeAt(me++)))return pe;fe=K[fe]}while(me<Pe&&-1==fe);if(-1==fe)break;pe+=String.fromCharCode((15&ce)<<4|(60&fe)>>2);do{if(61==(le=255&ee.charCodeAt(me++)))return pe;le=K[le]}while(me<Pe&&-1==le);if(-1==le)break;pe+=String.fromCharCode((3&fe)<<6|le)}return pe}(ee))}(fe);var me=ce.split(";");1==me.length?ue.OnFailure(-1,fe,B.Lib.NewOCRProResult()):"true"==me[0]?ue.STWAIN.__innerOCRReadFunction(ue.FunctionName,ue.ImageIndex,ue.FileNames,ue.Type,ue.AryZone,ue.JsonString,function(pe,Re,xe){B.Lib.isUndefined(xe)?B.Lib.isUndefined(Re)?(ue.OnSuccess(pe),P(ue.AjaxFunctionUrl,pe.GetPageCount())):(ue.OnSuccess(pe,Re),P(ue.AjaxFunctionUrl,Re.GetPageCount())):(ue.OnSuccess(pe,Re,xe),P(ue.AjaxFunctionUrl,xe.GetPageCount()))},ue.OnFailure):ue.OnFailure(me[1],me[2],B.Lib.NewOCRProResult())}function w(ee,ue,ce,fe,le,me,Pe,pe,Re,xe){return ne(ee,"DTW_AjaxMethod=CheckLicense&Productkey="+ie(B.DWT.ProductKey),C,B.WebTwain.Addon.OCRPro.NewOCRReadPara(ee,ue,ce,fe,le,me,Pe,pe,Re,xe))}function P(ee,ue){ne(ee,"DTW_AjaxMethod=WriteOCRCount&OCRCount="+ie(ue+""),O,null)}function O(ee,ue){}function z(){this.responseText="",this.errorString=""}function ne(ee,ue,ce,fe){var le=B.WebTwain.Addon.OCRPro.NewOCRError();if(""==ee)return B.Lib.Errors.OCR_LicenseCheckerEmpty(le),alert(le.errorString),ce(le,fe),!1;var me=function A(){var ee=null,ue=window;try{ee=new ue.ActiveXObject("Msxml2.XMLHTTP")}catch{try{ee=new ue.ActiveXObject("Microsoft.XMLHTTP")}catch{ee=new XMLHttpRequest}}return ee}();return me.open("POST",ee,!0),me.setRequestHeader("Content-Type","application/x-www-form-urlencoded"),me.onreadystatechange=function(){if(4==me.readyState){if(200!=me.status)return 401==me.status?(B.Lib.Errors.OCR_LicenseCheckerUnauthorized(le,fe.AjaxFunctionUrl),ce(le,fe),!1):404==me.status?(B.Lib.Errors.OCR_LicenseCheckerNotConnect(le),alert(le.errorString),ce(le,fe),!1):403==me.status?(B.Lib.Errors.OCR_AccessDenied(le),ce(le,fe),!1):(B.Lib.Errors.OCR_HTTPError(le,me.status),ce(le,fe),!1);null!=ce&&"function"==typeof ce&&ce(me,fe)}},me&&ue&&me.send(ue),!0}function ie(ee){return function q(ee){var ue,ce,fe,le,me,Pe;for(fe=ee.length,ce=0,ue="";ce<fe;){if(le=255&ee.charCodeAt(ce++),ce==fe){ue+=$.charAt(le>>2),ue+=$.charAt((3&le)<<4),ue+="==";break}if(me=ee.charCodeAt(ce++),ce==fe){ue+=$.charAt(le>>2),ue+=$.charAt((3&le)<<4|(240&me)>>4),ue+=$.charAt((15&me)<<2),ue+="=";break}Pe=ee.charCodeAt(ce++),ue+=$.charAt(le>>2),ue+=$.charAt((3&le)<<4|(240&me)>>4),ue+=$.charAt((15&me)<<2|(192&Pe)>>6),ue+=$.charAt(63&Pe)}return ue}(function H(ee){var ue,ce,fe,le;for(ue="",fe=ee.length,ce=0;ce<fe;ce++)(le=ee.charCodeAt(ce))>=1&&le<=127?ue+=ee.charAt(ce):le>2047?(ue+=String.fromCharCode(224|le>>12&15),ue+=String.fromCharCode(128|le>>6&63),ue+=String.fromCharCode(128|le>>0&63)):(ue+=String.fromCharCode(192|le>>6&31),ue+=String.fromCharCode(128|le>>0&63));return ue}(ee))}}),(B=self.Dynamsoft||{}).DWT=B.DWT||{},B.aryAddonReadyFun=B.aryAddonReadyFun||[],B.AddonReady=B.AddonReady||function(e){B.aryAddonReadyFun.push(e)},B.WebcamVerForActiveX="15.0.0.0625",B.WebcamVerInName="15.0.0.0625",function(){for(var e=[B.DWT],n=0;n<1;n++){var t=e[n];t.EnumDWT_VideoRotateMode={VRM_NONE:0,VRM_90_DEGREES_CLOCKWISE:1,VRM_180_DEGREES_CLOCKWISE:2,VRM_270_DEGREES_CLOCKWISE:3,VRM_FLIP_VERTICAL:4,VRM_FLIP_HORIZONTAL:5},t.EnumDWT_VideoProperty={VP_BRIGHTNESS:0,VP_CONTRAST:1,VP_HUE:2,VP_SATURATION:3,VP_SHARPNESS:4,VP_GAMMA:5,VP_COLORENABLE:6,VP_WHITEBALANCE:7,VP_BACKLIGHTCOMPENSATION:8,VP_GAIN:9},t.EnumDWT_CameraControlProperty={CCP_PAN:0,CCP_TILT:1,CCP_ROLL:2,CCP_ZOOM:3,CCP_EXPOSURE:4,CCP_IRIS:5,CCP_FOCUS:6}}}(),B.Lib.WebcamErrors={InvalidParameter:function(e){e._errorCode=-10001,e._errorString="The parameter is invalid."},VideoNotPlayingWhenCapture:function(e){e._errorCode=-10002,e._errorString="To capture an image, the video must be playing."},VideoNotPlayingWhenGetURL:function(e){e._errorCode=-10003,e._errorString="To get the url for the current frame, the video must be playing."},Success:function(e){e._errorCode=0,e._errorString="Successful."}},function(e){function n(t){var o=this;o._Count=0,o._resultlist=[],o._stwain=t}n.prototype.GetCount=function(){return e.WebcamErrors.Success(this._stwain),this._Count-1},n.prototype.Get=function(t){var o=this;return o._resultlist.length-1<=t||t<0?(B.Lib.Errors.Webcam_InvalidIndex(o._stwain,"Get"),""):(e.WebcamErrors.Success(o._stwain),o._resultlist[t])},n.prototype.GetCurrent=function(){var t=this,o=t._resultlist.length;return 0==o?(B.Lib.Errors.Webcam_InvalidIndex(t._stwain,"GetCurrent"),""):(e.WebcamErrors.Success(t._stwain),t._resultlist[o-1])},e.NewWebcamValue=function(t){return new n(t)}}(B.Lib),function(e){function n(t){var o=this;o._Count=0,o._resultlist=[],o._stwain=t}n.prototype.GetValue=function(){var t=this;return 0==t._resultlist.length?(B.Lib.Errors.Webcam_InvalidIndex(t._stwain,""),""):(e.WebcamErrors.Success(t._stwain),t._resultlist[0].current)},n.prototype.GetIfAuto=function(){var t=this;return 0==t._resultlist.length?(B.Lib.Errors.Webcam_InvalidIndex(t._stwain,""),!1):(e.WebcamErrors.Success(t._stwain),"true"==t._resultlist[0].auto)},e.NewWebcamSetting=function(t){return new n(t)}}(B.Lib),function(e){function n(t){var o=this;o._Count=0,o._resultlist=[],o._stwain=t}n.prototype.GetMinValue=function(){var t=this;return 0==t._resultlist.length?(B.Lib.Errors.Webcam_InvalidIndex(t._stwain,""),""):t._resultlist[0].min},n.prototype.GetMaxValue=function(){var t=this;return 0==t._resultlist.length?(B.Lib.Errors.Webcam_InvalidIndex(t._stwain,""),""):t._resultlist[0].max},n.prototype.GetSteppingDelta=function(){var t=this;return 0==t._resultlist.length?(B.Lib.Errors.Webcam_InvalidIndex(t._stwain,""),0):t._resultlist[0].step},n.prototype.GetDefaultValue=function(){var t=this;return 0==t._resultlist.length?(B.Lib.Errors.Webcam_InvalidIndex(t._stwain,""),0):t._resultlist[0].defaultValue},n.prototype.GetIfAuto=function(){var t=this;return 0==t._resultlist.length?(B.Lib.Errors.Webcam_InvalidIndex(t._stwain,""),!1):"true"==t._resultlist[0].auto},e.NewWebcamMoreSetting=function(t){return new n(t)}}(B.Lib),B.AddonReady(function(e,n){e.DynamicLoadAddonFuns&&e.DynamicLoadAddonFuns.push(function(t){t._innerSetWebcamValue=function(o){var c=e.NewWebcamValue(t);return o&&e.isArray(o)&&(c._resultlist=o,c._Count=o.length),c},t._innerSetWebcamSetting=function(o){var c=e.NewWebcamSetting(t);return o&&e.isArray(o)&&(c._resultlist=o,c._Count=o.length),c},t._innerSetWebcamMoreSetting=function(o){var c=e.NewWebcamMoreSetting(t);return o&&e.isArray(o)&&(c._resultlist=o,c._Count=o.length),c}}),e.Addon_Events.push("OnFrameCaptured"),e.Addon_Events.push("OnCaptureSuccess"),e.Addon_Events.push("OnCaptureError")}),B.AddonReady(function(e,n){e.product.bHTML5Edition&&e.DynamicLoadAddonFuns&&e.DynamicLoadAddonFuns.push(function(t){var o,c=e.html5.Funs,h=e.env.bMac?"DynamicWebcam_"+B.WebcamVerInName+".dylib":e.env.bLinux?"DynamicWebcam_"+B.WebcamVerInName+".so":t._b64bit?"DynamicWebcamx64_"+B.WebcamVerInName+".dll":"DynamicWebcam_"+B.WebcamVerInName+".dll";try{t._innerSend("GetAddOnVersion",c.makeParams("webcam",h),!0,!1,!1)}catch{}(o=t)._innerWebcamValueFunction=function(p,m){return p=this._innerFunRaw(p,m,!1,!1),this._innerSetWebcamValue(p)},o._innerWebcamSettingFunction=function(p,m){return p=this._innerFunRaw(p,m,!1,!1),this._innerSetWebcamSetting(p)},o._innerWebcamMoreSettingFunction=function(p,m){return p=this._innerFunRaw(p,m,!1,!1),this._innerSetWebcamMoreSetting(p)},o._OnCaptureSuccess=function(p){B.Lib.isFunction(this.__OnCaptureSuccess)&&this.__OnCaptureSuccess()},o._OnCaptureError=function(y){var m=y[1];y=y[2],B.Lib.isFunction(this.__OnCaptureError)&&this.__OnCaptureError(m,y)},o._OnFrameCaptured=function(p){var m,y=this,C=B.Lib;y.__videoPause||(m=(m=y.__videoQuality)||60,y.__videoDest&&y.__videoDest.UpdateVideoContainer(y.GetImageURL(-1,-1,-1,0,m))),C.isFunction(y.__OnFrameCaptured)&&y.__OnFrameCaptured(p)},o={Webcam:{IsModuleInstalled:function(){var p=t;return p._resetErr(),""!=p._innerFun("GetAddOnVersion",c.makeParams("webcam",h))},Download:function(p,m,y){function C(){return t.IfShowProgressBar&&e.closeProgress(null,"Download"),B.Lib.isFunction(m)&&m(),!0}function w(){return t.IfShowProgressBar&&e.closeProgress(null,"Download"),B.Lib.isFunction(y)&&y(t._errorCode,t._errorString),!1}var P=t;if(P._resetErr(),B.Lib.cancelFrome=2,!e.License.checkProductKey(t,{Webcam:!0},!0))return w();if(this.IsModuleInstalled())return C();if(!p||""==p)return B.Lib.Errors.Webcam_InvalidRemoteFilename(P),w();if(c.isServerInvalid(P))return w(),!1;t.IfShowProgressBar&&e.showProgress(P,"Download",!0);var O=!0;return P._OnPercentDone([0,-1,"Downloading Webcam Module...","http"]),B.Lib.isFunction(m)||(O=!1),c.loadHttpBlob(P,"get",p,O,function(z){P._OnPercentDone([0,-1,"Loading..."]),P.__LoadImageFromBytesV1(z,100,"",0,O,C,w)},function(){w()},function(z){var A=0===z.total?100:Math.round(100*z.loaded/z.total);[z.loaded," / ",z.total].join(""),P._OnPercentDone([0,A,"","http"])})},GetSourceList:function(){var p,m=t;return m._resetErr(),e.License.checkProductKey(m,{Webcam:!0},!0)?(p=m._innerFunRaw("GetWebcamSourceList"),0==m.ErrorCode&&p.splice(p.length-1,1),p):[]},SelectSource:function(p){var m=t;return m._resetErr(),!!e.License.checkProductKey(m,{Webcam:!0},!0)&&m._innerFun("SelectWebcam",c.makeParams(p))},CloseSource:function(){var p=t;return p._resetErr(),this._clear(),p._innerFun("StopCapture")},GetFramePartURL:function(){var p=t;return p._resetErr(),this._isPlaying()?p.GetImageURL(-1,-1,-1,!0,p.__videoQuality):(e.WebcamErrors.VideoNotPlayingWhenGetURL(p),"")},GetFrameURL:function(){var p=t;return p._resetErr(),this._isPlaying()?p.GetImageURL(-1,-1,-1,0,p.__videoQuality):(e.WebcamErrors.VideoNotPlayingWhenGetURL(p),"")},PlayVideo:function(p,m,y,C,w){var P=t;function O(){return A._clear(),B.Lib.isFunction(w)&&w(t._errorCode,t._errorString),!1}P._resetErr();var z=60,A=this;return B.DWT.UseDefaultViewer?p?e.License.checkProductKey(t,{Webcam:!0},!0)?(P.__videoDest=p,P.__videoDest.ShowVideoContainer(!0),B.Lib.isFunction(y)&&(t.__OnFrameCaptured=y),t.__videoPause?(t.__videoPause=!1,e.isFunction(C)&&C()):(t.__videoPause=!1,t.__videoQuality=m?z=(z=+m)<1?60:z:z,t._innerSend("PlayVideo",c.makeParams(!0),!0,C,O)),!0):O():(B.Lib.Errors.ParameterCannotEmpty(t),O()):(B.Lib.Errors.CannotDoWhenNoViewerJS(t),!1)},PauseVideo:function(){var p=t;return p._resetErr(),this._isPlaying()&&(p.__videoPause=!0),!0},_clear:function(){var p=t;p.__videoPause=!1,p.__OnFrameCaptured=!1,p.__videoQuality=60,p.__videoDest&&p.__videoDest.ShowVideoContainer(!1),p.__videoDest=!1},_isPlaying:function(){return t.GetIfShowVideoContainer()},StopVideo:function(){var p=t,m=(p._resetErr(),this._clear(),p._innerFun("PlayVideo",c.makeParams(!1,0)));return p._innerFun("StopCapture"),m},CaptureImage:function(p,m){var y,C,w=t;return w._resetErr(),e.License.checkProductKey(w,{Webcam:!0},!0)?(C=function(){c.hideMask(y),e.isFunction(m)&&m(w._errorCode,w._errorString)},c.showMask(y="CaptureImage"),w.__OnCaptureError=C,w._innerSend(y,c.makeParams(!1),!0,function(){c.hideMask(),0==w.ErrorCode?(c.hideMask(y),e.isFunction(p)&&setTimeout(p,0),e.License.isLTS()&&B.DWT.lcvrf(t)):C()},C),!0):(e.isFunction(m)&&m(w._errorCode,w._errorString),!1)},GetMediaType:function(){var p=t;return p._resetErr(),p._innerWebcamValueFunction("GetMediaType")},SetMediaType:function(p){var m=t;return m._resetErr(),e.isString(p)?m._innerFun("SetMediaType",c.makeParams(p)):(e.Errors.InvalidValue(m),!1)},GetResolution:function(){var p;if((p=t)._resetErr(),(p=p._innerWebcamValueFunction("GetResolution"))&&p._resultlist){var m,y,C=p._resultlist,w=[],P=[];for(""==(y=0<C.length?C[C.length-1]:y)&&0<C.length&&(y=C[0]),m=0;m<C.length-1;m++){for(var O,z=(O=C[m]).toLowerCase().split("x"),A=($=ne=A=void 0,{value:O,p1:parseInt(z[0]),p2:parseInt(z[1])}),ne=w,$=ne.length-1;0<=$&&ne[$].p1>=A.p1&&!(ne[$].p1==A.p1&&ne[$].p2<A.p2);)ne[$+1]=ne[$],$--;ne[$+1]=A}for(m=0;m<w.length;m++)P.push(O=w[m].value);y&&P.push(y),p._resultlist=P,P=w=null}return p},SetResolution:function(p){var m=t;return m._resetErr(),e.isNumber(p)||e.isString(p)?m._innerFun("SetResolution",c.makeParams(p)):(e.Errors.InvalidValue(m),!1)},GetFrameRate:function(){var p=t;return p._resetErr(),p._innerWebcamValueFunction("GetFrameRate")},SetFrameRate:function(p){var m=t;return m._resetErr(),e.isNumber(p)?t._innerFun("SetFrameRate",c.makeParams(p)):(e.Errors.InvalidValue(m),!1)},GetVideoPropertySetting:function(p){var m=t;return m._resetErr(),m._innerWebcamSettingFunction("GetWebcamVideoPropertySetting",c.makeParams(p))},GetVideoPropertyMoreSetting:function(p){var m=t;return m._resetErr(),m._innerWebcamMoreSettingFunction("GetWebcamVideoPropertyMoreSetting",c.makeParams(p))},SetVideoPropertySetting:function(p,m,y){var C=t;return C._resetErr(),C._innerFun("SetWebcamVideoPropertySetting",c.makeParams(p,m,y))},SetVideoRotateMode:function(p){var m=t;return m._resetErr(),m._innerFun("SetVideoRotateMode",c.makeParams(p))},GetCameraControlPropertySetting:function(p){var m=t;return m._resetErr(),m._innerWebcamSettingFunction("GetWebcamCameraControlSetting",c.makeParams(p))},GetCameraControlPropertyMoreSetting:function(p){var m=t;return m._resetErr(),m._innerWebcamMoreSettingFunction("GetWebcamCameraControlMoreSetting",c.makeParams(p))},SetCameraControlPropertySetting:function(p,m,y){var C=t;return C._resetErr(),C._innerFun("SetWebcamCameraControlPropertySetting",c.makeParams(p,m,y))}}},t.__addon=t.__addon||{},e.mix(t.__addon,o)})}),B.AddonReady(function(e,n){var t;e.product.bActiveXEdition&&e.DynamicLoadAddonFuns&&e.DynamicLoadAddonFuns.push(function(o){var c,h,p;if(!o.getSWebTwain()||!o.getSWebTwain().Addon)return!1;B.navInfoSync.bWin&&(t=(p=!B.navInfo.bOSx64||B.navInfo.bWOW64)?"DynamicWebcam_"+B.WebcamVerForActiveX+".dll":"DynamicWebcamx64_"+B.WebcamVerForActiveX+".dll"),c=o.getSWebTwain();try{c.GetAddOnVersion("webcam",t)}catch{}(p=o)._innerRead=function(m){var y;try{y=B.Lib.parse(m)}catch{}return y.result},p._innerWebcamValueFunctionPlugin=function(m){return m=this._innerRead(m),this._innerSetWebcamValue(m)},p._innerWebcamSettingFunctionPlugin=function(m){return m=this._innerRead(m),this._innerSetWebcamSetting(m)},p._innerWebcamMoreSettingFunctionPlugin=function(m){return m=this._innerRead(m),this._innerSetWebcamMoreSetting(m)},h={Webcam:{IsModuleInstalled:function(){var m=c.GetAddOnVersion("webcam",t);return e.setErrorString(o),""!=m},Download:function(m,y,C){function w(){return B.Lib.isFunction(y)&&y(),!0}function P(){return B.Lib.isFunction(C)&&C(o._errorCode,o._errorString),!1}return e.License.checkProductKey(o,{Webcam:!0},!0)?this.IsModuleInstalled()?w():m&&""!=m?(m=c.DownloadAddon(m),e.wrapperRet(o,m,w,P)):(B.Lib.Errors.Webcam_InvalidRemoteFilename(o),P()):P()},GetSourceList:function(){var m,y;return e.License.checkProductKey(o,{Webcam:!0},!0)?(m=c.GetWebcamSourceList(),y=[],e.setErrorString(o),0==o._errorCode&&(y=o._innerRead(m))&&1<y.length&&y.splice(y.length-1,1),y):[]},SelectSource:function(m){return!!e.License.checkProductKey(o,{Webcam:!0},!0)&&(m=c.SelectWebcam(m),e.setErrorString(o),m)},CloseSource:function(){o._playVideoDWT=null;var m=c.StopCapture();return e.setErrorString(o),m},GetFramePartURL:function(){var m;return this._isPlaying()?(m=c.GetDIB(-1),e.setErrorString(o),m):(e.WebcamErrors.VideoNotPlayingWhenGetURL(o),"")},GetFrameURL:function(){return""},PlayVideo:function(m,y,C,w,P){function O(){return o._playVideoDWT=null,B.Lib.isFunction(P)&&P(o.ErrorCode,o.ErrorString),!1}var z;return m&&m.getSWebTwain()?e.License.checkProductKey(o,{Webcam:!0},!0)?(z=m.getSWebTwain().CurrentHWND)?(o._playVideoDWT=m,setTimeout(function(){var A=c.RunWebcamCmd("PlayVideo",z,null,null,C);e.wrapperRet(o,A,w,O)},0),!0):(e.WebcamErrors.InvalidParameter(o),O()):O():(B.Lib.WebcamErrors.InvalidParameter(o),O())},PauseVideo:function(){return!0},StopVideo:function(){o._playVideoDWT=null;var m=c.RunWebcamCmd("StopVideo",0,null,null,null);return e.setErrorString(o),c.StopCapture(),m},CaptureImage:function(m,y){function C(){return B.Lib.isFunction(y)&&y(o.ErrorCode,o.ErrorString),!1}var w;return e.License.checkProductKey(o,{Webcam:!0},!0)?(w=c.RunWebcamCmd("Capture",0,function(){e.isFunction(m)&&setTimeout(m,0),e.License.isLTS()&&B.DWT.lcvrf(o)},C,null),e.setErrorString(o),w):C()},GetMediaType:function(){var m=o._innerWebcamValueFunctionPlugin(c.GetMediaType());return e.setErrorString(o),m},SetMediaType:function(m){return e.isString(m)?(m=c.SetMediaType(m),e.setErrorString(o),m):(e.Errors.InvalidValue(o),!1)},GetResolution:function(){var m=o._innerWebcamValueFunctionPlugin(c.GetResolution());if(e.setErrorString(o),m&&m._resultlist){var y,C,w=m._resultlist,P=[],O=[];for(0<w.length&&(C=w[w.length-1]),y=0;y<w.length-1;y++){for(var z,A=(z=w[y]).toLowerCase().split("x"),ne=(K=$=ne=void 0,{value:z,p1:parseInt(A[0]),p2:parseInt(A[1])}),$=P,K=$.length-1;0<=K&&$[K].p1>=ne.p1&&!($[K].p1==ne.p1&&$[K].p2<ne.p2);)$[K+1]=$[K],K--;$[K+1]=ne}for(y=0;y<P.length;y++)O.push(z=P[y].value);C&&O.push(C),m._resultlist=O,O=P=null}return m},SetResolution:function(m){return e.isNumber(m)||e.isString(m)?(m=c.SetResolution(m),e.setErrorString(o),m):(e.Errors.InvalidValue(o),!1)},GetFrameRate:function(){var m=o._innerWebcamValueFunctionPlugin(c.GetFrameRate());return e.setErrorString(o),m},SetFrameRate:function(m){return e.isNumber(m)?(m=c.SetFrameRate(m),e.setErrorString(o),m):(e.Errors.InvalidValue(o),!1)},GetVideoPropertySetting:function(m){return m=c.GetWebcamVideoPropertySetting(m),e.setErrorString(o),o._innerWebcamSettingFunctionPlugin(m)},GetVideoPropertyMoreSetting:function(m){return m=c.GetWebcamVideoPropertyMoreSetting(m),e.setErrorString(o),o._innerWebcamMoreSettingFunctionPlugin(m)},SetVideoPropertySetting:function(m,y,C){return m=c.SetWebcamVideoPropertySetting(m,y,C),e.setErrorString(o),m},SetVideoRotateMode:function(m){return m=c.SetVideoRotateMode(m),e.setErrorString(o),m},GetCameraControlPropertySetting:function(m){return m=c.GetWebcamCameraControlSetting(m),e.setErrorString(o),o._innerWebcamSettingFunctionPlugin(m)},GetCameraControlPropertyMoreSetting:function(m){return m=c.GetWebcamCameraControlMoreSetting(m),e.setErrorString(o),o._innerWebcamMoreSettingFunctionPlugin(m)},SetCameraControlPropertySetting:function(m,y,C){return m=c.SetWebcamCameraControlPropertySetting(m,y,C),e.setErrorString(o),m},_isPlaying:function(){return!!o._playVideoDWT}}},o.Addon=o.Addon||{},e.mix(o.Addon,h)})}),function(e){e.DWT||(e.DWT={}),e.Lib||(e.Lib={})}(B=window.Dynamsoft||{}),B.aryAddonReadyFun=B.aryAddonReadyFun||[],B.AddonReady=B.AddonReady||function(e){B.aryAddonReadyFun.push(e)},B.AddonReady(function(e,n){B.DWT.EnumTransferErrorCode={TRANS_OK:0,TRANS_URL_MALFFORMAT:1,TRANS_FAILED_RESOLVE_PROXY:2,TRANS_FAILED_RESOLVE_HOST:3,TRANS_FAILED_CONNECT:4,TRANS_REMOTE_ACCESS_DENIED:5,TRANS_PARTIAL_FILE:6,TRANS_UPLOAD_FAILED:7,TRANS_READ_FAILED:8,TRANS_OUT_OF_MEMORY:9,TRANS_REMOTE_FULL_DISK:10,TRANS_OPERATION_TIMEOUT:11,TRANS_SERVICE_ERROR_404:12,TRANS_SERVICE_ERROR_500:13,TRANS_SERVICE_ERROR_503:14,TRANS_SERVICE_ERROR:15,TRANS_NOT_SEND:16,TRANS_WAITFOR_SEND:17,TRANS_SENDING:18,TRANS_PAUSE:19,TRANS_FINISHED:20,TRANS_NULL_POINTER:21,TRANS_INVALID_ID:22,TRANS_Failed:23,TRANS_SERVICE_ERROR_MORE_THAN_500:24,TRANS_SERVICE_ERROR_LESS_THAN_200:25,TRANS_SERVICE_ERROR_MORE_THAN_300:26,TRANS_CANNOT_FINDFILE:27,TRANS_ABORT:28,TRANS_NOT_FINISHED:29,TRANS_TASK_PREPARE_INIT:30,TRANS_TASK_INIT:31,TRANS_BEYOND_MAXSIZE:32};var t=B,o=B.dcp,c=[1,7,2,"1026"],h="upload_"+c.join(""),p={Version:"1.0",HttpVersion:"1.1",ServerUrl:"",FileName:"",VERIFYPEER:!1,VERIFYHOST:!1,BlockSize:10240,ThreadNum:1,OnUploadTransferPercentage:function(ee,ue){},OnRunSuccess:function(ee){},OnRunFailure:function(ee,ue,ce){}},m=0,y="",w=function(){m=-2,y="Upload failed because the url to upload to is invalid."},P=function(ee,ue,ce){m=-3,ee?y="Upload cancelled.":(y=ue&&""!=ue?"Upload failed with error: "+ue:"Upload failed.",ue&&""!=ue&&(y=y+"("+ce+")"))},ne=function(){m=-7,y="The file name is incorrect in the upload job."},q=function(){m=0,y=""};function N(){}function H(ee){this.job=ee}function re(ee){this.job=ee}N.prototype={runWaiting:0,CreateJob:function(){var ee={HttpHeader:{},documents:[],formFields:[],bEvent:!1};return e.mix(ee,p),ee.SourceValue=new H(ee),ee.FormField=new re(ee),ee},Run:function(ee){var ue,ce=this,fe='""',le=ee.ServerUrl,me="";if(!e.isString(le)||""==le)return ee.id=-1,w(),!ee.bEvent&&e.isFunction(ee.OnRunFailure)&&(ee.bEvent=!0,ee.OnRunFailure(ee,m,y),ee.bEvent=!1),!1;if(!ee.documents||!e.isArray(ee.documents)||ee.documents.length<=0)return ee.id=-1,m=-4,y="Upload failed because the file to upload has invalid content.",!ee.bEvent&&e.isFunction(ee.OnRunFailure)&&(ee.bEvent=!0,ee.OnRunFailure(ee,m,y),ee.bEvent=!1),!1;if(!ee.ar||!ee.cu){if(B.Lib.License.isLicenseMixed(null,!0)||B.Lib.License.reparseProductKey(),0!=(pe=B.DWT.licenseException).code)return ee.id=-1,m=pe.code,y=pe.message,!ee.bEvent&&e.isFunction(ee.OnRunFailure)&&(ee.bEvent=!0,ee.OnRunFailure(ee,m,y),ee.bEvent=!1),!1;if(B.Lib.License.isLTS())return B.DWT.lglic(B.DWT.EnumInstance.dwt_desktop,"").then(function(Xe){ee.ar=Xe.ar,ee.cu=Xe.cu,ce.Run(ee)}),!0;e.product.refProductKey&&(fe='"'+e.product.refProductKey+'"')}for(ee.Url=le,delete ee.ServerUrl,ue=0;ue<ee.documents;ue++){var Pe=ee.documents[ue];if(!e.isString(Pe.files)||""==Pe.files)return ee.id=-1,ne(),!ee.bEvent&&e.isFunction(ee.OnRunFailure)&&(ee.bEvent=!0,ee.OnRunFailure(ee,m,y),ee.bEvent=!1),!1;e.isString(Pe.remoteName)&&""!=Pe.remoteName||(Pe.remoteName="RemoteFile")}var pe=ee.SourceValue,Re=(delete ee.SourceValue,ee.FormField),xe=(delete ee.FormField,e.stringify(ee));return xe=e.replaceAll(xe,'"',"'"),ee.ServerUrl=le,delete ee.Url,ee.SourceValue=pe,ee.FormField=Re,le=['{"id":"',1,'","method":"RunUploadFile","version":"',h,'","parameter":[',fe,',"',xe,'"'],ee.ar&&ee.cu?(me=[',"',ee.ar,'","',ee.cu,'",0]}'].join(""),delete ee.ar,delete ee.cu,le.push(me)):le.push("]}"),pe=le.join(""),ce.runWaiting++,B.FileUploader._sendCmd("RunUploadFile",pe,function(Fe){var Xe;ce.runWaiting--,Fe&&((Xe=Fe.UploadId)&&0<Xe?(ee.id=Xe,t.FileUploader.map[ee.id]=ee,t.FileUploader.ids.push(Fe.UploadId),ee.OnUploadTransferPercentage&&ee.OnUploadTransferPercentage(ee,0)):(Xe=Fe.errorcode,Fe=Fe.errorstring,Xe&&Fe?(m=Xe,y=Fe):(m=-6,y="Cannot create an upload job."),!ee.bEvent&&e.isFunction(ee.OnRunFailure)&&(ee.bEvent=!0,ee.OnRunFailure(ee,m,y),ee.bEvent=!1)))},function(Fe,Xe,st){ce.runWaiting--,t.FileUploader.parseHttpErrors(Fe,Xe,st),!ee.bEvent&&e.isFunction(ee.OnRunFailure)&&(ee.bEvent=!0,ee.OnRunFailure(ee,m,y),ee.bEvent=!1)}),!0},Cancel:function(ee){return!ee.id||ee.id<0?(m=-5,y="Invalid upload job id.",!ee.bEvent&&e.isFunction(ee.OnRunFailure)&&(ee.bEvent=!0,ee.OnRunFailure(ee,m,y),ee.bEvent=!1),!1):(B.FileUploader._sendCmd("DeleteUploadTask",'{"id":"1","method":"DeleteUploadTask","version":"'+h+'","parameter":["'+ee.id+'"]}',function(ce){t.FileUploader.deleteJobById(ee.id)},function(ce,fe,le){t.FileUploader.parseHttpErrors(ce,fe,le),!ee.bEvent&&e.isFunction(ee.OnRunFailure)&&(ee.bEvent=!0,ee.OnRunFailure(ee,m,y),ee.bEvent=!1)}),!0)},CancelAllUpload:function(){var ee=t.FileUploader.ids,ue='{"id":"1","method":"DeleteUploadTask","version":"'+h+'","parameter":["'+ee.join(",")+'"]}';return 0<this.runWaiting?(m=-8,y="Can not cancel all jobs when at least one job is still being created.",!1):(this.runWaiting<0&&(this.runWaiting=0),ee.length<=0||B.FileUploader._sendCmd("DeleteUploadTask",ue,function(ce){for(var fe=0;fe<ee.length;fe++)t.FileUploader.deleteJobById(ee[fe]);t.FileUploader.ids=[],t.FileUploader.map=[]},function(ce,fe,le){t.FileUploader.parseHttpErrors(ce,fe,le)}),!0)},OnUploadTransferPercentage:function(ee,ue){},OnRunSuccess:function(ee){},OnRunFailure:function(ee,ue,ce){}},(t.SourceValue=H).prototype.Add=function(ee,ue,ce){var fe=this.job;e.isString(ee)&&""!=ee?(ce=ce||"RemoteFile",ee=B.Lib.replaceAll(ee,"\\\\","\\\\"),fe.documents.push({files:[ee],fileName:ue,remoteName:ce})):(ne(),!fe.bEvent&&e.isFunction(fe.OnRunFailure)&&(fe.bEvent=!0,fe.OnRunFailure(fe,m,y),fe.bEvent=!1))},t.FormField=re,t.FileUploader={ids:[],map:{},port:18625,protocol:"https://",ip:"127.0.0.1",wsUrl:"",running:!(re.prototype.Add=function(ee,ue){var ce,fe,le=ue,me=ee;if(null==le&&(le=""),!e.isString(me)||""==me||!e.isString(le)||(le=encodeURI(le),-1<(me=encodeURI(me)).indexOf("'")||-1<le.indexOf("'")))return!1;for(ce=0;ce<this.job.formFields.length;ce++)if((fe=this.job.formFields[ce]).name==me)return fe.value=le,!0;return this.job.formFields.push({name:me,value:le}),!0}),ws:null,nextLoopTime:600,deleteJobById:function(ee){var ue;if(q(),ee){for(ue=0;ue<t.FileUploader.ids.length;ue++)if(ee==t.FileUploader.ids[ue]){t.FileUploader.ids.splice(ue,1);break}var ce=t.FileUploader.map[ee];for(ce.SourceValue.job=null,delete ce.SourceValue,ce.FormField.job=null,delete ce.FormField,delete t.FileUploader.map[ee],ue=ce.documents.length-1;0<=ue;ue--)ce.documents.splice(ue,1);for(ue=ce.formFields.length-1;0<=ue;ue--)ce.formFields.splice(ue,1);B.FileUploader._sendCmd("DeleteUploadTask",'{"id":"1","method":"DeleteUploadTask","version":"'+h+'","parameter":["'+ee+'"]}')}},_sendCmdByWS:function(ee,ue,ce){var fe=t.FileUploader.ws;return fe&&fe.readyState!=B.DWT.EnumDWT_WebsocketReadyState.CLOSING&&fe.readyState!=B.DWT.EnumDWT_WebsocketReadyState.CLOSED||(fe=B.DWT.NetManager.newWebsocket(t.FileUploader.wsUrl),t.FileUploader.ws=fe),B.DWT.NetManager.postStringDataByWS(fe,ee).then(function(le){(le=e.parse(le))&&"result"in le?e.isFunction(ue)&&ue(le.result):e.isFunction(ce)&&ce()},ce),!0},_sendCmd:function(ee,ue,ce,fe){return B.DWT.ConnectWithSocket?t.FileUploader._sendCmdByWS(ue,ce,fe):(ee=[t.FileUploader.protocol,t.FileUploader.ip,":",t.FileUploader.port,"/dcp/",h,"/",ee,"?type=1&dsver=",c.join(""),"&ts=",e.now()].join(""),e.ajax({url:ee,method:"post",dataType:"json",processData:!1,data:ue,onSuccess:ce,onError:fe}))},parseHttpErrors:function(le,ue,ce){var fe;2==(le=le&&e.isArray(le)&&2<le.length?(fe=le[1],le[2]):(fe=ue,ce)).state&&0==le.status?"abort"===le.statusText?P(!0):w():P(!1,fe,le.status)},loadHttpBlob:function(ee,ue,ce,fe,le,me,Pe){ee={method:ee,url:ue,dataType:"blob",async:ce,onSuccess:fe,onError:function(pe,Re,xe){t.FileUploader.parseHttpErrors(pe,Re,xe),e.isFunction(le)&&le()}},e.isFunction(me)&&(ee.beforeSend=function(pe){pe.addEventListener("progress",function(Re){delete Re.totalSize,delete Re.position,me(Re)},!1)}),e.ajax(ee)},_OnPercentDone:function(){},Download:function(ee,ue,ce){var fe;return e.isString(ee)?t.FileUploader.loadHttpBlob("get",ee,!!(fe=function(){return m=-9,y="The zip file that contains the upload library (.dll) download failed.",e.isFunction(ce)&&ce(m,y),!1}),function(le){o.loadZip(le,100,ue,fe)},fe,!1):(m=-1,y="The zip file that contains the upload library (.dll) is invalid.",e.isFunction(ce)&&ce(m,y),!1)},Init:function(ee,ue,ce){function fe(){var le,me=B.navInfoSync.bSSL?(le="https://",B.dcp.SSLPort):(le="http://",B.dcp.Port);t.FileUploader.port=me,t.FileUploader.protocol=le,t.FileUploader.ip=B.DWT.Host,t.FileUploader.wsUrl=B.DWT.NetManager.getWsUrl(B.DWT.Host,me),t.FileUploader.running=!0,ue(new N),setTimeout(t.FileUploader.StatusLoop,500)}q(),B.dcp.detect.bConnected?fe():B.DWT.NetManager.checkModuleManager(fe,ce)},Close:function(){var ee;B.DWT.ConnectWithSocket&&(ee=B.FileUploader.ws)&&(ee.readyState!=B.DWT.EnumDWT_WebsocketReadyState.CLOSED&&ee.readyState!=B.DWT.EnumDWT_WebsocketReadyState.CLOSING&&ee.close(),B.FileUploader.ws=null),B.FileUploader.running=!1},VersionInfo:function(ee,ue){return q(),B.FileUploader._sendCmd("VersionInfo",'{"id":"1","method":"VersionInfo","version":"'+h+'","parameter":[]}',ee,function(fe,le,me){t.FileUploader.parseHttpErrors(fe,le,me),e.isFunction(ue)&&ue(m,y)}),!0},StatusLoop:function(){return q(),t.FileUploader.GetUploadStatus(),t.FileUploader.running&&setTimeout(t.FileUploader.StatusLoop,t.FileUploader.nextLoopTime),!0},GetUploadStatus:function(){var ee;return q(),t.FileUploader.ids.length<=0||(ee='{"id":"1","method":"GetUploadStatus","version":"'+h+'","parameter":["'+t.FileUploader.ids.join(",")+'"]}',B.FileUploader._sendCmd("GetUploadStatus",ee,function(ue){if(e.isArray(ue))for(var ce=0;ce<ue.length;ce++){var fe=(Re=ue[ce]).id,le=t.FileUploader.map[fe],me=Re.percentage,Pe=Re.errorcode,pe=Re.response,Re=Re.errorstring;le&&(Pe==B.DWT.EnumTransferErrorCode.TRANS_FINISHED?(le.OnUploadTransferPercentage(le,100,De(pe)),!le.bEvent&&e.isFunction(le.OnRunSuccess)&&(le.bEvent=!0,le.OnRunSuccess(le,De(pe)),le.bEvent=!1),t.FileUploader.deleteJobById(fe)):Pe==B.DWT.EnumTransferErrorCode.TRANS_OK||Pe==B.DWT.EnumTransferErrorCode.TRANS_NOT_SEND||Pe==B.DWT.EnumTransferErrorCode.TRANS_WAITFOR_SEND||Pe==B.DWT.EnumTransferErrorCode.TRANS_SENDING||Pe==B.DWT.EnumTransferErrorCode.TRANS_PAUSE||Pe==B.DWT.EnumTransferErrorCode.TRANS_TASK_PREPARE_INIT||Pe==B.DWT.EnumTransferErrorCode.TRANS_TASK_INIT?le.OnUploadTransferPercentage(le,me,De(pe)):(!le.bEvent&&e.isFunction(le.OnRunFailure)&&(le.bEvent=!0,le.OnRunFailure(le,Pe,Re,De(pe)),le.bEvent=!1),t.FileUploader.deleteJobById(fe)))}},function(ue,ce,fe){})),!0}};var ie=new Array(-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,62,-1,-1,-1,63,52,53,54,55,56,57,58,59,60,61,-1,-1,-1,-1,-1,-1,-1,0,1,2,3,4,5,6,7,8,9,10,11,12,13,14,15,16,17,18,19,20,21,22,23,24,25,-1,-1,-1,-1,-1,-1,26,27,28,29,30,31,32,33,34,35,36,37,38,39,40,41,42,43,44,45,46,47,48,49,50,51,-1,-1,-1,-1,-1);function De(ee){for(var ue,ce,fe,le,me=ee.length,Pe=0,pe="";Pe<me;){for(;ue=ie[255&ee.charCodeAt(Pe++)],Pe<me&&-1==ue;);if(-1==ue)break;for(;ce=ie[255&ee.charCodeAt(Pe++)],Pe<me&&-1==ce;);if(-1==ce)break;pe+=String.fromCharCode(ue<<2|(48&ce)>>4);do{if(61==(fe=255&ee.charCodeAt(Pe++)))return pe}while(fe=ie[fe],Pe<me&&-1==fe);if(-1==fe)break;pe+=String.fromCharCode((15&ce)<<4|(60&fe)>>2);do{if(61==(le=255&ee.charCodeAt(Pe++)))return pe}while(le=ie[le],Pe<me&&-1==le);if(-1==le)break;pe+=String.fromCharCode((3&fe)<<6|le)}return pe}}),function(){var e=screen.width,n=e>550?550:e-10,t=e>680?680:e-10;B.OnWebTwainNotFoundOnWindowsCallback=function(c,h,p,m,y,C,w){B._show_install_dialog(c,{default:h},p,B.DWT.EnumDWT_PlatformType.enumWindow,m,y,C,w,!1)},B.OnWebTwainNotFoundOnLinuxCallback=function(c,h,p,m,y,C,w,P,O){var z=B,A={default:h,deb:h,rpm:p};O||(O=B.DWT.EnumDWT_PlatformType.enumLinux),O==B.DWT.EnumDWT_PlatformType.enumAndroid&&(A.default="intent://dynamsoft.com/#Intent;scheme=http;package=com.dynamsoft.mobilescan;end"),z._show_install_dialog(c,A,m,O,y,C,w,P,!1)},B.OnWebTwainNotFoundOnMacCallback=function(c,h,p,m,y,C,w){B._show_install_dialog(c,{default:h},p,B.DWT.EnumDWT_PlatformType.enumMac,m,y,C,w,!1)},B.OnWebTwainNotFoundOnAndroidCallback=function(c,h,p,m){var y={default:"https://demo.dynamsoft.com/DWT/Resources/dist/DynamsoftServiceSetup.apk"},C=Math.random();y.openService="intent://dynamsoft.com/#Intent;scheme=http;package=com.dynamsoft.mobilescan;S.timestamp="+C+";end",B.DWT.Host="local.dynamsoft.com",B._show_android_install_dialog(y,m)},B.OnMobileNotSupportCallback=function(){var c=[];B.DWT?(c.push('<div class="ds-dwt-ui-dlg-android" style="padding-bottom:30px">'),c.push("Service Mode does not support your Operating System, please contact the site administrator."),c.push("</div>"),B.DWT.ShowMessage(c.join(""),{width:335,headerStyle:1,backgroundStyle:1})):console.log("The Dynamsoft namespace is missing")},B.OnHTTPCorsError=function(c){var h=["<div>",c,"</div>",'<div style="margin-top:10px">To fix the issue, please update your website to HTTPS or refer to <br /><a target="_blank" href="https://www.dynamsoft.com/web-twain/docs/faq/http-insecure-websites-in-chromium-browser.html?ver=latest">this article</a> for other workarounds.</div>'].join("");B.DWT.ShowMessage(h,{width:t,headerStyle:2})},B._show_install_dialog=function(c,h,p,m,y,C,w,P,O){var A,$,z=B,K=B.DWT.EnumDWT_PlatformType,q=m==K.enumAndroid,N=q,H=m==K.enumLinux||m==K.enumEmbed||m==K.enumChromeOS||m==K.enumHarmonyOS||q;if(A=['<div class="dynamsoft-dwt-dlg-title">',O?"Please update your document scanning service":"Please complete one-time setup","</div>"],z.DWT){$=H||B.navInfoSync.bFirefox?"RESTART":"REFRESH",A.push('<div class="dynamsoft-dwt-installdlg-iconholder"> ');var De="125px";N&&(De="60px"),A.push('<div class="dynamsoft-dwt-installdlg-splitline" style="left: '+De+'"></div>'),N||A.push('<div class="dynamsoft-dwt-installdlg-splitline" style="left: 283px"></div>');var ee="133px";N&&(ee="50px"),A.push('<img style="margin: 0px '+ee+' 0px 0px" src=data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABoAAAAgCAYAAAAMq2gFAAABOklEQVRIie2WTW6DMBCFH4h1l22VqmqPVUEvEJa9gRt6FDhDpfx0FdJj+Arx3nldhEjEdchgWlaM9CSwMZ/fzMgQvX0TwvA+ePOpIsniRIwZGIl/n/8AGs3RWKB4JA4STjUKBo1EivLtGakEkP7Ru6vbpcpONzFxPFsazQloZyxEmkDepsYk0JIhkZGwzngfWRKvd0u1Pwf93k1NoBjg5uN+pbZuHn0gEFgQ2AVAdgTefQVzU9e2nzaplKbMkEhnK2W9oAOAC9IHIO+Yd5U/rJX2QbocnVSSqARuqse1Ki9BumrUp+U1gXkXRAoyBDIC1jNnCWRPG2Wug2SFrkkUnvHieaPqaxCpo3bL104rLySQviDbpNA0Sgl4W9kXfU9vjWPho+ZaHCHfo6r/kumfYUBEL1/jeJpqFBw/d5aBU2kHOMQAAAAASUVORK5CYII= alt="download">'),A.push('<img style="margin: 2px '+ee+' 2px 0px" src=data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABoAAAAaCAYAAACpSkzOAAAA+klEQVRIid2SMWoCQRiFv3GnW7BII6ZPqeAlorewtBELsZdFOz2Q0VYkXQ6QA9iaIqU+mx2Y3QRd12WKffCY4WdmPt5jzPRT5PQOfOSHnky6/rnoqd/cJFt/0FB6I3UkWOVmZbz+GcyjLEjgeSjRzc3KuCMxzIC8fQwsbtTxqJan/jz+r7qZ4LWC2pzbgpkDmclBAG3gO011T0U+g9Mv8PayTY4u0UIQV5jGORYsAcz4oA7wBWR+SUWJAM5Az17E6gFIGUXA2goGJR8wAK1dUuiwVdECnpQZ7cOggiWy5zCcgIkCcbCX2iUKB6pfdfVLFAwUiNS4f6QaXQHE5K75dPBEiQAAAABJRU5ErkJggg== alt="install">'),A.push('<img src=data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAB4AAAAeCAYAAAA7MK6iAAADI0lEQVRIibWXTUhUURTHf+/NsxRCp3QGwhKT/MDoAyNo1apmNhYkodGmaFOWmUXQcpgo2gRN5kerllEGLWqjBqZGFH2BlSRJRVqCjpNjYOaUc1q80fnovZmnMx34w+Odc+///u+9595zlbPPBAuWBbiBPcAOoASwR3xB4BPwAngIdOV2en+n6lA5k5zYDjQBJwCHlRECk0Ar4Mvr9AbNglQRMMFBEYZE8IjgSBKXiIJIm6Gg23PQVHHT038U24DrQL1FhamsHThl7/LOxysGYmAT6BCoT/ifDuoFOqbcHlsyYp9ATQZJF1AjcC2OOMZbh9CQacYYnPzu8tQlKrYLNP8/zkU0B1weeyxxk4AzkySqYvjfKXp6opx8IiuAr1jP05S2bQ3sL4a29zA++4/bD6xTBVwCjkwp3eGAo+WQnw1b8w1jHAIuTQRXppTuWgt1JaAA90egc9Q01K0JVGWCdHch1BTr33c/Q89Y0vAqLQxl6ZJWF8He9RAWuPURHo+nbFKqiZC3XEIFOLAB9hTqpDc/wHO/paZ5ahgwQtEqOFIGNtXYD3Boo076R+DGe3jmN441gibCNAmplKXA8QooyAb7CmgZhLlw1G9T4GgZ7HRCKAytg/DO9AI0tGlVYDhxy4cEmgdhOgSVdjizGXI03acpcKxCJ/01D1ffwdvgktNuWBV4ZeQc/QmX30BgDkpz4dxmWL0SGjbB9gKY+QNX3sLQ9LLy/bVyuE+qgQdmc5K/Es5vAWcO/A5Dlgo/QjrpyMySpjfW9qkC3QIBs9FNzsGlARj7qZNOzcHlAfgys+zTzS/QpYq+pC3JgqdCOvnLSbg4AN9m0zpW20oeeUMLNZdPhIlktdSPEFwbhIlZ8xgL8Ivgg+i1GBRoTEOFVTRu7NUrz9gq844IrWmoSYXW0l7v7YXdpUn8bjsNrAVqLO9Pa3Yv0veiJRZ78wK1Au0ZnN52gdryvvjyVjMY3Tz6y6EfvTJ0LlPlBHC6oi86vfGKzdfktgjlIlwQIbCEtQxE2pSbkQIotT1i5ou1hUebi+ijbXXEN0X00dYNdFf2e0OpOvwLFunYK2i9bNwAAAAASUVORK5CYII= alt="scan">'),A.push('<div><span class="dynamsoft-dwt-installdlg-text" style="right: 125px">Download</span>'),A.push('<span class="dynamsoft-dwt-installdlg-text" style="right: 18px">Install</span>'),A.push('<span class="dynamsoft-dwt-installdlg-text" style="left: 105px">Scan</span>'),A.push("</div>"),A.push("</div>"),p&&H&&(A.push('<div style="margin:10px 0 0 60px;">'),A.push('<div id="dwt-install-url-div">'),B.navInfo.bArm64||B.navInfo.bMips64||B.navInfoSync.bChromeOS||B.navInfoSync.bHarmonyOS||q||(A.push('<div><input id="dwt-install-url-deb" name="dwt-install-url" type="radio" onclick="Dynamsoft._dwt_change_install_url(\''+h.deb+'\')" checked="checked" /><label for="dwt-install-url-deb">64 bit .deb (For Ubuntu/Debian)</label></div>'),A.push('<div><input id="dwt-install-url-rpm" name="dwt-install-url" type="radio" onclick="Dynamsoft._dwt_change_install_url(\''+h.rpm+'\')" /><label for="dwt-install-url-rpm">64 bit .rpm (For Fedora)</label></div>')),A.push("</div></div>")),A.push('<div><a id="dwt-btn-install" target="_blank" href="'),A.push(h.default),A.push('"'),A.push(p?' html5="1"':' html5="0"'),A.push(' onclick="Dynamsoft._dcp_dwt_onclickInstallButton()"><div class="dynamsoft-dwt-dlg-button">Download</div></a></div>'),p?y?(A.push('<div class="dynamsoft-dwt-dlg-tail" style="text-align:left; padding-left: 80px">'),A.push("If you still see the dialog after installing the Dynamsoft Service, please<br />"),A.push("1. Add the website to the zone of trusted sites.<br />"),A.push("IE | Tools | Internet Options | Security | Trusted Sites.<br />"),A.push("2. Refresh your browser."),A.push("</div>")):H?(A.push('<div class="dynamsoft-dwt-dlg-tail">'),A.push('<div class="dynamsoft-dwt-dlg-red">After the installation, please <strong>'+$+"</strong>  your browser.</div>"),A.push("</div>")):q&&(A.push('<div class="dynamsoft-dwt-dlg-tail">'),A.push('<div class="dynamsoft-dwt-dlg">Failed to connect to the service, have you finished the setup?</div>'),A.push('<div class="dynamsoft-dwt-dlg">Please make sure the setup is done and <a href="#">click here</a> to connect again.</div>'),A.push('<div class="dynamsoft-dwt-dlg">If the connection continues to fail, please refer to <a href="#">this article</a>.</div>'),A.push("</div>")):(A.push('<div class="dynamsoft-dwt-dlg-tail" style="text-align:left; padding-left: 80px">'),y?(A.push("After the installation, please<br />"),A.push("1. Restart the browser<br />"),A.push('2. Allow "DynamicWebTWAIN" add-on to run by right clicking on the Information Bar in the browser.')):A.push('<div class="dynamsoft-dwt-dlg-red">After installation, please <strong>REFRESH</strong> your browser.</div>'),A.push("</div>")),z.DWT.ShowMessage(A.join(""),{width:n,headerStyle:1})}else console.log("The Dynamsoft namespace is missing");B.DWT&&B.DWT.OnWebTwainNotFound&&B.DWT.OnWebTwainNotFound()},B._dwt_change_install_url=function(c){var h=document.getElementById("dwt-btn-install");h&&(h.href=c)};var o=0;B._dcp_dwt_onclickInstallButton=function(){return document.getElementById("dwt-btn-install")&&setTimeout(function(){var h=document.getElementById("dwt-install-url-div");h&&(h.style.display="none");var p=document.getElementById("dwt-btn-install");if(p&&"1"==p.getAttribute("html5")){var m=p.parentNode,y=document.createElement("div");y.id="dwt-btn-install",y.style.textAlign="center",y.style.paddingBottom="15px",y.innerHTML="Connecting to the service...",y.setAttribute("html5","1"),m.removeChild(p),m.appendChild(y),o=new Date,setTimeout(B._dwt_Reconnect,10)}else(m=p.parentNode).removeChild(p)},10),!0},B._dwt_Reconnect=function(){var c=B;if((new Date-o)/1e3>30){var h=document.getElementById("dwt-btn-install");h&&(h.innerHTML='Failed to connect to the service, have you run the setup?<br />If not, please run the setup and <a href="javascript:void(0)" onclick="Dynamsoft._dcp_dwt_onclickInstallButton()">click here to connect again</a>.')}else if(c.DWT){var p=500;navigator.userAgent.indexOf("Safari")>-1&&(p=2e3),c.DWT.CheckConnectToTheService(function(){B.DWT.CloseDialog(),B.DWT.ConnectToTheService()},function(){B.DWT.NeedCheckWebTwainBySocket()?B.DWT.CheckWebTwainBySocket(function(){B.OnHTTPCorsError()},function(){setTimeout(B._dwt_Reconnect,p)},function(){setTimeout(B._dwt_Reconnect,p)}):setTimeout(B._dwt_Reconnect,p)})}else console.log("The Dynamsoft namespace is missing")},B._show_android_install_dialog=function(c,h){var p;if(B.DWT.bNpm&&B.navInfoSync.bFileSystem)return B._show_online_download_dialog(c,bHTML5,iPlatform);p=[],B.DWT?(p.push('<div class="ds-dwt-ui-dlg-android">'),p.push("<div>Please download and "),p.push(h?"update":"install"),p.push(" the <strong>DYNAMSOFT SERVICE</strong> app via the </div>"),p.push('<div><a target="_blank" href="'),p.push(c.default),p.push('" onclick="Dynamsoft._dwt_ReconnectForAndroid()">direct APK download link</a>.</div>'),p.push("</div>"),p.push('<div class="dynamsoft-dwt-dlg-tail" style="text-align:left">'),p.push("If you have "),p.push(h?"updated":"installed"),p.push(" it, please click on the button below to initiate the connection."),p.push('<a target="_blank" href="'),p.push(c.openService),p.push('" onclick="Dynamsoft._dwt_ReconnectForAndroid()"><div class="dynamsoft-dwt-dlg-button-android">Open Service</div></a>'),p.push("</div>"),p.push("</div>"),B.DWT.ShowMessage(p.join(""),{width:335,headerStyle:1,backgroundStyle:1})):console.log("The Dynamsoft namespace is missing"),B.DWT&&B.DWT.OnWebTwainNotFound&&B.DWT.OnWebTwainNotFound()},B._dwt_ReconnectForAndroid=function(){B.DWT.CheckConnectToTheService(function(c){c?(B.DWT.CloseDialog(),B.DWT.ConnectToTheService()):setTimeout(B._dwt_ReconnectForAndroid,500)},function(){setTimeout(B._dwt_ReconnectForAndroid,500)})},B.OnWebTwainNeedUpgradeCallback=function(c,h,p,m,y,C,w,P){B._show_install_dialog(c,h,p,m,y,C,w,P,!0,!0)},B.OnWebTwainNeedUpgradeOnAndroidCallback=function(c,h,p){B.OnWebTwainNotFoundOnAndroidCallback(c,h,p,!0)},B.OnLTSLicenseError=function(c,h){var p="";(-2440==h||-2441==h||-2443==h||-2446==h||c.indexOf("Internet connection")>-1||c.indexOf("Storage")>-1)&&(p='<div>You can register for a free 30-day trial <a href="https://www.dynamsoft.com/customer/license/trialLicense?product=dwt&deploymenttype=js" target="_blank" class="dynamsoft-major-color">here</a>. Make sure to select the product Dynamic Web TWAIN.</div>'),B.DWT.ShowMessage([c,p].join(""),{width:t,headerStyle:2})},B.OnLTSConnectionWarning=function(){var c=["Warning: You are seeing this dialog because Dynamic Web TWAIN has failed to connect to the License Tracking Server. ","A cached authorization is being used, and you can continue to use the software as usual. ","Please get connected to the network as soon as possible. ",B.DWT.isPublicLicense()?'<a class="dynamsoft-major-color" href="https://www.dynamsoft.com/company/contact/">Contact Dynamsoft</a> ':"Contact the site administrator ","for more information."].join("");B.DWT.ShowMessage(c,{width:t,caption:"Warning",headerStyle:2})},B.OnLTSPublicLicenseWarning=function(c){B.DWT.ShowMessage(c,{width:t,caption:"Warning",headerStyle:2})},B.OnLicenseExpiredWarning=function(c,h,p){var m,y,C='<a target="_blank" href="https://www.dynamsoft.com/company/contact/">contact us</a>',w='<a target="_blank" href="https://www.dynamsoft.com/store/dynamic-web-twain/#DynamicWebTWAIN">online store</a>',P="https://www.dynamsoft.com/customer/license/trialLicense?product=dwt&utm_source=in-product";h>5||(p&&h>0?(y="Warning",m=['<div style="padding:0 0 10px 0">Kindly note your trial key is expiring in ',h<=1?"1 day":parseInt(h)+" days",". Two quick steps to extend your trial:</div>",'<div style="margin:0 0 0 10px">1. <a target="_blank" href="',P,'">Request a new trial key</a> and follow the instructions to set the new key</div>','<div style="margin:0 0 0 10px">2. Refresh your scan page and try again</div>','<div style="padding:10px 0 0 0">If you run into any issues, please ',C,".</div>",'<div style="padding:0">If you are ready to purchase a full license, please go to the ',w," or ",C,".</div>"].join("")):m=p?['<div style="padding:0">Sorry. Your product key has expired on ',c,". You can purchase a full license at the ",w,".</div>",'<div style="padding:0">Or, you can try requesting a new product key at <a target="_blank" href="',P,'">this page</a>.</div>','<div style="padding:0">If you need any help, please ',C,".</div>"].join(""):['<div style="padding:0">You are seeing this message because the license for doc scanning support has expired on ',c,".</div>",'<div style="padding:0"><ul>',"<li><strong>If you are the owner of the website</strong>, please <a class='dynamsoft-major-color' href='","https://www.dynamsoft.com/customer/order/renewalList","' target='_blank'>renew your license</a> and follow the instructions to set the new key. ","Please ",C," if you need any help.</li>","<li><strong>If you are an end-user</strong>, please inform the owner or developer of this website.</li>","</ul></div>"].join("")),m&&B.DWT.ShowMessage(m,{width:t,caption:y,headerStyle:2})},B.OnLicenseError=B.OnLicenseError||function(c,h){B.DWT.ShowMessage(c,{width:t,headerStyle:2})},B._show_online_download_dialog=function(c,h,p){var P,O,z,y=B.DWT.JSVersion.split(","),C=y[0]+"."+y[1],w=location.pathname;w=w.substring(0,w.lastIndexOf("/")+1),p==B.DWT.EnumDWT_PlatformType.enumLinux&&(arm64||mips64)&&(arm64?c.default=getDebPath("arm64"):mips64&&(c.default=getDebPath("mips64el"))),P=["https://www.dynamsoft.com/web-twain/install-dynamsoft-service/?productId=1000001","&downloadLink=https://demo.dynamsoft.com/DWT/Resources/dist/DynamsoftServiceSetup_",C,".",z=c.default.substr(c.default.length-3)].join(""),O=B.Lib.Path.normalize([w,c.default].join("")),p==B.DWT.EnumDWT_PlatformType.enumWindow&&0==O.indexOf("/")&&(O=O.substr(1)),B.DWT.ShowMessage(['<div class="dynamsoft-dwt-ltsdlg-body" style="padding:0 20px 20px 20px">',"<div>To support document scanning, please complete one-time installation of the DynamsoftServiceSetup.",z," on this machine.</div>","<div>You can download the file via this trust site:</div>",'<div><a id="dwt-btn-install" target="_blank" href="',P,'"><div class="dynamsoft-dwt-dlg-button">Open Site</div></a></div>','<div style="word-break: break-word;">Or, go to <br />',O," if the file exists.</div>","<div>After the installation, please <strong>REFRESH</strong>  your browser.<br /></div>","</div>"].join(""),{width:n,headerStyle:1,closeButton:!1})}}(),B.DWT.AutoLoad=!1,B.DWT.IfAddMD5InUploadHeader=!1,B.DWT.IfConfineMaskWithinTheViewer=!1;const Zr=B;let rT=(()=>{class e{constructor(){Zr.DWT.ProductKey="t0194AgYAAIaMbdYXnFm8QbvdLG2Jlfvp+k98MGRtSfxzwzJz7nFMH38RHXJmg9PpSPpmnizlHTRkRWIfGtSDHDfYbWOdU/25mek5Pc60PEYrQ7RCQ7QYo+WrWqK4DEP5/uY/Nc/hDLwWQNYDsgJogVJOB7xtLQ8awBogCiBaDdCAw1Xs95+pj0z7Vtl/OnXyAKfc72yTco8TA5x8yZkC4lIoPmm1cwHQnpwNwBoghwDqT20XEOoB1gDZAREmOFjzBSNaLcA=",Zr.DWT.ResourcesPath="assets/dynamic-web-twain"}}return e.\u0275fac=function(t){return new(t||e)},e.\u0275prov=Ht({token:e,factory:e.\u0275fac,providedIn:"root"}),e})();const ZX=[{path:"",component:XX},{path:"acquire-image",component:(()=>{class e{constructor(t){this.dynamicWebTwainService=t,this.containerId="dwtcontrolContainer",this.width="600px",this.height="600px"}ngOnDestroy(){Zr.DWT.Unload()}ngOnInit(){Zr.DWT.Containers=[{ContainerId:this.containerId,Width:this.width,Height:this.height}],Zr.DWT.Load(),Zr.DWT.RegisterEvent("OnWebTwainReady",()=>{this.onReady()})}onReady(){this.dwtObject=Zr.DWT.GetWebTwain(this.containerId),this.dwtObject.IfShowUI=!1;let t=this.dwtObject.GetSourceNames();this.selectSources=document.getElementById("sources"),this.selectSources.options.length=0;for(let o=0;o<t.length;o++)this.selectSources.options.add(new Option(t[o],o.toString()))}acquireImage(){if(this.dwtObject)if(this.dwtObject.SourceCount>0&&this.selectSources&&this.dwtObject.SelectSourceByIndex(this.selectSources.selectedIndex)){const c=()=>{this.dwtObject&&this.dwtObject.CloseSource()},h=c;this.dwtObject.OpenSource();let p="2";for(var t=document.getElementsByName("PixelType"),o=0;o<t.length;o++)if(t[o].checked){p=t[o].value;break}this.dwtObject.AcquireImage({IfFeederEnabled:document.getElementById("ADF").checked,PixelType:p,Resolution:parseInt(document.getElementById("Resolution").value),IfDisableSourceAfterAcquire:!0},c,h)}else alert("No Source Available!")}openImage(){this.dwtObject||(this.dwtObject=Zr.DWT.GetWebTwain("dwtcontrolContainer")),this.dwtObject.Addon.PDF.SetConvertMode(Zr.DWT.EnumDWT_ConvertMode.CM_RENDERALL),this.dwtObject.LoadImageEx("",Zr.DWT.EnumDWT_ImageType.IT_ALL,()=>{},()=>{})}downloadDocument(){this.dwtObject&&this.dwtObject.HowManyImagesInBuffer>0&&(this.dwtObject.IfShowFileDialog=!0,1==document.getElementById("imgTypejpeg").checked?(1==this.dwtObject.GetImageBitDepth(this.dwtObject.CurrentImageIndexInBuffer)&&this.dwtObject.ConvertToGrayScale(this.dwtObject.CurrentImageIndexInBuffer),this.dwtObject.SaveAsJPEG("DynamicWebTWAIN.jpg",this.dwtObject.CurrentImageIndexInBuffer)):1==document.getElementById("imgTypetiff").checked?this.dwtObject.SaveAllAsMultiPageTIFF("DynamicWebTWAIN.tiff",()=>{},()=>{}):1==document.getElementById("imgTypepdf").checked&&this.dwtObject.SaveAllAsPDF("DynamicWebTWAIN.pdf",()=>{},()=>{}))}}return e.\u0275fac=function(t){return new(t||e)(_t(rT))},e.\u0275cmp=ba({type:e,selectors:[["app-acquire-image"]],decls:43,vars:0,consts:[[1,"row"],["for","BW"],["type","radio","value","0","name","PixelType"],["for","Gray"],["type","radio","value","1","name","PixelType"],["for","RGB"],["type","radio","value","2","name","PixelType","checked","checked"],["type","checkbox","id","ADF","checked","checked"],["id","Resolution"],["value","100"],["value","150"],["value","200"],["value","300"],["id","sources"],[3,"click"],["id","dwtcontrolContainer"],[2,"font-size","x-large"],["type","radio","value","jpg","name","ImageType","id","imgTypejpeg"],["type","radio","value","tif","name","ImageType","id","imgTypetiff"],["type","radio","value","pdf","name","ImageType","id","imgTypepdf","checked","checked"]],template:function(t,o){1&t&&(Pt(0,"div",0)(1,"label",1),Xr(2,"input",2),Yt(3,"B&W "),Rt(),Pt(4,"label",3),Xr(5,"input",4),Yt(6,"Gray"),Rt(),Pt(7,"label",5),Xr(8,"input",6),Yt(9,"Color"),Rt(),Pt(10,"label"),Xr(11,"input",7),Yt(12,"Auto Feeder"),Rt(),Pt(13,"div"),Yt(14,"\xa0\xa0"),Rt(),Pt(15,"select",8)(16,"option",9),Yt(17,"100"),Rt(),Pt(18,"option",10),Yt(19,"150"),Rt(),Pt(20,"option",11),Yt(21,"200"),Rt(),Pt(22,"option",12),Yt(23,"300"),Rt()()(),Xr(24,"select",13)(25,"br"),Pt(26,"button",14),_r("click",function(){return o.acquireImage()}),Yt(27,"Scan Documents"),Rt(),Pt(28,"button",14),_r("click",function(){return o.openImage()}),Yt(29,"Load Documents"),Rt(),Xr(30,"div",15),Pt(31,"div",0)(32,"label",16),Xr(33,"input",17),Yt(34,"JPEG"),Rt(),Pt(35,"label",16),Xr(36,"input",18),Yt(37,"TIFF"),Rt(),Pt(38,"label",16),Xr(39,"input",19),Yt(40,"PDF"),Rt()(),Pt(41,"button",14),_r("click",function(){return o.downloadDocument()}),Yt(42,"Download Documents"),Rt())}}),e})()},{path:"image-editor",component:(()=>{class e{constructor(t){this.dynamicWebTwainService=t,this.containerId="dwtcontrolContainer",this.width="600px",this.height="800px",this.isHidden=!1}ngOnDestroy(){Zr.DWT.Unload()}ngOnInit(){Zr.DWT.Containers=[{ContainerId:this.containerId,Width:this.width,Height:this.height}],Zr.DWT.Load(),Zr.DWT.RegisterEvent("OnWebTwainReady",()=>{this.onReady()})}onReady(){this.dwtObject=Zr.DWT.GetWebTwain(this.containerId),this.dwtObject.IfShowUI=!1,this.createImageEditor();let t=this.dwtObject.GetSourceNames();this.selectSources=document.getElementById("sources"),this.selectSources.options.length=0;for(let o=0;o<t.length;o++)this.selectSources.options.add(new Option(t[o],o.toString()));this.dwtObject.Viewer.autoChangeIndex=!0,this.dwtObject.RegisterEvent("OnBufferChanged",o=>{this.onBufferChanged(o.currentId)})}acquireImage(){this.dwtObject&&(this.dwtObject.SourceCount>0&&this.selectSources&&this.dwtObject.SelectSourceByIndex(this.selectSources.selectedIndex)?(this.dwtObject.OpenSource(),this.dwtObject.AcquireImage({},()=>{this.dwtObject&&this.dwtObject.CloseSource(),this.updatePageInfo()},()=>{})):alert("No Source Available!"))}createImageEditor(){this.dwtObject&&(this.imageEditor=this.dwtObject.Viewer.createImageEditor({element:document.getElementById("dwtcontrolContainerLargeViewer"),width:750,height:800,buttons:{visibility:{close:!1}}}),this.imageEditor.show())}openImage(){this.dwtObject||(this.dwtObject=Zr.DWT.GetWebTwain("dwtcontrolContainer")),this.dwtObject.Addon.PDF.SetConvertMode(Zr.DWT.EnumDWT_ConvertMode.CM_RENDERALL),this.dwtObject.LoadImageEx("",Zr.DWT.EnumDWT_ImageType.IT_ALL,()=>{this.updatePageInfo()},()=>{})}rotateLeft(){this.dwtObject&&this.dwtObject.HowManyImagesInBuffer>0&&this.dwtObject.RotateLeft(this.dwtObject.CurrentImageIndexInBuffer)}rotateRight(){this.dwtObject&&this.dwtObject.HowManyImagesInBuffer>0&&this.dwtObject.RotateRight(this.dwtObject.CurrentImageIndexInBuffer)}mirror(){this.dwtObject&&this.dwtObject.HowManyImagesInBuffer>0&&this.dwtObject.Mirror(this.dwtObject.CurrentImageIndexInBuffer)}flip(){this.dwtObject&&this.dwtObject.HowManyImagesInBuffer>0&&this.dwtObject.Flip(this.dwtObject.CurrentImageIndexInBuffer)}showImageEditor(){if(this.dwtObject)if(0==this.dwtObject.HowManyImagesInBuffer)alert("There is no image in buffer.");else{let t=document.getElementById("imageEditor");if(!t)return;this.isHidden?(t.textContent="Hide Editor",this.imageEditor.show(),this.isHidden=!1):(t.textContent="Show Editor",this.isHidden=!0,this.imageEditor.hide())}}firstImage(){this.dwtObject&&(this.dwtObject.Viewer.first(),this.updatePageInfo())}updatePageInfo(){this.dwtObject&&document.getElementById("DW_TotalImage")&&document.getElementById("DW_CurrentImage")&&(document.getElementById("DW_TotalImage").value=this.dwtObject.HowManyImagesInBuffer.toString(),document.getElementById("DW_CurrentImage").value=(this.dwtObject.CurrentImageIndexInBuffer+1).toString())}onBufferChanged(t){this.dwtObject&&(this.dwtObject.CurrentImageIndexInBuffer=t,this.updatePageInfo())}preImage(){this.dwtObject&&(this.dwtObject.Viewer.previous(),this.updatePageInfo())}nextImage(){this.dwtObject&&(this.dwtObject.Viewer.next(),this.updatePageInfo())}lastImage(){this.dwtObject&&(this.dwtObject.Viewer.last(),this.updatePageInfo())}setMode(){if(this.dwtObject){let o=document.getElementById("DW_PreviewMode").selectedIndex;var t=o+1;this.dwtObject.Viewer.setViewMode(t,t),this.dwtObject.Viewer.cursor=0!=o?"pointer":"crosshair"}}removeSelected(){this.dwtObject&&(this.dwtObject.RemoveAllSelectedImages(),0==this.dwtObject.HowManyImagesInBuffer?(document.getElementById("DW_CurrentImage").value="0",document.getElementById("DW_TotalImage").value="0"):this.updatePageInfo())}removeAll(){this.dwtObject&&(this.dwtObject.RemoveAllImages(),document.getElementById("DW_TotalImage").value="0",document.getElementById("DW_CurrentImage").value="0")}}return e.\u0275fac=function(t){return new(t||e)(_t(rT))},e.\u0275cmp=ba({type:e,selectors:[["app-image-editor"]],decls:45,vars:0,consts:[["id","sources"],[1,"row"],[3,"click"],["id","dwtcontrolContainer"],["id","dwtcontrolContainerLargeViewer"],[2,"width","800px"],["type","button","value"," |< ",2,"font-size","x-large",3,"click"],["type","button","value"," < ",2,"font-size","x-large",3,"click"],["type","text","size","2","id","DW_CurrentImage","readonly","readonly","value","0",2,"font-size","x-large"],["type","text","size","2","id","DW_TotalImage","readonly","readonly","value","0",2,"font-size","x-large"],["type","button","value"," > ",2,"font-size","x-large",3,"click"],["type","button","value"," >| ",2,"font-size","x-large",3,"click"],["size","1","id","DW_PreviewMode",2,"font-size","x-large",3,"change"],["value","0"],["value","1"],["value","2"],["value","3"],["value","4"],["id","imageEditor",3,"click"]],template:function(t,o){1&t&&(Xr(0,"select",0)(1,"br"),Pt(2,"div",1)(3,"button",2),_r("click",function(){return o.acquireImage()}),Yt(4,"Scan"),Rt(),Pt(5,"button",2),_r("click",function(){return o.openImage()}),Yt(6,"Load"),Rt()(),Pt(7,"div",1),Xr(8,"div",3)(9,"div",4),Rt(),Pt(10,"div",5)(11,"input",6),_r("click",function(){return o.firstImage()}),Rt(),Pt(12,"input",7),_r("click",function(){return o.preImage()}),Rt(),Xr(13,"input",8),Yt(14," / "),Xr(15,"input",9),Pt(16,"input",10),_r("click",function(){return o.nextImage()}),Rt(),Pt(17,"input",11),_r("click",function(){return o.lastImage()}),Rt(),Yt(18," Preview Mode: "),Pt(19,"select",12),_r("change",function(){return o.setMode()}),Pt(20,"option",13),Yt(21,"1X1"),Rt(),Pt(22,"option",14),Yt(23,"2X2"),Rt(),Pt(24,"option",15),Yt(25,"3X3"),Rt(),Pt(26,"option",16),Yt(27,"4X4"),Rt(),Pt(28,"option",17),Yt(29,"5X5"),Rt()()(),Pt(30,"div",1)(31,"button",2),_r("click",function(){return o.removeSelected()}),Yt(32,"Remove Selected"),Rt(),Pt(33,"button",2),_r("click",function(){return o.removeAll()}),Yt(34,"Remove All"),Rt(),Pt(35,"button",2),_r("click",function(){return o.rotateLeft()}),Yt(36,"Rotate Left"),Rt(),Pt(37,"button",2),_r("click",function(){return o.rotateRight()}),Yt(38,"Rotate Right"),Rt(),Pt(39,"button",2),_r("click",function(){return o.mirror()}),Yt(40,"Mirror"),Rt(),Pt(41,"button",2),_r("click",function(){return o.flip()}),Yt(42,"Flip"),Rt(),Pt(43,"button",18),_r("click",function(){return o.showImageEditor()}),Yt(44,"Hide Editor"),Rt()())}}),e})()},{path:"remote-scan",component:(()=>{class e{constructor(){}ngOnInit(){}}return e.\u0275fac=function(t){return new(t||e)},e.\u0275cmp=ba({type:e,selectors:[["app-remote-scan"]],decls:2,vars:0,template:function(t,o){1&t&&(Pt(0,"p"),Yt(1,"remote-scan works!"),Rt())}}),e})()}];let eZ=(()=>{class e{}return e.\u0275fac=function(t){return new(t||e)},e.\u0275mod=tc({type:e}),e.\u0275inj=ru({imports:[gO.forRoot(ZX),gO]}),e})();const tZ=function(){return["/"]};let nZ=(()=>{class e{constructor(){}ngOnInit(){}}return e.\u0275fac=function(t){return new(t||e)},e.\u0275cmp=ba({type:e,selectors:[["app-top-bar"]],decls:3,vars:2,consts:[[3,"routerLink"]],template:function(t,o){1&t&&(Pt(0,"a",0)(1,"h1"),Yt(2,"Dynamic Web TWAIN Samples"),Rt()()),2&t&&vs("routerLink",qf(1,tZ))},dependencies:[Sh]}),e})(),rZ=(()=>{class e{constructor(){this.title="angular-dynamic-web-twain"}}return e.\u0275fac=function(t){return new(t||e)},e.\u0275cmp=ba({type:e,selectors:[["app-root"]],decls:3,vars:0,consts:[[1,"container"]],template:function(t,o){1&t&&(Xr(0,"app-top-bar"),Pt(1,"div",0),Xr(2,"router-outlet"),Rt())},dependencies:[HI,nZ]}),e})();console.log("run module");let iZ=(()=>{class e{}return e.\u0275fac=function(t){return new(t||e)},e.\u0275mod=tc({type:e,bootstrap:[rZ]}),e.\u0275inj=ru({providers:[rT],imports:[eY,eZ]}),e})();(function f$(){tk=!1})(),ZQ().bootstrapModule(iZ).catch(e=>console.error(e))},501:()=>{}},ry=>{ry(ry.s=603)}]);